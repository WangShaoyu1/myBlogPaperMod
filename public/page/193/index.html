<!DOCTYPE html>
<html lang="zh" dir="auto">

<head>
	<meta name="generator" content="Hugo 0.134.1"><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>PaperMod</title>

<meta name="description" content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod">
<meta name="author" content="Theme PaperMod">
<link rel="canonical" href="http://localhost:1313/">
<meta name="google-site-verification" content="XYZabc">
<link crossorigin="anonymous" href="/assets/css/stylesheet.7b92bf4867c997b58ec50f63451b83777173d5bd5593376852abd85746d09d71.css" integrity="sha256-e5K/SGfJl7WOxQ9jRRuDd3Fz1b1VkzdoUqvYV0bQnXE=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="apple-touch-icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="mask-icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="http://localhost:1313/index.xml">
<link rel="alternate" type="application/json" href="http://localhost:1313/index.json">
<link rel="alternate" hreflang="zh" href="http://localhost:1313/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><meta property="og:title" content="PaperMod" />
<meta property="og:description" content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://localhost:1313/" />
<meta property="og:image" content="http://localhost:1313/images/papermod-cover.png" />



<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="http://localhost:1313/images/papermod-cover.png" />
<meta name="twitter:title" content="PaperMod"/>
<meta name="twitter:description" content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod"/>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "PaperMod",
  "url": "http://localhost:1313/",
  "description": "Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod",
  "thumbnailUrl": "http://localhost:1313/%3Clink%20/%20abs%20url%3E",
  "sameAs": [
      "https://github.com/adityatelange/hugo-PaperMod", "https://discord.gg/ahpmTvhVmp", "https://ko-fi.com/adityatelange"
  ]
}
</script>
</head>

<body class="list dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Home (Alt + H)">
                        
                    <img src="http://localhost:1313/images/msg_hu15231257772499651944.png" alt="" aria-label="logo"
                        height="20">Home</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://github.com/adityatelange/hugo-PaperMod/wiki/" title="WiKi">
                    <span>WiKi</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">屏端数字员工
    </h2>
  </header>
  <div class="entry-content">
    <p>资料 状态相关（prd） -正常的交互流程：
1、休眠状态有多种情况：
（1）主页，在休眠状态下，对话框中显示的是默认欢迎语；
（2）主页，在对实际环境的噪音情况还没有具体把握之前，用户与虚拟人都是单轮对话，即正常上一轮交互的TTS播报结束之后，虚拟人即进入休眠状态，此时对话框中的文字依旧保持上一轮的TTS播报文本；若用户接着再次唤醒，对话框显示唤醒回复“我在，您说”；若倒计时30s后用户没有再唤醒，对话框回到默认欢迎语（不播报）；
（3）功能页，从主页进入功能页是通过输入了某个指令，因此刚进入功能页的时候对话框中是上一轮的TTS播报，此时虚拟人进入休眠状态，对话框中一直保持上一轮的TTS文本；
（4）从功能页返回到主页，虚拟人TTS播报“好的”并进入休眠，回到主页后此时对话框直接显示默认欢迎语；
2、唤醒状态：用户通过输入唤醒词“小万小万”唤醒虚拟人——通过在H5 SDK外再套一层Android SDK的方式来实现；唤醒后小万会回复“我在，您说”，然后打开拾音；
3、聆听状态：识别用户输入内容，右上角显示“正在聆听”状态，对话框中一开始为省略号，流式识别转文字后显示ASR识别的文字，最多展示三行，超过则截断不显示后面的内容；
4、NLP处理状态：进行NLP处理，右上角显示“正在思考”状态；
5、TTS播报状态：虚拟人对话框中显示播报的文本；功能页，根据定义的语音交互区的最大高度，对话框中最多显示三行文字（即②）；当想要展示文本内容很多时，可以将部分内容放到①中，尽量保持②的精简；
-异常的交互流程：
6、【判断是否输入内容逻辑】：唤醒后，若超过5s没有拾取到用户输入的内容，这时虚拟人发起二次询问：“小万没听清，请您再说一次”（对话框中同样显示该文本），然后继续打开拾音；若超过10s仍没有拾取到内容，便自动退出语音交互，对话框中的文字恢复到本次唤醒前显示的内容；
7、【主动询问引导任务流程逻辑】：当用户通过指令从主页进入了功能页，因为需要引导用户持续走完任务流程，若用户超过30s没有继续唤醒，虚拟人便主动发起询问：“请问您还想了解什么？可以参考下方问题提示对我说”，之后便打开拾音；后续与第6点一致；当此次主动询问用户仍然没有输入内容，则继续倒计时30s，若第二次超过30s没有任何唤醒交互，则自动退出当前流程，返回主页；
8、用户直接点击屏幕上的内容，相当于直接发送对应的指令给虚拟人， 这时虚拟人会有TTS回复，但并不代表虚拟人是处于可语音交互的状态（因为并没有使用唤醒词唤醒进而聆听）；
9、【唤醒后又触屏逻辑】：若唤醒后，用户没有输入，而是触屏点击了屏幕上的内容，则虚拟人在接收到触屏发送的指令后，退出语音交互，并对触屏发送的指令进行处理和给出回复；
-其他规则：
10、当用户与虚拟人的交互涉及到界面功能区的切换（即跳转页面），只要不在主页，左上角都会有一个“返回主页”的按钮；
11、快捷提问里的内容会根据用户最近一次交互的问题进行更换，更换的内容通过关联表的方式来维护；
12、H5页面标题为当前门店的名称，通过网址域名后缀的id来区分。
疑点 1.唤醒后“我在，您说”在安卓还是h5发出
答：h5
2.任何阶段都能唤醒吗
答：识别阶段不能
状态设计 核心：监听安卓端调用函数
1.休眠 2.唤醒 3.聆听 4.NLP 5.TTS Filter table dataCreate a pivot tableCreate a chart from data series
...</p>
  </div>
  <footer class="entry-footer">1 分钟&nbsp;·&nbsp;王宇</footer>
  <a class="entry-link" aria-label="post link to 屏端数字员工" href="http://localhost:1313/posts/wiki/%E5%B1%8F%E7%AB%AF%E6%95%B0%E5%AD%97%E5%91%98%E5%B7%A5/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">自定义vite插件，打包后替换成注释内容
    </h2>
  </header>
  <div class="entry-content">
    <p>背景 希望开发的时候用的资源是mp4格式，方便调试，而打包后生产用的是m3u8，流式的体验比较好。
为什么不都统一m3u8，因为windows的chrome原生不支持打开，需要用插件，懒得装第三方兼容，于是想到在vite打包流程上处理
理想用法 代码加上 原理是暴力修改文件内容
vite.config.ts
?
const replaceJJVideo = (mode) =&gt; {
if (mode !== &#39;dev&#39;``) {
return {
async transform(src: string, file: string) {
if (file.endsWith(``&#39;.vue&#39;``)) {
...</p>
  </div>
  <footer class="entry-footer">1 分钟&nbsp;·&nbsp;王宇</footer>
  <a class="entry-link" aria-label="post link to 自定义vite插件，打包后替换成注释内容" href="http://localhost:1313/posts/wiki/%E8%87%AA%E5%AE%9A%E4%B9%89vite%E6%8F%92%E4%BB%B6%E6%89%93%E5%8C%85%E5%90%8E%E6%9B%BF%E6%8D%A2%E6%88%90%E6%B3%A8%E9%87%8A%E5%86%85%E5%AE%B9/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">数字员工（H5）
    </h2>
  </header>
  <div class="entry-content">
    <p>Filter table dataCreate a pivot tableCreate a chart from data series
Configure buttons visibility
</p>
  </div>
  <footer class="entry-footer">1 分钟&nbsp;·&nbsp;王宇</footer>
  <a class="entry-link" aria-label="post link to 数字员工（H5）" href="http://localhost:1313/posts/wiki/%E6%95%B0%E5%AD%97%E5%91%98%E5%B7%A5h5/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">屏端虚拟人功能设计
    </h2>
  </header>
  <div class="entry-content">
    <p> 11. 22. 引言 2.12.1. 背景 2.22.2. 目标 2.32.3. 相关资料 2.3.12.3.1. 接口文档 33. 总体设计 3.13.1. 运行环境 3.23.2. 技术栈选型 44. 功能设计 4.14.1. 虚拟人引入 4.1.14.1.1. 引入第三方sdk 4.1.24.1.2. 资源文件 4.1.34.1.3. 初始化虚拟人实例 4.1.44.1.4. 其他初始化 4.1.4.14.1.4.1. FTT虚拟人切换， 4.24.2. 语音识别交互 4.2.14.2.1. 辅助工具 55. 本地调试 5.15.1. 跨域 5.25.2. 调试录音接口 66. 业务功能 6.16.1. 唤醒逻辑 6.1.16.1.1. 代码流程 6.1.1.16.1.1.1. 入口定义 6.1.1.26.1.1.2. .唤醒后逻辑 6.1.1.36.1.1.3. 拾音流程，兼容外壳唤醒 6.1.26.1.2. 唤醒失效 6.1.36.1.3. 唤醒打断 6.26.2. 快捷提问 6.2.16.2.1. 1.展示形式 6.2.1.16.2.1.1. 使用技术 6.2.26.2.2. 2.交互能力 6.36.3. 功能页 6.3.16.3.1. 特殊处理 6.3.26.3.2. 商品查询 6.3.36.3.3. 消费流程 6.3.46.3.4. 品牌宣传 6.46.4. 虚拟人交互 ============================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================
...</p>
  </div>
  <footer class="entry-footer">4 分钟&nbsp;·&nbsp;王宇</footer>
  <a class="entry-link" aria-label="post link to 屏端虚拟人功能设计" href="http://localhost:1313/posts/wiki/%E5%B1%8F%E7%AB%AF%E8%99%9A%E6%8B%9F%E4%BA%BA%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">postcss
    </h2>
  </header>
  <div class="entry-content">
    <p>Filter table dataCreate a pivot tableCreate a chart from data series
Configure buttons visibility
</p>
  </div>
  <footer class="entry-footer">1 分钟&nbsp;·&nbsp;王宇</footer>
  <a class="entry-link" aria-label="post link to postcss" href="http://localhost:1313/posts/wiki/postcss/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="prev" href="http://localhost:1313/page/192/">
      «&nbsp;上一页&nbsp;192/237
    </a>
    <a class="next" href="http://localhost:1313/page/194/">下一页&nbsp;194/237&nbsp;»
    </a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
        <span><a href="https://beian.miit.gov.cn/">粤ICP备2023039897号-1</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
