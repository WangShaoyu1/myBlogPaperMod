<!DOCTYPE html>
<html lang="zh" dir="auto">

<head>
	<meta name="generator" content="Hugo 0.134.1"><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>PaperMod</title>

<meta name="description" content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod">
<meta name="author" content="Theme PaperMod">
<link rel="canonical" href="http://localhost:1313/">
<meta name="google-site-verification" content="XYZabc">
<link crossorigin="anonymous" href="/assets/css/stylesheet.7b92bf4867c997b58ec50f63451b83777173d5bd5593376852abd85746d09d71.css" integrity="sha256-e5K/SGfJl7WOxQ9jRRuDd3Fz1b1VkzdoUqvYV0bQnXE=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="apple-touch-icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="mask-icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="http://localhost:1313/index.xml">
<link rel="alternate" type="application/json" href="http://localhost:1313/index.json">
<link rel="alternate" hreflang="zh" href="http://localhost:1313/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><meta property="og:title" content="PaperMod" />
<meta property="og:description" content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://localhost:1313/" />
<meta property="og:image" content="http://localhost:1313/images/papermod-cover.png" />



<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="http://localhost:1313/images/papermod-cover.png" />
<meta name="twitter:title" content="PaperMod"/>
<meta name="twitter:description" content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod"/>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "PaperMod",
  "url": "http://localhost:1313/",
  "description": "Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod",
  "thumbnailUrl": "http://localhost:1313/%3Clink%20/%20abs%20url%3E",
  "sameAs": [
      "https://github.com/adityatelange/hugo-PaperMod", "https://discord.gg/ahpmTvhVmp", "https://ko-fi.com/adityatelange"
  ]
}
</script>
</head>

<body class="list dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Home (Alt + H)">
                        
                    <img src="http://localhost:1313/images/msg_hu15231257772499651944.png" alt="" aria-label="logo"
                        height="20">Home</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://github.com/adityatelange/hugo-PaperMod/wiki/" title="WiKi">
                    <span>WiKi</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">ã€æƒ³è¿›å¤§å‚è¿˜ä¸ä¼šé˜…è¯»æºç ã€‘ShenYuæºç -æ›¿æ¢ZooKeeperå®¢æˆ·ç«¯
    </h2>
  </header>
  <div class="entry-content">
    <p> ç›¸ä¿¡å¤§å®¶ç¢°åˆ°æºç ä¸€å¼€å§‹éƒ½æ˜¯æ¯”è¾ƒæ— ä»ä¸‹æ‰‹çš„ğŸ™ƒï¼Œä¸çŸ¥é“ä»å“ªå¼€å§‹é˜…è¯»ï¼Œé¢å¯¹å¤§é‡ä»£ç æ™•å¤´è½¬å‘ï¼Œç´¢æ€§å°±è¯»ä¸ä¸‹å»äº†ï¼Œåˆæµªè´¹äº†ä¸€æ¬¡æå‡è‡ªå·±çš„æœºä¼šğŸ˜­ã€‚
æˆ‘è®¤ä¸ºæœ‰ä¸€ç§æ–¹æ³•ï¼Œå¯ä»¥è§£å†³å¤§å®¶çš„å›°æ‰°ï¼é‚£å°±æ˜¯é€šè¿‡é˜…è¯»æŸä¸€æ¬¡å¼€æºã€commitã€‘ã€æŸä¸€æ¬¡ç¤¾åŒºã€ISSUEã€‘ï¼Œä»è¿™ä¸ªå…¥å£å‡ºå‘å»é˜…è¯»æºç ï¼ï¼
è‡³æ­¤ï¼Œæˆ‘ä»¬å‘ç°è‡ªå·±å¼€å§‹ä»å¤§é‡å †ç Œçš„æºç ä¸­è„±ç¦»å¼€æ¥ğŸ˜€ã€‚è±ç„¶å¼€æœ—ï¼ŒæŸ³æš—èŠ±æ˜åˆä¸€æ‘ğŸ€ã€‚
ShenYuæ˜¯ä¸€ä¸ªå¼‚æ­¥çš„ï¼Œé«˜æ€§èƒ½çš„ï¼Œè·¨è¯­è¨€çš„ï¼Œå“åº”å¼çš„ API ç½‘å…³ã€‚æœ‰å…³ShenYuçš„ä»‹ç»å¯ä»¥æˆ³è¿™ã€‚
ä¸€ã€å‰ç» ä»Šå¤©æˆ‘ä»¬æ¥æ”»å…‹è¿™ä¸€æ¬¡å¼€æºæäº¤ï¼šcommité“¾æ¥
æœ¬æ¬¡commitçš„æ ¸å¿ƒå†…å®¹å°±åœ¨ä¸‹å›¾çº¢æ¡†ä¸­ï¼Œæ„æ€å¾ˆæ¸…æ™°æ˜äº†ï¼šæ›¿æ¢å½“å‰çš„ZooKeeperå®¢æˆ·ç«¯ã€‚
çœ‹çœ‹Magic Headeræ˜¯ä»€ä¹ˆ
Magic Header é€šå¸¸æŒ‡çš„æ˜¯æ–‡ä»¶å¼€å¤´çš„ä¸€æ®µç‰¹å®šå­—èŠ‚åºåˆ—ï¼Œç”¨æ¥æ ‡è¯†æˆ–ç¡®è®¤æ–‡ä»¶çš„æ ¼å¼å’Œç±»å‹ã€‚è¿™äº›å­—èŠ‚åºåˆ—æ˜¯é¢„å…ˆå®šä¹‰çš„ï¼Œä¸åŒçš„æ–‡ä»¶æ ¼å¼æœ‰ä¸åŒçš„ Magic Headerã€‚æ“ä½œç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºé€šè¿‡è¯»å–è¿™äº›ç‰¹å®šçš„å­—èŠ‚åºåˆ—æ¥è¯†åˆ«æ–‡ä»¶çš„æ ¼å¼ï¼Œå³ä½¿æ–‡ä»¶æ‰©å±•åè¢«æ›´æ”¹æˆ–ä¸¢å¤±ã€‚
ç®€å•æ¥è¯´å°±æ˜¯ç”¨æ¥æ ‡è¯†æ–‡ä»¶ã€‚
æˆ‘ä»¬å…ˆæ•´ä½“çœ‹ä¸‹æœ¬æ¬¡æ‰€æœ‰æäº¤çš„å†…å®¹ï¼Œè™½ç„¶çœ‹èµ·æ¥æ¶‰åŠäº†å¤§é‡çš„æ¨¡å—ã€å¤§é‡çš„ä»£ç ï¼Œä½†æ ¸å¿ƒå…¶å®å°±æ˜¯çº¢æ¡†å¯¹åº”çš„å†…å®¹ã€‚æ—¢ç„¶æ˜¯è¦æ›¿æ¢å½“å‰çš„ZooKeeperå®¢æˆ·ç«¯ï¼Œé‚£ä¾¿æ˜¯è¦æ–°å»ºCuratorè¿™ä¸ªæ–°çš„å®¢æˆ·ç«¯ï¼ŒåŒæ—¶ä¿®æ”¹è°ƒç”¨ç«¯çš„è°ƒç”¨å¯¹è±¡ï¼
ä¸‹é¢æˆ‘ä»¬å°±æ¥çœ‹çœ‹è´¡çŒ®è€…æ˜¯æ€ä¹ˆå®ç°æ›¿æ¢çš„ï¼ï¼åŒæ—¶ä¸Šæ–‡æåˆ°å¹¶å°†æ•°æ®ä¿å­˜åœ¨æ²¡æœ‰ magic header çš„ zk ä¸­ï¼Œæ­£ç¡®ç¿»è¯‘åº”è¯¥æ˜¯ä¿å­˜æ•°æ®åœ¨zkæ—¶ï¼Œä¸ä½¿ç”¨magic headeræ¥æ ‡è¯†æ•°æ®ï¼Œé‚£ä»–åˆæ˜¯æ€ä¹ˆåšçš„ï¼Ÿï¼Ÿ
äºŒã€æ¢ç´¢ æˆ‘ä»¬å‚ç…§ä¸Šå›¾ï¼Œå…ˆçœ‹ä¸‹ZookeeperClientç±»ï¼Œè¯¥ç±»å¾ˆæ˜¾çœ¼çš„å¼•å…¥äº†æœ¬æ¬¡æäº¤çš„ä¸»è§’CuratorFrameworkï¼ŒZookeeperClientå°è£…äº†CuratorFrameworkä½œä¸ºZooKeeperæ–°çš„å®¢æˆ·ç«¯ã€‚
java
ä»£ç è§£è¯»
å¤åˆ¶ä»£ç 
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-02-22 00:00:00 +0000 UTC'>äºŒæœˆ 22, 2024</span>&nbsp;Â·&nbsp;2 åˆ†é’Ÿ&nbsp;Â·&nbsp;JavaSouthå—å“¥</footer>
  <a class="entry-link" aria-label="post link to ã€æƒ³è¿›å¤§å‚è¿˜ä¸ä¼šé˜…è¯»æºç ã€‘ShenYuæºç -æ›¿æ¢ZooKeeperå®¢æˆ·ç«¯" href="http://localhost:1313/posts/juejin/%E6%83%B3%E8%BF%9B%E5%A4%A7%E5%8E%82%E8%BF%98%E4%B8%8D%E4%BC%9A%E9%98%85%E8%AF%BB%E6%BA%90%E7%A0%81shenyu%E6%BA%90%E7%A0%81-%E6%9B%BF%E6%8D%A2zookeeper%E5%AE%A2%E6%88%B7%E7%AB%AF/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">ConcurrentHashMapæºç æ·±åº¦è§£æï¼ˆjava7ï¼‰â€”â€”åŸæ¥å¦‚æ­¤ç®€å•(å†™çš„çœŸå¥½ï¼Œå»ºè®®æ”¶è—ï¼‰
    </h2>
  </header>
  <div class="entry-content">
    <p>ä¸€ã€å‰è¨€ ConcurrentHashMapç®—æ˜¯javaåŸºç¡€ä¸­éå¸¸åŸºæœ¬çš„çŸ¥è¯†ç‚¹ï¼Œä¸ä»…åœ¨æ—¥å¸¸å¼€å‘ä¸­ç»å¸¸ç”¨åˆ°ï¼Œé¢è¯•ä¸­ä¹Ÿæ˜¯ç»ä¹…ä¸è¡°çš„è¯é¢˜ã€‚å®ƒåŸºæœ¬æ²¿ç”¨HashMapçš„æ¥å£å®šä¹‰ï¼Œä½¿å¾—å³ä½¿ä¸äº†è§£å…¶åº•å±‚åŸç†ï¼Œä¹Ÿèƒ½æ— ç¼åˆ‡æ¢ã€‚
è°ˆåˆ°ConcurrentHashMapï¼Œç»å¸¸ä¼šæ‹¿java7å’Œjava8çš„å®ç°åšå¯¹æ¯”ã€‚è™½ç„¶ç°åœ¨javaçš„ç‰ˆæœ¬æ›´æ–°å¾ˆå¿«ï¼Œä½†æ˜¯å¸¸ç”¨çš„è¿˜æ˜¯java8ï¼Œè€Œçœ‹ä¼¼java7çš„å®ç°æ–¹å¼å·²ç»è¿‡æ—¶äº†ï¼Œå¥½åƒæ²¡å¿…è¦å»äº†è§£äº†ï¼Œéä¹Ÿã€‚
ConcurrentHashMapåœ¨java7ä¸­çš„å®ç°æœ‰å¾ˆå¤šå€¼å¾—å­¦ä¹ å€Ÿé‰´çš„åœ°æ–¹ï¼Œæ¯”å¦‚åŸºæœ¬çš„æ•°æ®ç»“æ„æ•°ç»„é“¾è¡¨çš„åº”ç”¨ï¼Œå¹¶å‘å¼€å‘ï¼Œå“ˆå¸Œç®—æ³•ç­‰éƒ½å¯ä»¥å­¦ä»¥è‡´ç”¨ã€‚è€Œä¸”äº†è§£äº†java7çš„å®ç°ç»†èŠ‚ï¼Œæ‰èƒ½æ›´å¥½çš„æ˜ç™½java8ä¸­ä¸ºä»€ä¹ˆè¦åšä¸€äº›çœ‹ä¼¼è«åå…¶å¦™çš„ä¼˜åŒ–ï¼Ÿ
è½®å­å¥½ç”¨ï¼Œä½†æ˜¯é€ è½®å­æ›´å¥½ç©ã€‚
ConcurrentHashMapçš„æ•°æ®ç»“æ„æ˜¯æ€æ ·çš„ï¼Ÿ ConcurrentHashMapçš„å®¹é‡ä¸ºä»€ä¹ˆæ˜¯2çš„æ•´æ•°æ¬¡æ–¹ï¼Ÿ å¦‚ä½•å®ç°çš„å¹¶å‘å®‰å…¨ï¼Ÿæ˜¯è¯»å†™åˆ†ç¦»å—ï¼Ÿgetéœ€è¦åŠ é”å—ï¼Ÿ å“ˆå¸Œå†²çªä½“ç°åœ¨å“ªé‡Œï¼Œå¦‚ä½•è§£å†³ï¼Ÿ æ‰©å®¹æ€æƒ³æ˜¯ä»€ä¹ˆï¼Œæ€ä¹ˆæ‰©å®¹ï¼Ÿ å¸¦ç€é—®é¢˜æ¢ç´¢æºç ï¼Œæ‰èƒ½æ›´å®¹æ˜“getåˆ°ä½œè€…çš„è‰¯è‹¦ç”¨å¿ƒã€‚
äºŒã€åˆå§‹åŒ– ConcurrentHashMap åˆå§‹åŒ–å¯è‡ªå®šä¹‰ä¼ å…¥åˆå§‹å®¹é‡ã€è´Ÿè½½å› å­å’Œå¹¶å‘çº§åˆ«ï¼Œä½†å¹¶ä¸æ˜¯å•çº¯å°†å€¼èµ‹å€¼ç»™ä¸€äº›æˆå‘˜å˜é‡ï¼Œè€Œæ˜¯éœ€è¦ç»è¿‡è®¡ç®—ï¼Œæ‰¾åˆ°é€‚åˆçš„åˆå§‹å€¼ï¼š
initialCapacity åˆå§‹å®¹é‡ï¼Œç”¨äºè®¡ç®—æ¯ä¸ªSegmentä¸­HashEntryæ•°ç»„çš„åˆå§‹é•¿åº¦ã€‚ loadFactor è´Ÿè½½å› å­ï¼Œç”¨äºè®¡ç®—æ¯ä¸ªSegmentä¸­HashEntryæ•°ç»„çš„æ‰©å®¹é˜ˆå€¼ã€‚ concurrencyLevel å¹¶å‘çº§åˆ«ï¼Œç”¨äºè®¡ç®—Segmentæ•°ç»„çš„å›ºå®šé•¿åº¦ã€‚ åˆå§‹åŒ–è¿‡ç¨‹ä¸»è¦æ˜¯å¯¹Segmentæ•°ç»„å’Œå…¶å†…éƒ¨çš„HashEntryæ•°ç»„è¿›è¡Œåˆå§‹åŒ–ï¼š
ï¼ˆ1ï¼‰é€šè¿‡concurrencyLevelè®¡ç®—ssizeä½œä¸ºSegmentæ•°ç»„çš„å›ºå®šé•¿åº¦ï¼Œéœ€è¦ç¡®ä¿è®¡ç®—çš„ssizeæ˜¯å¤§äºç­‰äºconcurrencyLevelä¸”ç¦»concurrencyLevelæœ€è¿‘çš„2çš„æ•´æ•°æ¬¡æ–¹çš„æ•°å€¼ã€‚å¦‚é»˜è®¤concurrencyLevel=16ï¼Œåˆ™ssize=16ï¼›è‹¥è‡ªå®šä¹‰ä¼ å…¥concurrencyLevel=15ï¼Œåˆ™ssize=16ï¼›concurrencyLevel=17ï¼Œåˆ™ssize=32ã€‚
ï¼ˆ2ï¼‰è®¡ç®—ç”¨äºå¯¹keyçš„å“ˆå¸Œå€¼è¿›è¡Œæ˜ å°„æˆæ•°ç»„ä¸‹æ ‡çš„segmentShiftï¼ˆåç§»é‡ï¼‰å’ŒsegmentMaskï¼ˆæ©ç ï¼‰ï¼ˆint index=(hash &gt;&gt;&gt; segmentShift) &amp; segmentMaskï¼‰ï¼š
segmentShiftï¼Œkeyçš„å“ˆå¸Œå€¼å³ç§»segmentShiftä½ï¼Œæœ€é«˜sshiftä½ç”¨äºå“ˆå¸Œæ˜ å°„ã€‚ segmentMaskï¼Œssizeçš„æ©ç ï¼Œå› ä¸ºssizeä¸º2çš„æ•´æ•°æ¬¡æ–¹å€¼ï¼ŒäºŒè¿›åˆ¶ä¸º1åé¢è‹¥å¹²0ï¼Œæ©ç å°±æ˜¯ssize-1ï¼Œå¦‚2ï¼ˆ10ï¼‰æ©ç ï¼ˆ1ï¼‰ã€4ï¼ˆ100ï¼‰æ©ç 3ï¼ˆ11ï¼‰ã€8ï¼ˆ1000ï¼‰æ©ç 7ï¼ˆ111ï¼‰ã€‚ ï¼ˆ3ï¼‰é€šè¿‡initialCapacity å’Œssizeå¹³å‡è®¡ç®—æ¯ä¸ªSegmentå†…éƒ¨HashEntryæ•°ç»„çš„åˆå§‹é•¿åº¦ï¼Œä½†å¹¶ä¸æ˜¯ç®€å•çš„int c = initialCapacity / ssizeï¼Œè€Œæ˜¯åƒè®¡ç®—ssizeä¸€æ ·ï¼Œæ‰¾åˆ°ä¸€ä¸ªå¤§äºç­‰äºcä¸”ç¦»cæœ€è¿‘çš„2çš„æ•´æ•°æ¬¡æ–¹æ•°å€¼ã€‚
ï¼ˆ4ï¼‰åˆå§‹åŒ–ç¬¬ä¸€ä¸ªSegmentï¼Œå…¶ä»–Segmentç­‰æ·»åŠ å…ƒç´ æ—¶ç”¨åˆ°äº†å†åˆ›å»ºã€‚
ï¼ˆ5ï¼‰åˆå§‹åŒ–Segmentæ•°ç»„ã€‚
java
ä»£ç è§£è¯»
...</p>
  </div>
  <footer class="entry-footer"><span title='2021-03-25 00:00:00 +0000 UTC'>ä¸‰æœˆ 25, 2021</span>&nbsp;Â·&nbsp;11 åˆ†é’Ÿ&nbsp;Â·&nbsp;å¾åŒå­¦å‘€</footer>
  <a class="entry-link" aria-label="post link to ConcurrentHashMapæºç æ·±åº¦è§£æï¼ˆjava7ï¼‰â€”â€”åŸæ¥å¦‚æ­¤ç®€å•(å†™çš„çœŸå¥½ï¼Œå»ºè®®æ”¶è—ï¼‰" href="http://localhost:1313/posts/juejin/concurrenthashmap%E6%BA%90%E7%A0%81%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90java7%E5%8E%9F%E6%9D%A5%E5%A6%82%E6%AD%A4%E7%AE%80%E5%8D%95%E5%86%99%E7%9A%84%E7%9C%9F%E5%A5%BD%E5%BB%BA%E8%AE%AE%E6%94%B6%E8%97%8F/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">rxjsé‡Œé¢Cold-Observablesä¸Hot-ObservablesåŒºåˆ«
    </h2>
  </header>
  <div class="entry-content">
    <p>ç”±äºå¼‚æ­¥åœºæ™¯ååˆ†å¤æ‚ï¼Œwebç«¯è¿™è¾¹çš„è™šæ‹Ÿäººé¡¹ç›®éƒ½åœ¨ä¸å°‘çš„åœºæ™¯ç”¨ä¸Šäº†rxjs
åœ¨RxJSä¸­ï¼ŒObservablesåˆ†ä¸ºä¸¤ç§ï¼šCold Observableså’ŒHot Observablesã€‚è¿™ä¸¤ç§ç±»å‹åœ¨ä½•æ—¶å¼€å§‹æ¨é€æ•°æ®ä¸Šå­˜åœ¨æ˜¾è‘—çš„å·®å¼‚ã€‚
Cold Observablesï¼Œå¦‚å…¶åï¼Œæ˜¯å†·çš„ï¼Œå®ƒä»¬åœ¨è¢«è®¢é˜…åæ‰å¼€å§‹è¿è¡Œå’Œæ¨é€æ•°æ®ã€‚å…·ä½“æ¥è¯´ï¼Œåªæœ‰ä¸€ä¸ªè®¢é˜…è€…è®¢é˜…æ—¶ï¼ŒCold Observableæ‰ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ•°æ®ç”Ÿäº§è€…å¹¶å¼€å§‹æ¨é€æ•°æ®ã€‚æ¯ä¸ªè®¢é˜…è€…æ¥æ”¶åˆ°çš„æ•°æ®éƒ½æ˜¯ä»åºåˆ—çš„ç¬¬ä¸€ä¸ªå€¼å¼€å§‹çš„ã€‚ä¾‹å¦‚ï¼Œä¸€äº›éœ€è¦ç”¨æˆ·äº¤äº’æ‰èƒ½äº§ç”Ÿæ•°æ®çš„äº‹ä»¶ï¼Œå¦‚ç‚¹å‡»äº‹ä»¶ï¼Œå°±æ˜¯å…¸å‹çš„å†·Observableã€‚
ç›¸åï¼ŒHot Observablesåˆ™ä¼šåœ¨è¢«è®¢é˜…ä¹‹å‰å°±å¼€å§‹äº§ç”Ÿæ•°æ®ã€‚æ— è®ºæœ‰å¤šå°‘ä¸ªè®¢é˜…è€…ï¼ŒHot Observableéƒ½åªä¼šåˆ›å»ºä¸€ä¸ªæ•°æ®ç”Ÿäº§è€…ã€‚æ‰€æœ‰çš„è®¢é˜…è€…å…±äº«åŒä¸€ä¸ªæ•°æ®ç”Ÿäº§è€…ï¼Œå³å®ƒä»¬æ¥æ”¶åˆ°çš„æ•°æ®æ˜¯ä¸€æ ·çš„ã€‚æœ€å¸¸è§çš„Hot Observableä¾‹å­å°±æ˜¯é¼ æ ‡ç§»åŠ¨äº‹ä»¶ï¼Œå› ä¸ºæ— è®ºæ˜¯å¦æœ‰è®¢é˜…è€…ï¼Œé¼ æ ‡ç§»åŠ¨äº‹ä»¶éƒ½ä¼šæŒç»­äº§ç”Ÿã€‚
Hot Observables Hot Observables ä¸ç®¡æœ‰æ²¡æœ‰è¢«è®¢é˜…éƒ½ä¼šäº§ç”Ÿå€¼ã€‚æ˜¯å¤šæ’­çš„ï¼Œå¤šä¸ªè®¢é˜…å…±äº«åŒä¸€ä¸ªå®ä¾‹ï¼Œæ˜¯ä»è®¢é˜…å¼€å§‹æ¥å—åˆ°å€¼ï¼Œæ¯ä¸ªè®¢é˜…æ¥æ”¶åˆ°çš„å€¼æ˜¯ä¸åŒçš„ï¼Œå–å†³äºå®ƒä»¬æ˜¯ä»ä»€ä¹ˆæ—¶å€™å¼€å§‹è®¢é˜…ã€‚
è¿™é‡Œæœ‰å‡ ç§åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥é€ä¸€åˆ†æä¸€ä¸‹ä¾¿äºç†è§£ï¼š
â€œåŠ çƒ­â€ é¦–å…ˆå¯ä»¥å¿½ç•¥ä»£ç ä¸­å‡ºç°çš„é™Œç”Ÿçš„å‡½æ•°ï¼Œåé¢ä¼šç»†è¯´ã€‚
?
const source = Rx.Observable.of(``1``, 2``).publish();
source.connect();
source.subscribe((value) =&gt; console.log(``&#39;Aï¼š&#39; &#43; value));
setTimeout(() =&gt; {
source.subscribe((value) =&gt; console.log(``&#39;Bï¼š&#39; &#43; value));
}, 1000``);
è¿™é‡Œé¦–å…ˆç”¨Rxçš„æ“ä½œç¬¦ofåˆ›å»ºäº†ä¸€ä¸ªObservableï¼Œå¹¶ä¸”åé¢è·Ÿä¸Šäº†ä¸€ä¸ªpublishå‡½æ•°ï¼Œåœ¨åˆ›å»ºå®Œä¹‹åè°ƒç”¨connectå‡½æ•°è¿›è¡Œå¼€å§‹æ•°æ®å‘é€ã€‚
æœ€ç»ˆä»£ç çš„æ‰§è¡Œç»“æœå°±æ˜¯æ²¡æœ‰ä»»ä½•æ•°æ®æ‰“å°å‡ºæ¥ï¼Œåˆ†æä¸€ä¸‹åŸå› å…¶å®ä¹Ÿæ¯”è¾ƒå¥½ç†è§£ï¼Œç”±äºå¼€å¯æ•°æ®å‘é€çš„æ—¶å€™è¿˜æ²¡æœ‰è®¢é˜…ï¼Œå¹¶ä¸”è¿™æ˜¯ä¸€ä¸ªHot Observablesï¼Œå®ƒæ˜¯ä¸ä¼šç†ä¼šä½ æ˜¯å¦æœ‰æ²¡æœ‰è®¢é˜…å®ƒï¼Œå¼€å¯ä¹‹åå°±ä¼šç›´æ¥å‘é€æ•°æ®ï¼Œæ‰€ä»¥Aå’ŒBéƒ½æ²¡æœ‰æ¥æ”¶åˆ°æ•°æ®ã€‚
å½“ç„¶ä½ è¿™é‡Œå¦‚æœæŠŠconnectæ–¹æ³•æ”¾åˆ°æœ€åï¼Œé‚£ä¹ˆæœ€ç»ˆçš„ç»“æœå°±æ˜¯Aæ¥æ”¶åˆ°äº†ï¼ŒBè¿˜æ˜¯æ¥ä¸åˆ°ï¼Œå› ä¸ºAåœ¨å¼€å¯å‘æ•°æ®ä¹‹å‰å°±è®¢é˜…äº†ï¼Œè€ŒBè¿˜è¦ç­‰ä¸€ç§’ã€‚
æ›´ç›´è§‚çš„åœºæ™¯ æ­£å¦‚ä¸Šè¿°å¤šæ’­æ‰€æè¿°çš„ï¼Œå…¶å®æˆ‘ä»¬æ›´å¤šæƒ³çœ‹åˆ°çš„ç°è±¡æ˜¯èƒ½å¤ŸAå’ŒBä¸¤ä¸ªè§‚å¯Ÿè€…èƒ½å¤Ÿéƒ½æœ‰æ¥æ”¶åˆ°æ•°æ®ï¼Œç„¶åè§‚å¯Ÿæ•°æ®çš„å·®åˆ«ï¼Œè¿™æ ·ä¼šæ–¹ä¾¿ç†è§£ã€‚
...</p>
  </div>
  <footer class="entry-footer">1 åˆ†é’Ÿ&nbsp;Â·&nbsp;ç‹å®‡</footer>
  <a class="entry-link" aria-label="post link to rxjsé‡Œé¢Cold-Observablesä¸Hot-ObservablesåŒºåˆ«" href="http://localhost:1313/posts/wiki/rxjs%E9%87%8C%E9%9D%A2cold-observables%E4%B8%8Ehot-observables%E5%8C%BA%E5%88%AB/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">gitå¿…çœ‹æŠ€å·§ï¼šä¸€è¡Œä»£ç æ¢å¤è¢«åŒäº‹è¯¯åˆ ï¼ˆè¦†ç›–ï¼‰çš„ä»£ç 
    </h2>
  </header>
  <div class="entry-content">
    <p>ä»£ç æäº¤å¸¸é‡åˆ°çš„é—®é¢˜ åœ¨ä¼ä¸šé¡¹ç›®å¼€å‘ä¸­ï¼Œgitæ˜¯æˆ‘ä»¬æ¯ä¸ªç¨‹åºå‘˜æäº¤ä»£ç å¿…ç”¨çš„å·¥å…·ã€‚åœ¨å¤šäººå¼€å‘åŒä¸€ä¸ªé¡¹ç›®ä¸­çš„æ—¶å€™ï¼Œæ€»ä¼šå‡ºç°å¾ˆå¤šä»£ç æäº¤é—®é¢˜ï¼Œä¸€ä¸ªå¸¸è§çš„é—®é¢˜å°±æ˜¯ï¼šæˆ‘åˆšæäº¤äº†ä»£ç ï¼Œç»“æœå¦ä¸€ä¸ªï¼ˆæ··è›‹ï¼‰åŒäº‹ä¸å°å¿ƒè¦†ç›–æ‰äº†æˆ‘çš„ä»£ç è¿›è¡Œäº†æäº¤ï¼Œå¯¼è‡´æˆ‘çš„ä»£ç çªç„¶ä¸¢å¤±â€¦â€¦
æ¯”å¦‚å‰å‡ å¤©ï¼Œæˆ‘è¾›è¾›è‹¦è‹¦çš„åšäº†ä¸€ä¸ªåŠŸèƒ½ï¼Œæˆ‘æäº¤äº†ä»£ç ã€featï¼šä¼˜åŒ–hoverå¡ç‰‡ã€‘
ç»“æœBåŒäº‹åœ¨å¼€å‘æ—¶ï¼Œæ²¡æœ‰æ‹‰å–æœ€æ–°ä»£ç ï¼Œè§£å†³å†²çªæ—¶ä¹Ÿå¿½ç•¥äº†æˆ‘çš„ä»£ç å°±æäº¤äº†ï¼Œç»“æœå¯¼è‡´äº‘ç«¯ä¸¢å¤±äº†æˆ‘çš„ä»£ç ã€‚æ›´æƒ¨çš„æ˜¯æˆ‘æ‹‰å–äº†ä»£ç ï¼Œå¯¼è‡´æˆ‘æœ¬åœ°ä¿®æ”¹çš„ä¹Ÿæ²¡äº†â€¦â€¦åŒäº‹185ï¼Œ170çš„ä½“é‡ï¼Œä½“é‡ä¸è¶³110çš„æˆ‘æ”¾å¼ƒäº†æŒ£æ‰ã€‚
è¿˜å¥½ï¼Œæˆ‘å‘ç°äº†gitä¸€ä¸ªç‰›é€¼çš„åŠŸèƒ½ï¼šä»£ç é´é€‰ã€‚
ä»£ç é´é€‰ ä»€ä¹ˆæ˜¯ä»£ç é´é€‰ ä»£ç é´é€‰ï¼Œå®é™…æŒ‡çš„æ˜¯ï¼šgit cherry-pick
â€œgit cherry-pickâ€ æ˜¯ Git æä¾›çš„ä¸€ä¸ªå‘½ä»¤ï¼Œç”¨äºä»ä¸€ä¸ªåˆ†æ”¯ä¸­é€‰æ‹©å•ä¸ªæäº¤ï¼ˆæˆ–å¤šä¸ªæäº¤ï¼‰ï¼Œå¹¶å°†å®ƒä»¬åº”ç”¨åˆ°å½“å‰åˆ†æ”¯ä¸­ã€‚
é€šä¿—æ˜“æ‡‚çš„æ¥è¯´ï¼Œå°±æ˜¯å°†gitæäº¤å†å²çš„æŸä¸ªæäº¤ï¼Œç›´æ¥å¤åˆ¶åœ¨å½“å‰åˆ†æ”¯ä¸Šï¼
æˆ‘ä»¬çœ‹ä¸‹ä»£ç æ‰§è¡Œç»“æœå°±æ˜ç™½äº†ï¼š
çœ‹æ¥ï¼Œå­¦ä¼šä»£ç é´é€‰ï¼Œåœ¨ä¹Ÿä¸æ€•åŒäº‹è¯¯åˆ ä»£ç äº†ï¼
git cherry-pickè¯­æ³• é¦–å…ˆï¼Œæˆ‘ä»¬çœ‹çœ‹git cherry-pickçš„è¯­æ³•
python
ä»£ç è§£è¯»
å¤åˆ¶ä»£ç 
git cherry-pick &lt;commit-hash&gt;
è¿™ä¼šå°†æŒ‡å®šçš„æäº¤åº”ç”¨åˆ°å½“å‰åˆ†æ”¯ä¸­ã€‚
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-04-21 00:00:00 +0000 UTC'>å››æœˆ 21, 2024</span>&nbsp;Â·&nbsp;1 åˆ†é’Ÿ&nbsp;Â·&nbsp;çŸ³å°çŸ³Orz</footer>
  <a class="entry-link" aria-label="post link to gitå¿…çœ‹æŠ€å·§ï¼šä¸€è¡Œä»£ç æ¢å¤è¢«åŒäº‹è¯¯åˆ ï¼ˆè¦†ç›–ï¼‰çš„ä»£ç " href="http://localhost:1313/posts/juejin/git%E5%BF%85%E7%9C%8B%E6%8A%80%E5%B7%A7%E4%B8%80%E8%A1%8C%E4%BB%A3%E7%A0%81%E6%81%A2%E5%A4%8D%E8%A2%AB%E5%90%8C%E4%BA%8B%E8%AF%AF%E5%88%A0%E8%A6%86%E7%9B%96%E7%9A%84%E4%BB%A3%E7%A0%81/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">æœåŠ¡ç«¯æ¸²æŸ“ä¸åŒè™šæ‹Ÿäººæ—¶tokenç¼“å­˜æ–¹æ¡ˆ
    </h2>
  </header>
  <div class="entry-content">
    <p>å…ˆåæ§½ä¸€ä¸‹ï¼Œä»¥ä¸ºæ˜¯åŒtokenæœºåˆ¶ï¼Œæœäº†ä¸‹sdkä»£ç ï¼Œåªç”¨äº†accessTokenï¼Œè€Œä¸”æ—¶é•¿ä¹Ÿè¾¾åˆ°10å‡ å¤©â€¦
ã€Tokenã€‘ï¼šaccessTime
openid: 001
openid: 002
Module: AvatarListAvatar1: a0001Avatar2: a0002Avatar3: a0003â€¦â€¦Instance
001 &#43;Â a001
001 &#43;Â a002
002 &#43;Â a001
â€¦
Database
//&lt;![CDATA[ (function() { $ = AJS.$; var graphContainer = document.getElementById(â€˜drawio-macro-content-a79490a5-0e8a-43d2-b3e4-7af51ee31655â€™); DrawioProperties = { contextPath : AJS.contextPath(), buildNumber : 8401 }; var readerOpts = {}; readerOpts.loadUrl = â€™â€™ &#43; â€˜/rest/drawio/1.0/diagram/crud/%E6%9C%AA%E5%91%BD%E5%90%8D%E7%BB%98%E5%9B%BE/134055634?revision=1â€™; readerOpts.imageUrl = â€™â€™ &#43; â€˜/download/attachments/134055634/æœªå‘½åç»˜å›¾.pngâ€™ &#43; â€˜?version=1&amp;api=v2â€™; readerOpts.editUrl = â€™â€™ &#43; â€˜/plugins/drawio/addDiagram.action?ceoId=134055634&amp;owningPageId=134055634&amp;diagramName=%E6%9C%AA%E5%91%BD%E5%90%8D%E7%BB%98%E5%9B%BE&amp;revision=1â€™; readerOpts.editable = true; readerOpts.canComment = true; readerOpts.stylePath = STYLE_PATH; readerOpts.stencilPath = STENCIL_PATH; readerOpts.imagePath = IMAGE_PATH &#43; â€˜/readerâ€™; readerOpts.border = true; readerOpts.width = â€˜600â€™; readerOpts.simpleViewer = false; readerOpts.tbstyle = â€™topâ€™; readerOpts.links = â€˜autoâ€™; readerOpts.lightbox = true; readerOpts.resourcePath = ATLAS_RESOURCE_BASE &#43; â€˜/resources/viewerâ€™; readerOpts.disableButtons = false; readerOpts.zoomToFit = true; readerOpts.language = â€˜zhâ€™; readerOpts.licenseStatus = â€˜OKâ€™; readerOpts.contextPath = AJS.contextPath(); readerOpts.diagramName = decodeURIComponent(â€™%E6%9C%AA%E5%91%BD%E5%90%8D%E7%BB%98%E5%9B%BEâ€™); readerOpts.diagramDisplayName = â€˜â€™; readerOpts.aspect = â€˜â€™; readerOpts.ceoName = â€˜æœåŠ¡ç«¯æ¸²æŸ“ä¸åŒè™šæ‹Ÿäººæ—¶tokenç¼“å­˜æ–¹æ¡ˆâ€™; readerOpts.attVer = â€˜1â€™; readerOpts.attId = â€˜134066293â€™; readerOpts.lastModifierName = â€˜å´å®¶æ°â€™; readerOpts.lastModified = â€˜2024-10-08 09:40:56.213â€™; readerOpts.creatorName = â€˜å´å®¶æ°â€™; //Embed macro specific info readerOpts.extSrvIntegType = â€˜$extSrvIntegTypeâ€™; readerOpts.gClientId = â€˜$gClientIdâ€™; readerOpts.oClientId = â€˜$oClientIdâ€™; readerOpts.service = â€˜$serviceâ€™; readerOpts.sFileId = â€˜$sFileIdâ€™; readerOpts.odriveId = â€˜$odriveIdâ€™; readerOpts.diagramUrl = â€˜$diagramUrlâ€™; readerOpts.csvFileUrl = â€˜$csvFileUrlâ€™; readerOpts.pageId = â€˜$pageIdâ€™ || Confluence.getContentId(); readerOpts.aspectHash = â€˜$aspectHashâ€™; readerOpts.useExternalImageService = â€˜$useExternalImageServiceâ€™ == â€™trueâ€™; readerOpts.isTemplate = â€˜$isTemplateâ€™ == â€™trueâ€™; if (readerOpts.width == â€˜â€™) { readerOpts.width = null; } // LATER: Check if delayed loading of resources can be used for image placeholder mode var viewerPromise = createViewer(graphContainer, readerOpts); if(readerOpts.editable) { $(graphContainer).data(â€˜viewerConfigâ€™, readerOpts); $(graphContainer).on(â€˜drawioViewerUpdateâ€™, updateDrawioViewer); } viewerPromise.done(function(viewer) { updateCachedDiagram(graphContainer, readerOpts, viewer); }); })(); //]]&gt;
...</p>
  </div>
  <footer class="entry-footer">2 åˆ†é’Ÿ&nbsp;Â·&nbsp;ç‹å®‡</footer>
  <a class="entry-link" aria-label="post link to æœåŠ¡ç«¯æ¸²æŸ“ä¸åŒè™šæ‹Ÿäººæ—¶tokenç¼“å­˜æ–¹æ¡ˆ" href="http://localhost:1313/posts/wiki/%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%B8%B2%E6%9F%93%E4%B8%8D%E5%90%8C%E8%99%9A%E6%8B%9F%E4%BA%BA%E6%97%B6token%E7%BC%93%E5%AD%98%E6%96%B9%E6%A1%88/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="prev" href="http://localhost:1313/page/285/">
      Â«&nbsp;ä¸Šä¸€é¡µ&nbsp;285/415
    </a>
    <a class="next" href="http://localhost:1313/page/287/">ä¸‹ä¸€é¡µ&nbsp;287/415&nbsp;Â»
    </a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
        <span><a href="https://beian.miit.gov.cn/">ç²¤ICPå¤‡2023039897å·-1</a></span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
