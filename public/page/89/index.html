<!DOCTYPE html>
<html lang="zh" dir="auto">

<head>
	<meta name="generator" content="Hugo 0.134.1"><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>PaperMod</title>

<meta name="description" content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod">
<meta name="author" content="Theme PaperMod">
<link rel="canonical" href="http://localhost:1313/">
<meta name="google-site-verification" content="XYZabc">
<link crossorigin="anonymous" href="/assets/css/stylesheet.7b92bf4867c997b58ec50f63451b83777173d5bd5593376852abd85746d09d71.css" integrity="sha256-e5K/SGfJl7WOxQ9jRRuDd3Fz1b1VkzdoUqvYV0bQnXE=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="apple-touch-icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="mask-icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="http://localhost:1313/index.xml">
<link rel="alternate" type="application/json" href="http://localhost:1313/index.json">
<link rel="alternate" hreflang="zh" href="http://localhost:1313/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><meta property="og:title" content="PaperMod" />
<meta property="og:description" content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://localhost:1313/" />
<meta property="og:image" content="http://localhost:1313/images/papermod-cover.png" />



<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="http://localhost:1313/images/papermod-cover.png" />
<meta name="twitter:title" content="PaperMod"/>
<meta name="twitter:description" content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod"/>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "PaperMod",
  "url": "http://localhost:1313/",
  "description": "Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod",
  "thumbnailUrl": "http://localhost:1313/%3Clink%20/%20abs%20url%3E",
  "sameAs": [
      "https://github.com/adityatelange/hugo-PaperMod", "https://discord.gg/ahpmTvhVmp", "https://ko-fi.com/adityatelange"
  ]
}
</script>
</head>

<body class="list dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Home (Alt + H)">
                        
                    <img src="http://localhost:1313/images/msg_hu15231257772499651944.png" alt="" aria-label="logo"
                        height="20">Home</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://github.com/adityatelange/hugo-PaperMod/wiki/" title="WiKi">
                    <span>WiKi</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">2天完成17TB数据量迁移，华为云数据库是如何做的？
    </h2>
  </header>
  <div class="entry-content">
    <p> 摘要：童年时候，我们会对着墙上挂着的中国地图，来认识一处处山川河流和城市人文。如今，数字化时代下，传统的地图已经不能满足人们的需求，如何获取各种丰富的地理内容和实时动态信息成为现代人普遍的地理信息诉求。作为国家基础地理信息公共服务平台，天地图集成了来自国家、省、市（县）各级测绘地理信息部门，以及相关政府部门、企事业单位 、社会团体、公众的地理信息公共服务资源，以门户网站、服务接口、前置服务等形式向政府、专业部门、企业、公众等用户提供在线地理信息服务。此前，国家基础地理信息中心携手华为云，基于天地图平台，共同打造云上智慧地图，促进地理信息资源共享和高效利用，让世界触手可及。
地理数据量增加，数据库弹性迎挑战 天地图覆盖全国300多个地级以及地级以上城市0.6米分辨率的卫星遥感影像等地理信息数据，全库数据量达到17TB，数据吞吐量巨大。巨大的吞吐量和高额运维成本，促使国家基础地理信息中心迫切寻求低成本、高可用、高性能、大容量的数据库产品，同时希望可以将迁移时间压缩到2天左右。
低成本：早期天地图运营投入较多资金，包括数据库在内的IT投入成本居高不下。业务有读写分离诉求，希望在保证性能的前提下，通过一套实例实现读写分离，从而降低数据库成本。 高可用：社区版MongoDB一个shard多数节点故障，就会导致该shard成为只读，因此希望提供无状态的路由节点，实现快速故障转移。 高性能：天地图每天的访问量在6亿左右，随着数据量和业务访问量的增加，现有系统不足以支撑日益增长的业务需求，需要更高性能的数据库来支撑日益增长的业务数据。 容量：随着瓦片层级增加，数据量越来越大，现有MongoDB扩容难度大，需要一款数据库支持不少于20TB的瓦片数据，支持在线扩容。 运维效率：运维人力有限，系统运维压力越来越大，运维工作成本越来越高，现有社区版MongoDB难以支撑运维工作需求。希望能够提供数据库自运维能力，能为数据库做技术兜底，降低运维成本。 天地图&amp;华为云 彰显云上“数字中国”新魅力 天地图业务数据复杂，数据种类多样，结合客户诉求和业务特点，华为云数据库采用公有云对外服务为主，私有云对内测试为辅的混合云架构，提供多种数据库引擎方案，联合打造高性能、高可用的数字底座。
华为云GaussDB(for Mongo)提供在线地图的瓦片数据处理服务；华为云RDS for PostgreSQL提供矢量数据和三维数据处理服务；华为云RDS for MySQL提供用户管理和专题图层属性服务，多款数据库极速融合，共同发力，17TB的海量数据迁移仅仅用了2天。
高可用特性加持，业务稳定运行 天地图作为国家级的服务平台，数据的安全可靠可谓至关重要。华为云GaussDB(for Mongo)支持跨AZ高可用，拥有完善的跨区域容灾策略，每天自动进行全量备份和增量备份，并定期进行恢复演练，验证备份恢复流程的有效性，实现分钟级备份恢复。同时提供无状态的路由节点，支持秒级故障转移，客户业务无感知，业务运行稳定。
超高性能与大容量，再大流量也不怕 天地图为30&#43;部委机构和全国30多个省市提供地理信息基础平台服务，日均API和服务调用超过6亿次，访问压力极大。华为云GaussDB(for Mongo) 可实现分钟级节点扩容和秒级存储扩容，满足敏捷业务弹性需要，对天地图高达上亿的访问毫无压力，响应能力快稳准，有效保障了天地图在高负载情景下业务的正常运行。而且GaussDB(for Mongo)基于存算分离架构和rocksdb优化，相比开源MongDB性能提高3倍以上，最大支持96TB的数据处理能力，完全满足天地图海量业务请求。
降本增效不止一点点 GaussDB(for Mongo)完全兼容MongoDB协议，客户业务无需任何改造，即可轻松切换数据库，极大减少了改造成本；而且通过实时生成快照和删除快照的能力，GaussDB(for Mongo)实现一套集群即可提供读写分离的能力，数据库成本节省至少50%。天地图上华为云之后，基于数据库服务自动化运维平台，数据更新效率提升5倍，新业务上线速度提高2倍，还减轻了DBA繁重的运维压力，让客户更聚焦业务层面。
自2019年2月上线以来，华为云数据库已轻松支撑天地图6亿&#43;的日均访问量，保障业务平稳运行，实现零事故；同时为公众提供了更为全面、精准、权威、 智能、人性化的地理信息服务，让全社会共享测绘发展成果，感受“数字中国”的独特魅力。
点击关注，第一时间了解华为云新鲜技术~
...</p>
  </div>
  <footer class="entry-footer"><span title='2021-02-03 00:00:00 +0000 UTC'>二月 3, 2021</span>&nbsp;·&nbsp;1 分钟&nbsp;·&nbsp;华为云开发者联盟</footer>
  <a class="entry-link" aria-label="post link to 2天完成17TB数据量迁移，华为云数据库是如何做的？" href="http://localhost:1313/posts/juejin/2%E5%A4%A9%E5%AE%8C%E6%88%9017tb%E6%95%B0%E6%8D%AE%E9%87%8F%E8%BF%81%E7%A7%BB%E5%8D%8E%E4%B8%BA%E4%BA%91%E6%95%B0%E6%8D%AE%E5%BA%93%E6%98%AF%E5%A6%82%E4%BD%95%E5%81%9A%E7%9A%84/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">大屏可视化落地
    </h2>
  </header>
  <div class="entry-content">
    <p>水一篇水一篇 公司的大佬同事们，不好意思，这一期我又要水一篇了，最近实在是没时间排出来写这个，虽然想写点我司呼声比较高的微前端技术分享、私有化组件库（storybook）落地技术分享这些，但是近期休息时间紧张那就讲下大屏可视化的一些方案吧，那些下一次一定（等娃大点的）！
前因 我司某项目被乙方爸爸调戏讽刺，尽量多做些动画效果，没有动画效果是你们系统界面的通病！要多想想你们做的可是大屏呀，难道你们从来没做过大屏？整个页面都这么一个色调，五彩斑斓知不知道，这么low！
纳尼？ 他想要五彩斑斓的黑？ 我听到这话，咋办？
五彩斑斓 五彩斑斓的效果这里，我有几种不同的想法。这里我们先通过线性渐变实现其中一种。
翻一下线性渐变linear-gradient的文档，很容易掌握它的用法。
先简单配一下参数
css
代码解读
复制代码
:root { background-image: linear-gradient(45deg, aqua, blue, purple, red, orange, yellow, green); } 复制代码
...</p>
  </div>
  <footer class="entry-footer"><span title='2022-10-28 00:00:00 +0000 UTC'>十月 28, 2022</span>&nbsp;·&nbsp;9 分钟&nbsp;·&nbsp;初心酱</footer>
  <a class="entry-link" aria-label="post link to 大屏可视化落地" href="http://localhost:1313/posts/juejin/%E5%A4%A7%E5%B1%8F%E5%8F%AF%E8%A7%86%E5%8C%96%E8%90%BD%E5%9C%B0/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">JavaScript中如何拦截全局FetchAPI的请求和响应？
    </h2>
  </header>
  <div class="entry-content">
    <p>本文翻译自 Intercepting JavaScript Fetch API requests and responses
拦截器是可用于预处理或后处理 HTTP 请求的代码块，有助于全局错误处理、身份验证、日志记录等。在本文中，你将学习如何拦截 JavaScript Fetch API 请求。
拦截 HTTP 请求一般有两种事件：请求和响应事件。请求拦截器应该在发送实际 HTTP 请求之前执行，而响应拦截器应该在到达发出请求的应用程序代码之前执行。
在深入研究代码之前，我们需要了解一些重要的事情。首先，Fetch API 本身不支持拦截器。其次，在 Node.js 中使用 Fetch API 需要额外的包。
JavaScript Fetch API 首先，让我们介绍一些 Fetch API 的基础，例如语法:
js
代码解读
复制代码
const fetchResponsePromise = fetch(resource [, init])
resource 定义要获取的资源，该资源可以是 Request 对象，也可以是 URL。init 是一个可选对象，它将包含你想应用于此特定请求的任何自定义配置。
Fetch API 是基于 Promise 的。因此，当你调用 Fetch 方法时，你将得到一个 Promise 响应。在这里，它被称为 fetchResponsePromise，如上面的示例所示。
...</p>
  </div>
  <footer class="entry-footer"><span title='2022-11-17 00:00:00 +0000 UTC'>十一月 17, 2022</span>&nbsp;·&nbsp;3 分钟&nbsp;·&nbsp;我不吃饼干</footer>
  <a class="entry-link" aria-label="post link to JavaScript中如何拦截全局FetchAPI的请求和响应？" href="http://localhost:1313/posts/juejin/javascript%E4%B8%AD%E5%A6%82%E4%BD%95%E6%8B%A6%E6%88%AA%E5%85%A8%E5%B1%80fetchapi%E7%9A%84%E8%AF%B7%E6%B1%82%E5%92%8C%E5%93%8D%E5%BA%94/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">用Optional后代码变清爽多了
    </h2>
  </header>
  <div class="entry-content">
    <p>前言 编程路上风雨兼程，踩过的坑比喝过的奶茶还要多几分回味。今天，咱们深入浅出，探讨一个既平凡又深奥的操作——判空艺术，特别是那经典桥段 != null。在与臭名昭著的 NullPointerException（简称NPE，程序界的“空指针噩梦”）的持久战中，这招几乎是程序员的护身法宝。
想当年，我还是编程界的新兵蛋子，对 null 敏感得像雷达，逢 null 必严谨判空，if (某物 != null)简直是开场白一般的存在。但随着时间的发酵，经验值蹭蹭上涨，我渐渐悟出：这频繁的判空虽是保险，却也像给代码穿上了一层又一层的秋衣，臃肿不说，还常常捂出些难以捉摸的Bug来。
试想，代码里布满了迷宫般的 if-else 判空逻辑，别说一眼找出Bug，就算你瞪大眼睛外加放大镜，也得绕晕在那“是空非空”的哲学迷雾中。更别提，过度判空让程序员们变得草木皆兵，每行代码都藏着一颗“我到底有没有判空？”的忐忑心。这时候，修复Bug就像拆盲盒，刺激中带着一丝无奈：“我当初为啥要判这个空来着？”😢
好在，Java 8 带来了救星——Optional，它简直就是判空界的清流，优雅地解决了我们的问题。使用 Optional，你可以把可能为 null 的对象包裹起来，通过一系列简洁的方法调用来避免直接触碰那令人头疼的 null，从而让代码更加清晰、安全，仿佛给代码做了一场瑜伽，柔韧且有力。
所以，与其在判空的泥潭里越陷越深，不如拥抱 Optional，让我们的代码轻盈起舞，远离 “空指针”的阴霾，迈向更加优雅和健壮的编程新境界。🌟
用 Optional 来拯救你的代码 Java 8 给我们带来了个神器——Optional。 简单来说，它就是个包装类，用来装那些可能为 null 的对象。用了 Optional，你就不用再到处写 != null 来判空了。举个例子，咱们看个传统的写法：
java
代码解读
复制代码
User user = getUserFromSomewhere(); if (user!= null) { Address address = user.getAddress(); if (address!= null) { String city = address.getCity(); if (city!= null) { System.out.println(city); } else { System.out.println(&#34;City not found.&#34;); } } else { System.out.println(&#34;Address not found.&#34;); } } else { System.out.println(&#34;User not found.&#34;); }
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-09-07 00:00:00 +0000 UTC'>九月 7, 2024</span>&nbsp;·&nbsp;3 分钟&nbsp;·&nbsp;狼爷</footer>
  <a class="entry-link" aria-label="post link to 用Optional后代码变清爽多了" href="http://localhost:1313/posts/juejin/%E7%94%A8optional%E5%90%8E%E4%BB%A3%E7%A0%81%E5%8F%98%E6%B8%85%E7%88%BD%E5%A4%9A%E4%BA%86/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">用ngrok实现内网穿透，一行命令就搞定！
    </h2>
  </header>
  <div class="entry-content">
    <p>最近在写支付的东西，调试时候需要让支付平台能够回调本地接口来更新支付成功的状态。但由于开发机器没有公网IP，所以需要使用内网穿透来让支付平台能够成功访问到本地开发机器，这样才能更高效率的进行调试。
推荐内网穿透的文章已经很多很多，还有很多大合集的推荐，但也因为推荐的太多，也会让人眼花缭乱，不断尝试不断受挫。有的接受不了收费、有的配置繁琐，有的运行不稳定，还有的有病毒。
这里不做过多推荐，只推荐一个个人认为最好用的，那就是：ngrok 。只需要一行命令就能帮你轻松实现内网穿透！
下面你可以跟着我的操作来完成第一次使用：
注册登录账号 从官网（ngrok.com/）右上角 Sign Up 进入，完成用户注册。如果您跟我一样是开发者的话，直接GitHub授权登录，快得很！
完成注册并登录之后，可以看到Dashboard中就给出了使用的三个步骤：
是不是超级简洁？接下来就来一起完成这三步！
安装Ngrok 进入官网的下载页面：ngrok.com/download
官方清晰地给出了各个系统的安装方法：
个人推荐直接下载ZIP包，然后直接解压，这种方式最为迅速！
配置账户 直接复制Dashboard中第二步的ngrok config add-authtoken xxxxx命令，然后打开终端，定位到之前解压ngrok的位置执行它！
终端会输出为你保存的配置路径：
bash
代码解读
复制代码
Authtoken saved to configuration file: /Users/zhaiyongchao/Library/Application Support/ngrok/ngrok.yml
...</p>
  </div>
  <footer class="entry-footer"><span title='2023-08-14 00:00:00 +0000 UTC'>八月 14, 2023</span>&nbsp;·&nbsp;1 分钟&nbsp;·&nbsp;程序猿DD</footer>
  <a class="entry-link" aria-label="post link to 用ngrok实现内网穿透，一行命令就搞定！" href="http://localhost:1313/posts/juejin/%E7%94%A8ngrok%E5%AE%9E%E7%8E%B0%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%E4%B8%80%E8%A1%8C%E5%91%BD%E4%BB%A4%E5%B0%B1%E6%90%9E%E5%AE%9A/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="prev" href="http://localhost:1313/page/88/">
      «&nbsp;上一页&nbsp;88/153
    </a>
    <a class="next" href="http://localhost:1313/page/90/">下一页&nbsp;90/153&nbsp;»
    </a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
        <span><a href="https://beian.miit.gov.cn/">粤ICP备2023039897号-1</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
