<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>后端 | PaperMod</title>
<meta name="keywords" content="">
<meta name="description" content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod">
<meta name="author" content="Theme PaperMod">
<link rel="canonical" href="http://localhost:1313/tags/%E5%90%8E%E7%AB%AF/">
<meta name="google-site-verification" content="XYZabc">
<link crossorigin="anonymous" href="/assets/css/stylesheet.7b92bf4867c997b58ec50f63451b83777173d5bd5593376852abd85746d09d71.css" integrity="sha256-e5K/SGfJl7WOxQ9jRRuDd3Fz1b1VkzdoUqvYV0bQnXE=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="apple-touch-icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="mask-icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="http://localhost:1313/tags/%E5%90%8E%E7%AB%AF/index.xml">
<link rel="alternate" hreflang="zh" href="http://localhost:1313/tags/%E5%90%8E%E7%AB%AF/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><meta property="og:title" content="后端" />
<meta property="og:description" content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://localhost:1313/tags/%E5%90%8E%E7%AB%AF/" />
<meta property="og:image" content="http://localhost:1313/images/papermod-cover.png" />



<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="http://localhost:1313/images/papermod-cover.png" />
<meta name="twitter:title" content="后端"/>
<meta name="twitter:description" content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod"/>

</head>

<body class="list dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Home (Alt + H)">
                        
                    <img src="http://localhost:1313/images/msg_hu15231257772499651944.png" alt="" aria-label="logo"
                        height="20">Home</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://github.com/adityatelange/hugo-PaperMod/wiki/" title="WiKi">
                    <span>WiKi</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header"><div class="breadcrumbs"><a href="http://localhost:1313/">主页</a>&nbsp;»&nbsp;<a href="http://localhost:1313/tags/">Tags</a></div>
  <h1>
    后端
    <a href="/tags/%E5%90%8E%E7%AB%AF/index.xml" title="RSS" aria-label="RSS">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
        stroke-linecap="round" stroke-linejoin="round" height="23">
        <path d="M4 11a9 9 0 0 1 9 9" />
        <path d="M4 4a16 16 0 0 1 16 16" />
        <circle cx="5" cy="19" r="1" />
      </svg>
    </a>
  </h1>
</header>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">40亿QQ号，如何去重？
    </h2>
  </header>
  <div class="entry-content">
    <p>前言 首先我们来看看如果要存储40亿QQ号需要多少内存？我们使用无符号整数存储，一个整数需要4个字节，那么40亿需要4*4000000000/1024/1024/1024≈15G，在业务中我们往往需要更多的空间。而且在Java中并不存在无符号整形，只有几个操作无符号的静态方法。
1GB = 1024MB，1MB = 1024KB，1KB = 1024B, 1B = 8b
很显然这种存储是不太优雅的，对于这种大数据量的去重，我们可以使用位图Bitmap。
Bitmap Bitmap，位图，首先看它的名字，比特map，首先我们听到map，一般都有去重的功能，bitmap听名字就像使用bit存储的map。确实，位图是使用bit数组表示的，它只存储0或者1，因此我们可以把全部的QQ号放到位图中，当index位置为1时表示已经存在。
假如我们要判断2924357571是否存在，那么我们只需要看index为2924357571的值是否为1，如果为1则表示已经存在。
位图使用1个比特表示一个数是否存在，那么使用无符号整数表示QQ号，4字节2^32-1是4294967295，内存需要4294967295/8/1024/1024≈512MB。
使用Java编程时，我们使用位图一般是通过的redis，在redis中位图常用的是以下三个命令：
命令
功能
SETBIT key offset value
设置指定offset位置的值，value只能是0或1
GETBIT key offset
获取指定offset位置的值
BITCOUNT key start end
获取start到end之间value为1的数量
演示 ...</p>
  </div>
  <footer class="entry-footer"><span title='2024-07-28 00:00:00 +0000 UTC'>七月 28, 2024</span>&nbsp;·&nbsp;1 分钟&nbsp;·&nbsp;BLACK595</footer>
  <a class="entry-link" aria-label="post link to 40亿QQ号，如何去重？" href="http://localhost:1313/posts/juejin/40%E4%BA%BFqq%E5%8F%B7%E5%A6%82%E4%BD%95%E5%8E%BB%E9%87%8D/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">从零开始学机器学习——构建一个推荐web应用
    </h2>
  </header>
  <div class="entry-content">
    <p>首先给大家介绍一个很好用的学习地址：cloudstudio.net/columns
今天，我们终于将分类器这一章节学习完活了，和回归一样，最后一章节用来构建web应用程序，我们会回顾之前所学的知识点，并新增一个web应用用来让模型和用户交互。所以今天的主题是美食推荐。
美食推荐 Web 应用程序 首先，请不要担心，本章节并不会涉及过多的前端知识点。我们此次的学习重点在于机器学习本身，因此我们的目标是将模型打包，使得前端用户能够与模型进行直接的界面交互，而不再依赖于后端输入的形式。
在前面的回归章节中，我们学习了如何使用第三方依赖包 pickle 来创建一个后台生成的 .pkl 后缀的模型文件，并通过 Flask 框架加载该模型，从而在后台暴露接口供调用和分析。今天，我们将探索一个新的知识点——ONNX Web，这将进一步拓宽我们在机器学习模型部署与应用方面的视野。
ONNX Web ONNX Web 是一个用于在浏览器中运行 ONNX 模型的工具和库，主要用于深度学习模型的推理。ONNX（Open Neural Network Exchange）是一个开放的深度学习模型交换格式，它允许不同深度学习框架之间共享模型。ONNX Web 使得开发者可以将 ONNX 模型直接在网页上运行，通常用于机器学习和深度学习的前端应用。
开发步骤 准备 ONNX 模型：首先，需要一个经过训练并导出的 ONNX 模型。 引入 ONNX Web 库：在你的前端项目中引入 ONNX Web 的 JavaScript 库。可以通过 npm 安装或直接在 HTML 中使用 CDN。 html
代码解读
复制代码
&lt;script src=&#34;https://cdn.jsdelivr.net/npm/onnxruntime-web@1.9.09/dist/ort.min.js&#34;&gt;&lt;/script&gt;
加载模型：使用 ONNX Web API 加载模型并进行推理。 javascript
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-10-04 00:00:00 +0000 UTC'>十月 4, 2024</span>&nbsp;·&nbsp;3 分钟&nbsp;·&nbsp;努力的小雨</footer>
  <a class="entry-link" aria-label="post link to 从零开始学机器学习——构建一个推荐web应用" href="http://localhost:1313/posts/juejin/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%AD%A6%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%8E%A8%E8%8D%90web%E5%BA%94%E7%94%A8/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">线上数据库死锁了！震惊
    </h2>
  </header>
  <div class="entry-content">
    <p> 前段时间接到一个需求，线上有用户说数据入不了正式库，导入失败，让我排查排查；小意思啦
一、定位问题 报错信息： Lock wait timeout exceeded； try restarting transaction
扔给我一段报错信息，我英语很差啊，看不懂，翻译一下咯，我就看到两个字，死锁；还是数据库死锁，纳尼！数据库死锁这玩意对于一个成熟的项目很难碰到吧，千年等一回啊，按着别人说的步骤我操作了一下，没问题啊，我想大概和业务逻辑有关系吧！
1.1 代码流程问题 果然，大哥实现数据的导入方式是先校验，完成后将数据导入临时表，临时表如果存在校验失败信息的数据那么导入失败，界面提示失败的数据，如果没问题那么将数据导入正式库，导入完成删除临时表；
猛一看没啥问题哈，我之前文章说了我们的项目代码管理的一团乱麻，所以当我产生几次错误的数据以后，我去临时表一看，纳尼，为啥错误提示了后不把错误数据删除了呢，留着干撒；此时我就已看到胜利曙光了，接着我想产生几次正常流程的数据，额，不行，总是报错，但是也不报报错信息，what，有没有搞错，我啥也没干啊，硬着头皮debug，很完美，这个项目的模板再次有问题，无奈，我自己手工造了一个，这简直惨绝人寰，头疼；模板造好，试一条数据，没问题；接着我又看到胜利曙光了;
让别人查下生产表的临时数据，小小机器居然放了十万条数据，由于是临时表，也没加任何索引，所以我考虑起了数据多不多的问题；十万数据多吗，十万数据没索引不多吗，的确，十万数据即使没索引也的确算不上多的数据，哈哈哈哈，那它为啥死锁，我迷茫了起来，再跑， 好家伙，我本地上两万条后就开始死锁了；稍等，我要开始装了；
临时表两万条数据，然后我开了六七个窗口导入，每个窗口6000条数据，我们再从头到尾梳理下流程，首先导入的时候会删除这个类型导入的临时表数据，就是说他没有在 导入失败后删除，而是在下一次导入的时候删除，而下一次导入由于种种条件导致会删除不彻底，这样随着次数增加数据就会越来越多，回过头来，由于机器配置分享给 mysql的并不多，而且删除条件也不是索引，导致删除的时候会全表扫起来，数据一多自然就慢，而我们的超时时间默认60S好像，在删除后如果此时我们另一个用户去 继续导入那么此时存在两个操作，一个是当前的删除后的插入操作，一个是删除操作，更刺激的来了，这玩意用jdbc居然拼接来了个一次插入，我是6000数据所以一次插入6000 ，60000那就一次插六万，大胆刁民，瞎胡闹，客户也不惯着，1w的插，使劲，最后搞不过，召唤我啦；
我能怎么办，我也没办法啊，我主打就是不重构，其实不能怪我，首先没人熟悉业务，我不能乱动，其次就那么一两天，还要改这改那时间不够，再然后改好了倒好， 改不好万一一个没考虑到出问题了还得担责，所以缝缝补补啦，用些漂亮布；。
1.2 数据库配置问题 上面的问题我们可以看到数据库配置的超时时间很短，其实对于批量操作，咱们超时时间尽量长点好点，太短了可能真的处理不过来，所以我们得改下超时时间；
二、怎么解决？ 首先要看到两个点，代码有问题，超时时间也的确很短，有人可能会问没索引啊，这不算问题？是的，这不算问题，首先数据量不多， 其次我是真不知道哪些字段当索引能优化，没有有效字段；
针对超时时间短，我们先给他延长，发现延长了，部分场景有效，但测试过程中如果插入的过程中存在删除并且临时表有几万条数据的话那么删除会耗费很长时间导致插入迟迟插不进去
sql
代码解读
复制代码
--查看 SHOW GLOBAL VARIABLES LIKE &#39;innodb_lock_wait_timeout&#39;; --修改 SET GLOBAL innodb_lock_wait_timeout = 90;
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-05-28 00:00:00 +0000 UTC'>五月 28, 2024</span>&nbsp;·&nbsp;1 分钟&nbsp;·&nbsp;小红帽的大灰狼</footer>
  <a class="entry-link" aria-label="post link to 线上数据库死锁了！震惊" href="http://localhost:1313/posts/juejin/%E7%BA%BF%E4%B8%8A%E6%95%B0%E6%8D%AE%E5%BA%93%E6%AD%BB%E9%94%81%E4%BA%86%E9%9C%87%E6%83%8A/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">偷偷分享下我们公司的研发规范~
    </h2>
  </header>
  <div class="entry-content">
    <p>大家好，我是程序员鱼皮。前几天我分享了自己 创业一周年的复盘总结 ，其中提到了一点：随着团队的扩大，我们会更注重研发规范和技术沉淀。
有程序员朋友就问了：啥是研发规范？
还有朋友表示：鱼皮别拿咱当外人，把你们公司的研发规范发来看看？
可以，必须安排！
这篇文章就给大家简单分享下我们公司的研发规范，不过在开始前必须要明确 2 点：
每个团队都应该根据情况定制自己的研发规范，别人的规范仅供参考，未必最适合你们团队。 篇幅有限，本文仅分享一些我认为很重要的规范，并且移除了我们自己的敏感信息。 一、项目整体研发流程 1）团队共同确认目标和规划
开会讨论，产出目标和规划文档
2）产品调研和需求分析
产出调研报告和需求分析文档
3）需求评审
开需求评审会，明确要做的需求和工作，评估工作量并明确工作时间节点。
4）方案设计
产出方案设计文档，比如数据库表设计、页面设计、接口设计等。
5）研发
包括各自开发、单元测试、前后端联调等
6）测试和验收
包括研发自测、产品验收、组内验收等
7）代码提交
提交可上线的代码，需要由负责人审查，通过后可合并
8）部署上线
将代码发布到服务器上，组内进行上线通知并更新上线文档，上线后需要自行验证
9）产品迭代
持续收集用户对新功能的反馈、并进行数据分析，从而验证改动效果，便于下一轮的更新迭代。
二、开发规范 开发前注意事项 1）确保自己充分理解了业务和需求，需要先进行整体的方案设计；尤其是对于重要需求和核心业务，必须先跟组内同学核对方案并通过后，才能下手开发，避免重复工作。
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-04-22 00:00:00 +0000 UTC'>四月 22, 2024</span>&nbsp;·&nbsp;1 分钟&nbsp;·&nbsp;程序员鱼皮</footer>
  <a class="entry-link" aria-label="post link to 偷偷分享下我们公司的研发规范~" href="http://localhost:1313/posts/juejin/%E5%81%B7%E5%81%B7%E5%88%86%E4%BA%AB%E4%B8%8B%E6%88%91%E4%BB%AC%E5%85%AC%E5%8F%B8%E7%9A%84%E7%A0%94%E5%8F%91%E8%A7%84%E8%8C%83~/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">自己没有价值之前，少去谈人情世故
    </h2>
  </header>
  <div class="entry-content">
    <p>昨天和几个网友在群里聊天，一个网友说最近公司辞退了一个人，原因就是太菜了，有一个功能是让从数据库随机查一条数据，他硬是把整个数据表的数据都查出来，然后从里面随机选一条数据。
另外的群友说，这人应该在公司的人情世故做得不咋滴，要是和自己组长，领导搞好关系，不至于被辞退。
发言人说：相反，这人的人情世故做得很到位，和别人相处得也挺好，说话又好听，大家都觉得他很不错！
但是这有用吗？
和自己的组长关系搞好了，难道他就能给你的愚蠢兜底？
这未免太天真，首先组长也是打工的，你以为和他关系好，他就能包庇你，容忍你不断犯错？
没有人会愿意冒着被举报的风险去帮助一个非亲非故的人，因为自己还要生活，老婆孩子还要等着用钱，包庇你，那么担风险的人就是他自己，他为何要这样做？
我们许多人总是觉得人情世故太重要了，甚至觉得比自己的能力重要，这其实是一个侮误区。
有这种想法的大多是刷垃圾短视频刷多了，没经历过社会的毒打，专门去学酒满敬人，茶满欺人。给领导敬酒杯子不能高过对方，最好直接跪下来……
那么人情世故重要吗？
重要，但是得分阶层，你一个打工的，领导连你名字都叫不出来，你见到他打声招呼，他都是用鼻子答应，你觉得你所谓的人情世故有意义吗？
你以为团建的时候跑上去敬酒，杯子直接低到他脚下，他就会看中你，为他挡酒他就觉得你这人可扶？未免电视看得太多。
人情世故有用的前提一定是建立在你有被利用的价值之上，你能漂漂亮亮做完一件事，问题又少，创造的价值又多，那么别人就会觉得你行，就会记住你，重视你，至于敬酒这些，不过是走个过场而已。
所以在自己没有价值之前，别去谈什么人情世故，安安心心提升自己。
前段时间一个大二的小妹妹叫我帮她运行一个项目，她也是为了课程蒙混过关，后面和她聊了几句，她叫我给她一点建议。
我直接给她说，你真正的去写了几行代码？看了几本书？做了多少笔记？你真正的写了代码，看了书，有啥疑问你再找我，而不是从我这里找简便方法，因为我也没有！
她说最烦学习了，完全不想学，自己还是去学人情世故了。
我瞬间破放了，对她说你才20岁不到，专业知识不好好学，就要去学人情世故了？你能用到人情世故吗？
你是怕以后去进厂自己人情世故不到位别人不要你？还是以后去ktv陪酒或者当营销学不会？这么早就做准备了？
她后面反驳我说：你看那些职场里面的女生不也是很懂人情世故吗，你为啥说没用，这些东西迟早都是要学的，我先做准备啊！
我当时就不想和她聊下去了，我知道又是垃圾短视频看多了，所以才会去想这些！以为自己不好好学习，毕业后只要人情世故做到位，就能像那些女职场秘书一样，陪着领导出去谈生意。
想啥呢！
当然，并不存在歧视别人的想法，因为我没有资格，只不过是觉得该学习的时间别去想一些没啥用的事情！
我们所能看到的那些把人情世故运用得炉火纯青，让人感觉很自然的人，别人肯定已经到了一定的段位，这是TA的职业需要。
而大多数人都是在底层干着街边老太太老大爷都能干的活，领导连你名字都叫不出来，可以用空气人来形容，你说人情世故有什么卵用吗？
这不就等于把自己弄得四不像吗？
当你真的有利用价值，能够给别人提供解决方案的时候，再来谈人情世故，那时候你不学，生活都会逼着你去学。
最后说一句，当你有价值的时候，人情世故是你别人学来用在你身上的，不信你回头去看一下自己的身边的人，哪怕是一个小学教师，都有人提着东西来找他办事，但是如果没有任何利用价值，哪怕TA把酒场上面的套路都运用得炉火纯青，也会成为别人的笑柄！
</p>
  </div>
  <footer class="entry-footer"><span title='2024-04-02 00:00:00 +0000 UTC'>四月 2, 2024</span>&nbsp;·&nbsp;1 分钟&nbsp;·&nbsp;苏格拉的底牌</footer>
  <a class="entry-link" aria-label="post link to 自己没有价值之前，少去谈人情世故" href="http://localhost:1313/posts/juejin/%E8%87%AA%E5%B7%B1%E6%B2%A1%E6%9C%89%E4%BB%B7%E5%80%BC%E4%B9%8B%E5%89%8D%E5%B0%91%E5%8E%BB%E8%B0%88%E4%BA%BA%E6%83%85%E4%B8%96%E6%95%85/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="prev" href="http://localhost:1313/tags/%E5%90%8E%E7%AB%AF/page/2/">
      «&nbsp;上一页&nbsp;2/38
    </a>
    <a class="next" href="http://localhost:1313/tags/%E5%90%8E%E7%AB%AF/page/4/">下一页&nbsp;4/38&nbsp;»
    </a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
        <span><a href="https://beian.miit.gov.cn/">粤ICP备2023039897号-1</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
