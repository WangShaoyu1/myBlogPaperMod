<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>JavaScript | PaperMod</title>
<meta name="keywords" content="">
<meta name="description" content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod">
<meta name="author" content="Theme PaperMod">
<link rel="canonical" href="http://localhost:1313/tags/javascript/">
<meta name="google-site-verification" content="XYZabc">
<link crossorigin="anonymous" href="/assets/css/stylesheet.7b92bf4867c997b58ec50f63451b83777173d5bd5593376852abd85746d09d71.css" integrity="sha256-e5K/SGfJl7WOxQ9jRRuDd3Fz1b1VkzdoUqvYV0bQnXE=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="apple-touch-icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="mask-icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="http://localhost:1313/tags/javascript/index.xml">
<link rel="alternate" hreflang="zh" href="http://localhost:1313/tags/javascript/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><meta property="og:title" content="JavaScript" />
<meta property="og:description" content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://localhost:1313/tags/javascript/" />
<meta property="og:image" content="http://localhost:1313/images/papermod-cover.png" />



<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="http://localhost:1313/images/papermod-cover.png" />
<meta name="twitter:title" content="JavaScript"/>
<meta name="twitter:description" content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod"/>

</head>

<body class="list dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Home (Alt + H)">
                        
                    <img src="http://localhost:1313/images/msg_hu15231257772499651944.png" alt="" aria-label="logo"
                        height="20">Home</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://github.com/adityatelange/hugo-PaperMod/wiki/" title="WiKi">
                    <span>WiKi</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header"><div class="breadcrumbs"><a href="http://localhost:1313/">主页</a>&nbsp;»&nbsp;<a href="http://localhost:1313/tags/">Tags</a></div>
  <h1>
    JavaScript
    <a href="/tags/javascript/index.xml" title="RSS" aria-label="RSS">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
        stroke-linecap="round" stroke-linejoin="round" height="23">
        <path d="M4 11a9 9 0 0 1 9 9" />
        <path d="M4 4a16 16 0 0 1 16 16" />
        <circle cx="5" cy="19" r="1" />
      </svg>
    </a>
  </h1>
</header>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">深入了解ReactNative新架构
    </h2>
  </header>
  <div class="entry-content">
    <p>深入了解React Native新架构 React Native团队宣布新架构将于2022年推出。点击这里查看他们的完整博客。
“2022 is going to be the year of the New Architecture in open source”(2022将会是新架构开源之年)
由于新版本发布在即，现在是个很好的机会去了解它的底层发生了哪些改变，以及这些改变会对我们的React Native App造成什么影响
本文主要介绍这次重构变化最多的地方：
JavaScript Interface(JSI) Fabric Turbo Modules CodeGen 当前架构 在学习新架构之前，让我们先回顾下当前的架构。
此次仅列举一些和本文相关的知识点，如果想了解更多关于当前架构的内容，阅读Bianca Dragomir的这篇文章
简而言之： 当我们运行RN应用时，所有的 javascript 代码会被打包到 JS Bundle，Native代码则被单独保存。
RN有以下三个线程：
JS thread：JS引擎使用该线程运行JS Bundle。 Native/UI thread: 运行原生能力(Native Modules)，处理UI渲染，用户手势事件等操作。 shadow thread：在元素渲染之前先计算布局。 JS和Native thread通过bridge进行通信，当通过bridge发送数据时，bridge会将数据排队批处理(优化)，并序列化成JSON，并且该通信只能是异步的。
...</p>
  </div>
  <footer class="entry-footer"><span title='2023-08-04 00:00:00 +0000 UTC'>八月 4, 2023</span>&nbsp;·&nbsp;1 分钟&nbsp;·&nbsp;王负剑王负剑</footer>
  <a class="entry-link" aria-label="post link to 深入了解ReactNative新架构" href="http://localhost:1313/posts/juejin/%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3reactnative%E6%96%B0%E6%9E%B6%E6%9E%84/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">如何解决前端的“竞态问题”
    </h2>
  </header>
  <div class="entry-content">
    <p>走过路过发现 bug 请指出，拯救一个辣鸡（但很帅）的少年就靠您啦！！！
什么是竞态问题 竞争问题 race conditions 是并发编程的一种情况，其中两个并发线程或进程竞争资源，最终状态取决于谁先获得资源。
在前端开发中，我们经常这种情况，当发送两个请求时，由于网络原因，如果第一次请求后返回，第二次请求先返回，会导致最后保存的结果是先发送的请求，第二次的请求结果会被覆盖。具体场景比如，我们在输入时查询待选项，又比如我们先点击分页2再点击分页3。
解决思路 1、防抖 我们输入时如果先输入了 “A” 又删除输入了 “B”，如果我们最终展示的是 “A” 相关的待选项，肯定会给用户造成困扰。这是个非常典型的节流应用场景，我们可以等到用户停止输入再发送请求，防止了多次请求的发出也就避免了竞态问题。
2、设置 loading 如果我们在点击分页后进行页面 loading 状态展示，无法再次点击分页，等到请求返回后再允许发送下一次请求，也同样可以避免分页问题。
3、忽略过期请求 如果无法避免竞态问题，我们就需要直面问题并解决——忽略上一次请求的返回结果（当然也可以直接取消请求）。
忽略过期请求，这个是我最开始想到的思路，当我们发送第二个请求时，上一次的请求就应该过期了，我们如果发现请求过期就取消操作。
当然重点是如何判断过期。我们可以通过一个 id 保存最新的请求数，当返回结果后根据 id 判断是否为最新请求。
js
代码解读
复制代码
function mockFetch() { return new Promise((resolve) =&gt; { setTimeout(resolve, 300) }) } // 不断递加 用于记录最新的请求id let id = 0 // 请求函数 async function request() { const currentId = (id = id &#43; 1) console.log(&#39;request start&#39;, currentId) await mockFetch() if (currentId === id) { console.log(&#39;request end&#39;, currentId) } else { console.log(&#39;request expired&#39;, currentId, id) } } request() request() /* request start 1 request start 2 request expired 1 2 request end 2 */
...</p>
  </div>
  <footer class="entry-footer"><span title='2023-01-31 00:00:00 +0000 UTC'>一月 31, 2023</span>&nbsp;·&nbsp;1 分钟&nbsp;·&nbsp;我不吃饼干</footer>
  <a class="entry-link" aria-label="post link to 如何解决前端的“竞态问题”" href="http://localhost:1313/posts/juejin/%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E5%89%8D%E7%AB%AF%E7%9A%84%E7%AB%9E%E6%80%81%E9%97%AE%E9%A2%98/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">【评论-抽奖】Electron拓展屏的初步设计和实现
    </h2>
  </header>
  <div class="entry-content">
    <p>在参加完8月更文的活动后，感觉整个人都被掏空了，本来打算好好的休养生息一波的，结果申请的掘金周边礼物活动竟然通过了，这真是“人在家中坐，喜从天上来”。
很荣幸能成为首批名额中的一员，感谢社区的大力支持！
这次的活动是作者可以获得两枚掘金徽章，在评论区通过抽奖的方式将这两枚徽章送给积极参与互动的朋友，这也算是借花献佛了 (￣▽￣)~*。
所以，看完文章的你千万别忘了在评论区留下你的真知灼见，说不定中奖的那个人就是你哦！
前言 我辈码猿，不是在做需求就是在接需求，让人不得不感慨一下：需求复需求，需求何其多！
这不，本来之前开发出的 Electron 客户端，基本可以满足项目需求了，自以为可以好好放松一下了，谁知客户又给整出了幺蛾子——需要支持拓展屏。
需求分析 所谓的拓展屏，相当于是从主屏窗口复制出一个窗口，显示在主屏幕之外的其他显示器上，并且这些分屏窗口除了一些控制功能（登录、登出、分屏、切换服务等）外，其余功能都和主屏窗口相同。
因为我们的 Electron 客户端的作用是提供一个壳子，里面的加载的是其他服务提供的页面，所以这里需要考虑的就只有窗口控制了，相对来说比较简单。
要点枚举 获取所有屏幕信息 程序一启动，首先获取屏幕个数及其属性：
js
代码解读
复制代码
const { screen } = require(&#34;electron&#34;); // 存储所有连接的显示器的信息 let displaysMap = new Map(); function getAllDisplays() { const allDisplays = screen.getAllDisplays(); for (let i = 0; i &lt; allDisplays.length; i&#43;&#43;) { const display = allDisplays[i]; displaysMap.set(display.id, display); } } function getBrowserOptsByDisplay(display) { const { bounds, workAreaSize } = display; const { x, y } = bounds; const { width, height } = workAreaSize; let isPrimary = false; if (display.id === screen.getPrimaryDisplay().id) { isPrimary = true; } return { x, y, width, height, isPrimary }; } function getBrowserOpts() { let opts = []; const displays = displaysMap.values(); for (const display of displays) { opts.push(getBrowserOptsByDisplay(display)); } return opts; } screen.on(&#34;display-added&#34;, (event, newDisplay) =&gt; { displaysMap.set(newDisplay.id, newDisplay); // 创建窗口的逻辑等 }); screen.on(&#34;display-removed&#34;, (event, oldDisplay) =&gt; { displaysMap.delete(oldDisplay.id); // 移除窗口的逻辑 });
...</p>
  </div>
  <footer class="entry-footer"><span title='2021-09-09 00:00:00 +0000 UTC'>九月 9, 2021</span>&nbsp;·&nbsp;2 分钟&nbsp;·&nbsp;编程三昧</footer>
  <a class="entry-link" aria-label="post link to 【评论-抽奖】Electron拓展屏的初步设计和实现" href="http://localhost:1313/posts/juejin/%E8%AF%84%E8%AE%BA-%E6%8A%BD%E5%A5%96electron%E6%8B%93%E5%B1%95%E5%B1%8F%E7%9A%84%E5%88%9D%E6%AD%A5%E8%AE%BE%E8%AE%A1%E5%92%8C%E5%AE%9E%E7%8E%B0/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">2020年了，还不会内网穿透吗？
    </h2>
  </header>
  <div class="entry-content">
    <p>程序员导航站：iiter.cn
最近老是感觉身体跟不上灵魂。
想得太多，做的太少。
说白了，就是懒！
还有，王者荣耀钻石分段的队友，太太太坑了！！！
内网穿透的概念 来简单了解下内网穿透的概念：
内网穿透，即NAT穿透，网络连接时术语，计算机是局域网内时，外网与内网的计算机节点需要连接通信，有时就会出现不支持内网穿透。就是说映射端口，能让外网的电脑找到处于内网的电脑，提高下载速度。不管是内网穿透还是其他类型的网络穿透，都是网络穿透的统一方法来研究和解决。
有哪些应用场景 提供内网穿透服务 连接内网服务器，在外网演示内网web站点 无需服务器部署，快速调试本地程序，微信公众号开发利器 支持http、https协议站点，省去证书中间件复杂配置，http协议站点直接升级为https站点 支持TCP，UDP协议端口转发。支持数据库、SSH、远程桌面、网络摄像头等等开放到外网 包括但不限于以上场景。 常用的内网穿透工具 看到应用场景，是不是觉得卧槽有点东西了？跟自己实际开发的应用场景还有点一丢丢契合呢？
冲可以在外网演示内网web站这点来说，就值得我们大多数开发者为之嘿嘿嘿。
NATAPP 基于ngrok的国内收费内网穿透工具，免费版本：提供http,https,tcp全隧道穿透，随机域名/TCP端口，不定时强制更换域名/端口，自定义本地端口，临时用一下可以。链接直达
frp 是一个高性能的反向代理应用，支持 tcp, http, https 等协议类型，并且 web 服务支持根据域名进行路由转发。自己组建的话需要外网一台有公网IP的设备，启动需要手动驱动客户端和服务端，这点比较麻烦，也是对技术有一定的要求 使用相对复杂，需要代理服务器支持。链接直达
ngrok ngrok是一个反向代理，通过在公共的端点和本地运行的Web服务器之间建立一个安全的通道。ngrok可捕获和分析所有通道上的流量，便于后期分析与响应。 现在的luci，自带server和client，也就是说如果有一个公网ip的话，是可以用来作为ngrok的server端的。链接直达
花生壳 花生壳既是内网穿透软件、端口映射软件。功能比较齐全，比较简单，也是大家比较耳熟了，支持tcp,udp.https.http,socket5应用。流量还是得走传说中的rootnode，所以是限流1G，分的等级比较多商业版、旗舰版、铂金版，需要根据不同需求付费开通相关功能。链接直达
ngrok工具的使用 注册账号 打开ngrok官网注册一个账号后登录。ngrok官网 可以用github或者google第三方账号直接免注册登录。 ...</p>
  </div>
  <footer class="entry-footer"><span title='2020-04-16 00:00:00 +0000 UTC'>四月 16, 2020</span>&nbsp;·&nbsp;1 分钟&nbsp;·&nbsp;postwoman</footer>
  <a class="entry-link" aria-label="post link to 2020年了，还不会内网穿透吗？" href="http://localhost:1313/posts/juejin/2020%E5%B9%B4%E4%BA%86%E8%BF%98%E4%B8%8D%E4%BC%9A%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%E5%90%97/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">JavaScript中如何拦截全局FetchAPI的请求和响应？
    </h2>
  </header>
  <div class="entry-content">
    <p>本文翻译自 Intercepting JavaScript Fetch API requests and responses
拦截器是可用于预处理或后处理 HTTP 请求的代码块，有助于全局错误处理、身份验证、日志记录等。在本文中，你将学习如何拦截 JavaScript Fetch API 请求。
拦截 HTTP 请求一般有两种事件：请求和响应事件。请求拦截器应该在发送实际 HTTP 请求之前执行，而响应拦截器应该在到达发出请求的应用程序代码之前执行。
在深入研究代码之前，我们需要了解一些重要的事情。首先，Fetch API 本身不支持拦截器。其次，在 Node.js 中使用 Fetch API 需要额外的包。
JavaScript Fetch API 首先，让我们介绍一些 Fetch API 的基础，例如语法:
js
代码解读
复制代码
const fetchResponsePromise = fetch(resource [, init])
resource 定义要获取的资源，该资源可以是 Request 对象，也可以是 URL。init 是一个可选对象，它将包含你想应用于此特定请求的任何自定义配置。
Fetch API 是基于 Promise 的。因此，当你调用 Fetch 方法时，你将得到一个 Promise 响应。在这里，它被称为 fetchResponsePromise，如上面的示例所示。
...</p>
  </div>
  <footer class="entry-footer"><span title='2022-11-17 00:00:00 +0000 UTC'>十一月 17, 2022</span>&nbsp;·&nbsp;3 分钟&nbsp;·&nbsp;我不吃饼干</footer>
  <a class="entry-link" aria-label="post link to JavaScript中如何拦截全局FetchAPI的请求和响应？" href="http://localhost:1313/posts/juejin/javascript%E4%B8%AD%E5%A6%82%E4%BD%95%E6%8B%A6%E6%88%AA%E5%85%A8%E5%B1%80fetchapi%E7%9A%84%E8%AF%B7%E6%B1%82%E5%92%8C%E5%93%8D%E5%BA%94/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="prev" href="http://localhost:1313/tags/javascript/page/12/">
      «&nbsp;上一页&nbsp;12/27
    </a>
    <a class="next" href="http://localhost:1313/tags/javascript/page/14/">下一页&nbsp;14/27&nbsp;»
    </a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
        <span><a href="https://beian.miit.gov.cn/">粤ICP备2023039897号-1</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
