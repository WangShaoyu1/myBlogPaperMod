<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>FFmpeg | PaperMod</title>
<meta name="keywords" content="">
<meta name="description" content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod">
<meta name="author" content="Theme PaperMod">
<link rel="canonical" href="http://localhost:1313/tags/ffmpeg/">
<meta name="google-site-verification" content="XYZabc">
<link crossorigin="anonymous" href="/assets/css/stylesheet.7b92bf4867c997b58ec50f63451b83777173d5bd5593376852abd85746d09d71.css" integrity="sha256-e5K/SGfJl7WOxQ9jRRuDd3Fz1b1VkzdoUqvYV0bQnXE=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="apple-touch-icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="mask-icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="http://localhost:1313/tags/ffmpeg/index.xml">
<link rel="alternate" hreflang="zh" href="http://localhost:1313/tags/ffmpeg/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><meta property="og:title" content="FFmpeg" />
<meta property="og:description" content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://localhost:1313/tags/ffmpeg/" />
<meta property="og:image" content="http://localhost:1313/images/papermod-cover.png" />



<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="http://localhost:1313/images/papermod-cover.png" />
<meta name="twitter:title" content="FFmpeg"/>
<meta name="twitter:description" content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod"/>

</head>

<body class="list dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Home (Alt + H)">
                        
                    <img src="http://localhost:1313/images/msg_hu15231257772499651944.png" alt="" aria-label="logo"
                        height="20">Home</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://github.com/adityatelange/hugo-PaperMod/wiki/" title="WiKi">
                    <span>WiKi</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header"><div class="breadcrumbs"><a href="http://localhost:1313/">主页</a>&nbsp;»&nbsp;<a href="http://localhost:1313/tags/">Tags</a></div>
  <h1>
    FFmpeg
    <a href="/tags/ffmpeg/index.xml" title="RSS" aria-label="RSS">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
        stroke-linecap="round" stroke-linejoin="round" height="23">
        <path d="M4 11a9 9 0 0 1 9 9" />
        <path d="M4 4a16 16 0 0 1 16 16" />
        <circle cx="5" cy="19" r="1" />
      </svg>
    </a>
  </h1>
</header>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">FFmpeg命令行音视频处理
    </h2>
  </header>
  <div class="entry-content">
    <p>1
命令行工具
FFmpeg 的 bin 目录下有三个工具，可在终端直接输入命令执行
ffmpeg ( ffmpeg.org/ffmpeg.html )是一个通用的媒体转换器。它可以读取各种输入，包括实时抓取/录制设备-过滤，并将它们转码为多种输出格式。
ffplay ( ffmpeg.org/ffplay.html )是一款基于 FFmpeg 库和 SDL 库的简单媒体播放器。它主要用作各种 FFmpeg API 的测试平台。
ffprobe ( ffmpeg.org/ffprobe.htm… )是一个多媒体分析器，并以人类和机器可读的方式打印出从多媒体中收集的信息。
2
ffmpeg 命令
终端直接输入 ffmpeg，可以获得用法提示
vbnet
代码解读
复制代码
usage: ffmpeg [options] [[infile options] -i infile]... {[outfile options] outfile}... Use -h to get full help or, even better, run &#39;man ffmpeg&#39;
...</p>
  </div>
  <footer class="entry-footer"><span title='2023-10-25 00:00:00 +0000 UTC'>十月 25, 2023</span>&nbsp;·&nbsp;6 分钟&nbsp;·&nbsp;人月神话Lee</footer>
  <a class="entry-link" aria-label="post link to FFmpeg命令行音视频处理" href="http://localhost:1313/posts/juejin/ffmpeg%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%9F%B3%E8%A7%86%E9%A2%91%E5%A4%84%E7%90%86/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">音视频编解码流程与如何使用FFMPEG命令进行音视频处理
    </h2>
  </header>
  <div class="entry-content">
    <p>一、前言 FFMPEG 是特别强大的专门用于处理音视频的开源库。你既可以使用它的 API 对音视频进行处理，也可以使用它提供的工具，如 ffmpeg, ffplay, ffprobe，来编辑你的音视频文件。
本文将简要介绍一下 FFMPEG 库的基本目录结构及其功能，然后详细介绍一下我们在日常工作中，如何使用 ffmpeg 提供的工具来处理音视频文件。
二、FFMPEG 目录及作用 libavcodec： 提供了一系列编码器的实现。
libavformat： 实现在流协议，容器格式及其本 IO 访问。
libavutil： 包括了 hash 器，解码器和各利工具函数。
libavfilter： 提供了各种音视频过滤器。
libavdevice： 提供了访问捕获设备和回放设备的接口。
libswresample： 实现了混音和重采样。
libswscale： 实现了色彩转换和缩放工能。
三、FFMPEG 基本概念 在讲解 FFMPEG 命令之前，我们先要介绍一些音视频格式的基要概念。
(1) 音／视频流 在音视频领域，我们把一路音／视频称为一路流。如我们小时候经常使用 VCD 看港片，在里边可以选择粤语或国语声音，其实就是 CD 视频文件中存放了两路音频流，用户可以选择其中一路进行播放。
...</p>
  </div>
  <footer class="entry-footer"><span title='2021-09-15 00:00:00 +0000 UTC'>九月 15, 2021</span>&nbsp;·&nbsp;6 分钟&nbsp;·&nbsp;RTE开发者社区</footer>
  <a class="entry-link" aria-label="post link to 音视频编解码流程与如何使用FFMPEG命令进行音视频处理" href="http://localhost:1313/posts/juejin/%E9%9F%B3%E8%A7%86%E9%A2%91%E7%BC%96%E8%A7%A3%E7%A0%81%E6%B5%81%E7%A8%8B%E4%B8%8E%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8ffmpeg%E5%91%BD%E4%BB%A4%E8%BF%9B%E8%A1%8C%E9%9F%B3%E8%A7%86%E9%A2%91%E5%A4%84%E7%90%86/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">关于FFmpeg使用过程中一些问题解决的分享
    </h2>
  </header>
  <div class="entry-content">
    <p>关于FFmpeg使用过程中一些问题解决的分享 近期项目开发中使用到了FFmpeg，由于也是第一次使用，所以在这将其中遇到的一些问题及解决办法，在这里进行一个汇总。 关于FFmpeg的使用方法并不多做解释，自行寻找使用方法：
FFmpeg官网：ffmpeg.org/
（1）如果通过命令行处理视频则需要从官网下载对应的ffmpeg，并配置环境变量或通过当前目录执行。 （2）若想在项目中使用，只要引用对应jar包既可。但需要注意一点，项目中引用jar在windows和mac环境中可直接运行，但在linux中需要编译对应的so文件。（因为这个问题折腾了一天多）
javascript
代码解读
复制代码
2022-06-01 09:35:47 [http-nio-8090-exec-4] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Handler dispatch failed; nested exception is java.lang.UnsatisfiedLinkError: no jniavutil in java.library.path] with root cause java.lang.UnsatisfiedLinkError: /root/.javacpp/cache/ffmpeg-5.0-1.5.7-linux-x86_64.jar/org/bytedeco/ffmpeg/linux-x86_64/libjniavutil.so: /lib64/libc.so.6: version `GLIBC_2.14&#39; not found (required by /root/.javacpp/cache/ffmpeg-5.0-1.5.7-linux-x86_64.jar/org/bytedeco/ffmpeg/linux-x86_64/libjniavutil.so)
下面是解决问题时参考的链接：
blog.csdn.net/maoxiang/ar…
blog.csdn.net/weixin_3569…
stackoverflow.com/questions/6…
...</p>
  </div>
  <footer class="entry-footer"><span title='2022-06-15 00:00:00 +0000 UTC'>六月 15, 2022</span>&nbsp;·&nbsp;3 分钟&nbsp;·&nbsp;LiDaTou</footer>
  <a class="entry-link" aria-label="post link to 关于FFmpeg使用过程中一些问题解决的分享" href="http://localhost:1313/posts/juejin/%E5%85%B3%E4%BA%8Effmpeg%E4%BD%BF%E7%94%A8%E8%BF%87%E7%A8%8B%E4%B8%AD%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E7%9A%84%E5%88%86%E4%BA%AB/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">ffmpeg如何实现视频推流？
    </h2>
  </header>
  <div class="entry-content">
    <p>FFmpeg是一个强大的多媒体框架，用于处理视频和音频数据。它包括了libavcodec（用于解码和编码）、libavformat（用于格式转换）、libavutil（提供一些辅助工具和函数）、libavfilter（用于音视频过滤）等多个库。
以下这些都是FFmpeg的特性
FFmpeg支持大量的音视频编解码器，如H.264、H.265、VP9、MPEG-2、AAC、MP3等。能够将音视频文件从一种格式转换为另一种格式，例如将MP4转换为AVI。
可以处理实时流媒体，支持RTSP、RTMP、HTTP等流媒体协议。通过libavfilter库，可以对视频和音频应用各种滤镜和效果，如裁剪、缩放、旋转、色彩调整、音频混响等。
FFmpeg可以利用多线程和多核处理器来加速编解码和转码过程。FFmpeg的命令行工具支持复杂的脚本和自动化处理，可以通过脚本来控制复杂的处理流程。
FFmpeg可以利用硬件加速（如GPU）来提高编解码效率。可以用于实时音视频处理，如直播流的编码和解码。
了解这些技术要点有助于在使用FFmpeg进行音视频处理时，能够更加高效地解决问题和实现需求。
如何使用FFmpeg进行视频的实时转码和流处理？ 使用 FFmpeg 进行视频的实时转码和流处理是一个涉及多个步骤的过程，通常用于直播或实时视频流的场景。我们来看一下FFmpeg要怎么做：
1. 捕获视频源 首先需要捕获视频源。可以是摄像头、屏幕捕获或其他实时视频源。
bash
代码解读
复制代码
ffmpeg -f v4l2 -i /dev/video0 -vcodec libx264 -tune zerolatency -f flv rtmp://localhost/live/stream
-f v4l2 指定使用视频4Linux 2设备。 -i /dev/video0 指定视频输入设备。 -vcodec libx264 使用x264编码器。 -tune 使用zerolatency预设来优化延迟。 -f flv 指定输出格式为FLV。 rtmp://localhost/live/stream 是输出到的RTMP服务器地址。 2. 实时转码 在捕获视频的同时，使用 FFmpeg 实时转码。例如，将输入视频转换为 H.264 编码和 AAC 音频编码：
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-09-06 00:00:00 +0000 UTC'>九月 6, 2024</span>&nbsp;·&nbsp;2 分钟&nbsp;·&nbsp;威哥爱编程</footer>
  <a class="entry-link" aria-label="post link to ffmpeg如何实现视频推流？" href="http://localhost:1313/posts/juejin/ffmpeg%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E8%A7%86%E9%A2%91%E6%8E%A8%E6%B5%81/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">ffmpeg入门与疑问
    </h2>
  </header>
  <div class="entry-content">
    <p>ffmpeg 简介 FFmpeg 是一款免费的、开源的跨平台音视频处理工具，旨在提供高质量、高速度的多媒体处理功能，FFmpeg 设计以流式处理音视频。
FFmpeg 目前已成为业界公认的最强大、最全面的音视频处理工具之一，得到了广泛的应用。绝大多数的音视频相关应用和工具库，都直接或间接地引用了 FFmpeg。
FFmpeg 的开发始于2000年，最初由法国程序员 Fabrice Bellard 发起，后来有越来越多的开源贡献者参与。目前 FFmpeg 由一支由多名开发者组成的团队维护和开发。
ffmpeg 作者和团队 Fabrice Bellard 是一位法国著名的计算机程序员，因创立FFmpeg、QEMU等项目而闻名业内。
他的个人介绍网站是 bellard.org/。
其中列举了他创建的多个项目。他兴趣广泛，涉足多个不同的领域，可以称为一位真正的编程大师。
ffmpeg 项目的分裂与合并 在2011年，FFmpeg项目发生了内部分歧，一些开发者选择离开FFmpeg项目并创建Libav项目。由于代码库的相似性以及两个项目之间的竞争，许多涉足音视频处理领域的人会对这两个项目感到困惑。
两个项目的差异导致社区对Libav的认可度降低，并且导致许多用户回到FFmpeg。
在2019年，Libav项目宣布正式终止开发和支持，并建议所有用户转向FFmpeg。
在分裂后的几年中，两个项目的代码已经发生了较大的差异，各自发展出了独立的特性和架构。因此，合并之后也加剧了 ffmpeg 的新旧版本差异。
ffmpeg 的功能与命令示例 shell
代码解读
复制代码
# 从视频中导出音频 ffmpeg -i input.mp4 output.mp3 # 截取音频片段 ffmpeg -i input.mp3 -ss 04:10 -t 16 output.mp3 # 截取视频片段 ffmpeg -i input.mp4 -ss 04:10 -t 16 -c copy -avoid_negative_ts make_zero output.mp4 # 将两个 flv 文件合并 ffmpeg -f concat -i input.txt -c copy xj.flv ## input.txt 中的内容 file &#39;xj1.flv&#39; file &#39;xj2.flv&#39; # 将本地视频以 rtmp 协议推流 ffmpeg -re -i ./demo.mp4 -c copy -f flv rtmp://publish.com/live/demo123456 # 将在线 flv 流保存到本地 ffmpeg -i http://demo.com/input.flv -c copy dump.flv # 在左上角0,0点添加水印 ffmpeg -y -i tmp.mp4 -i green.png -filter_complex &#39;overlay=x=0:y=0&#39; output.mp4 # 使用华文行楷字体，64字号，红色字，在右上角写水印文字，main_w-text_w-10 就是视频宽度减文字宽度再减 10 ffmpeg -y -i source.mp4 -vf &#34;drawtext=fontfile=STXINGKA.ttf: text=&#39;水印文字&#39;:x=main_w-text_w-10:y=10:fontsize=64:fontcolor=red:shadowy=2&#34; output.mp4 # 将图片转为视频 ffmpeg -loop 1 -f image2 -i test2.png -vcodec libx264 -r 30 -t 3 test2.mp4 # 替换视频中的音频轨 ffmpeg -i input.mp4 -i trll.mp3 -map 0:v -map 1:a -c:v copy -shortest -y output.mp4 # 绿幕抠像后合并 ffmpeg -i jmfst.mp4 -i greentiger.mp4 -shortest -filter_complex &#34;[1:v]chromakey=0x16ff0a:0.1:0.0[ckout];[0:v][ckout]overlay[out]&#34; -map &#34;[out]&#34; -y output.mp4 # 基于 mask 抠像后合并 ffmpeg -i video.mp4 -i matte.mp4 -i background.mp4 -filter_complex &#39;[1][0]scale2ref[mask][main];[main][mask]alphamerge[vid];[2:v][vid]overlay[out]&#39; -map [out] complete.mp4
...</p>
  </div>
  <footer class="entry-footer"><span title='2023-04-23 00:00:00 +0000 UTC'>四月 23, 2023</span>&nbsp;·&nbsp;2 分钟&nbsp;·&nbsp;音视频萌新</footer>
  <a class="entry-link" aria-label="post link to ffmpeg入门与疑问" href="http://localhost:1313/posts/juejin/ffmpeg%E5%85%A5%E9%97%A8%E4%B8%8E%E7%96%91%E9%97%AE/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="next" href="http://localhost:1313/tags/ffmpeg/page/2/">下一页&nbsp;2/2&nbsp;»
    </a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
        <span><a href="https://beian.miit.gov.cn/">粤ICP备2023039897号-1</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
