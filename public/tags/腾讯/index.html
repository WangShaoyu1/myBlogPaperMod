<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>腾讯 | PaperMod</title>
<meta name="keywords" content="">
<meta name="description" content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod">
<meta name="author" content="Theme PaperMod">
<link rel="canonical" href="http://localhost:1313/tags/%E8%85%BE%E8%AE%AF/">
<meta name="google-site-verification" content="XYZabc">
<link crossorigin="anonymous" href="/assets/css/stylesheet.7b92bf4867c997b58ec50f63451b83777173d5bd5593376852abd85746d09d71.css" integrity="sha256-e5K/SGfJl7WOxQ9jRRuDd3Fz1b1VkzdoUqvYV0bQnXE=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="apple-touch-icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="mask-icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="http://localhost:1313/tags/%E8%85%BE%E8%AE%AF/index.xml">
<link rel="alternate" hreflang="zh" href="http://localhost:1313/tags/%E8%85%BE%E8%AE%AF/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><meta property="og:title" content="腾讯" />
<meta property="og:description" content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://localhost:1313/tags/%E8%85%BE%E8%AE%AF/" />
<meta property="og:image" content="http://localhost:1313/images/papermod-cover.png" />



<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="http://localhost:1313/images/papermod-cover.png" />
<meta name="twitter:title" content="腾讯"/>
<meta name="twitter:description" content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod"/>

</head>

<body class="list dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Home (Alt + H)">
                        
                    <img src="http://localhost:1313/images/msg_hu15231257772499651944.png" alt="" aria-label="logo"
                        height="20">Home</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://github.com/adityatelange/hugo-PaperMod/wiki/" title="WiKi">
                    <span>WiKi</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header"><div class="breadcrumbs"><a href="http://localhost:1313/">主页</a>&nbsp;»&nbsp;<a href="http://localhost:1313/tags/">Tags</a></div>
  <h1>
    腾讯
    <a href="/tags/%E8%85%BE%E8%AE%AF/index.xml" title="RSS" aria-label="RSS">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
        stroke-linecap="round" stroke-linejoin="round" height="23">
        <path d="M4 11a9 9 0 0 1 9 9" />
        <path d="M4 4a16 16 0 0 1 16 16" />
        <circle cx="5" cy="19" r="1" />
      </svg>
    </a>
  </h1>
</header>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">基于腾讯地图定位组件实现周边公用厕所远近排序分布图
    </h2>
  </header>
  <div class="entry-content">
    <p>前言 地图应用非常广泛，目前地图服务，都提供地图操作、标注、地点搜索、出行规划、地址解析、街景等接口，功能非常丰富。在实际开发过程中，各有优劣。本次基于需求，使用腾讯位置服务作为一个公用厕所位置标注的H5页面开发。
本次使用版本： JavaScript API 2.0版本。
项目需求 1、项目需求 基于腾讯位置服务，实现微信扫描二维码后，在微信浏览器内，展示某县城的公用厕所分布图，按照用户当前定位与各个厕所之间的距离远近排序，点击标注点跳转到腾讯地图进行导航。
2、需求分解 基于上述需求，对使用到的腾讯位置服务接口予以分解如下：
scss
代码解读
复制代码
腾讯地图加载； 自动定位； 信息点(POINTS)标注maker； 计算标注点之间的距离； 导航跳转链接API接口； 街道与卫星地图切换控件； 缩放控件；
开发实战 1、引入功能库和附件库 ini
代码解读
复制代码
`&lt;script charset=&#34;utf-8&#34; src=&#34;https://map.qq.com/api/js?v=2.exp&amp;libraries=drawing,geometry,autocomplete,convertor&amp;key={$appkey}&#34;&gt;&lt;/script&gt; &lt;script type=&#34;text/javascript&#34; src=&#34;https://3gimg.qq.com/lightmap/components/geolocation/geolocation.min.js&#34;&gt;&lt;/script&gt;` ...</p>
  </div>
  <footer class="entry-footer"><span title='2021-04-09 00:00:00 +0000 UTC'>四月 9, 2021</span>&nbsp;·&nbsp;3 分钟&nbsp;·&nbsp;腾讯位置服务</footer>
  <a class="entry-link" aria-label="post link to 基于腾讯地图定位组件实现周边公用厕所远近排序分布图" href="http://localhost:1313/posts/juejin/%E5%9F%BA%E4%BA%8E%E8%85%BE%E8%AE%AF%E5%9C%B0%E5%9B%BE%E5%AE%9A%E4%BD%8D%E7%BB%84%E4%BB%B6%E5%AE%9E%E7%8E%B0%E5%91%A8%E8%BE%B9%E5%85%AC%E7%94%A8%E5%8E%95%E6%89%80%E8%BF%9C%E8%BF%91%E6%8E%92%E5%BA%8F%E5%88%86%E5%B8%83%E5%9B%BE/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">封装了一个腾讯云im的flutter插件
    </h2>
  </header>
  <div class="entry-content">
    <p>原文地址：地址 dim 封装的一个腾讯云im，以便于flutter开发者可以方便继承im到自己的应用中
插件地址：pub.dartlang.org/packages/di…
使用之前注意事项 开发者需要到腾讯云上申请一个appid，申请地址
申请成功之后，平台会分配一个appid给到开发者。
1、sig的获取，sig一般就是开发者自己的后台开发同学提供，可以参考腾讯云文档实现sig申请。
2、都准备ok了，就可以登录imsdk了。
android 端配置你的项目中，android 目录app下面的 AndroidManifest.xml，内容参考这里
代码解读
复制代码
&lt;manifest xmlns:android=&#34;http://schemas.android.com/apk/res/android&#34; package=&#34;com.example.coinseast&#34;&gt; &lt;!-- The INTERNET permission is required for development. Specifically, flutter needs it to communicate with the running application to allow setting breakpoints, to provide hot reload, etc. --&gt; &lt;uses-permission android:name=&#34;android.permission.INTERNET&#34;/&gt; &lt;uses-permission android:name=&#34;android.permission.ACCESS_NETWORK_STATE&#34; /&gt; &lt;uses-permission android:name=&#34;android.permission.ACCESS_WIFI_STATE&#34; /&gt; &lt;uses-permission android:name=&#34;android.permission.CAMERA&#34; /&gt; &lt;uses-permission android:name=&#34;android.permission.CHANGE_NETWORK_STATE&#34; /&gt; &lt;uses-permission android:name=&#34;android.permission.GET_TASKS&#34; /&gt; &lt;uses-permission android:name=&#34;android.permission.INTERNET&#34; /&gt; &lt;uses-permission android:name=&#34;android.permission.MODIFY_AUDIO_SETTINGS&#34; /&gt; &lt;uses-permission android:name=&#34;android.permission.READ_LOGS&#34; /&gt; &lt;uses-permission android:name=&#34;android.permission.READ_PHONE_STATE&#34; /&gt; &lt;uses-permission android:name=&#34;android.permission.RECEIVE_BOOT_COMPLETED&#34; /&gt; &lt;uses-permission android:name=&#34;android.permission.RECORD_AUDIO&#34; /&gt; &lt;uses-permission android:name=&#34;android.permission.VIBRATE&#34; /&gt; &lt;uses-permission android:name=&#34;android.permission.WAKE_LOCK&#34; /&gt; &lt;uses-permission android:name=&#34;android.permission.WRITE_EXTERNAL_STORAGE&#34; /&gt; &lt;!-- io.flutter.app.FlutterApplication is an android.app.Application that calls FlutterMain.startInitialization(this); in its onCreate method. In most cases you can leave this as-is, but you if you want to provide additional functionality it is fine to subclass or reimplement FlutterApplication and put your custom class here. --&gt; &lt;application android:name=&#34;io.flutter.app.FlutterApplication&#34; android:label=&#34;coins_east&#34; android:icon=&#34;@mipmap/ic_launcher&#34;&gt; &lt;activity android:name=&#34;.MainActivity&#34; android:launchMode=&#34;singleTop&#34; android:theme=&#34;@style/LaunchTheme&#34; android:configChanges=&#34;orientation|keyboardHidden|keyboard|screenSize|locale|layoutDirection|fontScale|screenLayout|density&#34; android:hardwareAccelerated=&#34;true&#34; android:windowSoftInputMode=&#34;adjustResize&#34;&gt; &lt;!-- This keeps the window background of the activity showing until Flutter renders its first frame. It can be removed if there is no splash screen (such as the default splash screen defined in @style/LaunchTheme). --&gt; &lt;meta-data android:name=&#34;io.flutter.app.android.SplashScreenUntilFirstFrame&#34; android:value=&#34;true&#34; /&gt; &lt;intent-filter&gt; &lt;action android:name=&#34;android.intent.action.MAIN&#34;/&gt; &lt;category android:name=&#34;android.intent.category.LAUNCHER&#34;/&gt; &lt;/intent-filter&gt; &lt;/activity&gt; &lt;!-- 【必须】消息收发service --&gt; &lt;service android:name=&#34;com.tencent.qalsdk.service.QalService&#34; android:exported=&#34;true&#34; android:process=&#34;:QALSERVICE&#34; &gt; &lt;/service&gt; &lt;service android:name=&#34;com.tencent.qalsdk.service.QalAssistService&#34; android:exported=&#34;false&#34; android:process=&#34;:QALSERVICE&#34; &gt; &lt;/service&gt; &lt;!-- 【必须】 离线消息广播接收器 --&gt; &lt;receiver android:name=&#34;com.tencent.qalsdk.QALBroadcastReceiver&#34; android:exported=&#34;false&#34;&gt; &lt;intent-filter&gt; &lt;action android:name=&#34;com.tencent.qalsdk.broadcast.qal&#34; /&gt; &lt;/intent-filter&gt; &lt;/receiver&gt; &lt;receiver android:name=&#34;com.tencent.qalsdk.core.NetConnInfoCenter&#34; android:process=&#34;:QALSERVICE&#34;&gt; &lt;intent-filter&gt; &lt;action android:name=&#34;android.intent.action.BOOT_COMPLETED&#34; /&gt; &lt;/intent-filter&gt; &lt;intent-filter&gt; &lt;action android:name=&#34;android.net.conn.CONNECTIVITY_CHANGE&#34; /&gt; &lt;/intent-filter&gt; &lt;intent-filter&gt; &lt;action android:name=&#34;android.intent.action.TIME_SET&#34; /&gt; &lt;/intent-filter&gt; &lt;intent-filter&gt; &lt;action android:name=&#34;android.intent.action.TIMEZONE_CHANGED&#34; /&gt; &lt;/intent-filter&gt; &lt;!-- ImSDK 3.0.2 后添加 --&gt; &lt;intent-filter&gt; &lt;action android:name=&#34;com.tencent.qalsdk.service.TASK_REMOVED&#34; /&gt; &lt;/intent-filter&gt; &lt;/receiver&gt; &lt;/application&gt; &lt;/manifest&gt;
...</p>
  </div>
  <footer class="entry-footer"><span title='2018-08-06 00:00:00 +0000 UTC'>八月 6, 2018</span>&nbsp;·&nbsp;2 分钟&nbsp;·&nbsp;brzhang</footer>
  <a class="entry-link" aria-label="post link to 封装了一个腾讯云im的flutter插件" href="http://localhost:1313/posts/juejin/%E5%B0%81%E8%A3%85%E4%BA%86%E4%B8%80%E4%B8%AA%E8%85%BE%E8%AE%AF%E4%BA%91im%E7%9A%84flutter%E6%8F%92%E4%BB%B6/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Android如何实现超级棒的沉浸式体验
    </h2>
  </header>
  <div class="entry-content">
    <p>原文链接 cloud.tencent.com/developer/a…
做APP开发的过程中，有很多时候，我们需要实现类似于下面这种沉浸式的体验。
沉浸式体验
一开始接触的时候，似乎大家都会觉这种体验实现起来，会比较困难。难点在于:
头部的背景图在推上去的过程中，慢慢的变得不可见了，整个区域的颜色变成的暗黑色，然后标题出现了。 StatusBar变的透明，且空间可以被利用起来，看我们的图片就顶到了顶 了。 我们的viewpager推到actionbar的下方的时候，就固定在了actionbar的下方，不能在往上面推了。 底部有一个控件，随着列表的向上滑动，它退出视角范围，以便于给出更多的空间来展示列表，其实整个沉浸式体验都是为了给列表留出更多的空间来展示。 好，总结起来以上就是我们的问题，也是需要解决的，一个一个解决了，这种需求也就实现了，那么，我们如何去一步一步来解决以上的问题呢？
1、头部背景和标题的渐隐渐现 首先，我们来分析第一个问题，头部的背景图在推上去的过程中，慢慢的变得不可见了，这种听起来好像是某种collapse，因此，很容易让人想到CollapsingToolbarLayout，如果你想要比较容易的了解CollapsingToolbarLayout
应用，建议看这位兄台的文章，他给也给了一个动画，比较详细的介绍了这个的应用，例如：
CollapsingToolbarLayout
对于里面的用法，我这里不作讲解了，但是如果你不了解这个布局的应用，我强烈建议你好好了解一下，才能继续下面走，只是想说明一下，走到这里，你有一个坑需要去填，那就是我们的标题动画可以不是这样的，而且，还是标题还是居中的，注意，这里的实现，标题不是居中的，是靠左的，这本来是Android设计规范，但是设计师偏偏不买Android规范的账，因此，我们必须躺过这个坑，然后，从Stack Overflow上了解到一个issue：
代码解读
复制代码
&lt;android.support.v7.widget.Toolbar android:id=&#34;@&#43;id/toolbar_top&#34; android:layout_height=&#34;wrap_content&#34; android:layout_width=&#34;match_parent&#34; android:minHeight=&#34;?attr/actionBarSize&#34; android:background=&#34;@color/action_bar_bkgnd&#34; app:theme=&#34;@style/ToolBarTheme&#34; &gt; &lt;TextView android:layout_width=&#34;wrap_content&#34; android:layout_height=&#34;wrap_content&#34; android:text=&#34;Toolbar Title&#34; android:layout_gravity=&#34;center&#34; android:id=&#34;@&#43;id/toolbar_title&#34; /&gt; &lt;/android.support.v7.widget.Toolbar&gt;
...</p>
  </div>
  <footer class="entry-footer"><span title='2018-10-25 00:00:00 +0000 UTC'>十月 25, 2018</span>&nbsp;·&nbsp;3 分钟&nbsp;·&nbsp;brzhang</footer>
  <a class="entry-link" aria-label="post link to Android如何实现超级棒的沉浸式体验" href="http://localhost:1313/posts/juejin/android%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E8%B6%85%E7%BA%A7%E6%A3%92%E7%9A%84%E6%B2%89%E6%B5%B8%E5%BC%8F%E4%BD%93%E9%AA%8C/"></a>
</article>
    </main>
    
<footer class="footer">
        <span><a href="https://beian.miit.gov.cn/">粤ICP备2023039897号-1</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
