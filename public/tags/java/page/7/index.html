<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Java | PaperMod</title>
<meta name="keywords" content="">
<meta name="description" content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod">
<meta name="author" content="Theme PaperMod">
<link rel="canonical" href="http://localhost:1313/tags/java/">
<meta name="google-site-verification" content="XYZabc">
<link crossorigin="anonymous" href="/assets/css/stylesheet.7b92bf4867c997b58ec50f63451b83777173d5bd5593376852abd85746d09d71.css" integrity="sha256-e5K/SGfJl7WOxQ9jRRuDd3Fz1b1VkzdoUqvYV0bQnXE=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="apple-touch-icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="mask-icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="http://localhost:1313/tags/java/index.xml">
<link rel="alternate" hreflang="zh" href="http://localhost:1313/tags/java/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><meta property="og:title" content="Java" />
<meta property="og:description" content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://localhost:1313/tags/java/" />
<meta property="og:image" content="http://localhost:1313/images/papermod-cover.png" />



<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="http://localhost:1313/images/papermod-cover.png" />
<meta name="twitter:title" content="Java"/>
<meta name="twitter:description" content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod"/>

</head>

<body class="list dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Home (Alt + H)">
                        
                    <img src="http://localhost:1313/images/msg_hu15231257772499651944.png" alt="" aria-label="logo"
                        height="20">Home</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://github.com/adityatelange/hugo-PaperMod/wiki/" title="WiKi">
                    <span>WiKi</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header"><div class="breadcrumbs"><a href="http://localhost:1313/">主页</a>&nbsp;»&nbsp;<a href="http://localhost:1313/tags/">Tags</a></div>
  <h1>
    Java
    <a href="/tags/java/index.xml" title="RSS" aria-label="RSS">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
        stroke-linecap="round" stroke-linejoin="round" height="23">
        <path d="M4 11a9 9 0 0 1 9 9" />
        <path d="M4 4a16 16 0 0 1 16 16" />
        <circle cx="5" cy="19" r="1" />
      </svg>
    </a>
  </h1>
</header>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">一道Java面试题引发的思考
    </h2>
  </header>
  <div class="entry-content">
    <p> 转载请注明出处：juejin.cn/post/684490…
本文出自 容华谢后的博客
0.写在前面 这两天做了一道常见的Java面试题，毫无悬念的做错了，在运行出正确答案之后，发现以自己的知识储备竟然无法完整的解释为什么，十分惭愧，于是有了这篇文章，对其进行总结反思。
1.题目 先看下题目:
typescript
代码解读
复制代码
public class Test { public static void main(String[] args) { String str = &#34;hello&#34;; change(str); System.out.println(str); A a = new A(&#34;hello&#34;); change(a); System.out.println(a.str); A a1 = new A(&#34;hello&#34;); change1(a1); System.out.println(a1.str); } private static void change(String str) { str = &#34;changed&#34;; } private static void change(A a) { a = new A(&#34;changed&#34;); } private static void change1(A a1) { a1.str = &#34;changed&#34;; } } class A { public String str; public A(String str) { this.str = str; } }
...</p>
  </div>
  <footer class="entry-footer"><span title='2019-10-25 00:00:00 +0000 UTC'>十月 25, 2019</span>&nbsp;·&nbsp;2 分钟&nbsp;·&nbsp;容华谢后</footer>
  <a class="entry-link" aria-label="post link to 一道Java面试题引发的思考" href="http://localhost:1313/posts/juejin/%E4%B8%80%E9%81%93java%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BC%95%E5%8F%91%E7%9A%84%E6%80%9D%E8%80%83/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">没有把Kafka概念讲的透彻，我就去手把手教你
    </h2>
  </header>
  <div class="entry-content">
    <p> 点赞再看，Java进阶一大半
消息队列老大哥Kafka在官网的介绍是这么说的，真是霸气：全球财富前100强公司有超过80%信任并使用Kafka。Kafka目前在GitHub目前也已经有star数27.6k、fork数13.6k。
More than 80% of all Fortune 100 companies trust, and use Kafka.
大家好，我是南哥。
一个Java学习与进阶的领路人，相信对你通关面试进入心心念念的公司有所帮助。
Kafka历史Star趋势图
本文收录在我开源的《Java学习进阶指南》中，涵盖了在大厂工作的Javaer都不会不懂的核心知识、面试重点。相信能帮助到大家在Java成长路上不迷茫，南哥希望收到大家的 ⭐ Star ⭐支持我完善下去。GitHub地址：github.com/hdgaadd/Jav…。
1. Kafka概念 1.1 Kafka组成模块 面试官：你先说说Kafka由什么模块组成？
Kafka其实是一款基于发布与订阅模式的消息系统，如果按常理来设计，大家是不是把消息发送者的消息直接发送给消息消费者？但Kafka并不是这么设计的，Kafka消息的生产者会对消息进行分类，再发送给中间的消息服务系统，而消息消费者通过订阅某分类的消息去接受特定类型的消息。
其实这么设计的目的也是为了满足大量业务消息的接入，要是单一的消息发送和接收，那开个进程的管道通信就可以了。另外如果大家对设计模式的发布/订阅模式熟悉的话，对Kafka的设计理念会更容易理解。
总的来说，Kafka由五大模块组成，大家要理解好这些模块的功能作用：消息生产者、消息消费者、Broker、主题Topic、分区Partition。
（1）消息生产者
消息生产者是消息的创造者，每发送一条消息都会发送到特定的主题上去。
（2）消息消费者
消息生产者和消费者都是Kafka的客户端，消息消费者顾名思义作为消息的读取者、消费者。同时Kafka很灵活的一点是，一个消费者可以订阅多个主题，而且一个主题消息也可被不同消息分组的多个消费者处理。这就给我们变化多端的业务设计带来了众多可能性了，方便大家自由发挥。
（3）Broker
孤零零部署在Linux的Kafka服务器被称为Broker，也就是我上文提到的中间的消息服务系统，大家不要小瞧他，单台Broker可以轻松处理每秒百万级的消息量。Broker日常工作内容就是接收消息生产者的消息，为每条消息设置偏移量，最后提交到磁盘进行持久化保存。
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-07-03 00:00:00 +0000 UTC'>七月 3, 2024</span>&nbsp;·&nbsp;1 分钟&nbsp;·&nbsp;JavaSouth南哥</footer>
  <a class="entry-link" aria-label="post link to 没有把Kafka概念讲的透彻，我就去手把手教你" href="http://localhost:1313/posts/juejin/%E6%B2%A1%E6%9C%89%E6%8A%8Akafka%E6%A6%82%E5%BF%B5%E8%AE%B2%E7%9A%84%E9%80%8F%E5%BD%BB%E6%88%91%E5%B0%B1%E5%8E%BB%E6%89%8B%E6%8A%8A%E6%89%8B%E6%95%99%E4%BD%A0/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">为何我建议你学会Queue集合
    </h2>
  </header>
  <div class="entry-content">
    <p> 先赞后看，南哥助你Java进阶一大半
PriorityQueue的底层数据结构就如andrewlock.net网站提供的图一样，虽然PriorityQueue是一个平衡二叉堆，但JDK底层的实现却是：一个普普通通的二维数组！！
我是南哥，一个Java学习与进阶的领路人，相信对你通关面试、拿下Offer进入心心念念的公司有所帮助。
⭐⭐⭐本文收录在《Java学习/进阶/面试指南》：github..JavaSouth
精彩文章推荐
面试官没想到一个ArrayList，我都能跟他扯半小时 《我们一起进大厂》系列-Zookeeper基础 再有人问你WebSocket为什么牛逼，就把这篇文章发给他！ 全网把Kafka概念讲的最透彻的文章，别无二家 可能是最漂亮的Java I/O流详解 1. Queue集合 1.1 Queue集合概述 面试官：你说说Queue集合都有什么常用类？
JDK源码对Queue集合是这么解释的，大家看看。
A collection designed for holding elements prior to processing.
专为在处理之前保存元素而设计的集合。
南哥是这么理解的，List集合用于存储常用元素、Map集合用于存储具有映射关系的元素、Set集合用于存储唯一性的元素。Queue集合呢？所有的数据结构都是为了解决业务问题而生，而Queue集合这种数据结构能够存储具有先后时间关系的元素，很适用于在业务高峰期，需要缓存当前任务的业务场景。像Kafka、RabbitMQ、RocketMQ都是队列任务这种思想。
Queue集合底层接口提供的方法很简单，一共有 6 个。
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-09-03 00:00:00 +0000 UTC'>九月 3, 2024</span>&nbsp;·&nbsp;2 分钟&nbsp;·&nbsp;JavaSouth南哥</footer>
  <a class="entry-link" aria-label="post link to 为何我建议你学会Queue集合" href="http://localhost:1313/posts/juejin/%E4%B8%BA%E4%BD%95%E6%88%91%E5%BB%BA%E8%AE%AE%E4%BD%A0%E5%AD%A6%E4%BC%9Aqueue%E9%9B%86%E5%90%88/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">ConcurrentHashMap源码深度解析（java7）——原来如此简单(写的真好，建议收藏）
    </h2>
  </header>
  <div class="entry-content">
    <p>一、前言 ConcurrentHashMap算是java基础中非常基本的知识点，不仅在日常开发中经常用到，面试中也是经久不衰的话题。它基本沿用HashMap的接口定义，使得即使不了解其底层原理，也能无缝切换。
谈到ConcurrentHashMap，经常会拿java7和java8的实现做对比。虽然现在java的版本更新很快，但是常用的还是java8，而看似java7的实现方式已经过时了，好像没必要去了解了，非也。
ConcurrentHashMap在java7中的实现有很多值得学习借鉴的地方，比如基本的数据结构数组链表的应用，并发开发，哈希算法等都可以学以致用。而且了解了java7的实现细节，才能更好的明白java8中为什么要做一些看似莫名其妙的优化？
轮子好用，但是造轮子更好玩。
ConcurrentHashMap的数据结构是怎样的？ ConcurrentHashMap的容量为什么是2的整数次方？ 如何实现的并发安全？是读写分离吗？get需要加锁吗？ 哈希冲突体现在哪里，如何解决？ 扩容思想是什么，怎么扩容？ 带着问题探索源码，才能更容易get到作者的良苦用心。
二、初始化 ConcurrentHashMap 初始化可自定义传入初始容量、负载因子和并发级别，但并不是单纯将值赋值给一些成员变量，而是需要经过计算，找到适合的初始值：
initialCapacity 初始容量，用于计算每个Segment中HashEntry数组的初始长度。 loadFactor 负载因子，用于计算每个Segment中HashEntry数组的扩容阈值。 concurrencyLevel 并发级别，用于计算Segment数组的固定长度。 初始化过程主要是对Segment数组和其内部的HashEntry数组进行初始化：
（1）通过concurrencyLevel计算ssize作为Segment数组的固定长度，需要确保计算的ssize是大于等于concurrencyLevel且离concurrencyLevel最近的2的整数次方的数值。如默认concurrencyLevel=16，则ssize=16；若自定义传入concurrencyLevel=15，则ssize=16；concurrencyLevel=17，则ssize=32。
（2）计算用于对key的哈希值进行映射成数组下标的segmentShift（偏移量）和segmentMask（掩码）（int index=(hash &gt;&gt;&gt; segmentShift) &amp; segmentMask）：
segmentShift，key的哈希值右移segmentShift位，最高sshift位用于哈希映射。 segmentMask，ssize的掩码，因为ssize为2的整数次方值，二进制为1后面若干0，掩码就是ssize-1，如2（10）掩码（1）、4（100）掩码3（11）、8（1000）掩码7（111）。 （3）通过initialCapacity 和ssize平均计算每个Segment内部HashEntry数组的初始长度，但并不是简单的int c = initialCapacity / ssize，而是像计算ssize一样，找到一个大于等于c且离c最近的2的整数次方数值。
（4）初始化第一个Segment，其他Segment等添加元素时用到了再创建。
（5）初始化Segment数组。
java
代码解读
...</p>
  </div>
  <footer class="entry-footer"><span title='2021-03-25 00:00:00 +0000 UTC'>三月 25, 2021</span>&nbsp;·&nbsp;11 分钟&nbsp;·&nbsp;徐同学呀</footer>
  <a class="entry-link" aria-label="post link to ConcurrentHashMap源码深度解析（java7）——原来如此简单(写的真好，建议收藏）" href="http://localhost:1313/posts/juejin/concurrenthashmap%E6%BA%90%E7%A0%81%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90java7%E5%8E%9F%E6%9D%A5%E5%A6%82%E6%AD%A4%E7%AE%80%E5%8D%95%E5%86%99%E7%9A%84%E7%9C%9F%E5%A5%BD%E5%BB%BA%E8%AE%AE%E6%94%B6%E8%97%8F/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">从根上理解Mybatis的一级、二级缓存（完）
    </h2>
  </header>
  <div class="entry-content">
    <p>1. 书接上回 大家好，我是方圆，上一篇帖子从根上理解Mybatis的一级、二级缓存（一）写了一级缓存，这篇写二级缓存，彻底搞明白就得了！
2. 准备工作 上一篇帖子中User和Department实体类依然要用，这里就不再赘述了 要启用二级缓存，需要在xml文件中指定cache标签，UserMapper.xml和DepartmentMapper.xml中我们要用到的东西如下 xml
代码解读
复制代码
UserMapper.xml &lt;select id=&#34;findAll&#34; resultType=&#34;User&#34;&gt; select * from user &lt;/select&gt; &lt;cache /&gt;
xml
代码解读
复制代码
Department.xml &lt;select id=&#34;findAll&#34; resultType=&#34;entity.Department&#34;&gt; select * from department; &lt;/select&gt; &lt;cache readOnly=&#34;true&#34;/&gt;
...</p>
  </div>
  <footer class="entry-footer"><span title='2022-11-09 00:00:00 +0000 UTC'>十一月 9, 2022</span>&nbsp;·&nbsp;4 分钟&nbsp;·&nbsp;方圆想当图灵</footer>
  <a class="entry-link" aria-label="post link to 从根上理解Mybatis的一级、二级缓存（完）" href="http://localhost:1313/posts/juejin/%E4%BB%8E%E6%A0%B9%E4%B8%8A%E7%90%86%E8%A7%A3mybatis%E7%9A%84%E4%B8%80%E7%BA%A7%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98%E5%AE%8C/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="prev" href="http://localhost:1313/tags/java/page/6/">
      «&nbsp;上一页&nbsp;6/16
    </a>
    <a class="next" href="http://localhost:1313/tags/java/page/8/">下一页&nbsp;8/16&nbsp;»
    </a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
        <span><a href="https://beian.miit.gov.cn/">粤ICP备2023039897号-1</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
