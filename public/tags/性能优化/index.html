<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>性能优化 | PaperMod</title>
<meta name="keywords" content="">
<meta name="description" content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod">
<meta name="author" content="Theme PaperMod">
<link rel="canonical" href="http://localhost:1313/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">
<meta name="google-site-verification" content="XYZabc">
<link crossorigin="anonymous" href="/assets/css/stylesheet.7b92bf4867c997b58ec50f63451b83777173d5bd5593376852abd85746d09d71.css" integrity="sha256-e5K/SGfJl7WOxQ9jRRuDd3Fz1b1VkzdoUqvYV0bQnXE=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="apple-touch-icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="mask-icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="http://localhost:1313/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/index.xml">
<link rel="alternate" hreflang="zh" href="http://localhost:1313/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><meta property="og:title" content="性能优化" />
<meta property="og:description" content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://localhost:1313/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" />
<meta property="og:image" content="http://localhost:1313/images/papermod-cover.png" />



<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="http://localhost:1313/images/papermod-cover.png" />
<meta name="twitter:title" content="性能优化"/>
<meta name="twitter:description" content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod"/>

</head>

<body class="list dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Home (Alt + H)">
                        
                    <img src="http://localhost:1313/images/msg_hu15231257772499651944.png" alt="" aria-label="logo"
                        height="20">Home</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://github.com/adityatelange/hugo-PaperMod/wiki/" title="WiKi">
                    <span>WiKi</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header"><div class="breadcrumbs"><a href="http://localhost:1313/">主页</a>&nbsp;»&nbsp;<a href="http://localhost:1313/tags/">Tags</a></div>
  <h1>
    性能优化
    <a href="/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/index.xml" title="RSS" aria-label="RSS">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
        stroke-linecap="round" stroke-linejoin="round" height="23">
        <path d="M4 11a9 9 0 0 1 9 9" />
        <path d="M4 4a16 16 0 0 1 16 16" />
        <circle cx="5" cy="19" r="1" />
      </svg>
    </a>
  </h1>
</header>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">H5页面加载慢？一招秒解！WebView性能优化实战！
    </h2>
  </header>
  <div class="entry-content">
    <p>**
一、背景 **
WebView作为展示H5页面的重要容器，它在移动应用开发中扮演了举足轻重的角色。然而，WebView性能瓶颈和H5页面加载缓慢的问题经常困扰着开发者。实现H5页面的秒开体验不仅可以极大地提升用户体验，还能够提高应用的整体性能和用户满意度。
通过本文，我们将详细介绍一系列WebView优化方法，从预加载技术到网络优化，以及内存管理等方面展开讨论，这些方法将帮助你实现H5页面的秒开体验。
**
二、常见的性能问题 **
WebView和H5页面在现代移动应用中广泛应用，但由于其性能瓶颈，常常导致用户体验不佳。以下是WebView和H5页面常见的性能问题及其原因：
WebView性能瓶颈
1、初始化时间长：WebView初始化时间较长，尤其是在首次加载时，可能导致页面响应延迟。
2、脚本执行速度：JavaScript脚本执行速度是影响WebView性能的关键因素之一。在渲染过程中，脚本执行会阻塞页面解析，导致加载时间加长。
3、资源加载较慢：由于WebView需要加载外部资源（CSS、JS、图片等），网络速度和延迟严重影响了加载速度。
H5页面加载缓慢的原因
1、复杂的页面内容：H5页面中的多媒体元素（如视频、图片等）和复杂的DOM结构都会显著增加加载时间。
2、频繁的重绘：频繁的页面重绘和布局调整会大幅增加渲染时间，导致页面卡顿。
3、网络依赖：H5页面通常依赖于网络资源，网络速度慢会直接影响页面加载速度。
4、动画和交互：页面中如果包含大量动画和交互效果，GPU和CPU的负载会增加，导致页面渲染变慢。
用户体验的影响
延迟加载和卡顿：页面加载出现延迟或卡顿，会极大地降低用户体验，用户可能失去耐心并退出应用。
5、白屏现象：加载页面时长时间显示白屏，会让用户感到困惑和不耐烦。
6、高内存消耗：复杂的H5页面可能导致内存消耗过高，影响整体应用的性能。
了解了这些常见的性能瓶颈和问题后，我们可以针对性地采用优化措施，从而提升WebView和H5页面的加载速度和用户体验。
三、优化方向 优化方向，主要是通过预加载、渲染优化、网络优化和内存存储优化，通过这些技术手段可以显著提升Web应用的性能和用户体验。下面会分别介绍这几种优化方式。
3.1、预加载 主要是通过提前准备的方式，就好比我们开学前，提前准备好书包、学习工具一样。在这里我们称之为预加载。实现预加载的方式主要是以下两个：
1、预加载WebView：在用户安装或首次启动应用时，后台初始化WebView，在用户点击相关页面时立即显示。
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-06-17 00:00:00 +0000 UTC'>六月 17, 2024</span>&nbsp;·&nbsp;2 分钟&nbsp;·&nbsp;叶知秋水</footer>
  <a class="entry-link" aria-label="post link to H5页面加载慢？一招秒解！WebView性能优化实战！" href="http://localhost:1313/posts/juejin/h5%E9%A1%B5%E9%9D%A2%E5%8A%A0%E8%BD%BD%E6%85%A2%E4%B8%80%E6%8B%9B%E7%A7%92%E8%A7%A3webview%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">剖析JS里的流式请求—ReadableStream
    </h2>
  </header>
  <div class="entry-content">
    <p>对于XMLHttpRequest和Fetch，作为前后端通信的主要协议，相信大家都烂熟于心了，它允许我们发送Http请求，以文本格式跟后端通信。那Web Streams API，你用过么？一种在浏览器操作Streams流的API。今天主要介绍一下ReadableStream。
1、什么是流 在介绍流之前，我们先来了解一下什么是流。如名称所示，流就像水流一样，会持续性地从一段流动到另一端，只有当上游停止输入时，才会断流。而在浏览器中流会将你想要的资源分成一个个小的分块，然后按位处理它。
实际上，流无处不在，例如看视频时不用完整下载完才可以播放，而是可以边缓冲区边播，又或者我们看到的图像逐渐地显示。
但曾经这些对于 JavaScript 是不可用的。以前，如果我们想要处理某种资源（如视频、文本文件等），我们必须下载完整的文件，等待它反序列化成适当的格式，然后在完整地接收到所有的内容后再进行处理。
Web Streams API 最初是在 2017 年左右开始在浏览器中得到支持的。它被设计为一个标准 API，用于处理数据流，类似于 Node.js 中的 Streams API，但更加现代和统一。Web Streams API 包括 ReadableStream、WritableStream 和 TransformStream，它们可以用于实现复杂的数据流处理逻辑。
具体来说，Web Streams API 被引入到 WHATWG（Web Hypertext Application Technology Working Group）的 Streams 规范中，随后逐渐被主流浏览器厂商所采纳。到了 2018 年，大多数现代浏览器已经开始支持或部分支持这个 API1116。
随着时间的推移，Web Streams API 的支持度不断提高，并且被集成到了各种 Web 平台和工具中。例如，Node.js 在其后续版本中也开始支持 Web Streams API，允许开发者使用统一的 Streams API 来处理服务器端和客户端的流数据。
2、API介绍 了解了Streams API之后，我们来介绍一下今天的主角ReadableStream。
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-06-27 00:00:00 +0000 UTC'>六月 27, 2024</span>&nbsp;·&nbsp;4 分钟&nbsp;·&nbsp;叶知秋水</footer>
  <a class="entry-link" aria-label="post link to 剖析JS里的流式请求—ReadableStream" href="http://localhost:1313/posts/juejin/%E5%89%96%E6%9E%90js%E9%87%8C%E7%9A%84%E6%B5%81%E5%BC%8F%E8%AF%B7%E6%B1%82readablestream/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">面试被问到如何一次性渲染十万条数据，我该怎么答？
    </h2>
  </header>
  <div class="entry-content">
    <p>引言 在前端开发中，性能优化是一个永恒的话题。我们经常需要处理和展示大量的数据，所以当面试官问到：“如何一次性渲染十万条数据而不影响用户体验？”你会怎么回答？直接渲染十万条数据可能会导致页面卡顿、响应迟缓，甚至浏览器崩溃。本篇文章详细介绍时间分片和虚拟列表的解决方案，帮助你轻松拿下面试~
前置知识 js是单线程的，会有一个同步和异步的概念，为了确保主线程不会被长时间阻塞，js引擎就会依照事件循环机制来执行代码：
先执行同步代码（也属于是宏任务） 同步执行完毕后，检查是否有异步代码需要执行 执行所有的微任务 微任务执行完毕后，若有需要就会渲染页面 执行宏任务（也就是下一次事件循环开始） 微任务：Promise.then()、process.nextTick()、async/await、MutationObserver()等 宏任务：script(开启一整份代码的执行)、setTimeout、setInterval、setImmediate、I/O操作、UI-Rendering、同步代码等 时间分片 v8引擎执行 js 代码速度很快，然而渲染页面时间相对来说要长很多。如果直接将十万条数据给到渲染引擎，很容易造成页面卡顿或白屏，所以一次性渲染十万条数据的关键在于——要让浏览器的渲染线程尽量均匀流畅地将数据渲染上去。
时间分片的核心思想是将一个大的任务分解成多个小的任务，使用 setTimeout或requestAnimationFrame 分批次地渲染一部分数据。
使用 setTimeout 初始化：定义总数据条数 total、每次渲染的数据条数 once、需要渲染的总次数 page 和当前渲染的索引 index。 递归渲染：loop 函数通过递归调用来逐步渲染数据。每次for循环渲染 once 条数据，并使用 setTimeout 将渲染操作放入下一个事件循环中。 定时器：setTimeout 确保每次渲染操作不会阻塞主线程，从而保持页面的流畅性和响应性。 结束条件：当所有数据都渲染完毕后（即 curTotal - pageCount &lt;= 0），递归调用停止。 xml
代码解读
复制代码
&lt;body&gt; &lt;ul id=&#34;container&#34;&gt;&lt;/ul&gt; &lt;script&gt; let ul = document.getElementById(&#39;container&#39;); const total = 100000 // 总数据条数 let once = 20 // 每次渲染条数 let page = total / once // 需要渲染的总次数 let index = 0 // 每条记录的索引，防止数据丢失或没有渲染到最后一条 // 两个参数：剩余需要渲染的数据条数，当前渲染的索引 function loop(curTotal, curIndex) { let pageCount = Math.min(once, curTotal) setTimeout(() =&gt; { for (let i = 0; i &lt; pageCount; i&#43;&#43;) { let li = document.createElement(&#39;li&#39;); li.innerText = curIndex &#43; i &#43; &#39;:&#39; &#43; ~~(Math.random() * total); ul.appendChild(li); } loop(curTotal - pageCount, curIndex &#43; pageCount) }) } loop(total, index) &lt;/script&gt; &lt;/body&gt;
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-10-02 00:00:00 +0000 UTC'>十月 2, 2024</span>&nbsp;·&nbsp;3 分钟&nbsp;·&nbsp;今天一定晴q</footer>
  <a class="entry-link" aria-label="post link to 面试被问到如何一次性渲染十万条数据，我该怎么答？" href="http://localhost:1313/posts/juejin/%E9%9D%A2%E8%AF%95%E8%A2%AB%E9%97%AE%E5%88%B0%E5%A6%82%E4%BD%95%E4%B8%80%E6%AC%A1%E6%80%A7%E6%B8%B2%E6%9F%93%E5%8D%81%E4%B8%87%E6%9D%A1%E6%95%B0%E6%8D%AE%E6%88%91%E8%AF%A5%E6%80%8E%E4%B9%88%E7%AD%94/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">掌握WebWorkers：彻底解锁前端多线程编程的潜力
    </h2>
  </header>
  <div class="entry-content">
    <p>序言 在实际项目开发中web Workers虽然很少用，但确实很有用（在某些场景下）。
JavaScript单线程的特性意味着所有任务都在同一个线程上按顺序执行，复杂的计算或大量的数据处理可能会导致界面卡顿，影响用户体验。
然而，Web Workers的出现彻底改变了这一局面，它允许我们在后台线程中运行脚本，避免阻塞主线程，从而提升了应用的性能和响应能力。
背景 在近期的项目开发实践中，我们遇到了浏览器性能瓶颈及其节能机制的严格限制等相对较棘手的问题。幸运的是，借助Web Worker这些问题都得到了有效的解决。接下来将详细分享Web Worker在这些场景中的应用及其示例，希望能为你带来启发和帮助。 应用场景及示例 《简单示例：在worker中计算两个数的和》 创建myWorker.js文件
javascript
代码解读
复制代码
// Web Workers的部分代码（在Workers中计算两个数的和） self.onmessage = function(e) { console.log(&#39;Message received from main script&#39;); const result = e.data[0] &#43; e.data[1]; // 假设我们的任务是计算两个数的和 // 将结果发送回主线程 self.postMessage(result); console.log(&#39;Posting message back to main script&#39;); }
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-04-23 00:00:00 +0000 UTC'>四月 23, 2024</span>&nbsp;·&nbsp;2 分钟&nbsp;·&nbsp;tager</footer>
  <a class="entry-link" aria-label="post link to 掌握WebWorkers：彻底解锁前端多线程编程的潜力" href="http://localhost:1313/posts/juejin/%E6%8E%8C%E6%8F%A1webworkers%E5%BD%BB%E5%BA%95%E8%A7%A3%E9%94%81%E5%89%8D%E7%AB%AF%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B%E7%9A%84%E6%BD%9C%E5%8A%9B/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">vue3响应式高阶用法，中高级前端必会的性能优化技巧
    </h2>
  </header>
  <div class="entry-content">
    <p>前言： 翻别人代码时，总结发现极大部分使用vue3的人只会用ref和reactive处理响应式数据无论什么场景都是，但vue官方针对某些应用场景有其它的更好用的响应式api实现响应式，从而达到更好的性能效果。例如深层的树状数据结构可以通过shallowRef实现浅层响应式，不会被深层递归地转为响应式。本文通过例子详细总结几种vue3响应式的高阶用法。
一、 shallowRef() 简述：ref的浅层作用形式。shallowRef与普通的 ref 的区别在于，shallowRef 不会对对象进行深度的响应式处理，也就是 shallowRef 包含的对象内部的属性发生变化时，shallowRef 本身不会触发重新渲染或响应式更新，所以使用shallowRef时只关心顶层的引用变化。
代码示例：
ini
代码解读
复制代码
&lt;script lang=&#34;ts&#34; setup&gt; import { shallowRef } from &#39;vue&#39;; const data = shallowRef({ name: &#39;天天鸭&#39;, age: 18 }); // 修改顶层引用会触发响应式更新 data.value = { name: &#39;Bob&#39;, age: 20 }; // 修改内部属性不会触发响应式更新 data.value.age = 30; &lt;/script&gt;
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-07-22 00:00:00 +0000 UTC'>七月 22, 2024</span>&nbsp;·&nbsp;3 分钟&nbsp;·&nbsp;天天鸭</footer>
  <a class="entry-link" aria-label="post link to vue3响应式高阶用法，中高级前端必会的性能优化技巧" href="http://localhost:1313/posts/juejin/vue3%E5%93%8D%E5%BA%94%E5%BC%8F%E9%AB%98%E9%98%B6%E7%94%A8%E6%B3%95%E4%B8%AD%E9%AB%98%E7%BA%A7%E5%89%8D%E7%AB%AF%E5%BF%85%E4%BC%9A%E7%9A%84%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E6%8A%80%E5%B7%A7/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="next" href="http://localhost:1313/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/page/2/">下一页&nbsp;2/2&nbsp;»
    </a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
        <span><a href="https://beian.miit.gov.cn/">粤ICP备2023039897号-1</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
