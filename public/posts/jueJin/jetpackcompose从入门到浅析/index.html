<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>JetpackComposeä»å…¥é—¨åˆ°æµ…æ | PaperMod</title>
<meta name="keywords" content="AndroidJetpack, Android">
<meta name="description" content="JetpackComposeæ˜¯ç”¨äºæ„å»ºåŸç”ŸAndroidUIçš„ç°ä»£å·¥å…·åŒ…ã€‚JetpackComposeä½¿ç”¨æ›´å°‘çš„ä»£ç ï¼Œå¼ºå¤§çš„å·¥å…·å’Œç›´è§‚çš„KotlinAPIï¼Œç®€åŒ–å¹¶åŠ é€Ÿäº†Androidä¸Šçš„UI">
<meta name="author" content="è‹¥ä¸¶ç›¸è§">
<link rel="canonical" href="http://localhost:1313/posts/juejin/jetpackcompose%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%B5%85%E6%9E%90/">
<meta name="google-site-verification" content="XYZabc">
<link crossorigin="anonymous" href="/assets/css/stylesheet.7b92bf4867c997b58ec50f63451b83777173d5bd5593376852abd85746d09d71.css" integrity="sha256-e5K/SGfJl7WOxQ9jRRuDd3Fz1b1VkzdoUqvYV0bQnXE=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="apple-touch-icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="mask-icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="http://localhost:1313/posts/juejin/jetpackcompose%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%B5%85%E6%9E%90/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><meta property="og:title" content="JetpackComposeä»å…¥é—¨åˆ°æµ…æ" />
<meta property="og:description" content="JetpackComposeæ˜¯ç”¨äºæ„å»ºåŸç”ŸAndroidUIçš„ç°ä»£å·¥å…·åŒ…ã€‚JetpackComposeä½¿ç”¨æ›´å°‘çš„ä»£ç ï¼Œå¼ºå¤§çš„å·¥å…·å’Œç›´è§‚çš„KotlinAPIï¼Œç®€åŒ–å¹¶åŠ é€Ÿäº†Androidä¸Šçš„UI" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/posts/juejin/jetpackcompose%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%B5%85%E6%9E%90/" />
<meta property="og:image" content="http://localhost:1313/images/papermod-cover.png" />
<meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-07-28T00:00:00+00:00" />
<meta property="article:modified_time" content="2021-07-28T00:00:00+00:00" />


<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="http://localhost:1313/images/papermod-cover.png" />
<meta name="twitter:title" content="JetpackComposeä»å…¥é—¨åˆ°æµ…æ"/>
<meta name="twitter:description" content="JetpackComposeæ˜¯ç”¨äºæ„å»ºåŸç”ŸAndroidUIçš„ç°ä»£å·¥å…·åŒ…ã€‚JetpackComposeä½¿ç”¨æ›´å°‘çš„ä»£ç ï¼Œå¼ºå¤§çš„å·¥å…·å’Œç›´è§‚çš„KotlinAPIï¼Œç®€åŒ–å¹¶åŠ é€Ÿäº†Androidä¸Šçš„UI"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://localhost:1313/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "JetpackComposeä»å…¥é—¨åˆ°æµ…æ",
      "item": "http://localhost:1313/posts/juejin/jetpackcompose%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%B5%85%E6%9E%90/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "JetpackComposeä»å…¥é—¨åˆ°æµ…æ",
  "name": "JetpackComposeä»å…¥é—¨åˆ°æµ…æ",
  "description": "JetpackComposeæ˜¯ç”¨äºæ„å»ºåŸç”ŸAndroidUIçš„ç°ä»£å·¥å…·åŒ…ã€‚JetpackComposeä½¿ç”¨æ›´å°‘çš„ä»£ç ï¼Œå¼ºå¤§çš„å·¥å…·å’Œç›´è§‚çš„KotlinAPIï¼Œç®€åŒ–å¹¶åŠ é€Ÿäº†Androidä¸Šçš„UI",
  "keywords": [
    "AndroidJetpack", "Android"
  ],
  "articleBody": "æ¦‚è¿° Jetpack Compose 1.0 æ­£å¼å‘å¸ƒï¼æ‰“é€ åŸç”Ÿ UI çš„ Android ç°ä»£å·¥å…·åŒ…\nJetpack Composeæ˜¯ç”¨äºæ„å»ºåŸç”ŸAndroid UIçš„ç°ä»£å·¥å…·åŒ…ã€‚ Jetpack Composeä½¿ç”¨æ›´å°‘çš„ä»£ç ï¼Œå¼ºå¤§çš„å·¥å…·å’Œç›´è§‚çš„Kotlin APIï¼Œç®€åŒ–å¹¶åŠ é€Ÿäº†Androidä¸Šçš„UIå¼€å‘ã€‚è¿™æ˜¯Android Developers å®˜ç½‘å¯¹å®ƒçš„æè¿°ã€‚\næ¦‚è¿°å¼•è‡ªï¼š\nä½œè€…ï¼šä¾ç„¶èŒƒç‰¹ç¨€è¥¿\né“¾æ¥ï¼šjuejin.cn/post/684490â€¦\n0. å£°æ˜å¼ UI çš„å‰ä¸–ä»Šç”Ÿ å…¶å®å£°æ˜å¼ UI å¹¶ä¸æ˜¯ä»€ä¹ˆæ–°æŠ€æœ¯ï¼Œæ—©åœ¨ 2006 å¹´ï¼Œå¾®è½¯å°±å·²ç»å‘å¸ƒäº†å…¶æ–°ä¸€ä»£ç•Œé¢å¼€å‘æ¡†æ¶ WPFï¼Œå…¶é‡‡ç”¨äº† XAML æ ‡è®°è¯­è¨€ï¼Œæ”¯æŒåŒå‘æ•°æ®ç»‘å®šã€å¯å¤ç”¨æ¨¡æ¿ç­‰ç‰¹æ€§ã€‚\n2010 å¹´ï¼Œç”±è¯ºåŸºäºšé¢†å¯¼çš„ Qt å›¢é˜Ÿä¹Ÿæ­£å¼å‘å¸ƒäº†å…¶ä¸‹ä¸€ä»£ç•Œé¢è§£å†³æ–¹æ¡ˆ Qt Quickï¼ŒåŒæ ·ä¹Ÿæ˜¯å£°æ˜å¼ï¼Œç”šè‡³ Qt Quick èµ·åˆçš„åå­—å°±æ˜¯ Qt Declarativeã€‚QML è¯­è¨€åŒæ ·æ”¯æŒæ•°æ®ç»‘å®šã€æ¨¡å—åŒ–ç­‰ç‰¹æ€§ï¼Œæ­¤å¤–è¿˜æ”¯æŒå†…ç½® JavaScriptï¼Œå¼€å‘è€…åªç”¨ QML å°±å¯ä»¥å¼€å‘å‡ºç®€å•çš„å¸¦äº¤äº’çš„åŸå‹åº”ç”¨ã€‚\nå£°æ˜å¼ UI æ¡†æ¶è¿‘å¹´æ¥é£é€Ÿå‘å±•ï¼Œå¹¶ä¸”è¢« Web å¼€å‘å¸¦å‘é«˜æ½®ã€‚React æ›´æ˜¯ä¸ºå£°æ˜å¼ UI å¥ å®šäº†åšå®åŸºç¡€å¹¶ä¸€ç›´å¼•é¢†å…¶æœªæ¥çš„å‘å±•ã€‚éšå Flutter çš„å‘å¸ƒä¹Ÿå°†å£°æ˜å¼ UI çš„æ€æƒ³æˆåŠŸå¸¦åˆ°ç§»åŠ¨ç«¯å¼€å‘é¢†åŸŸâ€¦\nå£°æ˜å¼UIçš„æ„æ€å°±æ˜¯ï¼Œæè¿°ä½ æƒ³è¦ä¸€ä¸ªä»€ä¹ˆæ ·çš„UIç•Œé¢ï¼ŒçŠ¶æ€å˜åŒ–æ—¶ï¼Œç•Œé¢æŒ‰ç…§å…ˆå‰æè¿°çš„é‡æ–°â€œæ¸²æŸ“â€å³å¯å¾—åˆ°çŠ¶æ€ç»å¯¹æ­£ç¡®çš„ç•Œé¢ï¼Œè€Œä¸ç”¨åƒå‘½ä»¤ä¸€æ ·ï¼Œå‘Šè¯‰ç¨‹åºä¸€æ­¥ä¸€æ­¥è¯¥å¹²ä»€ä¹ˆï¼Œç»´æŠ¤å„ç§çŠ¶æ€ã€‚æ‰¯è¿œäº†ï¼Œè¿™ä¸ªå¹¶ä¸æ˜¯ä»Šå¤©æ–‡ç« çš„é‡ç‚¹ï¼Œç¨å¾®äº†è§£ä¸€ä¸‹å°±å¥½ï¼Œå…¶ä»–çš„å°±ä¸åœ¨æœ¬æ–‡å»¶ä¼¸ã€‚\nå…³äºå£°æ˜å¼çš„æ›´å¤šä»‹ç»ï¼Œå»ºè®®çœ‹çœ‹è¿™ç¯‡æ–‡ç« ï¼šä» SwiftUI è°ˆå£°æ˜å¼ UI ä¸ç±»å‹ç³»ç»Ÿ\n1. ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ–°çš„UI å·¥å…·ï¼Ÿ åœ¨Androidä¸­ï¼ŒUIå·¥å…·åŒ…çš„å†å²å¯è¿½æº¯åˆ°è‡³å°‘10å¹´å‰ã€‚è‡ªé‚£æ—¶ä»¥æ¥ï¼Œæƒ…å†µå‘ç”Ÿäº†å¾ˆå¤§å˜åŒ–ï¼Œä¾‹å¦‚æˆ‘ä»¬ä½¿ç”¨çš„è®¾å¤‡ï¼Œç”¨æˆ·çš„æœŸæœ›ï¼Œä»¥åŠå¼€å‘äººå‘˜å¯¹ä»–ä»¬æ‰€ä½¿ç”¨çš„å¼€å‘å·¥å…·å’Œè¯­è¨€çš„æœŸæœ›ã€‚\nä»¥ä¸Šåªæ˜¯æˆ‘ä»¬éœ€è¦æ–°UIå·¥å…·çš„ä¸€ä¸ªåŸå› ï¼Œå¦å¤–ä¸€ä¸ªé‡è¦çš„åŸå› æ˜¯View.javaè¿™ä¸ªç±»å®åœ¨æ˜¯å¤ªå¤§äº†ï¼Œæœ‰å¤ªå¤šçš„ä»£ç ï¼Œå®ƒå¤§åˆ°ä½ ç”šè‡³æ— æ³•åœ¨Githubsä¸ŠæŸ¥çœ‹è¯¥æ–‡ä»¶ï¼Œå› ä¸ºå®ƒå®é™…ä¸ŠåŒ…å«äº†30000è¡Œä»£ç ï¼Œè¿™å¾ˆç–¯ç‹‚ï¼Œè€Œæˆ‘ä»¬æ‰€ä½¿ç”¨çš„å‡ ä¹æ¯ä¸€ä¸ªAndroid UI ç»„ä»¶éƒ½éœ€è¦ç»§æ‰¿äºViewã€‚\nGogleAndroidå›¢é˜Ÿçš„Anna-Chiaraè¡¨ç¤ºï¼Œä»–ä»¬å¯¹å·²ç»å®ç°çš„ä¸€äº›APIæ„Ÿåˆ°é—æ†¾ï¼Œå› ä¸ºä»–ä»¬ä¹Ÿæ— æ³•åœ¨ä¸ç ´ååŠŸèƒ½çš„æƒ…å†µä¸‹æ”¶å›ã€ä¿®å¤æˆ–æ‰©å±•è¿™äº›APIï¼Œå› æ­¤ç°åœ¨æ˜¯ä¸€ä¸ªå´­æ–°èµ·ç‚¹çš„å¥½æ—¶æœºã€‚\nè¿™å°±æ˜¯ä¸ºä»€ä¹ˆJetpack Compose è®©æˆ‘ä»¬çœ‹åˆ°äº†æ›™å…‰ã€‚\n2. Jetpack Compose ä»‹ç» Jetpack Compose æ˜¯ä¸€ä¸ªç”¨äºæ„å»ºåŸç”ŸAndroid UI çš„ç°ä»£åŒ–å·¥å…·åŒ…ï¼Œå®ƒåŸºäºå£°æ˜å¼çš„ç¼–ç¨‹æ¨¡å‹ï¼Œå› æ­¤ä½ å¯ä»¥ç®€å•åœ°æè¿°UIçš„å¤–è§‚ï¼Œè€ŒComposeåˆ™è´Ÿè´£å…¶ä½™çš„å·¥ä½œ-å½“çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œä½ çš„UIå°†è‡ªåŠ¨æ›´æ–°ã€‚ç”±äºComposeåŸºäºKotlinæ„å»ºï¼Œå› æ­¤å¯ä»¥ä¸Javaç¼–ç¨‹è¯­è¨€å®Œå…¨äº’æ“ä½œï¼Œå¹¶ä¸”å¯ä»¥ç›´æ¥è®¿é—®æ‰€æœ‰Androidå’ŒJetpack APIã€‚å®ƒä¸ç°æœ‰çš„UIå·¥å…·åŒ…ä¹Ÿæ˜¯å®Œå…¨å…¼å®¹çš„ï¼Œå› æ­¤ä½ å¯ä»¥æ··åˆåŸæ¥çš„Viewå’Œç°åœ¨æ–°çš„Viewï¼Œå¹¶ä¸”ä»ä¸€å¼€å§‹å°±ä½¿ç”¨Materialå’ŒåŠ¨ç”»è¿›è¡Œè®¾è®¡ã€‚\nCompose ç…ä¸€çœ¼ 1. å¼€å‘å·¥å…· ç”±äºCompose è¿˜æ²¡æœ‰å‘å¸ƒæ­£å¼ç‰ˆæœ¬ï¼Œæƒ³è¦æå‰ä½“éªŒComposeçš„é¢„è§ˆæ¨¡å¼ï¼Œåˆ™éœ€è¦ä¸‹è½½ Android Studio Arctic Fox 2020.3.1 ç™½ç‹ç‰ˆ\n2. ç¬¬ä¸€ä¸ª Hello World é¦–å…ˆä»åˆ›å»ºä¸€ä¸ªç©ºçš„Jetpack Composeé¡¹ç›®å¼€å§‹ï¼Œæ‰“å¼€æœ€æ–° Canary ç‰ˆçš„ Android studio é¢„è§ˆç‰ˆï¼Œé€‰æ‹©Empty Compose Activity æ¨¡æ¿ï¼Œå¼€å§‹Composeä¹‹æ—…ï¼š\nåˆ›å»ºJetpack Composeé¡¹ç›®æ—¶ï¼Œæˆ‘ä»¬å‘ç° Minimum SDK æœ€å°åªèƒ½é€‰æ‹© API 21ï¼šAndroid 5.0ï¼Œä¹Ÿå°±æ˜¯è¯´Jetpack Compose æ”¯æŒçš„æœ€å°ç‰ˆæœ¬å°±æ˜¯ API 21ï¼šAndroid 5.0 ã€‚\nç‚¹å‡»Finishå®Œæˆé¡¹ç›®æ„å»ºï¼Œæ„å»ºå®Œæˆåæ•ˆæœå¦‚ä¸‹ï¼š\nçº¢æ¡†1ï¼šåˆ‡æ¢ä»£ç å’Œå¸ƒå±€æ ·å¼\nçº¢æ¡†2ï¼šâ€œA successful build is needed before the preview can be displayedâ€ éœ€è¦æˆåŠŸæ„å»ºæ‰èƒ½æ˜¾ç¤ºé¢„è§ˆï¼Œç‚¹å‡» â€œBuild \u0026 Refreshâ€¦â€\nç­‰å¾…é¡¹ç›®æ„å»ºå®Œæˆï¼Œæ•ˆæœå¹¶æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥ï¼Œæ­¤æ—¶éœ€è¦æˆ‘ä»¬è¿è¡Œé¡¹ç›® æˆ–è€… ç‚¹å‡»\"Build \u0026 Refreshâ€¦\" æˆ–è€…æˆ‘ä»¬è‡ªå·±æ‰‹åŠ¨Buildé¡¹ç›®æ‰ä¼šå‡ºç°æœ€ç»ˆæ•ˆæœã€‚\nçº¢æ¡†1. åˆ·æ–°è§†å›¾ï¼Œå½“ä»£ç å‘ç”Ÿå˜åŒ–æ—¶ï¼Œç‚¹å‡»å®ƒå¯ä»¥åˆ·æ–°è§†å›¾ï¼ˆé¦–æ¬¡éœ€è¦Buildï¼‰\nçº¢æ¡†2å’Œ3. æŠŠå½“å‰è§†å›¾ç›´æ¥éƒ¨ç½²åˆ°è®¾å¤‡ä¸Šçœ‹æ•ˆæœã€‚æ›´å¤šå…³äºå¸ƒå±€é¢„è§ˆå·¥å…·çš„ä½¿ç”¨ï¼Œå¯ä»¥æŸ¥çœ‹å®˜ç½‘ä¸Šå…³äºæ­¤å†…å®¹çš„ä»‹ç»Â developer.android.google.cn/jetpack/comâ€¦\nCompose æˆ‘å°±æƒ³è‡ªå·±æ‰‹åŠ¨é…ç½® Composeçš„ç›¸å…³é…ç½®ï¼Œéƒ½æ˜¯studioå·¥å…·åˆ›å»º Empty Compose Activity æ¨¡æ¿æ—¶è‡ªåŠ¨é…ç½®å¥½çš„ï¼Œé‚£Composeé¡¹ç›®å’Œæ™®é€šé¡¹ç›®ä¹‹é—´æœ‰ä»€ä¹ˆä¸åŒå‘¢ï¼Ÿ\nJetpack Compose å›´ç»• Kotlin æ„å»ºè€Œæˆã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼ŒKotlin æä¾›äº†ä¸€äº›ç‰¹æ®Šçš„æƒ¯ç”¨è¯­ï¼Œè¿™ä½¿ç¼–å†™è‰¯å¥½çš„ Compose ä»£ç å˜å¾—æ›´å®¹æ˜“ã€‚å¦‚æœä½ çš„é¡¹ç›®è¿˜ä¸æ”¯æŒï¼Œè¯·æŸ¥çœ‹å®˜ç½‘æ•™ç¨‹Â å°† Kotlin æ·»åŠ åˆ°ç°æœ‰åº”ç”¨Â è‡ªè¡Œé…ç½®(ç¡®ä¿æ‚¨åœ¨é¡¹ç›®ä¸­ä½¿ç”¨çš„æ˜¯ Kotlin 1.5.10 æˆ–æ›´é«˜ç‰ˆæœ¬)ã€‚\nJetpack Compose çš„ç›¸å…³é…ç½®éƒ½åœ¨é¡¹ç›®çš„Â app/build.gradleÂ æ–‡ä»¶ä¸­ï¼š\njs\nä»£ç è§£è¯»\nå¤åˆ¶ä»£ç \nplugins { id 'com.android.application' id 'org.jetbrains.kotlin.android' } android { compileSdk 30 buildToolsVersion \"30.0.3\" defaultConfig { ... // Jetpack Compose æœ€å°æ”¯æŒç‰ˆæœ¬ minSdk 21 } // åŸºäºJdk 1.8ç‰ˆæœ¬ compileOptions { sourceCompatibility JavaVersion.VERSION_1_8 targetCompatibility JavaVersion.VERSION_1_8 } kotlinOptions { jvmTarget = '1.8' } buildFeatures { // å¯ç”¨ Jetpack Compose compose true } composeOptions { // compose_version = '1.0.0-beta09' kotlinCompilerExtensionVersion compose_version } } dependencies { implementation 'androidx.core:core-ktx:1.3.2' implementation 'androidx.appcompat:appcompat:1.2.0' implementation 'com.google.android.material:material:1.3.0' // â‘  Compose ç”±Â `androidx`Â ä¸­çš„ 6 ä¸ª Maven ç»„ ID æ„æˆã€‚æ¯ä¸ªç»„éƒ½åŒ…å«ä¸€å¥—ç‰¹å®šç”¨é€”çš„åŠŸèƒ½ implementation \"androidx.compose.ui:ui:$compose_version\" implementation \"androidx.compose.material:material:$compose_version\" implementation \"androidx.compose.ui:ui-tooling:$compose_version\" implementation 'androidx.lifecycle:lifecycle-runtime-ktx:2.3.1' implementation 'androidx.activity:activity-compose:1.3.0-alpha06' testImplementation 'junit:junit:4.+' androidTestImplementation 'androidx.test.ext:junit:1.1.2' androidTestImplementation 'androidx.test.espresso:espresso-core:3.3.0' androidTestImplementation \"androidx.compose.ui:ui-test-junit4:$compose_version\" }\nâ‘  Compose ç”±Â androidxÂ ä¸­çš„ 6 ä¸ª Maven ç»„ ID æ„æˆã€‚æ¯ä¸ªç»„éƒ½åŒ…å«ä¸€å¥—ç‰¹å®šç”¨é€”çš„åŠŸèƒ½\nç»„\nè¯´æ˜\ncompose.animation\nåœ¨ Jetpack Compose åº”ç”¨ä¸­æ„å»ºåŠ¨ç”»ï¼Œä¸°å¯Œç”¨æˆ·çš„ä½“éªŒã€‚\ncompose.compiler\nå€ŸåŠ© Kotlin ç¼–è¯‘å™¨æ’ä»¶ï¼Œè½¬æ¢ @Composable functionsï¼ˆå¯ç»„åˆå‡½æ•°ï¼‰å¹¶å¯ç”¨ä¼˜åŒ–åŠŸèƒ½ã€‚\ncompose.foundation\nä½¿ç”¨ç°æˆå¯ç”¨çš„æ„å»ºå—ç¼–å†™ Jetpack Compose åº”ç”¨ï¼Œè¿˜å¯æ‰©å±• Foundation ä»¥æ„å»ºæ‚¨è‡ªå·±çš„è®¾è®¡ç³»ç»Ÿå…ƒç´ ã€‚\ncompose.material\nä½¿ç”¨ç°æˆå¯ç”¨çš„ Material Design ç»„ä»¶æ„å»º Jetpack Compose UIã€‚è¿™æ˜¯æ›´é«˜å±‚çº§çš„ Compose å…¥å£ç‚¹ï¼Œæ—¨åœ¨æä¾›ä¸ www.material.io ä¸Šæè¿°çš„ç»„ä»¶ä¸€è‡´çš„ç»„ä»¶ã€‚\ncompose.runtime\nCompose çš„ç¼–ç¨‹æ¨¡å‹å’ŒçŠ¶æ€ç®¡ç†çš„åŸºæœ¬æ„å»ºå—ï¼Œä»¥åŠ Compose ç¼–è¯‘å™¨æ’ä»¶é’ˆå¯¹çš„æ ¸å¿ƒè¿è¡Œæ—¶ã€‚\ncompose.ui\nä¸è®¾å¤‡äº’åŠ¨æ‰€éœ€çš„ Compose UI çš„åŸºæœ¬ç»„ä»¶ï¼ŒåŒ…æ‹¬å¸ƒå±€ã€ç»˜å›¾å’Œè¾“å…¥ã€‚\n3. Composable (å¯ç»„åˆçš„) å‡½æ•° æˆ‘ä»¬ä»¥å¾€é¡µé¢è§†å›¾ä¹ æƒ¯æ€§çš„åœ¨XMlé‡Œä¹¦å†™ï¼Œè€Œ Jetpack Compose æ˜¯å›´ç»•å¯ç»„åˆå‡½æ•°æ„å»ºçš„ã€‚è¿™äº›å‡½æ•°å¯è®©æ‚¨ä»¥ç¼–ç¨‹æ–¹å¼å®šä¹‰åº”ç”¨ç•Œé¢ï¼Œåªéœ€æè¿°åº”ç”¨ç•Œé¢çš„å½¢çŠ¶å’Œæ•°æ®ä¾èµ–å…³ç³»ï¼Œè€Œä¸å¿…å…³æ³¨ç•Œé¢çš„æ„å»ºè¿‡ç¨‹ã€‚å¦‚éœ€åˆ›å»ºå¯ç»„åˆå‡½æ•°ï¼Œåªéœ€å°†Â @ComposableÂ æ³¨é‡Šæ·»åŠ åˆ°å‡½æ•°åç§°ä¸­å³å¯ã€‚\njs\nä»£ç è§£è¯»\nå¤åˆ¶ä»£ç \nsetContent { // ä½¿ç”¨ä¸»é¢˜ä¸­çš„â€œèƒŒæ™¯â€é¢œè‰²çš„è¡¨é¢å®¹å™¨(è®¾ç½®èƒŒæ™¯ï¼Œå…·æœ‰Material Designçš„ç‰¹æ€§) Surface(color = MaterialTheme.colors.background) { Greeting(\"Android\") } } @Composable fun Greeting(name: String) { Text(text = \"Hello $name!\") }\nâ‘ . setContentï¼ˆæ³¨æ„ä¸æ˜¯ setContentView å“¦ï¼‰å—å®šä¹‰äº† Activity çš„å¸ƒå±€ã€‚æˆ‘ä»¬ä¸ä½¿ç”¨ XML æ–‡ä»¶æ¥å®šä¹‰å¸ƒå±€å†…å®¹ï¼Œè€Œæ˜¯è°ƒç”¨å¯ç»„åˆå‡½æ•°ã€‚Jetpack Compose ä½¿ç”¨è‡ªå®šä¹‰ Kotlin ç¼–è¯‘å™¨æ’ä»¶å°†è¿™äº›å¯ç»„åˆå‡½æ•°è½¬æ¢ä¸ºåº”ç”¨çš„ç•Œé¢å…ƒç´ ã€‚ä¾‹å¦‚ï¼ŒCompose ç•Œé¢åº“å®šä¹‰äº†Â Text()Â å‡½æ•°ï¼›æ‚¨å¯ä»¥è°ƒç”¨è¯¥å‡½æ•°åœ¨åº”ç”¨ä¸­å£°æ˜æ–‡æœ¬å…ƒç´ ã€‚\nâ‘¡. å¯ç»„åˆå‡½æ•°åªèƒ½åœ¨å…¶ä»–å¯ç»„åˆå‡½æ•°çš„èŒƒå›´å†…è°ƒç”¨ã€‚è¦ä½¿å‡½æ•°æˆä¸ºå¯ç»„åˆå‡½æ•°ï¼Œè¯·æ·»åŠ Â @ComposableÂ æ³¨é‡Šã€‚å¦‚éœ€å°è¯•æ­¤æ“ä½œï¼Œè¯·å®šä¹‰ä¸€ä¸ªÂ Greeting()Â å‡½æ•°å¹¶å‘å…¶ä¼ é€’ä¸€ä¸ªåç§°ï¼Œç„¶åè¯¥å‡½æ•°å°±ä¼šä½¿ç”¨è¯¥åç§°é…ç½®æ–‡æœ¬å…ƒç´ ã€‚\nâ‘¢. å½“å‰çš„ Canary ç‰ˆ Android StudioÂ å…è®¸æ‚¨åœ¨ IDE ä¸­é¢„è§ˆå¯ç»„åˆå‡½æ•°ï¼Œè€Œæ— éœ€å°†åº”ç”¨ä¸‹è½½åˆ° Android è®¾å¤‡æˆ–æ¨¡æ‹Ÿå™¨ä¸­ã€‚ä¸»è¦é™åˆ¶åœ¨äºï¼Œå¯ç»„åˆå‡½æ•°ä¸èƒ½æ¥å—ä»»ä½•å‚æ•°ã€‚å› æ­¤ï¼Œæ‚¨æ— æ³•ç›´æ¥é¢„è§ˆÂ Greeting()Â å‡½æ•°ï¼Œè€Œæ˜¯éœ€è¦åˆ›å»ºå¦ä¸€ä¸ªåä¸ºÂ PreviewGreeting()Â çš„å‡½æ•°ï¼Œç”±è¯¥å‡½æ•°ä½¿ç”¨é€‚å½“çš„å‚æ•°è°ƒç”¨Â Greeting()ã€‚è¯·åœ¨Â @ComposableÂ ä¸Šæ–¹æ·»åŠ Â @PreviewÂ æ³¨é‡Šã€‚\nè®¤è¯†ä¸€ä¸‹ç¬¬ä¸€ä¸ªç»„ä»¶ Text js\nä»£ç è§£è¯»\nå¤åˆ¶ä»£ç \n@Composable fun Text( text: String, // æ–‡æœ¬ // Modifier ä¸€ä¸ªÂ æœ‰åºçš„ã€ä¸å¯å˜çš„ä¿®é¥°å…ƒç´ é›†åˆï¼Œç”¨äºæ·»åŠ è£…é¥°æˆ–è€…è¡Œä¸ºåˆ°Compose UIå…ƒç´ ã€‚ä¾‹å¦‚backgroundã€padding ã€ç‚¹å‡»äº‹ä»¶ç­‰ã€‚ modifier: Modifier = Modifier, color: Color = Color.Unspecified, // æ–‡å­—é¢œè‰² fontSize: TextUnit = TextUnit.Unspecified, // æ–‡å­—å¤§å° fontStyle: FontStyle? = null, // ç»˜åˆ¶å­—æ¯æ—¶ä½¿ç”¨çš„å­—ä½“å˜ä½“ï¼ˆä¾‹å¦‚ï¼Œæ–œä½“ï¼‰ fontWeight: FontWeight? = null, // å­—ä½“ç²—ç»† fontFamily: FontFamily? = null, // å‘ˆç°æ–‡æœ¬æ—¶è¦ä½¿ç”¨çš„å­—ä½“ç³»åˆ— letterSpacing: TextUnit = TextUnit.Unspecified, // å­—é—´è· textDecoration: TextDecoration? = null, // æ–‡å­—è£…é¥°ã€æ¯”å¦‚ä¸‹åˆ’çº¿ textAlign: TextAlign? = null, // å¯¹é½æ–¹å¼ lineHeight: TextUnit = TextUnit.Unspecified, // è¡Œé«˜ overflow: TextOverflow = TextOverflow.Clip, // æ–‡å­—æ˜¾ç¤ºä¸å®Œçš„å¤„ç†æ–¹å¼ï¼Œä¾‹å¦‚å°¾éƒ¨æ˜¾ç¤ºâ€¦æˆ–è€…ä¸­é—´æ˜¾ç¤ºâ€¦ softWrap: Boolean = true, // æ–‡æœ¬æ˜¯å¦åº”åœ¨æ¢è¡Œç¬¦å¤„ä¸­æ–­ã€‚å¦‚æœä¸ºfalseï¼Œåˆ™æ–‡æœ¬çš„å®½åº¦ä¼šåœ¨æ°´å¹³æ–¹å‘ä¸Šæ— é™å»¶ä¼¸ï¼Œä¸”textAlignå±æ€§å¤±æ•ˆï¼Œå¯èƒ½ä¼šå‡ºç°å¼‚å¸¸æƒ…å†µã€‚ maxLines: Int = Int.MAX_VALUE, // æœ€å¤§è¡Œæ•° onTextLayout: (TextLayoutResult) -\u003e Unit = {}, // è®¡ç®—æ–°çš„æ–‡æœ¬å¸ƒå±€æ—¶æ‰§è¡Œçš„å›è°ƒ style: TextStyle = LocalTextStyle.current // æ–‡æœ¬çš„æ ·å¼é…ç½®ï¼Œä¾‹å¦‚é¢œè‰²ï¼Œå­—ä½“ï¼Œè¡Œé«˜ç­‰ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸Šé¢å±æ€§ä¸­çš„color,fontSizeç­‰ä¸€äº›å±æ€§ä¹Ÿå¯ä»¥åœ¨è¿™é‡Œè¿›è¡Œå£°æ˜ã€‚å…·ä½“åŒ…å«çš„å±æ€§å¯ä»¥å‚è€ƒTextStyleç±»ã€‚ ) { ... }\nçœ‹çœ‹æˆ‘ä»¬å£°æ˜å¼çš„ä¼˜ç‚¹ä¹‹ä¸€ æ•°æ®æ›´æ–° mutableStateOf js\nä»£ç è§£è¯»\nå¤åˆ¶ä»£ç \nclass MainActivity : ComponentActivity() { // inputTextçš„ç±»å‹æ”¹æˆmutableStateï¼Œæ ‡æ˜è¿™ä¸ªdataæ˜¯æœ‰çŠ¶æ€çš„ï¼Œå¦‚æœå‘ç”Ÿäº†æ”¹å˜ï¼Œåˆ™æ‰€æœ‰è®¾è®¡åˆ°çš„ç»„ä»¶éƒ½è¦é‡æ–°ç»˜åˆ¶ var inputText = mutableStateOf(\"\") override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContent { // var inputText by mutableStateOf(\"\") åœ¨ComposeåŸŸä¸­å¯ä½¿ç”¨by ä»£ç† Content() } } @Composable fun HelloContent() { Column(modifier = Modifier.padding(16.dp)) { Text( text = \"Hello\", modifier = Modifier.padding(bottom = 8.dp) ) OutlinedTextField( // ç±»æ¯” EditText value = inputText.value, onValueChange = { inputText.value = it }, label = { Text(text = \"Name\") }, ) } } }\nmutableStateOf ä¼šä¿å­˜çŠ¶æ€ï¼Œè€ŒinputTextæ˜¯ä¸€ä¸ªç±»æˆå‘˜å˜é‡ï¼Œè€ŒJetPack Composeæ˜¯ä¸€ç§â€œå‡½æ•°å¼â€ç¼–ç¨‹ï¼Œå› æ­¤é€šå¸¸æ— æ³•å¼•ç”¨æˆ–è€…ä¸æ–¹ä¾¿å¼•ç”¨ç±»å˜é‡ï¼Œæ­¤æ—¶å°±éœ€è¦ remember äº†ã€‚\næ³¨ï¼švar inputText by mutableStateOf(\"\") ä¹Ÿå¯ä»¥æ”¾åœ¨ç»„ä»¶çš„çˆ¶ç»„ä»¶æˆ–è€…ç¥–çˆ¶..ç»„ä»¶ä¸­å£°æ˜ï¼Œä½†æ˜¯å‰ææ˜¯éœ€è¦ä¿è¯è¯¥å€¼å˜åŒ–å¯¼è‡´ç•Œé¢é‡ç»˜æ—¶å…¶çˆ¶ç»„ä»¶æˆ–è€…ç¥–çˆ¶..ç»„ä»¶ä¸ä¼šé‡ç»˜ï¼Œè‹¥å…¶çˆ¶ç»„ä»¶æˆ–è€…ç¥–çˆ¶..ç»„ä»¶ä¼šé‡ç»˜ï¼Œåˆ™é‡ç»˜æ—¶è¯¥å€¼ä¹Ÿä¼šé‡æ–°åˆå§‹åŒ–ï¼Œå¯¼è‡´è¯¥å€¼å˜åŒ–å¤±è´¥ï¼Œæ­¤æ—¶å°±éœ€è¦ remember æ¥ç¼“å­˜æ­¤å€¼æˆ–è€…å°†å…¶ä¿å­˜åœ¨ ViewModelä¸­ã€‚\nremember å’Œ ViewModel js\nä»£ç è§£è¯»\nå¤åˆ¶ä»£ç \n// 1. rememberï¼š\"rememberå°†å€¼å­˜å‚¨èµ·æ¥ï¼Œå½“ç•Œé¢å‘ç”Ÿäº†é‡æ–°ç»˜åˆ¶ï¼Œå°±ä¼šè¯»ä¹‹å‰å­˜å‚¨çš„å€¼ã€‚\" @Composable fun Content() { val inputText = remember { mutableStateOf(\"\") } Column(modifier = Modifier.padding(16.dp)) { Text( text = \"Hello\", modifier = Modifier.padding(bottom = 8.dp) ) OutlinedTextField( value = inputText.value, onValueChange = { inputText.value = it }, label = { Text(text = \"Name\") }, ) } } // 2. ViewModel class WeViewModel : ViewModel() { var inputText by mutableStateOf(\"\") } @Composable fun Content() { // éœ€è¦ä¾èµ– implementation 'androidx.lifecycle:lifecycle-viewmodel-compose:1.0.0-alpha07' val viewModel: WeViewModel = viewModel() Column(modifier = Modifier.padding(16.dp)) { Text( text = \"Hello\", modifier = Modifier.padding(bottom = 8.dp) ) OutlinedTextField( value = viewModel.inputText.value, onValueChange = { viewModel.inputText.value = it }, label = { Text(text = \"Name\") }, ) } }\nCompose åœ¨ç¼–è¯‘æœŸåˆ†æå‡ºä¼šå—åˆ°æŸ state å˜åŒ–å½±å“çš„ä»£ç å—ï¼Œå¹¶è®°å½•å…¶å¼•ç”¨ï¼Œå½“æ­¤ state å˜åŒ–æ—¶ï¼Œä¼šæ ¹æ®å¼•ç”¨æ‰¾åˆ°è¿™äº›ä»£ç å—å¹¶æ ‡è®°ä¸º Invalid ã€‚åœ¨ä¸‹ä¸€æ¸²æŸ“å¸§åˆ°æ¥ä¹‹å‰ Compose ä¼šè§¦å‘ recompositionï¼Œå¹¶åœ¨é‡ç»„è¿‡ç¨‹ä¸­æ‰§è¡Œ invalid ä»£ç å—ã€‚\n# äº†è§£Composeçš„é‡ç»„ä½œç”¨åŸŸ\nCompose åŸºç¡€ç»„ä»¶ Compose ç¥å¥‡çš„Modifier Modifier ä¿®é¥°ç¬¦ å€ŸåŠ©ä¿®é¥°ç¬¦ï¼Œæ‚¨å¯ä»¥ä¿®é¥°æˆ–æ‰©å……å¯ç»„åˆé¡¹ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ä¿®é¥°ç¬¦æ¥æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š\næ›´æ”¹å¯ç»„åˆé¡¹çš„å¤§å°ã€å¸ƒå±€ã€è¡Œä¸ºå’Œå¤–è§‚ æ·»åŠ ä¿¡æ¯ï¼Œå¦‚æ— éšœç¢æ ‡ç­¾ å¤„ç†ç”¨æˆ·è¾“å…¥ æ·»åŠ é«˜çº§äº’åŠ¨ï¼Œå¦‚ä½¿å…ƒç´ å¯ç‚¹å‡»ã€å¯æ»šåŠ¨ã€å¯æ‹–åŠ¨æˆ–å¯ç¼©æ”¾ ä¿®é¥°ç¬¦æ˜¯æ ‡å‡†çš„ Kotlin å¯¹è±¡ã€‚æ‚¨å¯ä»¥é€šè¿‡è°ƒç”¨æŸä¸ªÂ ModifierÂ ç±»å‡½æ•°æ¥åˆ›å»ºä¿®é¥°ç¬¦ã€‚æ‚¨å¯ä»¥å°†ä»¥ä¸‹å‡½æ•°è¿åœ¨ä¸€èµ·ä»¥å°†å…¶ç»„åˆèµ·æ¥ï¼š\njs\nä»£ç è§£è¯»\nå¤åˆ¶ä»£ç \n@Composable fun ArtistCard( artist: Artist, onClick: () -\u003e Unit ) { val padding = 16.dp Column( Modifier .clickable(onClick = onClick) .padding(padding) .fillMaxWidth() ) { Row(verticalAlignment = Alignment.CenterVertically) { /*...*/ } Spacer(Modifier.size(padding)) Card(elevation = 4.dp) { /*...*/ } } }\nè¯·æ³¨æ„ï¼Œåœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œç»“åˆä½¿ç”¨äº†ä¸åŒçš„ä¿®é¥°ç¬¦å‡½æ•°ã€‚\nclickableÂ ä½¿å¯ç»„åˆé¡¹å“åº”ç”¨æˆ·è¾“å…¥ï¼Œå¹¶æ˜¾ç¤ºæ¶Ÿæ¼ªã€‚ paddingÂ åœ¨å…ƒç´ å‘¨å›´ç•™å‡ºç©ºé—´ã€‚ fillMaxWidthÂ ä½¿å¯ç»„åˆé¡¹å¡«å……å…¶çˆ¶é¡¹ä¸ºå®ƒæä¾›çš„æœ€å¤§å®½åº¦ã€‚ size()Â æŒ‡å®šå…ƒç´ çš„é¦–é€‰å®½åº¦å’Œé«˜åº¦ã€‚ æ³¨æ„ï¼šé™¤äº†å…¶ä»–ä½œç”¨ä¹‹å¤–ï¼Œä¿®é¥°ç¬¦çš„ä½œç”¨ç±»ä¼¼äºåŸºäºè§†å›¾çš„å¸ƒå±€ä¸­çš„å¸ƒå±€å‚æ•°ã€‚ä¸è¿‡ï¼Œç”±äºä¿®é¥°ç¬¦æœ‰æ—¶ä¸“ç”¨äºç‰¹å®šä½œç”¨åŸŸï¼Œå› æ­¤å®ƒä»¬ä¸ä»…å¯ä»¥ç¡®ä¿ç±»å‹å®‰å…¨ï¼Œè€Œä¸”è¿˜èƒ½å¸®åŠ©æ‚¨å‘ç°å’Œäº†è§£å¯¹æŸä¸ªå¸ƒå±€å¯ç”¨ä¸”é€‚ç”¨çš„å…ƒç´ ã€‚å¯¹äº XML å¸ƒå±€ï¼Œæœ‰æ—¶å¾ˆéš¾æŸ¥æ˜ç‰¹å®šçš„å¸ƒå±€å±æ€§æ˜¯å¦é€‚ç”¨äºç»™å®šçš„è§†å›¾ã€‚\nä¿®é¥°ç¬¦é¡ºåºå¾ˆé‡è¦ ä¿®é¥°ç¬¦å‡½æ•°çš„é¡ºåºéå¸¸é‡è¦ã€‚ç”±äºæ¯ä¸ªå‡½æ•°éƒ½ä¼šå¯¹ä¸Šä¸€ä¸ªå‡½æ•°è¿”å›çš„Â ModifierÂ è¿›è¡Œæ›´æ”¹ï¼Œå› æ­¤é¡ºåºä¼šå½±å“æœ€ç»ˆç»“æœã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹è¿™æ–¹é¢çš„ä¸€ä¸ªç¤ºä¾‹ï¼š\njs\nä»£ç è§£è¯»\nå¤åˆ¶ä»£ç \n@Composable fun ArtistCard(/*...*/) { val padding = 16.dp Column( Modifier .clickable(onClick = onClick) .padding(padding) .fillMaxWidth() ) { // rest of the implementation } }\nåœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæ•´ä¸ªåŒºåŸŸï¼ˆåŒ…æ‹¬å‘¨å›´çš„å†…è¾¹è·ï¼‰éƒ½æ˜¯å¯ç‚¹å‡»çš„ï¼Œå› ä¸ºÂ paddingÂ ä¿®é¥°ç¬¦åº”ç”¨åœ¨Â clickableÂ ä¿®é¥°ç¬¦åé¢ã€‚**å¦‚æœä¿®é¥°ç¬¦é¡ºåºé¢ å€’ï¼Œç”±Â paddingÂ æ·»åŠ çš„ç©ºé—´å°±ä¸ä¼šå“åº”ç”¨æˆ·è¾“å…¥\næ³¨æ„ï¼šæ˜ç¡®çš„é¡ºåºå¯å¸®åŠ©æ‚¨æ¨æ–­ä¸åŒçš„ä¿®é¥°ç¬¦å°†å¦‚ä½•ç›¸äº’ä½œç”¨ã€‚æ‚¨å¯ä»¥å°†è¿™ä¸€ç‚¹ä¸åŸºäºè§†å›¾çš„ç³»ç»Ÿè¿›è¡Œæ¯”è¾ƒã€‚åœ¨åŸºäºè§†å›¾çš„ç³»ç»Ÿä¸­ï¼Œæ‚¨å¿…é¡»äº†è§£ç›’æ¨¡å‹ï¼Œåœ¨è¿™ç§æ¨¡å‹ä¸­ï¼Œåœ¨å…ƒç´ çš„â€œå¤–éƒ¨â€åº”ç”¨å¤–è¾¹è·ï¼Œè€Œåœ¨å…ƒç´ çš„â€œå†…éƒ¨â€åº”ç”¨å†…è¾¹è·ï¼Œå¹¶ä¸”èƒŒæ™¯å…ƒç´ å°†ç›¸åº”åœ°è°ƒæ•´å¤§å°ã€‚ä¿®é¥°ç¬¦è®¾è®¡ä½¿è¿™ç§è¡Œä¸ºå˜å¾—æ˜ç¡®ä¸”å¯é¢„æµ‹ï¼Œå¹¶ä¸”å¯è®©æ‚¨æ›´å¥½åœ°è¿›è¡Œæ§åˆ¶ï¼Œä»¥å®ç°æ‚¨æœŸæœ›çš„ç¡®åˆ‡è¡Œä¸ºã€‚è¿™ä¹Ÿè¯´æ˜äº†ä¸ºä»€ä¹ˆæ²¡æœ‰å¤–è¾¹è·ä¿®é¥°ç¬¦ï¼Œè€Œåªæœ‰Â paddingÂ ä¿®é¥°ç¬¦ã€‚\nå†…ç½®ä¿®é¥°ç¬¦ Jetpack Compose æä¾›äº†ä¸€ä¸ªå†…ç½®ä¿®é¥°ç¬¦åˆ—è¡¨ï¼Œå¯å¸®åŠ©æ‚¨ä¿®é¥°æˆ–æ‰©å……å¯ç»„åˆé¡¹ã€‚å·²å¼•å…¥Â paddingã€clickableÂ å’ŒÂ fillMaxWidthÂ ç­‰ä¿®é¥°ç¬¦ã€‚\nModifierä¿®é¥°ç¬¦(å®˜æ–¹ä¸­æ–‡æ–‡æ¡£)\nCompose Modifier ç›¸å…³æ–‡æ¡£(å…¨)\nCompose è‡ªå®šä¹‰ è‡ªå®šä¹‰ç»˜åˆ¶ï¼š Canvas()ã€Modifier.drawBehindÂ å’ŒÂ Modifier.drawWithContent js\nä»£ç è§£è¯»\nå¤åˆ¶ä»£ç \n// ç»˜åˆ¶æœªè¯»å°çº¢ç‚¹ fun Modifier.unread(show: Boolean) = this.drawWithContent { // \"*è®°å¾—ä¸€å®šè¦è°ƒç”¨ï¼ï¼ï¼*\" drawContent() if (show) { drawIntoCanvas { // ViewOverlay // ç»˜åˆ¶çº¢è‰²å°ç‚¹è§’æ ‡ val paint = Paint().apply { color = Color.Red } it.drawCircle(Offset(size.width - 1.dp.toPx(), 1.dp.toPx()), 5.dp.toPx(), paint) } } }\nCanvas çº¯è‡ªå®šä¹‰ç»˜åˆ¶ï¼šCompose ä¸­çš„å›¾å½¢\nLayoutï¼šè‡ªå®šä¹‰å¸ƒå±€\njs\nä»£ç è§£è¯»\nå¤åˆ¶ä»£ç \n@Composable fun CustomColumn( modifier: Modifier = Modifier, content: @Composable () -\u003e Unit ) { Layout( modifier = modifier, content = content ) { measurables, constraints -\u003e // å­å¸ƒå±€åˆ—è¡¨, æµ‹é‡å¸ƒå±€çš„ä¸å¯å˜çº¦æŸ // éå†æµ‹é‡ val placeables = measurables.map { measurable -\u003e // æµ‹é‡æ¯ä¸€ä¸ªå­ç»„ä»¶ measurable.measure(constraints) } // å¸ƒå±€ï¼Œå°†å¸ƒå±€çš„å¤§å°è®¾ç½®ä¸ºå°½å¯èƒ½å¤§ layout(constraints.maxWidth, constraints.maxHeight) { // è®°å½•æ”¾ç½®å­ç»„ä»¶çš„ y åæ ‡ var yPosition = 0 // å°†å­å…ƒç´ æ”¾ç½®åœ¨çˆ¶å¸ƒå±€ä¸­ placeables.forEach { placeable -\u003e // åœ¨å±å¹•ä¸Šå®šä½ placeable.placeRelative(x = 0, y = yPosition) // é‡ç½®æ”¾ç½®åˆ°çš„ y åæ ‡ yPosition += placeable.height } } } }\nCompose å›ºæœ‰ç‰¹æ€§ # Compose å¸ƒå±€ä¸­çš„å›ºæœ‰ç‰¹æ€§æµ‹é‡\nCompose æœ‰ä¸€é¡¹è§„åˆ™ï¼Œå³ï¼Œå­é¡¹åªèƒ½æµ‹é‡ä¸€æ¬¡ï¼Œæµ‹é‡ä¸¤æ¬¡å°±ä¼šå¼•å‘è¿è¡Œæ—¶å¼‚å¸¸ã€‚ä½†æ˜¯ï¼Œæœ‰æ—¶éœ€è¦å…ˆæ”¶é›†ä¸€äº›å…³äºå­é¡¹çš„ä¿¡æ¯ï¼Œç„¶åå†æµ‹é‡å­é¡¹ã€‚å€ŸåŠ©å›ºæœ‰ç‰¹æ€§ï¼Œå¯ä»¥å…ˆæŸ¥è¯¢å­é¡¹ï¼Œç„¶åå†è¿›è¡Œå®é™…æµ‹é‡ã€‚\nè§¦å‘åœºæ™¯ï¼šå­å¸ƒå±€å†³å®šçˆ¶å¸ƒå±€çš„å®½é«˜ï¼Œæ¯”å¦‚ï¼š\nModifier.width(IntrinsicSize.Max) Modifier.width(IntrinsicSize.Min) Modifier.height(IntrinsicSize.Max) Modifier.height(IntrinsicSize.Min) é‡å†™MeasurePolicyå›ºæœ‰ç‰¹æ€§æµ‹é‡ç›¸å…³æ–¹æ³• js\nä»£ç è§£è¯»\nå¤åˆ¶ä»£ç \n@Composable inline fun Layout( content: @Composable () -\u003e Unit, modifier: Modifier = Modifier, measurePolicy: MeasurePolicy )\nå¯¹äºå›ºæœ‰ç‰¹æ€§æµ‹é‡çš„é€‚é…ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®éœ€æ±‚é‡å†™ä»¥ä¸‹å››ä¸ªæ–¹æ³•ã€‚\nLayoutå£°æ˜æ—¶ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦ä¼ å…¥MeasurePolicyï¼Œè€Œæ˜¯è¦è‡ªå·±å®ç°MeasurePolicyï¼Œå¹¶é‡å†™ç›¸å…³çš„æ‰€æœ‰æ–¹æ³•ã€‚\njs\nä»£ç è§£è¯»\nå¤åˆ¶ä»£ç \n@Composable fun CustomColumn(modifier: Modifier, content: @Composable () -\u003e Unit){ Layout( content = content, modifier = modifier, measurePolicy = object: MeasurePolicy { override fun MeasureScope.measure( measurables: List, constraints: Constraints ): MeasureResult { TODO(\"Not yet implemented\") } override fun IntrinsicMeasureScope.minIntrinsicHeight( measurables: List, width: Int ): Int { TODO(\"Not yet implemented\") } override fun IntrinsicMeasureScope.maxIntrinsicHeight( measurables: List, width: Int ): Int { TODO(\"Not yet implemented\") } override fun IntrinsicMeasureScope.maxIntrinsicWidth( measurables: List, height: Int ): Int { TODO(\"Not yet implemented\") } override fun IntrinsicMeasureScope.minIntrinsicWidth( measurables: List, height: Int ): Int { TODO(\"Not yet implemented\") } } ) }\nCompose æµ…å…¥æµ…å‡º æºç æ ¹æ® 1.0.0-beta09 è¿›è¡Œåˆ†æ\næˆ‘ä»¬åœ¨åˆ†æä¹‹å‰å…ˆæƒ³å‡ ä¸ªé—®é¢˜ï¼š\nsetContentæ˜¯å¦‚ä½•è®¾ç½® @Composable ç»„ä»¶æ¥åˆå§‹åŒ–è§†å›¾çš„ï¼Ÿ @Composable åˆ°åº•æ˜¯æ€æ ·é€šè¿‡å‡½æ•°æ¥å®ç°ä¸€ç³»åˆ—Viewçš„åŠŸèƒ½çš„å‘¢ï¼Ÿ æˆ‘ä»¬è®¾ç½®çš„Modifier æ˜¯å¦‚ä½•èµ·ä½œç”¨çš„å‘¢ï¼Ÿ æµ‹é‡æµç¨‹ä»å“ªå¼€å§‹çš„å‘¢ï¼Ÿæ˜¯å¦‚ä½•æµ‹é‡çš„å‘¢ï¼Ÿ ç»˜åˆ¶drawå…¥å£åœ¨å“ªï¼Ÿ å…ˆç»™ç­”æ¡ˆï¼š\nsetContentæ–¹æ³•é‡Œ é€šè¿‡åˆ›å»ºComposeViewï¼Œå¹¶å½“ä½œR.layout.xxx è®¾ç½®åˆ°åŸsetContentViewæ–¹æ³•ä¸­ï¼Œæ¥åˆå§‹åŒ–å†…å®¹è§†å›¾ã€‚ @Composable å‡½æ•°æœ€åç”ŸæˆLayoutNodeï¼Œä¸€äº›åˆ—@Composable æœ€åæ„å»ºæˆäº†ä¸€ä¸ªä»¥rootä¸ºæ ¹çš„LayoutNodeæ ‘ï¼ˆç±»ä¼¼äºViewğŸŒ²ï¼‰ã€‚ Modifier ç»‘å®šåˆ° LayoutNode ä¸­ï¼Œæ¯ä¸€ä¸ªModifierçš„æ‰©å±•æ–¹æ³•é¦–å…ˆä¼šé€šè¿‡ then æ–¹æ³•ç”ŸæˆCombinedModifierçš„é“¾ï¼Œå³æ¯ä¸€ä¸ªCombinedModifier ä¸­ éƒ½åŒ…å«ä¸Šä¸€ä¸ªæ‰©å±•æ–¹æ³•è¿”å›çš„ Modifierï¼Œç„¶ååœ¨ LayoutNode ä¸­è½¬æ¢ä¸ºLayoutNodeWrapperé“¾ï¼Œç„¶åæµ‹é‡è¿‡ç¨‹ä¸­é€’å½’éå†æ‰€æœ‰LayoutNodeWrapperé“¾ä¸­æ‰€æœ‰LayoutNodeWrapperè¿›è¡Œå„ä¸ªå±æ€§æµ‹é‡ï¼Œæœ€åå›åˆ°LayoutNodeWrapperé“¾ä¸­æœ€åä¸€ä¸ªèŠ‚ç‚¹ InnerPlaceable(LayoutNodeæˆå‘˜å±æ€§ä¸­åˆå§‹åŒ–) ä¸­å¼€å§‹æµ‹é‡å½“å‰LayoutNodeå­nodeï¼Œç„¶åè®°å½•æµ‹é‡ç»“æœã€‚ æµ‹é‡æµç¨‹ ä»æˆ‘ä»¬çš„ AndroidComposeView çš„ onMeasure æ–¹æ³•ä¸­å¼€å§‹ï¼Œé€šè¿‡AndroidComposeViewä¸­çš„rootæ¥é€’å½’æµ‹é‡æ‰€æœ‰çš„LayoutNodeï¼Œæ¯ä¸€ä¸ªLayoutNodeåˆé€šè¿‡ LayoutNodeWrapperé“¾æµ‹é‡ã€‚ ç»˜åˆ¶drawå…¥å£ ä¹Ÿåœ¨ AndroidComposeView é‡Œï¼Œåœ¨ dispatchDraw æ–¹æ³•é‡Œè°ƒç”¨äº† root.draw(this) è§†å›¾çš„åˆå§‹åŒ–â€“setContent js\nä»£ç è§£è¯»\nå¤åˆ¶ä»£ç \npublic fun ComponentActivity.setContent( parent: CompositionContext? = null, content: @Composable () -\u003e Unit ) { val existingComposeView = window.decorView .findViewById(android.R.id.content) .getChildAt(0) as? ComposeView if (existingComposeView != null) with(existingComposeView) { setParentCompositionContext(parent) setContent(content) } else ComposeView(this).apply { // Set content and parent **before** setContentView // to have ComposeView create the composition on attach setParentCompositionContext(parent) // â‘  setContent(content) // Set the view tree owners before setting the content view so that the inflation process // and attach listeners will see them already present setOwners() setContentView(this, DefaultActivityContentLayoutParams) } } // â‘ å¤„ä»£ç  fun setContent(content: @Composable () -\u003e Unit) { shouldCreateCompositionOnAttachedToWindow = true this.content.value = content if (isAttachedToWindow) { // â‘¡ createComposition() } } // â‘¡ å¤„ä»£ç  fun createComposition() { check(parentContext != null || isAttachedToWindow) { \"createComposition requires either a parent reference or the View to be attached\" + \"to a window. Attach the View or call setParentCompositionReference.\" } // â‘¢ ensureCompositionCreated() } // â‘¢ å¤„ä»£ç  @Suppress(\"DEPRECATION\") // Still using ViewGroup.setContent for now private fun ensureCompositionCreated() { if (composition == null) { try { creatingComposition = true // â‘£ composition = setContent(resolveParentCompositionContext()) { Content() } } finally { creatingComposition = false } } } // â‘£ å¤„ä»£ç  internal fun ViewGroup.setContent( parent: CompositionContext, content: @Composable () -\u003e Unit ): Composition { GlobalSnapshotManager.ensureStarted() // â‘¤ æ­¤å¤„çœ‹åˆ°åˆå§‹åŒ–äº† AndroidComposeViewï¼Œå¹¶ä¸” addView è¿› ComposeView val composeView = if (childCount \u003e 0) { getChildAt(0) as? AndroidComposeView } else { removeAllViews(); null } ?: AndroidComposeView(context).also { addView(it.view, DefaultLayoutParams) } // â‘¥ return doSetContent(composeView, parent, content) }\næ¢³ç†ä¸€ä¸‹ï¼š\nsetContent ä¸­æˆ‘ä»¬çœ‹åˆ°åˆ›å»ºäº† ComposeView(ViewGroup)ï¼Œç„¶åçœ‹åˆ°äº†æˆ‘ä»¬ç†Ÿæ‚‰çš„ setContentViewï¼Œå¹¶ä¸”å°†ComposeView å½“ä½œæˆ‘ä»¬ä»¥å¾€çš„ R.layout.xxx å½¢å¼æ¥è®¾ç½®ç•Œé¢å¸ƒå±€ éšåâ‘¤çš„ä½ç½® åˆå§‹åŒ–äº†AndroidComposeView(ViewGroup)ï¼Œå¹¶ä¸”addViewåˆ° ComposeView ä¸­ï¼Œè€ŒAndroidComposeViewä¹Ÿæˆä¸ºäº†æœ€åä¸€ä¸ªæˆ‘ä»¬ç†Ÿæ‚‰çš„ViewGroupï¼Œè€Œåç»­çš„æµ‹é‡ã€å¸ƒå±€ã€ç»˜åˆ¶éƒ½æ˜¯ç”±AndroidComposeViewå¼€å¯ã€‚ @Composableæ–¹æ³•æœ€åçš„å½’å®¿â€“LayoutNode æˆ‘ä»¬é€šè¿‡ä¸€ç³»åˆ— @Composable æ¥å®ç°ç•Œé¢çš„æ˜¾ç¤ºï¼Œå¯¹äº @Composable åˆ°åº•æ˜¯æ€æ ·é€šè¿‡å‡½æ•°æ¥å®ç°ä¸€ç³»åˆ—Viewçš„åŠŸèƒ½çš„å‘¢ï¼Ÿç­”æ¡ˆå…¶å®å°±æ˜¯ LayoutNode\nLayoutNode çš„ å‰ä¸–ä»Šç”Ÿ js\nä»£ç è§£è¯»\nå¤åˆ¶ä»£ç \n@Suppress(\"ComposableLambdaParameterPosition\") @Composable inline fun Layout( content: @Composable () -\u003e Unit, modifier: Modifier = Modifier, measurePolicy: MeasurePolicy ) { val density = LocalDensity.current val layoutDirection = LocalLayoutDirection.current ReusableComposeNode",
  "wordCount" : "3477",
  "inLanguage": "zh",
  "image": "http://localhost:1313/images/papermod-cover.png","datePublished": "2021-07-28T00:00:00Z",
  "dateModified": "2021-07-28T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "è‹¥ä¸¶ç›¸è§"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/posts/juejin/jetpackcompose%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%B5%85%E6%9E%90/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "PaperMod",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/%3Clink%20/%20abs%20url%3E"
    }
  }
}
</script>
</head>

<body class=" dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Home (Alt + H)">
                        
                    <img src="http://localhost:1313/images/msg_hu15231257772499651944.png" alt="" aria-label="logo"
                        height="20">Home</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://github.com/adityatelange/hugo-PaperMod/wiki/" title="WiKi">
                    <span>WiKi</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://localhost:1313/">ä¸»é¡µ</a>&nbsp;Â»&nbsp;<a href="http://localhost:1313/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      JetpackComposeä»å…¥é—¨åˆ°æµ…æ
    </h1>
    <div class="post-description">
      JetpackComposeæ˜¯ç”¨äºæ„å»ºåŸç”ŸAndroidUIçš„ç°ä»£å·¥å…·åŒ…ã€‚JetpackComposeä½¿ç”¨æ›´å°‘çš„ä»£ç ï¼Œå¼ºå¤§çš„å·¥å…·å’Œç›´è§‚çš„KotlinAPIï¼Œç®€åŒ–å¹¶åŠ é€Ÿäº†Androidä¸Šçš„UI
    </div>
    <div class="post-meta"><span title='2021-07-28 00:00:00 +0000 UTC'>ä¸ƒæœˆ 28, 2021</span>&nbsp;Â·&nbsp;17 åˆ†é’Ÿ&nbsp;Â·&nbsp;è‹¥ä¸¶ç›¸è§&nbsp;|&nbsp;<a href="https://github.com/WangShaoyu1/myBlogPaperMod/tree/master/content/posts/jueJin/JetpackCompose%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%e6%b5%85%e6%9e%90.md" rel="noopener noreferrer" target="_blank">Suggest Changes</a>

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">ç›®å½•</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e6%a6%82%e8%bf%b0" aria-label="æ¦‚è¿°">æ¦‚è¿°</a><ul>
                        
                <li>
                    <a href="#0-%e5%a3%b0%e6%98%8e%e5%bc%8f-ui-%e7%9a%84%e5%89%8d%e4%b8%96%e4%bb%8a%e7%94%9f" aria-label="0. å£°æ˜å¼ UI çš„å‰ä¸–ä»Šç”Ÿ">0. å£°æ˜å¼ UI çš„å‰ä¸–ä»Šç”Ÿ</a></li>
                <li>
                    <a href="#1-%e4%b8%ba%e4%bb%80%e4%b9%88%e6%88%91%e4%bb%ac%e9%9c%80%e8%a6%81%e4%b8%80%e4%b8%aa%e6%96%b0%e7%9a%84ui-%e5%b7%a5%e5%85%b7" aria-label="1. ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ–°çš„UI å·¥å…·ï¼Ÿ">1. ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ–°çš„UI å·¥å…·ï¼Ÿ</a></li>
                <li>
                    <a href="#2-jetpack-compose-%e4%bb%8b%e7%bb%8d" aria-label="2. Jetpack Compose ä»‹ç»">2. Jetpack Compose ä»‹ç»</a></li></ul>
                </li>
                <li>
                    <a href="#compose-%e7%9e%85%e4%b8%80%e7%9c%bc" aria-label="Compose ç…ä¸€çœ¼">Compose ç…ä¸€çœ¼</a><ul>
                        
                <li>
                    <a href="#1-%e5%bc%80%e5%8f%91%e5%b7%a5%e5%85%b7" aria-label="1. å¼€å‘å·¥å…·">1. å¼€å‘å·¥å…·</a></li>
                <li>
                    <a href="#2-%e7%ac%ac%e4%b8%80%e4%b8%aa-hello-world" aria-label="2. ç¬¬ä¸€ä¸ª Hello World">2. ç¬¬ä¸€ä¸ª Hello World</a></li>
                <li>
                    <a href="#compose-%e6%88%91%e5%b0%b1%e6%83%b3%e8%87%aa%e5%b7%b1%e6%89%8b%e5%8a%a8%e9%85%8d%e7%bd%ae" aria-label="Compose æˆ‘å°±æƒ³è‡ªå·±æ‰‹åŠ¨é…ç½®">Compose æˆ‘å°±æƒ³è‡ªå·±æ‰‹åŠ¨é…ç½®</a></li>
                <li>
                    <a href="#3-composable-%e5%8f%af%e7%bb%84%e5%90%88%e7%9a%84-%e5%87%bd%e6%95%b0" aria-label="3. Composable (å¯ç»„åˆçš„) å‡½æ•°">3. Composable (å¯ç»„åˆçš„) å‡½æ•°</a><ul>
                        
                <li>
                    <a href="#%e8%ae%a4%e8%af%86%e4%b8%80%e4%b8%8b%e7%ac%ac%e4%b8%80%e4%b8%aa%e7%bb%84%e4%bb%b6-text" aria-label="è®¤è¯†ä¸€ä¸‹ç¬¬ä¸€ä¸ªç»„ä»¶ Text">è®¤è¯†ä¸€ä¸‹ç¬¬ä¸€ä¸ªç»„ä»¶ Text</a></li>
                <li>
                    <a href="#%e7%9c%8b%e7%9c%8b%e6%88%91%e4%bb%ac%e5%a3%b0%e6%98%8e%e5%bc%8f%e7%9a%84%e4%bc%98%e7%82%b9%e4%b9%8b%e4%b8%80-%e6%95%b0%e6%8d%ae%e6%9b%b4%e6%96%b0" aria-label="çœ‹çœ‹æˆ‘ä»¬å£°æ˜å¼çš„ä¼˜ç‚¹ä¹‹ä¸€ æ•°æ®æ›´æ–°">çœ‹çœ‹æˆ‘ä»¬å£°æ˜å¼çš„ä¼˜ç‚¹ä¹‹ä¸€ æ•°æ®æ›´æ–°</a><ul>
                        
                <li>
                    <a href="#mutablestateof" aria-label="mutableStateOf">mutableStateOf</a></li>
                <li>
                    <a href="#remember-%e5%92%8c-viewmodel" aria-label="remember å’Œ ViewModel">remember å’Œ ViewModel</a></li></ul>
                </li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#compose-%e5%9f%ba%e7%a1%80%e7%bb%84%e4%bb%b6" aria-label="Compose åŸºç¡€ç»„ä»¶">Compose åŸºç¡€ç»„ä»¶</a></li>
                <li>
                    <a href="#compose-%e7%a5%9e%e5%a5%87%e7%9a%84modifier" aria-label="Compose ç¥å¥‡çš„Modifier">Compose ç¥å¥‡çš„Modifier</a><ul>
                        
                <li>
                    <a href="#modifier-%e4%bf%ae%e9%a5%b0%e7%ac%a6" aria-label="Modifier ä¿®é¥°ç¬¦">Modifier ä¿®é¥°ç¬¦</a><ul>
                        
                <li>
                    <a href="#%e4%bf%ae%e9%a5%b0%e7%ac%a6%e9%a1%ba%e5%ba%8f%e5%be%88%e9%87%8d%e8%a6%81" aria-label="ä¿®é¥°ç¬¦é¡ºåºå¾ˆé‡è¦">ä¿®é¥°ç¬¦é¡ºåºå¾ˆé‡è¦</a></li>
                <li>
                    <a href="#%e5%86%85%e7%bd%ae%e4%bf%ae%e9%a5%b0%e7%ac%a6" aria-label="å†…ç½®ä¿®é¥°ç¬¦">å†…ç½®ä¿®é¥°ç¬¦</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#compose-%e8%87%aa%e5%ae%9a%e4%b9%89" aria-label="Compose è‡ªå®šä¹‰">Compose è‡ªå®šä¹‰</a></li>
                <li>
                    <a href="#compose-%e5%9b%ba%e6%9c%89%e7%89%b9%e6%80%a7" aria-label="Compose å›ºæœ‰ç‰¹æ€§">Compose å›ºæœ‰ç‰¹æ€§</a><ul>
                        <ul>
                        
                <li>
                    <a href="#%e9%87%8d%e5%86%99measurepolicy%e5%9b%ba%e6%9c%89%e7%89%b9%e6%80%a7%e6%b5%8b%e9%87%8f%e7%9b%b8%e5%85%b3%e6%96%b9%e6%b3%95" aria-label="é‡å†™MeasurePolicyå›ºæœ‰ç‰¹æ€§æµ‹é‡ç›¸å…³æ–¹æ³•">é‡å†™MeasurePolicyå›ºæœ‰ç‰¹æ€§æµ‹é‡ç›¸å…³æ–¹æ³•</a></li></ul>
                    </ul>
                </li>
                <li>
                    <a href="#compose-%e6%b5%85%e5%85%a5%e6%b5%85%e5%87%ba" aria-label="Compose æµ…å…¥æµ…å‡º">Compose æµ…å…¥æµ…å‡º</a><ul>
                        
                <li>
                    <a href="#%e8%a7%86%e5%9b%be%e7%9a%84%e5%88%9d%e5%a7%8b%e5%8c%96--setcontent" aria-label="è§†å›¾çš„åˆå§‹åŒ–&ndash;setContent">è§†å›¾çš„åˆå§‹åŒ–&ndash;setContent</a></li>
                <li>
                    <a href="#composable%e6%96%b9%e6%b3%95%e6%9c%80%e5%90%8e%e7%9a%84%e5%bd%92%e5%ae%bf--layoutnode" aria-label="@Composableæ–¹æ³•æœ€åçš„å½’å®¿&ndash;LayoutNode">@Composableæ–¹æ³•æœ€åçš„å½’å®¿&ndash;LayoutNode</a><ul>
                        
                <li>
                    <a href="#layoutnode-%e7%9a%84-%e5%89%8d%e4%b8%96%e4%bb%8a%e7%94%9f" aria-label="LayoutNode çš„ å‰ä¸–ä»Šç”Ÿ">LayoutNode çš„ å‰ä¸–ä»Šç”Ÿ</a><ul>
                        
                <li>
                    <a href="#applierdownnode-%e5%92%8c-applierup%e7%9a%84%e8%bf%b7%e6%83%91%e6%93%8d%e4%bd%9c" aria-label="applier.down(node) å’Œ applier.up()çš„è¿·æƒ‘æ“ä½œï¼Ÿ">applier.down(node) å’Œ applier.up()çš„è¿·æƒ‘æ“ä½œï¼Ÿ</a></li>
                <li>
                    <a href="#applier-%e4%b8%ba%e4%bb%80%e4%b9%88%e6%98%af-uiapplier%e6%a0%b9layoutnode%e5%8f%88%e6%98%af%e8%b0%81" aria-label="applier ä¸ºä»€ä¹ˆæ˜¯ UiApplierï¼Ÿæ ¹LayoutNodeåˆæ˜¯è°ï¼Ÿ">applier ä¸ºä»€ä¹ˆæ˜¯ UiApplierï¼Ÿæ ¹LayoutNodeåˆæ˜¯è°ï¼Ÿ</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#jetpack-compose-%e6%b5%8b%e9%87%8f%e6%b5%81%e7%a8%8b" aria-label="Jetpack Compose æµ‹é‡æµç¨‹">Jetpack Compose æµ‹é‡æµç¨‹</a><ul>
                        
                <li>
                    <a href="#outerwrapper-%e6%98%af%e8%b0%81layoutnodewrapper-%e9%93%be-%e5%8f%88%e6%98%af%e4%bb%80%e4%b9%88" aria-label="outerWrapper æ˜¯è°ï¼ŸLayoutNodeWrapper é“¾ åˆæ˜¯ä»€ä¹ˆï¼Ÿ">outerWrapper æ˜¯è°ï¼ŸLayoutNodeWrapper é“¾ åˆæ˜¯ä»€ä¹ˆï¼Ÿ</a></li></ul>
                </li>
                <li>
                    <a href="#jetpack-compose-%e7%bb%98%e5%88%b6%e6%b5%81%e7%a8%8b" aria-label="Jetpack Compose ç»˜åˆ¶æµç¨‹">Jetpack Compose ç»˜åˆ¶æµç¨‹</a></li></ul>
                </li>
                <li>
                    <a href="#jetpack-compose-%e4%bb%bb%e9%87%8d%e5%89%8d%e8%a1%8c" aria-label="Jetpack Compose ä»»é‡å‰è¡Œ">Jetpack Compose ä»»é‡å‰è¡Œ</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="æ¦‚è¿°">æ¦‚è¿°<a hidden class="anchor" aria-hidden="true" href="#æ¦‚è¿°">#</a></h1>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FlkQ7AMVRulf-c02-Niju7g" title="https://mp.weixin.qq.com/s/lkQ7AMVRulf-c02-Niju7g">Jetpack Compose 1.0 æ­£å¼å‘å¸ƒï¼æ‰“é€ åŸç”Ÿ UI çš„ Android ç°ä»£å·¥å…·åŒ…</a></p>
<p>Jetpack Composeæ˜¯ç”¨äºæ„å»ºåŸç”ŸAndroid UIçš„ç°ä»£å·¥å…·åŒ…ã€‚ Jetpack Composeä½¿ç”¨æ›´å°‘çš„ä»£ç ï¼Œå¼ºå¤§çš„å·¥å…·å’Œç›´è§‚çš„Kotlin APIï¼Œç®€åŒ–å¹¶åŠ é€Ÿäº†Androidä¸Šçš„UIå¼€å‘ã€‚è¿™æ˜¯Android Developers å®˜ç½‘å¯¹å®ƒçš„æè¿°ã€‚</p>
<blockquote>
<p>æ¦‚è¿°å¼•è‡ªï¼š<br>
ä½œè€…ï¼šä¾ç„¶èŒƒç‰¹ç¨€è¥¿<br>
é“¾æ¥ï¼š<a href="https://juejin.cn/post/6844903999347359751" title="https://juejin.cn/post/6844903999347359751">juejin.cn/post/684490â€¦</a></p>
</blockquote>
<h2 id="0-å£°æ˜å¼-ui-çš„å‰ä¸–ä»Šç”Ÿ">0. å£°æ˜å¼ UI çš„å‰ä¸–ä»Šç”Ÿ<a hidden class="anchor" aria-hidden="true" href="#0-å£°æ˜å¼-ui-çš„å‰ä¸–ä»Šç”Ÿ">#</a></h2>
<p>å…¶å®å£°æ˜å¼ UI å¹¶ä¸æ˜¯ä»€ä¹ˆæ–°æŠ€æœ¯ï¼Œæ—©åœ¨ 2006 å¹´ï¼Œå¾®è½¯å°±å·²ç»å‘å¸ƒäº†å…¶æ–°ä¸€ä»£ç•Œé¢å¼€å‘æ¡†æ¶ WPFï¼Œå…¶é‡‡ç”¨äº† XAML æ ‡è®°è¯­è¨€ï¼Œæ”¯æŒåŒå‘æ•°æ®ç»‘å®šã€å¯å¤ç”¨æ¨¡æ¿ç­‰ç‰¹æ€§ã€‚</p>
<p>2010 å¹´ï¼Œç”±è¯ºåŸºäºšé¢†å¯¼çš„ Qt å›¢é˜Ÿä¹Ÿæ­£å¼å‘å¸ƒäº†å…¶ä¸‹ä¸€ä»£ç•Œé¢è§£å†³æ–¹æ¡ˆ Qt Quickï¼ŒåŒæ ·ä¹Ÿæ˜¯å£°æ˜å¼ï¼Œç”šè‡³ Qt Quick èµ·åˆçš„åå­—å°±æ˜¯ Qt Declarativeã€‚QML è¯­è¨€åŒæ ·æ”¯æŒæ•°æ®ç»‘å®šã€æ¨¡å—åŒ–ç­‰ç‰¹æ€§ï¼Œæ­¤å¤–è¿˜æ”¯æŒå†…ç½® JavaScriptï¼Œå¼€å‘è€…åªç”¨ QML å°±å¯ä»¥å¼€å‘å‡ºç®€å•çš„å¸¦äº¤äº’çš„åŸå‹åº”ç”¨ã€‚</p>
<p>å£°æ˜å¼ UI æ¡†æ¶è¿‘å¹´æ¥é£é€Ÿå‘å±•ï¼Œå¹¶ä¸”è¢« Web å¼€å‘å¸¦å‘é«˜æ½®ã€‚React æ›´æ˜¯ä¸ºå£°æ˜å¼ UI å¥ å®šäº†åšå®åŸºç¡€å¹¶ä¸€ç›´å¼•é¢†å…¶æœªæ¥çš„å‘å±•ã€‚éšå Flutter çš„å‘å¸ƒä¹Ÿå°†å£°æ˜å¼ UI çš„æ€æƒ³æˆåŠŸå¸¦åˆ°ç§»åŠ¨ç«¯å¼€å‘é¢†åŸŸ&hellip;</p>
<p>å£°æ˜å¼UIçš„æ„æ€å°±æ˜¯ï¼Œæè¿°ä½ æƒ³è¦ä¸€ä¸ªä»€ä¹ˆæ ·çš„UIç•Œé¢ï¼ŒçŠ¶æ€å˜åŒ–æ—¶ï¼Œç•Œé¢æŒ‰ç…§å…ˆå‰æè¿°çš„é‡æ–°â€œæ¸²æŸ“â€å³å¯å¾—åˆ°çŠ¶æ€ç»å¯¹æ­£ç¡®çš„ç•Œé¢ï¼Œè€Œä¸ç”¨åƒå‘½ä»¤ä¸€æ ·ï¼Œå‘Šè¯‰ç¨‹åºä¸€æ­¥ä¸€æ­¥è¯¥å¹²ä»€ä¹ˆï¼Œç»´æŠ¤å„ç§çŠ¶æ€ã€‚æ‰¯è¿œäº†ï¼Œè¿™ä¸ªå¹¶ä¸æ˜¯ä»Šå¤©æ–‡ç« çš„é‡ç‚¹ï¼Œç¨å¾®äº†è§£ä¸€ä¸‹å°±å¥½ï¼Œå…¶ä»–çš„å°±ä¸åœ¨æœ¬æ–‡å»¶ä¼¸ã€‚</p>
<p>å…³äºå£°æ˜å¼çš„æ›´å¤šä»‹ç»ï¼Œå»ºè®®çœ‹çœ‹è¿™ç¯‡æ–‡ç« ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F68275232" title="https://zhuanlan.zhihu.com/p/68275232">ä» SwiftUI è°ˆå£°æ˜å¼ UI ä¸ç±»å‹ç³»ç»Ÿ</a></p>
<h2 id="1-ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ–°çš„ui-å·¥å…·">1. ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ–°çš„UI å·¥å…·ï¼Ÿ<a hidden class="anchor" aria-hidden="true" href="#1-ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ–°çš„ui-å·¥å…·">#</a></h2>
<p>åœ¨Androidä¸­ï¼ŒUIå·¥å…·åŒ…çš„å†å²å¯è¿½æº¯åˆ°è‡³å°‘10å¹´å‰ã€‚è‡ªé‚£æ—¶ä»¥æ¥ï¼Œæƒ…å†µå‘ç”Ÿäº†å¾ˆå¤§å˜åŒ–ï¼Œä¾‹å¦‚æˆ‘ä»¬ä½¿ç”¨çš„è®¾å¤‡ï¼Œç”¨æˆ·çš„æœŸæœ›ï¼Œä»¥åŠå¼€å‘äººå‘˜å¯¹ä»–ä»¬æ‰€ä½¿ç”¨çš„å¼€å‘å·¥å…·å’Œè¯­è¨€çš„æœŸæœ›ã€‚</p>
<p>ä»¥ä¸Šåªæ˜¯æˆ‘ä»¬éœ€è¦æ–°UIå·¥å…·çš„ä¸€ä¸ªåŸå› ï¼Œå¦å¤–ä¸€ä¸ªé‡è¦çš„åŸå› æ˜¯View.javaè¿™ä¸ªç±»å®åœ¨æ˜¯å¤ªå¤§äº†ï¼Œæœ‰å¤ªå¤šçš„ä»£ç ï¼Œå®ƒå¤§åˆ°ä½ ç”šè‡³æ— æ³•åœ¨Githubsä¸ŠæŸ¥çœ‹è¯¥æ–‡ä»¶ï¼Œå› ä¸ºå®ƒå®é™…ä¸ŠåŒ…å«äº†30000è¡Œä»£ç ï¼Œè¿™å¾ˆç–¯ç‹‚ï¼Œè€Œæˆ‘ä»¬æ‰€ä½¿ç”¨çš„å‡ ä¹æ¯ä¸€ä¸ªAndroid UI ç»„ä»¶éƒ½éœ€è¦ç»§æ‰¿äºViewã€‚</p>
<p>GogleAndroidå›¢é˜Ÿçš„Anna-Chiaraè¡¨ç¤ºï¼Œä»–ä»¬å¯¹å·²ç»å®ç°çš„ä¸€äº›APIæ„Ÿåˆ°é—æ†¾ï¼Œå› ä¸ºä»–ä»¬ä¹Ÿæ— æ³•åœ¨ä¸ç ´ååŠŸèƒ½çš„æƒ…å†µä¸‹æ”¶å›ã€ä¿®å¤æˆ–æ‰©å±•è¿™äº›APIï¼Œå› æ­¤ç°åœ¨æ˜¯ä¸€ä¸ªå´­æ–°èµ·ç‚¹çš„å¥½æ—¶æœºã€‚</p>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆJetpack Compose è®©æˆ‘ä»¬çœ‹åˆ°äº†æ›™å…‰ã€‚</p>
<h2 id="2-jetpack-compose-ä»‹ç»">2. Jetpack Compose ä»‹ç»<a hidden class="anchor" aria-hidden="true" href="#2-jetpack-compose-ä»‹ç»">#</a></h2>
<p>Jetpack Compose æ˜¯ä¸€ä¸ªç”¨äºæ„å»ºåŸç”ŸAndroid UI çš„ç°ä»£åŒ–å·¥å…·åŒ…ï¼Œå®ƒåŸºäºå£°æ˜å¼çš„ç¼–ç¨‹æ¨¡å‹ï¼Œå› æ­¤ä½ å¯ä»¥ç®€å•åœ°æè¿°UIçš„å¤–è§‚ï¼Œè€ŒComposeåˆ™è´Ÿè´£å…¶ä½™çš„å·¥ä½œ-å½“çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œä½ çš„UIå°†è‡ªåŠ¨æ›´æ–°ã€‚ç”±äºComposeåŸºäºKotlinæ„å»ºï¼Œå› æ­¤å¯ä»¥ä¸Javaç¼–ç¨‹è¯­è¨€å®Œå…¨äº’æ“ä½œï¼Œå¹¶ä¸”å¯ä»¥ç›´æ¥è®¿é—®æ‰€æœ‰Androidå’ŒJetpack APIã€‚å®ƒä¸ç°æœ‰çš„UIå·¥å…·åŒ…ä¹Ÿæ˜¯å®Œå…¨å…¼å®¹çš„ï¼Œå› æ­¤ä½ å¯ä»¥æ··åˆåŸæ¥çš„Viewå’Œç°åœ¨æ–°çš„Viewï¼Œå¹¶ä¸”ä»ä¸€å¼€å§‹å°±ä½¿ç”¨Materialå’ŒåŠ¨ç”»è¿›è¡Œè®¾è®¡ã€‚</p>
<h1 id="compose-ç…ä¸€çœ¼">Compose ç…ä¸€çœ¼<a hidden class="anchor" aria-hidden="true" href="#compose-ç…ä¸€çœ¼">#</a></h1>
<h2 id="1-å¼€å‘å·¥å…·">1. å¼€å‘å·¥å…·<a hidden class="anchor" aria-hidden="true" href="#1-å¼€å‘å·¥å…·">#</a></h2>
<p>ç”±äºCompose è¿˜æ²¡æœ‰å‘å¸ƒæ­£å¼ç‰ˆæœ¬ï¼Œæƒ³è¦æå‰ä½“éªŒComposeçš„é¢„è§ˆæ¨¡å¼ï¼Œåˆ™éœ€è¦ä¸‹è½½ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.google.cn%2Fstudio%2F" title="https://developer.android.google.cn/studio/">Android Studio Arctic Fox 2020.3.1 ç™½ç‹ç‰ˆ</a></p>
<h2 id="2-ç¬¬ä¸€ä¸ª-hello-world">2. ç¬¬ä¸€ä¸ª Hello World<a hidden class="anchor" aria-hidden="true" href="#2-ç¬¬ä¸€ä¸ª-hello-world">#</a></h2>
<p>é¦–å…ˆä»åˆ›å»ºä¸€ä¸ªç©ºçš„Jetpack Composeé¡¹ç›®å¼€å§‹ï¼Œæ‰“å¼€æœ€æ–° Canary ç‰ˆçš„ Android studio é¢„è§ˆç‰ˆï¼Œé€‰æ‹©Empty Compose Activity æ¨¡æ¿ï¼Œå¼€å§‹Composeä¹‹æ—…ï¼š</p>
<p><img loading="lazy" src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/14be6cda89e34b64950687d6376e2bf9~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image.png"  />
</p>
<p><img loading="lazy" src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9adafdf21a164ef8a7b3f4ffd9973b86~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image.png"  />
</p>
<blockquote>
<p>åˆ›å»ºJetpack Composeé¡¹ç›®æ—¶ï¼Œæˆ‘ä»¬å‘ç° Minimum SDK æœ€å°åªèƒ½é€‰æ‹© API 21ï¼šAndroid 5.0ï¼Œä¹Ÿå°±æ˜¯è¯´Jetpack Compose æ”¯æŒçš„æœ€å°ç‰ˆæœ¬å°±æ˜¯ API 21ï¼šAndroid 5.0 ã€‚</p>
</blockquote>
<p>ç‚¹å‡»Finishå®Œæˆé¡¹ç›®æ„å»ºï¼Œæ„å»ºå®Œæˆåæ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img loading="lazy" src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3ab66df5d98e4c038ab87b3f4b128154~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image.png"  />
</p>
<blockquote>
<p>çº¢æ¡†1ï¼šåˆ‡æ¢ä»£ç å’Œå¸ƒå±€æ ·å¼<br>
çº¢æ¡†2ï¼š&ldquo;A successful build is needed before the preview can be displayed&rdquo; éœ€è¦æˆåŠŸæ„å»ºæ‰èƒ½æ˜¾ç¤ºé¢„è§ˆï¼Œç‚¹å‡» &ldquo;Build &amp; Refresh&hellip;&rdquo;</p>
</blockquote>
<p>ç­‰å¾…é¡¹ç›®æ„å»ºå®Œæˆï¼Œæ•ˆæœå¹¶æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥ï¼Œæ­¤æ—¶éœ€è¦æˆ‘ä»¬è¿è¡Œé¡¹ç›® æˆ–è€… ç‚¹å‡»&quot;Build &amp; Refresh&hellip;&quot; æˆ–è€…æˆ‘ä»¬è‡ªå·±æ‰‹åŠ¨Buildé¡¹ç›®æ‰ä¼šå‡ºç°æœ€ç»ˆæ•ˆæœã€‚</p>
<p><img loading="lazy" src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/50caaa38ef194810b818ed6660d7bcbd~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image.png"  />
</p>
<blockquote>
<p>çº¢æ¡†1. åˆ·æ–°è§†å›¾ï¼Œå½“ä»£ç å‘ç”Ÿå˜åŒ–æ—¶ï¼Œç‚¹å‡»å®ƒå¯ä»¥åˆ·æ–°è§†å›¾ï¼ˆé¦–æ¬¡éœ€è¦Buildï¼‰<br>
çº¢æ¡†2å’Œ3. æŠŠå½“å‰è§†å›¾ç›´æ¥éƒ¨ç½²åˆ°è®¾å¤‡ä¸Šçœ‹æ•ˆæœã€‚æ›´å¤šå…³äºå¸ƒå±€é¢„è§ˆå·¥å…·çš„ä½¿ç”¨ï¼Œå¯ä»¥æŸ¥çœ‹å®˜ç½‘ä¸Šå…³äºæ­¤å†…å®¹çš„ä»‹ç»Â <a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.android.google.cn%2Fjetpack%2Fcompose%2Fpreview" title="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.android.google.cn%2Fjetpack%2Fcompose%2Fpreview">developer.android.google.cn/jetpack/comâ€¦</a></p>
</blockquote>
<h2 id="compose-æˆ‘å°±æƒ³è‡ªå·±æ‰‹åŠ¨é…ç½®">Compose æˆ‘å°±æƒ³è‡ªå·±æ‰‹åŠ¨é…ç½®<a hidden class="anchor" aria-hidden="true" href="#compose-æˆ‘å°±æƒ³è‡ªå·±æ‰‹åŠ¨é…ç½®">#</a></h2>
<p>Composeçš„ç›¸å…³é…ç½®ï¼Œéƒ½æ˜¯studioå·¥å…·åˆ›å»º Empty Compose Activity æ¨¡æ¿æ—¶è‡ªåŠ¨é…ç½®å¥½çš„ï¼Œé‚£Composeé¡¹ç›®å’Œæ™®é€šé¡¹ç›®ä¹‹é—´æœ‰ä»€ä¹ˆä¸åŒå‘¢ï¼Ÿ</p>
<ol>
<li>
<p>Jetpack Compose å›´ç»• Kotlin æ„å»ºè€Œæˆã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼ŒKotlin æä¾›äº†ä¸€äº›ç‰¹æ®Šçš„æƒ¯ç”¨è¯­ï¼Œè¿™ä½¿ç¼–å†™è‰¯å¥½çš„ Compose ä»£ç å˜å¾—æ›´å®¹æ˜“ã€‚å¦‚æœä½ çš„é¡¹ç›®è¿˜ä¸æ”¯æŒï¼Œè¯·æŸ¥çœ‹å®˜ç½‘æ•™ç¨‹Â <a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.android.google.cn%2Fkotlin%2Fadd-kotlin%3Fhl%3Dzh-cn" title="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.android.google.cn%2Fkotlin%2Fadd-kotlin%3Fhl%3Dzh-cn">å°† Kotlin æ·»åŠ åˆ°ç°æœ‰åº”ç”¨</a>Â è‡ªè¡Œé…ç½®(ç¡®ä¿æ‚¨åœ¨é¡¹ç›®ä¸­ä½¿ç”¨çš„æ˜¯ Kotlin 1.5.10 æˆ–æ›´é«˜ç‰ˆæœ¬)ã€‚</p>
</li>
<li>
<p>Jetpack Compose çš„ç›¸å…³é…ç½®éƒ½åœ¨é¡¹ç›®çš„Â <code>app/build.gradle</code>Â æ–‡ä»¶ä¸­ï¼š</p>
</li>
</ol>
<p>js</p>
<p>ä»£ç è§£è¯»</p>
<p>å¤åˆ¶ä»£ç </p>
<p><code>plugins {     id 'com.android.application'     id 'org.jetbrains.kotlin.android' } android {     compileSdk 30     buildToolsVersion &quot;30.0.3&quot;     defaultConfig {         ...                  // Jetpack Compose æœ€å°æ”¯æŒç‰ˆæœ¬         minSdk 21     }     // åŸºäºJdk 1.8ç‰ˆæœ¬     compileOptions {         sourceCompatibility JavaVersion.VERSION_1_8         targetCompatibility JavaVersion.VERSION_1_8     }     kotlinOptions {         jvmTarget = '1.8'     }               buildFeatures {         // å¯ç”¨ Jetpack Compose         compose true     }     composeOptions {         // compose_version = '1.0.0-beta09'         kotlinCompilerExtensionVersion compose_version     } } dependencies {     implementation 'androidx.core:core-ktx:1.3.2'     implementation 'androidx.appcompat:appcompat:1.2.0'     implementation 'com.google.android.material:material:1.3.0'     // â‘  Compose ç”±Â `androidx`Â ä¸­çš„ 6 ä¸ª Maven ç»„ ID æ„æˆã€‚æ¯ä¸ªç»„éƒ½åŒ…å«ä¸€å¥—ç‰¹å®šç”¨é€”çš„åŠŸèƒ½     implementation &quot;androidx.compose.ui:ui:$compose_version&quot;     implementation &quot;androidx.compose.material:material:$compose_version&quot;     implementation &quot;androidx.compose.ui:ui-tooling:$compose_version&quot;     implementation 'androidx.lifecycle:lifecycle-runtime-ktx:2.3.1'     implementation 'androidx.activity:activity-compose:1.3.0-alpha06'     testImplementation 'junit:junit:4.+'     androidTestImplementation 'androidx.test.ext:junit:1.1.2'     androidTestImplementation 'androidx.test.espresso:espresso-core:3.3.0'     androidTestImplementation &quot;androidx.compose.ui:ui-test-junit4:$compose_version&quot; }</code></p>
<p>â‘  Compose ç”±Â <code>androidx</code>Â ä¸­çš„ 6 ä¸ª Maven ç»„ ID æ„æˆã€‚æ¯ä¸ªç»„éƒ½åŒ…å«ä¸€å¥—ç‰¹å®šç”¨é€”çš„åŠŸèƒ½</p>
<p>ç»„</p>
<p>è¯´æ˜</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.google.cn%2Fjetpack%2Fandroidx%2Freleases%2Fcompose-animation" title="https://developer.android.google.cn/jetpack/androidx/releases/compose-animation">compose.animation</a></p>
<p>åœ¨ Jetpack Compose åº”ç”¨ä¸­æ„å»ºåŠ¨ç”»ï¼Œä¸°å¯Œç”¨æˆ·çš„ä½“éªŒã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.google.cn%2Fjetpack%2Fandroidx%2Freleases%2Fcompose-compiler" title="https://developer.android.google.cn/jetpack/androidx/releases/compose-compiler">compose.compiler</a></p>
<p>å€ŸåŠ© Kotlin ç¼–è¯‘å™¨æ’ä»¶ï¼Œè½¬æ¢ @Composable functionsï¼ˆå¯ç»„åˆå‡½æ•°ï¼‰å¹¶å¯ç”¨ä¼˜åŒ–åŠŸèƒ½ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.google.cn%2Fjetpack%2Fandroidx%2Freleases%2Fcompose-foundation" title="https://developer.android.google.cn/jetpack/androidx/releases/compose-foundation">compose.foundation</a></p>
<p>ä½¿ç”¨ç°æˆå¯ç”¨çš„æ„å»ºå—ç¼–å†™ Jetpack Compose åº”ç”¨ï¼Œè¿˜å¯æ‰©å±• Foundation ä»¥æ„å»ºæ‚¨è‡ªå·±çš„è®¾è®¡ç³»ç»Ÿå…ƒç´ ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.google.cn%2Fjetpack%2Fandroidx%2Freleases%2Fcompose-material" title="https://developer.android.google.cn/jetpack/androidx/releases/compose-material">compose.material</a></p>
<p>ä½¿ç”¨ç°æˆå¯ç”¨çš„ Material Design ç»„ä»¶æ„å»º Jetpack Compose UIã€‚è¿™æ˜¯æ›´é«˜å±‚çº§çš„ Compose å…¥å£ç‚¹ï¼Œæ—¨åœ¨æä¾›ä¸ <a href="https://link.juejin.cn?target=http%3A%2F%2Fwww.material.io" title="http://www.material.io">www.material.io</a> ä¸Šæè¿°çš„ç»„ä»¶ä¸€è‡´çš„ç»„ä»¶ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.google.cn%2Fjetpack%2Fandroidx%2Freleases%2Fcompose-runtime" title="https://developer.android.google.cn/jetpack/androidx/releases/compose-runtime">compose.runtime</a></p>
<p>Compose çš„ç¼–ç¨‹æ¨¡å‹å’ŒçŠ¶æ€ç®¡ç†çš„åŸºæœ¬æ„å»ºå—ï¼Œä»¥åŠ Compose ç¼–è¯‘å™¨æ’ä»¶é’ˆå¯¹çš„æ ¸å¿ƒè¿è¡Œæ—¶ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.google.cn%2Fjetpack%2Fandroidx%2Freleases%2Fcompose-ui" title="https://developer.android.google.cn/jetpack/androidx/releases/compose-ui">compose.ui</a></p>
<p>ä¸è®¾å¤‡äº’åŠ¨æ‰€éœ€çš„ Compose UI çš„åŸºæœ¬ç»„ä»¶ï¼ŒåŒ…æ‹¬å¸ƒå±€ã€ç»˜å›¾å’Œè¾“å…¥ã€‚</p>
<h2 id="3-composable-å¯ç»„åˆçš„-å‡½æ•°">3. Composable (å¯ç»„åˆçš„) å‡½æ•°<a hidden class="anchor" aria-hidden="true" href="#3-composable-å¯ç»„åˆçš„-å‡½æ•°">#</a></h2>
<p>æˆ‘ä»¬ä»¥å¾€é¡µé¢è§†å›¾ä¹ æƒ¯æ€§çš„åœ¨XMlé‡Œä¹¦å†™ï¼Œè€Œ Jetpack Compose æ˜¯å›´ç»•å¯ç»„åˆå‡½æ•°æ„å»ºçš„ã€‚è¿™äº›å‡½æ•°å¯è®©æ‚¨ä»¥ç¼–ç¨‹æ–¹å¼å®šä¹‰åº”ç”¨ç•Œé¢ï¼Œåªéœ€æè¿°åº”ç”¨ç•Œé¢çš„å½¢çŠ¶å’Œæ•°æ®ä¾èµ–å…³ç³»ï¼Œè€Œä¸å¿…å…³æ³¨ç•Œé¢çš„æ„å»ºè¿‡ç¨‹ã€‚å¦‚éœ€åˆ›å»ºå¯ç»„åˆå‡½æ•°ï¼Œåªéœ€å°†Â <code>@Composable</code>Â æ³¨é‡Šæ·»åŠ åˆ°å‡½æ•°åç§°ä¸­å³å¯ã€‚</p>
<p>js</p>
<p>ä»£ç è§£è¯»</p>
<p>å¤åˆ¶ä»£ç </p>
<p><code>setContent {     // ä½¿ç”¨ä¸»é¢˜ä¸­çš„â€œèƒŒæ™¯â€é¢œè‰²çš„è¡¨é¢å®¹å™¨(è®¾ç½®èƒŒæ™¯ï¼Œå…·æœ‰Material Designçš„ç‰¹æ€§)     Surface(color = MaterialTheme.colors.background) {         Greeting(&quot;Android&quot;)     } } @Composable  fun Greeting(name: String) {      Text(text = &quot;Hello $name!&quot;)  }</code></p>
<p>â‘ . setContentï¼ˆ<code>æ³¨æ„ä¸æ˜¯ setContentView å“¦</code>ï¼‰å—å®šä¹‰äº† Activity çš„å¸ƒå±€ã€‚æˆ‘ä»¬ä¸ä½¿ç”¨ XML æ–‡ä»¶æ¥å®šä¹‰å¸ƒå±€å†…å®¹ï¼Œè€Œæ˜¯è°ƒç”¨å¯ç»„åˆå‡½æ•°ã€‚Jetpack Compose ä½¿ç”¨è‡ªå®šä¹‰ Kotlin ç¼–è¯‘å™¨æ’ä»¶å°†è¿™äº›å¯ç»„åˆå‡½æ•°è½¬æ¢ä¸ºåº”ç”¨çš„ç•Œé¢å…ƒç´ ã€‚ä¾‹å¦‚ï¼ŒCompose ç•Œé¢åº“å®šä¹‰äº†Â <code>Text()</code>Â å‡½æ•°ï¼›æ‚¨å¯ä»¥è°ƒç”¨è¯¥å‡½æ•°åœ¨åº”ç”¨ä¸­å£°æ˜æ–‡æœ¬å…ƒç´ ã€‚</p>
<p>â‘¡. å¯ç»„åˆå‡½æ•°åªèƒ½åœ¨å…¶ä»–å¯ç»„åˆå‡½æ•°çš„èŒƒå›´å†…è°ƒç”¨ã€‚è¦ä½¿å‡½æ•°æˆä¸ºå¯ç»„åˆå‡½æ•°ï¼Œè¯·æ·»åŠ Â <code>@Composable</code>Â æ³¨é‡Šã€‚å¦‚éœ€å°è¯•æ­¤æ“ä½œï¼Œè¯·å®šä¹‰ä¸€ä¸ªÂ <code>Greeting()</code>Â å‡½æ•°å¹¶å‘å…¶ä¼ é€’ä¸€ä¸ªåç§°ï¼Œç„¶åè¯¥å‡½æ•°å°±ä¼šä½¿ç”¨è¯¥åç§°é…ç½®æ–‡æœ¬å…ƒç´ ã€‚</p>
<p>â‘¢. <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.google.cn%2Fstudio%2Fpreview" title="https://developer.android.google.cn/studio/preview">å½“å‰çš„ Canary ç‰ˆ Android Studio</a>Â å…è®¸æ‚¨åœ¨ IDE ä¸­é¢„è§ˆå¯ç»„åˆå‡½æ•°ï¼Œè€Œæ— éœ€å°†åº”ç”¨ä¸‹è½½åˆ° Android è®¾å¤‡æˆ–æ¨¡æ‹Ÿå™¨ä¸­ã€‚ä¸»è¦é™åˆ¶åœ¨äºï¼Œå¯ç»„åˆå‡½æ•°ä¸èƒ½æ¥å—ä»»ä½•å‚æ•°ã€‚å› æ­¤ï¼Œæ‚¨æ— æ³•ç›´æ¥é¢„è§ˆÂ <code>Greeting()</code>Â å‡½æ•°ï¼Œè€Œæ˜¯éœ€è¦åˆ›å»ºå¦ä¸€ä¸ªåä¸ºÂ <code>PreviewGreeting()</code>Â çš„å‡½æ•°ï¼Œç”±è¯¥å‡½æ•°ä½¿ç”¨é€‚å½“çš„å‚æ•°è°ƒç”¨Â <code>Greeting()</code>ã€‚è¯·åœ¨Â <code>@Composable</code>Â ä¸Šæ–¹æ·»åŠ Â <code>@Preview</code>Â æ³¨é‡Šã€‚</p>
<h3 id="è®¤è¯†ä¸€ä¸‹ç¬¬ä¸€ä¸ªç»„ä»¶-text">è®¤è¯†ä¸€ä¸‹ç¬¬ä¸€ä¸ªç»„ä»¶ Text<a hidden class="anchor" aria-hidden="true" href="#è®¤è¯†ä¸€ä¸‹ç¬¬ä¸€ä¸ªç»„ä»¶-text">#</a></h3>
<p>js</p>
<p>ä»£ç è§£è¯»</p>
<p>å¤åˆ¶ä»£ç </p>
<p><code>@Composable fun Text(     text: String, // æ–‡æœ¬     // Modifier ä¸€ä¸ªÂ æœ‰åºçš„ã€ä¸å¯å˜çš„ä¿®é¥°å…ƒç´ é›†åˆï¼Œç”¨äºæ·»åŠ è£…é¥°æˆ–è€…è¡Œä¸ºåˆ°Compose UIå…ƒç´ ã€‚ä¾‹å¦‚backgroundã€padding ã€ç‚¹å‡»äº‹ä»¶ç­‰ã€‚     modifier: Modifier = Modifier,      color: Color = Color.Unspecified, // æ–‡å­—é¢œè‰²     fontSize: TextUnit = TextUnit.Unspecified, // æ–‡å­—å¤§å°     fontStyle: FontStyle? = null, // ç»˜åˆ¶å­—æ¯æ—¶ä½¿ç”¨çš„å­—ä½“å˜ä½“ï¼ˆä¾‹å¦‚ï¼Œæ–œä½“ï¼‰     fontWeight: FontWeight? = null, // å­—ä½“ç²—ç»†     fontFamily: FontFamily? = null, // å‘ˆç°æ–‡æœ¬æ—¶è¦ä½¿ç”¨çš„å­—ä½“ç³»åˆ—     letterSpacing: TextUnit = TextUnit.Unspecified, // å­—é—´è·     textDecoration: TextDecoration? = null, // æ–‡å­—è£…é¥°ã€æ¯”å¦‚ä¸‹åˆ’çº¿     textAlign: TextAlign? = null, // å¯¹é½æ–¹å¼     lineHeight: TextUnit = TextUnit.Unspecified, // è¡Œé«˜     overflow: TextOverflow = TextOverflow.Clip, // æ–‡å­—æ˜¾ç¤ºä¸å®Œçš„å¤„ç†æ–¹å¼ï¼Œä¾‹å¦‚å°¾éƒ¨æ˜¾ç¤ºâ€¦æˆ–è€…ä¸­é—´æ˜¾ç¤ºâ€¦     softWrap: Boolean = true, // æ–‡æœ¬æ˜¯å¦åº”åœ¨æ¢è¡Œç¬¦å¤„ä¸­æ–­ã€‚å¦‚æœä¸ºfalseï¼Œåˆ™æ–‡æœ¬çš„å®½åº¦ä¼šåœ¨æ°´å¹³æ–¹å‘ä¸Šæ— é™å»¶ä¼¸ï¼Œä¸”textAlignå±æ€§å¤±æ•ˆï¼Œå¯èƒ½ä¼šå‡ºç°å¼‚å¸¸æƒ…å†µã€‚     maxLines: Int = Int.MAX_VALUE, // æœ€å¤§è¡Œæ•°     onTextLayout: (TextLayoutResult) -&gt; Unit = {}, // è®¡ç®—æ–°çš„æ–‡æœ¬å¸ƒå±€æ—¶æ‰§è¡Œçš„å›è°ƒ     style: TextStyle = LocalTextStyle.current // æ–‡æœ¬çš„æ ·å¼é…ç½®ï¼Œä¾‹å¦‚é¢œè‰²ï¼Œå­—ä½“ï¼Œè¡Œé«˜ç­‰ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸Šé¢å±æ€§ä¸­çš„color,fontSizeç­‰ä¸€äº›å±æ€§ä¹Ÿå¯ä»¥åœ¨è¿™é‡Œè¿›è¡Œå£°æ˜ã€‚å…·ä½“åŒ…å«çš„å±æ€§å¯ä»¥å‚è€ƒTextStyleç±»ã€‚ ) {     ... }</code></p>
<h3 id="çœ‹çœ‹æˆ‘ä»¬å£°æ˜å¼çš„ä¼˜ç‚¹ä¹‹ä¸€-æ•°æ®æ›´æ–°">çœ‹çœ‹æˆ‘ä»¬å£°æ˜å¼çš„ä¼˜ç‚¹ä¹‹ä¸€ æ•°æ®æ›´æ–°<a hidden class="anchor" aria-hidden="true" href="#çœ‹çœ‹æˆ‘ä»¬å£°æ˜å¼çš„ä¼˜ç‚¹ä¹‹ä¸€-æ•°æ®æ›´æ–°">#</a></h3>
<h4 id="mutablestateof">mutableStateOf<a hidden class="anchor" aria-hidden="true" href="#mutablestateof">#</a></h4>
<p>js</p>
<p>ä»£ç è§£è¯»</p>
<p>å¤åˆ¶ä»£ç </p>
<p><code>class MainActivity : ComponentActivity() {     // inputTextçš„ç±»å‹æ”¹æˆmutableStateï¼Œæ ‡æ˜è¿™ä¸ªdataæ˜¯æœ‰çŠ¶æ€çš„ï¼Œå¦‚æœå‘ç”Ÿäº†æ”¹å˜ï¼Œåˆ™æ‰€æœ‰è®¾è®¡åˆ°çš„ç»„ä»¶éƒ½è¦é‡æ–°ç»˜åˆ¶     var inputText = mutableStateOf(&quot;&quot;)     override fun onCreate(savedInstanceState: Bundle?) {         super.onCreate(savedInstanceState)         setContent {             // var inputText by mutableStateOf(&quot;&quot;) åœ¨ComposeåŸŸä¸­å¯ä½¿ç”¨by ä»£ç†             Content()         }     }       @Composable     fun HelloContent() {         Column(modifier = Modifier.padding(16.dp)) {             Text(                 text = &quot;Hello&quot;,                 modifier = Modifier.padding(bottom = 8.dp)             )             OutlinedTextField( // ç±»æ¯” EditText                 value = inputText.value,                 onValueChange = { inputText.value = it },                 label = { Text(text = &quot;Name&quot;) },             )         }     } }</code></p>
<p>mutableStateOf ä¼šä¿å­˜çŠ¶æ€ï¼Œè€ŒinputTextæ˜¯ä¸€ä¸ªç±»æˆå‘˜å˜é‡ï¼Œè€ŒJetPack Composeæ˜¯ä¸€ç§â€œå‡½æ•°å¼â€ç¼–ç¨‹ï¼Œå› æ­¤é€šå¸¸æ— æ³•å¼•ç”¨æˆ–è€…ä¸æ–¹ä¾¿å¼•ç”¨ç±»å˜é‡ï¼Œæ­¤æ—¶å°±éœ€è¦ remember äº†ã€‚</p>
<blockquote>
<p>æ³¨ï¼švar inputText by mutableStateOf(&quot;&quot;) ä¹Ÿå¯ä»¥æ”¾åœ¨ç»„ä»¶çš„çˆ¶ç»„ä»¶æˆ–è€…ç¥–çˆ¶..ç»„ä»¶ä¸­å£°æ˜ï¼Œä½†æ˜¯å‰ææ˜¯éœ€è¦ä¿è¯è¯¥å€¼å˜åŒ–å¯¼è‡´ç•Œé¢é‡ç»˜æ—¶å…¶çˆ¶ç»„ä»¶æˆ–è€…ç¥–çˆ¶..ç»„ä»¶ä¸ä¼šé‡ç»˜ï¼Œè‹¥å…¶çˆ¶ç»„ä»¶æˆ–è€…ç¥–çˆ¶..ç»„ä»¶ä¼šé‡ç»˜ï¼Œåˆ™é‡ç»˜æ—¶è¯¥å€¼ä¹Ÿä¼šé‡æ–°åˆå§‹åŒ–ï¼Œå¯¼è‡´è¯¥å€¼å˜åŒ–å¤±è´¥ï¼Œæ­¤æ—¶å°±éœ€è¦ remember æ¥ç¼“å­˜æ­¤å€¼æˆ–è€…å°†å…¶ä¿å­˜åœ¨ ViewModelä¸­ã€‚</p>
</blockquote>
<h4 id="remember-å’Œ-viewmodel">remember å’Œ ViewModel<a hidden class="anchor" aria-hidden="true" href="#remember-å’Œ-viewmodel">#</a></h4>
<p>js</p>
<p>ä»£ç è§£è¯»</p>
<p>å¤åˆ¶ä»£ç </p>
<p><code>// 1. rememberï¼š&quot;rememberå°†å€¼å­˜å‚¨èµ·æ¥ï¼Œå½“ç•Œé¢å‘ç”Ÿäº†é‡æ–°ç»˜åˆ¶ï¼Œå°±ä¼šè¯»ä¹‹å‰å­˜å‚¨çš„å€¼ã€‚&quot; @Composable fun Content() {     val inputText = remember { mutableStateOf(&quot;&quot;) }     Column(modifier = Modifier.padding(16.dp)) {         Text(             text = &quot;Hello&quot;,             modifier = Modifier.padding(bottom = 8.dp)         )         OutlinedTextField(             value = inputText.value,             onValueChange = { inputText.value = it },             label = { Text(text = &quot;Name&quot;) },         )     } } // 2. ViewModel class WeViewModel : ViewModel() {     var inputText by mutableStateOf(&quot;&quot;) } @Composable fun Content() {     // éœ€è¦ä¾èµ– implementation 'androidx.lifecycle:lifecycle-viewmodel-compose:1.0.0-alpha07'     val viewModel: WeViewModel = viewModel()     Column(modifier = Modifier.padding(16.dp)) {         Text(             text = &quot;Hello&quot;,             modifier = Modifier.padding(bottom = 8.dp)         )         OutlinedTextField(             value = viewModel.inputText.value,             onValueChange = { viewModel.inputText.value = it },             label = { Text(text = &quot;Name&quot;) },         )     } }</code></p>
<p>Compose åœ¨ç¼–è¯‘æœŸåˆ†æå‡ºä¼šå—åˆ°æŸ state å˜åŒ–å½±å“çš„ä»£ç å—ï¼Œå¹¶è®°å½•å…¶å¼•ç”¨ï¼Œå½“æ­¤ state å˜åŒ–æ—¶ï¼Œä¼šæ ¹æ®å¼•ç”¨æ‰¾åˆ°è¿™äº›ä»£ç å—å¹¶æ ‡è®°ä¸º Invalid ã€‚åœ¨ä¸‹ä¸€æ¸²æŸ“å¸§åˆ°æ¥ä¹‹å‰ Compose ä¼šè§¦å‘ recompositionï¼Œå¹¶åœ¨é‡ç»„è¿‡ç¨‹ä¸­æ‰§è¡Œ invalid ä»£ç å—ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.compose.net.cn%2Fprinciple%2Frecomposition_scope%2F" title="https://docs.compose.net.cn/principle/recomposition_scope/"># äº†è§£Composeçš„é‡ç»„ä½œç”¨åŸŸ</a></p>
<h1 id="compose-åŸºç¡€ç»„ä»¶">Compose åŸºç¡€ç»„ä»¶<a hidden class="anchor" aria-hidden="true" href="#compose-åŸºç¡€ç»„ä»¶">#</a></h1>
<p><img loading="lazy" src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/566d253541bb413f9632a5d2476f5c86~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image.png"  />
</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8c1a368cce694e7885891dd2bcab24d8~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image.png"  />
</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3c07c2b79b914bba9dd6003c39f95f1a~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image.png"  />
</p>
<h1 id="compose-ç¥å¥‡çš„modifier">Compose ç¥å¥‡çš„Modifier<a hidden class="anchor" aria-hidden="true" href="#compose-ç¥å¥‡çš„modifier">#</a></h1>
<h2 id="modifier-ä¿®é¥°ç¬¦">Modifier ä¿®é¥°ç¬¦<a hidden class="anchor" aria-hidden="true" href="#modifier-ä¿®é¥°ç¬¦">#</a></h2>
<p>å€ŸåŠ©ä¿®é¥°ç¬¦ï¼Œæ‚¨å¯ä»¥ä¿®é¥°æˆ–æ‰©å……å¯ç»„åˆé¡¹ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ä¿®é¥°ç¬¦æ¥æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p>
<ul>
<li>æ›´æ”¹å¯ç»„åˆé¡¹çš„å¤§å°ã€å¸ƒå±€ã€è¡Œä¸ºå’Œå¤–è§‚</li>
<li>æ·»åŠ ä¿¡æ¯ï¼Œå¦‚æ— éšœç¢æ ‡ç­¾</li>
<li>å¤„ç†ç”¨æˆ·è¾“å…¥</li>
<li>æ·»åŠ é«˜çº§äº’åŠ¨ï¼Œå¦‚ä½¿å…ƒç´ å¯ç‚¹å‡»ã€å¯æ»šåŠ¨ã€å¯æ‹–åŠ¨æˆ–å¯ç¼©æ”¾</li>
</ul>
<p>ä¿®é¥°ç¬¦æ˜¯æ ‡å‡†çš„ Kotlin å¯¹è±¡ã€‚æ‚¨å¯ä»¥é€šè¿‡è°ƒç”¨æŸä¸ªÂ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.google.cn%2Freference%2Fkotlin%2Fandroidx%2Fcompose%2Fui%2FModifier" title="https://developer.android.google.cn/reference/kotlin/androidx/compose/ui/Modifier"><code>Modifier</code></a>Â ç±»å‡½æ•°æ¥åˆ›å»ºä¿®é¥°ç¬¦ã€‚æ‚¨å¯ä»¥å°†ä»¥ä¸‹å‡½æ•°è¿åœ¨ä¸€èµ·ä»¥å°†å…¶ç»„åˆèµ·æ¥ï¼š</p>
<p>js</p>
<p>ä»£ç è§£è¯»</p>
<p>å¤åˆ¶ä»£ç </p>
<p><code>@Composable fun ArtistCard( Â  Â  artist: Artist, Â  Â  onClick: () -&gt; Unit ) { Â  Â  val padding = 16.dp Â  Â  Column( Â  Â  Â  Â  Modifier Â  Â  Â  Â  Â  Â  .clickable(onClick = onClick) Â  Â  Â  Â  Â  Â  .padding(padding) Â  Â  Â  Â  Â  Â  .fillMaxWidth() Â  Â  ) { Â  Â  Â  Â  Row(verticalAlignment = Alignment.CenterVertically) { /*...*/ } Â  Â  Â  Â  Spacer(Modifier.size(padding)) Â  Â  Â  Â  Card(elevation = 4.dp) { /*...*/ } Â  Â  } }</code></p>
<p>è¯·æ³¨æ„ï¼Œåœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œç»“åˆä½¿ç”¨äº†ä¸åŒçš„ä¿®é¥°ç¬¦å‡½æ•°ã€‚</p>
<ul>
<li><code>clickable</code>Â ä½¿å¯ç»„åˆé¡¹å“åº”ç”¨æˆ·è¾“å…¥ï¼Œå¹¶æ˜¾ç¤ºæ¶Ÿæ¼ªã€‚</li>
<li><code>padding</code>Â åœ¨å…ƒç´ å‘¨å›´ç•™å‡ºç©ºé—´ã€‚</li>
<li><code>fillMaxWidth</code>Â ä½¿å¯ç»„åˆé¡¹å¡«å……å…¶çˆ¶é¡¹ä¸ºå®ƒæä¾›çš„æœ€å¤§å®½åº¦ã€‚</li>
<li><code>size()</code>Â æŒ‡å®šå…ƒç´ çš„é¦–é€‰å®½åº¦å’Œé«˜åº¦ã€‚</li>
</ul>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼šé™¤äº†å…¶ä»–ä½œç”¨ä¹‹å¤–ï¼Œä¿®é¥°ç¬¦çš„ä½œç”¨ç±»ä¼¼äºåŸºäºè§†å›¾çš„å¸ƒå±€ä¸­çš„å¸ƒå±€å‚æ•°ã€‚ä¸è¿‡ï¼Œç”±äºä¿®é¥°ç¬¦æœ‰æ—¶ä¸“ç”¨äºç‰¹å®šä½œç”¨åŸŸï¼Œå› æ­¤å®ƒä»¬ä¸ä»…å¯ä»¥ç¡®ä¿ç±»å‹å®‰å…¨ï¼Œè€Œä¸”è¿˜èƒ½å¸®åŠ©æ‚¨å‘ç°å’Œäº†è§£å¯¹æŸä¸ªå¸ƒå±€å¯ç”¨ä¸”é€‚ç”¨çš„å…ƒç´ ã€‚å¯¹äº XML å¸ƒå±€ï¼Œæœ‰æ—¶å¾ˆéš¾æŸ¥æ˜ç‰¹å®šçš„å¸ƒå±€å±æ€§æ˜¯å¦é€‚ç”¨äºç»™å®šçš„è§†å›¾ã€‚</p>
</blockquote>
<h3 id="ä¿®é¥°ç¬¦é¡ºåºå¾ˆé‡è¦">ä¿®é¥°ç¬¦é¡ºåºå¾ˆé‡è¦<a hidden class="anchor" aria-hidden="true" href="#ä¿®é¥°ç¬¦é¡ºåºå¾ˆé‡è¦">#</a></h3>
<p>ä¿®é¥°ç¬¦å‡½æ•°çš„é¡ºåº<strong>éå¸¸é‡è¦</strong>ã€‚ç”±äºæ¯ä¸ªå‡½æ•°éƒ½ä¼šå¯¹ä¸Šä¸€ä¸ªå‡½æ•°è¿”å›çš„Â <code>Modifier</code>Â è¿›è¡Œæ›´æ”¹ï¼Œå› æ­¤é¡ºåºä¼šå½±å“æœ€ç»ˆç»“æœã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹è¿™æ–¹é¢çš„ä¸€ä¸ªç¤ºä¾‹ï¼š</p>
<p>js</p>
<p>ä»£ç è§£è¯»</p>
<p>å¤åˆ¶ä»£ç </p>
<p><code>@Composable fun ArtistCard(/*...*/) { Â  Â  val padding = 16.dp Â  Â  Column( Â  Â  Â  Â  Modifier Â  Â  Â  Â  Â  Â  .clickable(onClick = onClick) Â  Â  Â  Â  Â  Â  .padding(padding) Â  Â  Â  Â  Â  Â  .fillMaxWidth() Â  Â  ) { Â  Â  Â  Â  // rest of the implementation Â  Â  } }</code></p>
<p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæ•´ä¸ªåŒºåŸŸï¼ˆåŒ…æ‹¬å‘¨å›´çš„å†…è¾¹è·ï¼‰éƒ½æ˜¯å¯ç‚¹å‡»çš„ï¼Œå› ä¸ºÂ <code>padding</code>Â ä¿®é¥°ç¬¦åº”ç”¨åœ¨Â <code>clickable</code>Â ä¿®é¥°ç¬¦åé¢ã€‚**å¦‚æœä¿®é¥°ç¬¦é¡ºåºé¢ å€’ï¼Œç”±Â <code>padding</code>Â æ·»åŠ çš„ç©ºé—´å°±ä¸ä¼šå“åº”ç”¨æˆ·è¾“å…¥</p>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼šæ˜ç¡®çš„é¡ºåºå¯å¸®åŠ©æ‚¨æ¨æ–­ä¸åŒçš„ä¿®é¥°ç¬¦å°†å¦‚ä½•ç›¸äº’ä½œç”¨ã€‚æ‚¨å¯ä»¥å°†è¿™ä¸€ç‚¹ä¸åŸºäºè§†å›¾çš„ç³»ç»Ÿè¿›è¡Œæ¯”è¾ƒã€‚åœ¨åŸºäºè§†å›¾çš„ç³»ç»Ÿä¸­ï¼Œæ‚¨å¿…é¡»äº†è§£ç›’æ¨¡å‹ï¼Œåœ¨è¿™ç§æ¨¡å‹ä¸­ï¼Œåœ¨å…ƒç´ çš„â€œå¤–éƒ¨â€åº”ç”¨å¤–è¾¹è·ï¼Œè€Œåœ¨å…ƒç´ çš„â€œå†…éƒ¨â€åº”ç”¨å†…è¾¹è·ï¼Œå¹¶ä¸”èƒŒæ™¯å…ƒç´ å°†ç›¸åº”åœ°è°ƒæ•´å¤§å°ã€‚ä¿®é¥°ç¬¦è®¾è®¡ä½¿è¿™ç§è¡Œä¸ºå˜å¾—æ˜ç¡®ä¸”å¯é¢„æµ‹ï¼Œå¹¶ä¸”å¯è®©æ‚¨æ›´å¥½åœ°è¿›è¡Œæ§åˆ¶ï¼Œä»¥å®ç°æ‚¨æœŸæœ›çš„ç¡®åˆ‡è¡Œä¸ºã€‚è¿™ä¹Ÿè¯´æ˜äº†ä¸ºä»€ä¹ˆæ²¡æœ‰å¤–è¾¹è·ä¿®é¥°ç¬¦ï¼Œè€Œåªæœ‰Â <code>padding</code>Â ä¿®é¥°ç¬¦ã€‚</p>
</blockquote>
<h3 id="å†…ç½®ä¿®é¥°ç¬¦">å†…ç½®ä¿®é¥°ç¬¦<a hidden class="anchor" aria-hidden="true" href="#å†…ç½®ä¿®é¥°ç¬¦">#</a></h3>
<p>Jetpack Compose æä¾›äº†ä¸€ä¸ªå†…ç½®ä¿®é¥°ç¬¦åˆ—è¡¨ï¼Œå¯å¸®åŠ©æ‚¨ä¿®é¥°æˆ–æ‰©å……å¯ç»„åˆé¡¹ã€‚å·²å¼•å…¥Â <code>padding</code>ã€<code>clickable</code>Â å’ŒÂ <code>fillMaxWidth</code>Â ç­‰ä¿®é¥°ç¬¦ã€‚</p>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.google.cn%2Fjetpack%2Fcompose%2Flayouts%2Fbasics%3Fhl%3Dzh_cn%23modifiers" title="https://developer.android.google.cn/jetpack/compose/layouts/basics?hl=zh_cn#modifiers">Modifierä¿®é¥°ç¬¦(å®˜æ–¹ä¸­æ–‡æ–‡æ¡£)</a><br>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.google.cn%2Freference%2Fkotlin%2Fandroidx%2Fcompose%2Fui%2FModifier" title="https://developer.android.google.cn/reference/kotlin/androidx/compose/ui/Modifier">Compose Modifier ç›¸å…³æ–‡æ¡£(å…¨)</a></p>
</blockquote>
<p><img loading="lazy" src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/96b826c2dd7a4e538b6a0e3de9a90676~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image.png"  />
</p>
<p><img loading="lazy" src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5dce3f9ea0a94f0694e5d9dbab7725b6~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image.png"  />
</p>
<h1 id="compose-è‡ªå®šä¹‰">Compose è‡ªå®šä¹‰<a hidden class="anchor" aria-hidden="true" href="#compose-è‡ªå®šä¹‰">#</a></h1>
<ul>
<li>è‡ªå®šä¹‰ç»˜åˆ¶ï¼š <code>Canvas()</code>ã€<code>Modifier.drawBehind</code>Â å’ŒÂ <code>Modifier.drawWithContent</code></li>
</ul>
<p>js</p>
<p>ä»£ç è§£è¯»</p>
<p>å¤åˆ¶ä»£ç </p>
<p><code>// ç»˜åˆ¶æœªè¯»å°çº¢ç‚¹ fun Modifier.unread(show: Boolean) = this.drawWithContent {     // &quot;*è®°å¾—ä¸€å®šè¦è°ƒç”¨ï¼ï¼ï¼*&quot;     drawContent()     if (show) {         drawIntoCanvas {             // ViewOverlay             // ç»˜åˆ¶çº¢è‰²å°ç‚¹è§’æ ‡             val paint = Paint().apply {                 color = Color.Red             }             it.drawCircle(Offset(size.width - 1.dp.toPx(), 1.dp.toPx()), 5.dp.toPx(), paint)         }     } }</code></p>
<ul>
<li>
<p>Canvas çº¯è‡ªå®šä¹‰ç»˜åˆ¶ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.google.cn%2Fjetpack%2Fcompose%2Fgraphics%3Fhl%3Dzh_cn" title="https://developer.android.google.cn/jetpack/compose/graphics?hl=zh_cn">Compose ä¸­çš„å›¾å½¢</a></p>
</li>
<li>
<p>Layoutï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.google.cn%2Fjetpack%2Fcompose%2Flayouts%2Fcustom%3Fhl%3Dzh_cn" title="https://developer.android.google.cn/jetpack/compose/layouts/custom?hl=zh_cn">è‡ªå®šä¹‰å¸ƒå±€</a></p>
</li>
</ul>
<p>js</p>
<p>ä»£ç è§£è¯»</p>
<p>å¤åˆ¶ä»£ç </p>
<p><code>@Composable fun CustomColumn( Â  Â  modifier: Modifier = Modifier, Â  Â  content: @Composable () -&gt; Unit ) { Â  Â  Layout( Â  Â  Â  Â  modifier = modifier, Â  Â  Â  Â  content = content Â  Â  ) { measurables, constraints -&gt; // å­å¸ƒå±€åˆ—è¡¨, æµ‹é‡å¸ƒå±€çš„ä¸å¯å˜çº¦æŸ Â  Â  Â  Â  // éå†æµ‹é‡ Â  Â  Â  Â  val placeables = measurables.map { measurable -&gt; Â  Â  Â  Â  Â  Â  // æµ‹é‡æ¯ä¸€ä¸ªå­ç»„ä»¶ Â  Â  Â  Â  Â  Â  measurable.measure(constraints) Â  Â  Â  Â  } Â  Â  Â  Â  // å¸ƒå±€ï¼Œå°†å¸ƒå±€çš„å¤§å°è®¾ç½®ä¸ºå°½å¯èƒ½å¤§ Â  Â  Â  Â  layout(constraints.maxWidth, constraints.maxHeight) { Â  Â  Â  Â  Â  Â  // è®°å½•æ”¾ç½®å­ç»„ä»¶çš„ y åæ ‡ Â  Â  Â  Â  Â  Â  var yPosition = 0 Â  Â  Â  Â  Â  Â  // å°†å­å…ƒç´ æ”¾ç½®åœ¨çˆ¶å¸ƒå±€ä¸­ Â  Â  Â  Â  Â  Â  placeables.forEach { placeable -&gt; Â  Â  Â  Â  Â  Â  Â  Â  // åœ¨å±å¹•ä¸Šå®šä½ Â  Â  Â  Â  Â  Â  Â  Â  placeable.placeRelative(x = 0, y = yPosition) Â  Â  Â  Â  Â  Â  Â  Â  // é‡ç½®æ”¾ç½®åˆ°çš„ y åæ ‡ Â  Â  Â  Â  Â  Â  Â  Â  yPosition += placeable.height Â  Â  Â  Â  Â  Â  } Â  Â  Â  Â  } Â  Â  } }</code></p>
<h1 id="compose-å›ºæœ‰ç‰¹æ€§">Compose å›ºæœ‰ç‰¹æ€§<a hidden class="anchor" aria-hidden="true" href="#compose-å›ºæœ‰ç‰¹æ€§">#</a></h1>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.google.cn%2Fjetpack%2Fcompose%2Flayouts%2Fintrinsic-measurements%3Fhl%3Dzh_cn" title="https://developer.android.google.cn/jetpack/compose/layouts/intrinsic-measurements?hl=zh_cn"># Compose å¸ƒå±€ä¸­çš„å›ºæœ‰ç‰¹æ€§æµ‹é‡</a></p>
<p>Compose æœ‰ä¸€é¡¹è§„åˆ™ï¼Œå³ï¼Œå­é¡¹åªèƒ½æµ‹é‡ä¸€æ¬¡ï¼Œæµ‹é‡ä¸¤æ¬¡å°±ä¼šå¼•å‘è¿è¡Œæ—¶å¼‚å¸¸ã€‚ä½†æ˜¯ï¼Œæœ‰æ—¶éœ€è¦å…ˆæ”¶é›†ä¸€äº›å…³äºå­é¡¹çš„ä¿¡æ¯ï¼Œç„¶åå†æµ‹é‡å­é¡¹ã€‚<strong>å€ŸåŠ©å›ºæœ‰ç‰¹æ€§ï¼Œå¯ä»¥å…ˆæŸ¥è¯¢å­é¡¹ï¼Œç„¶åå†è¿›è¡Œå®é™…æµ‹é‡ã€‚</strong></p>
<p><strong>è§¦å‘åœºæ™¯ï¼šå­å¸ƒå±€å†³å®šçˆ¶å¸ƒå±€çš„å®½é«˜ï¼Œæ¯”å¦‚ï¼š</strong></p>
<ol>
<li>Modifier.width(IntrinsicSize.Max)</li>
<li>Modifier.width(IntrinsicSize.Min)</li>
<li>Modifier.height(IntrinsicSize.Max)</li>
<li>Modifier.height(IntrinsicSize.Min)</li>
</ol>
<h3 id="é‡å†™measurepolicyå›ºæœ‰ç‰¹æ€§æµ‹é‡ç›¸å…³æ–¹æ³•">é‡å†™MeasurePolicyå›ºæœ‰ç‰¹æ€§æµ‹é‡ç›¸å…³æ–¹æ³•<a hidden class="anchor" aria-hidden="true" href="#é‡å†™measurepolicyå›ºæœ‰ç‰¹æ€§æµ‹é‡ç›¸å…³æ–¹æ³•">#</a></h3>
<p>js</p>
<p>ä»£ç è§£è¯»</p>
<p>å¤åˆ¶ä»£ç </p>
<p><code>@Composable inline fun Layout(     content: @Composable () -&gt; Unit,     modifier: Modifier = Modifier,     measurePolicy: MeasurePolicy )</code></p>
<p>å¯¹äºå›ºæœ‰ç‰¹æ€§æµ‹é‡çš„é€‚é…ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®éœ€æ±‚é‡å†™ä»¥ä¸‹å››ä¸ªæ–¹æ³•ã€‚</p>
<p><img loading="lazy" src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/529442fea83949139c0190e0faa6938b~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" alt="image.png"  />
</p>
<p>Layoutå£°æ˜æ—¶ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦ä¼ å…¥MeasurePolicyï¼Œè€Œæ˜¯è¦è‡ªå·±å®ç°MeasurePolicyï¼Œå¹¶é‡å†™ç›¸å…³çš„æ‰€æœ‰æ–¹æ³•ã€‚</p>
<p>js</p>
<p>ä»£ç è§£è¯»</p>
<p>å¤åˆ¶ä»£ç </p>
<p><code>@Composable fun CustomColumn(modifier: Modifier, content: @Composable () -&gt; Unit){     Layout(         content = content,         modifier = modifier,         measurePolicy = object: MeasurePolicy {             override fun MeasureScope.measure(                 measurables: List&lt;Measurable&gt;,                 constraints: Constraints             ): MeasureResult {                 TODO(&quot;Not yet implemented&quot;)             }             override fun IntrinsicMeasureScope.minIntrinsicHeight(                 measurables: List&lt;IntrinsicMeasurable&gt;,                 width: Int             ): Int {                 TODO(&quot;Not yet implemented&quot;)             }             override fun IntrinsicMeasureScope.maxIntrinsicHeight(                 measurables: List&lt;IntrinsicMeasurable&gt;,                 width: Int             ): Int {                 TODO(&quot;Not yet implemented&quot;)             }             override fun IntrinsicMeasureScope.maxIntrinsicWidth(                 measurables: List&lt;IntrinsicMeasurable&gt;,                 height: Int             ): Int {                 TODO(&quot;Not yet implemented&quot;)             }             override fun IntrinsicMeasureScope.minIntrinsicWidth(                 measurables: List&lt;IntrinsicMeasurable&gt;,                 height: Int             ): Int {                 TODO(&quot;Not yet implemented&quot;)             }         }     )  }</code></p>
<h1 id="compose-æµ…å…¥æµ…å‡º">Compose æµ…å…¥æµ…å‡º<a hidden class="anchor" aria-hidden="true" href="#compose-æµ…å…¥æµ…å‡º">#</a></h1>
<blockquote>
<p>æºç æ ¹æ® <strong>1.0.0-beta09 è¿›è¡Œåˆ†æ</strong></p>
</blockquote>
<p><strong>æˆ‘ä»¬åœ¨åˆ†æä¹‹å‰å…ˆæƒ³å‡ ä¸ªé—®é¢˜ï¼š</strong></p>
<ol>
<li>setContentæ˜¯å¦‚ä½•è®¾ç½® <code>@Composable</code> ç»„ä»¶æ¥åˆå§‹åŒ–è§†å›¾çš„ï¼Ÿ</li>
<li><code>@Composable</code> åˆ°åº•æ˜¯æ€æ ·é€šè¿‡å‡½æ•°æ¥å®ç°ä¸€ç³»åˆ—Viewçš„åŠŸèƒ½çš„å‘¢ï¼Ÿ</li>
<li>æˆ‘ä»¬è®¾ç½®çš„Modifier æ˜¯å¦‚ä½•èµ·ä½œç”¨çš„å‘¢ï¼Ÿ</li>
<li>æµ‹é‡æµç¨‹ä»å“ªå¼€å§‹çš„å‘¢ï¼Ÿæ˜¯å¦‚ä½•æµ‹é‡çš„å‘¢ï¼Ÿ</li>
<li>ç»˜åˆ¶drawå…¥å£åœ¨å“ªï¼Ÿ</li>
</ol>
<p><strong>å…ˆç»™ç­”æ¡ˆï¼š</strong></p>
<ol>
<li>setContentæ–¹æ³•é‡Œ é€šè¿‡åˆ›å»ºComposeViewï¼Œå¹¶å½“ä½œR.layout.xxx è®¾ç½®åˆ°åŸsetContentViewæ–¹æ³•ä¸­ï¼Œæ¥åˆå§‹åŒ–å†…å®¹è§†å›¾ã€‚</li>
<li><code>@Composable</code> å‡½æ•°æœ€åç”ŸæˆLayoutNodeï¼Œä¸€äº›åˆ—<code>@Composable</code> æœ€åæ„å»ºæˆäº†ä¸€ä¸ªä»¥rootä¸ºæ ¹çš„LayoutNodeæ ‘ï¼ˆç±»ä¼¼äºViewğŸŒ²ï¼‰ã€‚</li>
<li>Modifier ç»‘å®šåˆ° LayoutNode ä¸­ï¼Œæ¯ä¸€ä¸ªModifierçš„æ‰©å±•æ–¹æ³•é¦–å…ˆä¼šé€šè¿‡ then æ–¹æ³•ç”ŸæˆCombinedModifierçš„é“¾ï¼Œå³æ¯ä¸€ä¸ªCombinedModifier ä¸­ éƒ½åŒ…å«ä¸Šä¸€ä¸ªæ‰©å±•æ–¹æ³•è¿”å›çš„ Modifierï¼Œç„¶ååœ¨ LayoutNode ä¸­è½¬æ¢ä¸ºLayoutNodeWrapperé“¾ï¼Œç„¶åæµ‹é‡è¿‡ç¨‹ä¸­é€’å½’éå†æ‰€æœ‰LayoutNodeWrapperé“¾ä¸­æ‰€æœ‰LayoutNodeWrapperè¿›è¡Œå„ä¸ªå±æ€§æµ‹é‡ï¼Œæœ€åå›åˆ°LayoutNodeWrapperé“¾ä¸­æœ€åä¸€ä¸ªèŠ‚ç‚¹ InnerPlaceable(LayoutNodeæˆå‘˜å±æ€§ä¸­åˆå§‹åŒ–) ä¸­å¼€å§‹æµ‹é‡å½“å‰LayoutNodeå­nodeï¼Œç„¶åè®°å½•æµ‹é‡ç»“æœã€‚</li>
<li>æµ‹é‡æµç¨‹ ä»æˆ‘ä»¬çš„ AndroidComposeView çš„ <strong>onMeasure</strong> æ–¹æ³•ä¸­å¼€å§‹ï¼Œé€šè¿‡AndroidComposeViewä¸­çš„rootæ¥é€’å½’æµ‹é‡æ‰€æœ‰çš„LayoutNodeï¼Œæ¯ä¸€ä¸ªLayoutNodeåˆé€šè¿‡ LayoutNodeWrapperé“¾æµ‹é‡ã€‚</li>
<li>ç»˜åˆ¶drawå…¥å£ ä¹Ÿåœ¨ AndroidComposeView é‡Œï¼Œåœ¨ <strong>dispatchDraw</strong> æ–¹æ³•é‡Œè°ƒç”¨äº† root.draw(this)</li>
</ol>
<h2 id="è§†å›¾çš„åˆå§‹åŒ–--setcontent">è§†å›¾çš„åˆå§‹åŒ–&ndash;setContent<a hidden class="anchor" aria-hidden="true" href="#è§†å›¾çš„åˆå§‹åŒ–--setcontent">#</a></h2>
<p>js</p>
<p>ä»£ç è§£è¯»</p>
<p>å¤åˆ¶ä»£ç </p>
<p><code>public fun ComponentActivity.setContent(     parent: CompositionContext? = null,     content: @Composable () -&gt; Unit ) {     val existingComposeView = window.decorView         .findViewById&lt;ViewGroup&gt;(android.R.id.content)         .getChildAt(0) as? ComposeView     if (existingComposeView != null) with(existingComposeView) {         setParentCompositionContext(parent)         setContent(content)     } else ComposeView(this).apply {         // Set content and parent **before** setContentView         // to have ComposeView create the composition on attach         setParentCompositionContext(parent)         // â‘          setContent(content)         // Set the view tree owners before setting the content view so that the inflation process         // and attach listeners will see them already present         setOwners()         setContentView(this, DefaultActivityContentLayoutParams)     } } // â‘ å¤„ä»£ç  fun setContent(content: @Composable () -&gt; Unit) {     shouldCreateCompositionOnAttachedToWindow = true     this.content.value = content     if (isAttachedToWindow) {         // â‘¡         createComposition()     } } // â‘¡ å¤„ä»£ç  fun createComposition() {     check(parentContext != null || isAttachedToWindow) {         &quot;createComposition requires either a parent reference or the View to be attached&quot; +                 &quot;to a window. Attach the View or call setParentCompositionReference.&quot;     }     // â‘¢     ensureCompositionCreated() } // â‘¢ å¤„ä»£ç  @Suppress(&quot;DEPRECATION&quot;) // Still using ViewGroup.setContent for now private fun ensureCompositionCreated() {     if (composition == null) {         try {             creatingComposition = true             // â‘£             composition = setContent(resolveParentCompositionContext()) {                 Content()             }         } finally {             creatingComposition = false         }     } } // â‘£ å¤„ä»£ç  internal fun ViewGroup.setContent(     parent: CompositionContext,     content: @Composable () -&gt; Unit ): Composition {     GlobalSnapshotManager.ensureStarted()     // â‘¤ æ­¤å¤„çœ‹åˆ°åˆå§‹åŒ–äº† AndroidComposeViewï¼Œå¹¶ä¸” addView è¿› ComposeView     val composeView =         if (childCount &gt; 0) {             getChildAt(0) as? AndroidComposeView         } else {             removeAllViews(); null         } ?: AndroidComposeView(context).also { addView(it.view, DefaultLayoutParams) }     // â‘¥     return doSetContent(composeView, parent, content) }</code></p>
<p>æ¢³ç†ä¸€ä¸‹ï¼š</p>
<ol>
<li>setContent ä¸­æˆ‘ä»¬çœ‹åˆ°åˆ›å»ºäº† ComposeView(ViewGroup)ï¼Œç„¶åçœ‹åˆ°äº†æˆ‘ä»¬ç†Ÿæ‚‰çš„ setContentViewï¼Œå¹¶ä¸”å°†ComposeView å½“ä½œæˆ‘ä»¬ä»¥å¾€çš„ R.layout.xxx å½¢å¼æ¥è®¾ç½®ç•Œé¢å¸ƒå±€</li>
<li>éšåâ‘¤çš„ä½ç½® åˆå§‹åŒ–äº†AndroidComposeView(ViewGroup)ï¼Œå¹¶ä¸”addViewåˆ° ComposeView ä¸­ï¼Œè€ŒAndroidComposeViewä¹Ÿæˆä¸ºäº†æœ€åä¸€ä¸ªæˆ‘ä»¬ç†Ÿæ‚‰çš„ViewGroupï¼Œè€Œåç»­çš„æµ‹é‡ã€å¸ƒå±€ã€ç»˜åˆ¶éƒ½æ˜¯ç”±AndroidComposeViewå¼€å¯ã€‚</li>
</ol>
<h2 id="composableæ–¹æ³•æœ€åçš„å½’å®¿--layoutnode">@Composableæ–¹æ³•æœ€åçš„å½’å®¿&ndash;LayoutNode<a hidden class="anchor" aria-hidden="true" href="#composableæ–¹æ³•æœ€åçš„å½’å®¿--layoutnode">#</a></h2>
<p>æˆ‘ä»¬é€šè¿‡ä¸€ç³»åˆ— <code>@Composable</code> æ¥å®ç°ç•Œé¢çš„æ˜¾ç¤ºï¼Œå¯¹äº <code>@Composable</code> åˆ°åº•æ˜¯æ€æ ·é€šè¿‡å‡½æ•°æ¥å®ç°ä¸€ç³»åˆ—Viewçš„åŠŸèƒ½çš„å‘¢ï¼Ÿç­”æ¡ˆå…¶å®å°±æ˜¯ <code>LayoutNode</code></p>
<h3 id="layoutnode-çš„-å‰ä¸–ä»Šç”Ÿ">LayoutNode çš„ å‰ä¸–ä»Šç”Ÿ<a hidden class="anchor" aria-hidden="true" href="#layoutnode-çš„-å‰ä¸–ä»Šç”Ÿ">#</a></h3>
<p>js</p>
<p>ä»£ç è§£è¯»</p>
<p>å¤åˆ¶ä»£ç </p>
<p><code>@Suppress(&quot;ComposableLambdaParameterPosition&quot;) @Composable inline fun Layout(     content: @Composable () -&gt; Unit,     modifier: Modifier = Modifier,     measurePolicy: MeasurePolicy ) {     val density = LocalDensity.current     val layoutDirection = LocalLayoutDirection.current     ReusableComposeNode&lt;ComposeUiNode, Applier&lt;Any&gt;&gt;(         // â‘  åˆå§‹åŒ– LayoutNode         factory = ComposeUiNode.Constructor,         update = {             set(measurePolicy, ComposeUiNode.SetMeasurePolicy)             set(density, ComposeUiNode.SetDensity)             set(layoutDirection, ComposeUiNode.SetLayoutDirection)         },         // â‘¡ ç»‘å®šmodifier         skippableUpdate = materializerOf(modifier),         content = content     ) } ==========================  â†“â†“â†“â†“â†“  ============================= @Composable @ExplicitGroupsComposable inline fun &lt;T, reified E : Applier&lt;*&gt;&gt; ReusableComposeNode(     noinline factory: () -&gt; T,     update: @DisallowComposableCalls Updater&lt;T&gt;.() -&gt; Unit,     noinline skippableUpdate: @Composable SkippableUpdater&lt;T&gt;.() -&gt; Unit,     content: @Composable () -&gt; Unit ) {     if (currentComposer.applier !is E) invalidApplier()     currentComposer.startReusableNode()     // æ­¤æ—¶ä¸ºtrue     if (currentComposer.inserting) {         // åˆ›å»ºæ–°NodeèŠ‚ç‚¹         currentComposer.createNode(factory)     } else {         currentComposer.useNode()     }     currentComposer.disableReusing()     // å›è°ƒupdateï¼ŒåŒç† â‘¢     Updater&lt;T&gt;(currentComposer).update()     currentComposer.enableReusing()     // â‘¢ å›è°ƒskippableUpdate     SkippableUpdater&lt;T&gt;(currentComposer).skippableUpdate()     currentComposer.startReplaceableGroup(0x7ab4aae9)     // âœ‹ğŸ» è°ƒç”¨ @Composable æ³¨è§£çš„æ–¹æ³•     content()     currentComposer.endReplaceableGroup()     // â‘£ ç»“æŸNode     currentComposer.endNode() } ==========================  â†“â†“ å…ˆçœ‹ä¸‹åˆ›å»ºèŠ‚ç‚¹ç›¸å…³ â†“â†“  =========================== @Suppress(&quot;UNUSED&quot;) override fun &lt;T&gt; createNode(factory: () -&gt; T) {     validateNodeExpected()     check(inserting) { &quot;createNode() can only be called when inserting&quot; }     val insertIndex = nodeIndexStack.peek()     val groupAnchor = writer.anchor(writer.parent)     groupNodeCount++     // â‘¤ è®°å½•1     recordFixup { applier, slots, _ -&gt;         @Suppress(&quot;UNCHECKED_CAST&quot;)         val node = factory()         slots.updateNode(groupAnchor, node)         @Suppress(&quot;UNCHECKED_CAST&quot;) val nodeApplier = applier as Applier&lt;T&gt;         // è‹¥æ­¤nodeApplierä¸ºUiApplierï¼Œåˆ™æ­¤æ–¹æ³•æ­¤å¤„ä¸ºç©ºå®ç°         nodeApplier.insertTopDown(insertIndex, node)         // â‘¥ é‡æ–°è®¾ç½®current çš„LayoutNodeï¼Œä¸ºåç»­ç»‘å®šModifieråšå‡†å¤‡         applier.down(node)     }        // â‘¦ è®°å½•2     recordInsertUpFixup { applier, slots, _ -&gt;         @Suppress(&quot;UNCHECKED_CAST&quot;)         val nodeToInsert = slots.node(groupAnchor)         // â‘§ é‡æ–°è·å–ä¸Šä¸€ä¸ª currentï¼Œæ­¤æ“ä½œä¸ºä¸‹é¢æ’å…¥èŠ‚ç‚¹å‡†å¤‡                         applier.up()         @Suppress(&quot;UNCHECKED_CAST&quot;) val nodeApplier = applier as Applier&lt;Any?&gt;         // è‹¥æ­¤nodeApplierä¸ºUiApplierï¼Œæ’å…¥èŠ‚ç‚¹ä½¿ç”¨æ­¤æ–¹æ³•ï¼Œ         nodeApplier.insertBottomUp(insertIndex, nodeToInsert)     } }    private val insertFixups = mutableListOf&lt;Change&gt;()    // â‘¤ çš„æ–¹æ³•å®ç° private fun recordFixup(change: Change) {     insertFixups.add(change) } private val insertUpFixups = Stack&lt;Change&gt;()    // â‘¦ çš„æ–¹æ³•å®ç° private fun recordInsertUpFixup(change: Change) {     insertUpFixups.push(change) } // å°†â‘¦ä¸­çš„Change add åˆ°â‘¤ ä¸­ private fun registerInsertUpFixup() {     insertFixups.add(insertUpFixups.pop()) } // â‘¨ æ­¤æ–¹æ³•åœ¨ä¸Šè¿° â‘£ ç»“æŸNode é‡Œè¢«è°ƒç”¨ private fun recordInsert(anchor: Anchor) {     if (insertFixups.isEmpty()) {         val insertTable = insertTable         recordSlotEditingOperation { _, slots, _ -&gt;             slots.beginInsert()             slots.moveFrom(insertTable, anchor.toIndexFor(insertTable))             slots.endInsert()         }     } else {         // å¤„ç†æ‰€æœ‰â‘¤ add è¿› insertFixups çš„æ‰€æœ‰Changeçš„å”¯ä¸€é€»è¾‘         val fixups = insertFixups.toMutableList()         insertFixups.clear()         realizeUps()         realizeDowns()         val insertTable = insertTable         recordSlotEditingOperation { applier, slots, rememberManager -&gt;             insertTable.write { writer -&gt;                 fixups.fastForEach { fixup -&gt;                     // å›è°ƒâ‘¤ ä¸­çš„lamdba                     fixup(applier, writer, rememberManager)                 }             }             slots.beginInsert()             slots.moveFrom(insertTable, anchor.toIndexFor(insertTable))             slots.endInsert()         }     } }    ======================  â†“â†“ â‘¢ å›å¤´å†çœ‹modifierä¼ å…¥çš„æ–¹æ³• â†“â†“  =======================    @PublishedApi internal fun materializerOf(     modifier: Modifier ): @Composable SkippableUpdater&lt;ComposeUiNode&gt;.() -&gt; Unit = {     val materialized = currentComposer.materialize(modifier)     update {         // æ­¤setæ–¹æ³• æ–¹æ³•ä½“åœ¨ä¸‹æ–¹         set(materialized, ComposeUiNode.SetModifier)     } } @Suppress(&quot;INLINE_CLASS_DEPRECATED&quot;, &quot;EXPERIMENTAL_FEATURE_WARNING&quot;) inline class SkippableUpdater&lt;T&gt; constructor(     @PublishedApi internal val composer: Composer ) {     inline fun update(block: Updater&lt;T&gt;.() -&gt; Unit) {         composer.startReplaceableGroup(0x1e65194f)         // æ­¤å¤„block å°±æ˜¯ä¸Šä¸ªæ–¹æ³• ComposeUiNode.SetModifierçš„lamdbaï¼Œå³ä¸‹é¢å®Œæ•´ç‰ˆ         Updater&lt;T&gt;(composer).block()         composer.endReplaceableGroup()     } } // setæ–¹æ³• æ–¹æ³•ä½“ fun &lt;V&gt; set(     value: V,     block: T.(value: V) -&gt; Unit ) = with(composer) {     if (inserting || rememberedValue() != value) {         updateRememberedValue(value)         // apply å°†æ“ä½œå°è£…æˆChange å¾…åç»­æ‰§è¡Œ         composer.apply(value, block)     } } override fun &lt;V, T&gt; apply(value: V, block: T.(V) -&gt; Unit) {     // apply å°†æ“ä½œå°è£…æˆChange å¾…åç»­æ‰§è¡Œ     val operation: Change = { applier, _, _ -&gt;         @Suppress(&quot;UNCHECKED_CAST&quot;)         (applier.current as T).block(value)     }     if (inserting) recordFixup(operation)     else recordApplierOperation(operation) } // ComposeUiNode.SetModifier å®Œæ•´ç‰ˆ, æ­¤this å°±æ˜¯LayoutNodeï¼Œæ­¤æ—¶å·²ç»‘å®šmodifier val SetModifier: ComposeUiNode.(Modifier) -&gt; Unit = { this.modifier = it } =======================  â†“â†“ æ­¤æ—¶â‘£ endNodeæ‰§è¡Œå â†“â†“  ========================    override fun endNode() = end(isNode = true) private fun end(isNode: Boolean) {     ......          val inserting = inserting     if (inserting) {         if (isNode) {             // ğŸ”Ÿ å°†â‘¥ä¸­çš„Change add åˆ°â‘¤ ä¸­             registerInsertUpFixup()             expectedNodeCount = 1         }         reader.endEmpty()         val parentGroup = writer.parent         writer.endGroup()         if (!reader.inEmpty) {             val virtualIndex = insertedGroupVirtualIndex(parentGroup)             writer.endInsert()             writer.close()             // è°ƒç”¨â‘¨ä»£ç ï¼Œå¤„ç†insertFixupsæ‰€æœ‰Changeçš„å”¯ä¸€é€»è¾‘ï¼Œå¼€å¯åˆ›å»ºèŠ‚ç‚¹å’Œâ‘¢å¤„çš„å›è°ƒ             recordInsert(insertAnchor)             this.inserting = false             if (!slotTable.isEmpty) {                 updateNodeCount(virtualIndex, 0)                 updateNodeCountOverrides(virtualIndex, expectedNodeCount)             }         }     } else {         if (isNode) recordUp()         recordEndGroup()         val parentGroup = reader.parent         val parentNodeCount = updatedNodeCount(parentGroup)         if (expectedNodeCount != parentNodeCount) {             updateNodeCountOverrides(parentGroup, expectedNodeCount)         }         if (isNode) {             expectedNodeCount = 1         }         reader.endGroup()         realizeMovement()     }     exitGroup(expectedNodeCount, inserting) } =======================  â†“â†“ æ­¤æ—¶â‘¥ å’Œ â‘§ æ‰§è¡Œå‰å â†“â†“  ======================== private val stack = mutableListOf&lt;T&gt;() override var current: T = root     protected set override fun down(node: T) {     //      stack.add(current)     current = node } override fun up() {     check(stack.isNotEmpty())     current = stack.removeAt(stack.size - 1) }      override fun insertTopDown(index: Int, instance: LayoutNode) {     // å¿½ç•¥ã€‚åœ¨[insertBottomUp]ä¸­è¿›è¡Œæ’å…¥ï¼Œè‡ªåº•å‘ä¸Šæ„å»ºæ ‘ï¼Œé¿å…å­èŠ‚ç‚¹è¿›å…¥æ ‘æ—¶é‡å¤é€šçŸ¥ã€‚ }  // æ’å…¥èŠ‚ç‚¹ override fun insertBottomUp(index: Int, instance: LayoutNode) {     current.insertAt(index, instance) }</code></p>
<p>ç¨å¾®æ¢³ç†ä¸€ä¸‹ï¼š</p>
<ol>
<li>ReusableComposeNode å¼€å¯äº†åˆ›å»ºèŠ‚ç‚¹ å’Œ è®¾ç½®å‚æ•°ï¼Œå³ï¼šfactoryã€updateã€skippableUpdateã€‚</li>
<li>factoryã€updateã€skippableUpdate ä¸‰ä¸ªæ“ä½œæœ€ç»ˆéƒ½å˜æˆäº†Changeï¼Œå¾…åç»­æ‰§è¡Œã€‚</li>
<li>currentComposer.endNode() ç»“æŸåï¼Œå¼€å§‹æŒ‰é¡ºåºéå†æ‰§è¡Œæ‰€æœ‰çš„Changeã€‚</li>
</ol>
<p>æˆ‘ä»¬ç°åœ¨å…³æ³¨ä¸€ä¸‹ â‘¢ å’Œ â‘£ ä¸­é—´çš„ âœ‹ğŸ» å¤„ï¼Œæ‰§è¡Œäº†æˆ‘ä»¬ä½¿ç”¨ <code>@Composable</code> æ³¨è§£çš„æ–¹æ³•ï¼š</p>
<ol>
<li>
<p>â‘£å¤„ endNodeä¹‹åæ‰ä¼šå¼€å§‹å¾€current èŠ‚ç‚¹ä¸­ insertAt å½“å‰èŠ‚ç‚¹</p>
</li>
<li>
<p>æˆ‘ä»¬å…³æ³¨ä¸‹ ğŸ”Ÿ å¤„èŠ‚ç‚¹ä»£ç ï¼Œæ˜¯å…ˆå°†æ‰€æœ‰â‘¦ å¤„çš„upå’Œ insertBottomUpæ“ä½œéƒ½æ”¾åˆ° æ‰€æœ‰â‘¤å¤„çš„ downå’ŒinsertTopDown ä¹‹åæ“ä½œã€‚</p>
</li>
<li>
<p>å½“æ‰§è¡Œå®Œæ‰€æœ‰downå’ŒinsertTopDownæ“ä½œåï¼Œæ‰€æœ‰çš„LayoutNodeéƒ½æŒ‰ä»root(æœ€å¤–å±‚)å¼€å§‹åˆ°æœ€é‡Œå±‚å«æœ‰ <strong>content:</strong> <strong>@Composable</strong> ****<strong>ColumnScope.() -&gt; Unit</strong> å‚æ•°çš„LayoutNodeå­˜å‚¨åˆ°stackçš„ç¼“å­˜å †æ ˆä¸­ã€‚</p>
</li>
<li>
<p>å¼€å§‹æ‰§è¡Œupå’Œ insertBottomUpæ“ä½œåï¼Œå¼€å§‹ä»åå¾€å‰ å–stackä¸­LayoutNodeæ„å»ºå®Œæ•´çš„LayoutNodeæ ‘ã€‚</p>
</li>
<li>
<p>å®Œæ•´çš„LayoutNodeæ ‘ï¼Œæ‰€æœ‰çš„å¶å­èŠ‚ç‚¹ï¼Œéƒ½æ˜¯ä¸å¸¦ <strong>content:</strong> <strong>@Composable</strong> ****<strong>ColumnScope.() -&gt; Unit</strong> å‚æ•°çš„ <code>@Composable</code> çš„æ³¨è§£æ–¹æ³•LayoutNodeï¼Œæ ¹èŠ‚ç‚¹æ˜¯rootï¼Œå…¶ä½™é¡µé¢ä¾æ¬¡å‘ä¸‹ã€‚</p>
</li>
</ol>
<h4 id="applierdownnode-å’Œ-applierupçš„è¿·æƒ‘æ“ä½œ">applier.down(node) å’Œ applier.up()çš„è¿·æƒ‘æ“ä½œï¼Ÿ<a hidden class="anchor" aria-hidden="true" href="#applierdownnode-å’Œ-applierupçš„è¿·æƒ‘æ“ä½œ">#</a></h4>
<p>js</p>
<p>ä»£ç è§£è¯»</p>
<p>å¤åˆ¶ä»£ç </p>
<p><code>// â‘¤ è®°å½•1 recordFixup { applier, slots, _ -&gt;     @Suppress(&quot;UNCHECKED_CAST&quot;)     val node = factory()     slots.updateNode(groupAnchor, node)     @Suppress(&quot;UNCHECKED_CAST&quot;) val nodeApplier = applier as Applier&lt;T&gt;     // è‹¥æ­¤nodeApplierä¸ºUiApplierï¼Œåˆ™æ­¤æ–¹æ³•æ­¤å¤„ä¸ºç©ºå®ç°     nodeApplier.insertTopDown(insertIndex, node)     // â‘¥ é‡æ–°è®¾ç½®current çš„LayoutNodeï¼Œä¸ºåç»­ç»‘å®šModifieråšå‡†å¤‡     applier.down(node) } // â‘¦ è®°å½•2 recordInsertUpFixup { applier, slots, _ -&gt;     @Suppress(&quot;UNCHECKED_CAST&quot;)     val nodeToInsert = slots.node(groupAnchor)     // â‘§ é‡æ–°è·å–ä¸Šä¸€ä¸ª currentï¼Œæ­¤æ“ä½œä¸ºä¸‹é¢æ’å…¥èŠ‚ç‚¹å‡†å¤‡                     applier.up()     @Suppress(&quot;UNCHECKED_CAST&quot;) val nodeApplier = applier as Applier&lt;Any?&gt;     // è‹¥æ­¤nodeApplierä¸ºUiApplierï¼Œæ’å…¥èŠ‚ç‚¹ä½¿ç”¨æ­¤æ–¹æ³•ï¼Œ     nodeApplier.insertBottomUp(insertIndex, nodeToInsert) }</code></p>
<p>åŸå› ï¼šChange æ˜¯æŒ‰ç…§ createNodeã€updateã€skippableUpdate çš„é¡ºåºæ·»åŠ çš„ï¼Œè€Œéå†æ—¶ä¹Ÿæ˜¯éœ€è¦æŒ‰ç…§æ­¤é¡ºåºï¼Œ</p>
<p>applier.down(node) å…ˆå°†createNodeèŠ‚ç‚¹è®¾ç½®ä¸ºcurrentå½“å‰èŠ‚ç‚¹ï¼Œç„¶åæ‰§è¡Œupdateã€skippableUpdateæ“ä½œChangeä¸­çš„ (applier.current as T).block(value) æ—¶ï¼Œapplier.current å°±æ˜¯ createNodeï¼Œæ­¤æ—¶LayoutNodeå’ŒModifierå°±ç»‘å®šæˆåŠŸäº†ã€‚è€Œåç»­çš„applier.up() æ˜¯ä¸ºäº†å°†createNode æ’å…¥åˆ°è‡ªå·±çš„çˆ¶èŠ‚ç‚¹ä¸­ï¼Œè€ŒcreateNodeæ­¤æ—¶ä¸èƒ½ä½œä¸ºcurrentï¼Œå› ä¸ºçˆ¶èŠ‚ç‚¹ä¸‹å¯èƒ½å­˜åœ¨å¤šä¸ªå­èŠ‚ç‚¹ï¼Œå…¶ä¸‹é¢çš„å…„å¼ŸèŠ‚ç‚¹è¿˜éœ€è¦æ’å…¥åˆ°çˆ¶èŠ‚ç‚¹ä¸Šã€‚</p>
<h4 id="applier-ä¸ºä»€ä¹ˆæ˜¯-uiapplieræ ¹layoutnodeåˆæ˜¯è°">applier ä¸ºä»€ä¹ˆæ˜¯ UiApplierï¼Ÿæ ¹LayoutNodeåˆæ˜¯è°ï¼Ÿ<a hidden class="anchor" aria-hidden="true" href="#applier-ä¸ºä»€ä¹ˆæ˜¯-uiapplieræ ¹layoutnodeåˆæ˜¯è°">#</a></h4>
<p>js</p>
<p>ä»£ç è§£è¯»</p>
<p>å¤åˆ¶ä»£ç </p>
<p><code>&quot;æ‰¿æ¥ã€è§†å›¾åˆå§‹åŒ–--serContentã€‘éƒ¨åˆ†æºç &quot; // â‘¥ å¤„ä»£ç  @OptIn(InternalComposeApi::class) private fun doSetContent(     owner: AndroidComposeView,     parent: CompositionContext,     content: @Composable () -&gt; Unit ): Composition {     if (inspectionWanted(owner)) {         owner.setTag(             R.id.inspection_slot_table_set,             Collections.newSetFromMap(WeakHashMap&lt;CompositionData, Boolean&gt;())         )         enableDebugInspectorInfo()     }     // â‘¦ åˆå§‹åŒ–äº†Compositionï¼ŒåŒæ—¶åˆå§‹åŒ–äº†UiApplier     val original = Composition(UiApplier(owner.root), parent)     val wrapped = owner.view.getTag(R.id.wrapped_composition_tag)         as? WrappedComposition         ?: WrappedComposition(owner, original).also {             owner.view.setTag(R.id.wrapped_composition_tag, it)         }     wrapped.setContent(content)     return wrapped } // â‘¦ åˆå§‹åŒ– UiApplier           internal class UiApplier(     root: LayoutNode ) : AbstractApplier&lt;LayoutNode&gt;(root) {     ...... }  // â‘§ åˆå§‹åŒ– UiApplier çˆ¶ç±» AbstractApplierï¼Œæ­¤æ—¶å¯ä»¥çœ‹åˆ° current = rootï¼Œå³ä¸Šé¢ä¼ å…¥çš„owner.root abstract class AbstractApplier&lt;T&gt;(val root: T) : Applier&lt;T&gt; {     private val stack = mutableListOf&lt;T&gt;()     override var current: T = root         protected set         ...... }</code></p>
<p>æˆ‘ä»¬ä»ä¸Šé¢ä»£ç éƒ¨åˆ† â‘¦ å¤„çœ‹åˆ°ï¼Œåˆå§‹åŒ–äº†UiApplierï¼Œæ­¤æ—¶ä¹Ÿä¼ å…¥äº†ä¸€ä¸ªå‚æ•° owner.rootï¼Œé‚£owneræ˜¯è°å‘¢ï¼Œä»ä»£ç  â‘¤ å¤„çœ‹åˆ° ownerå®é™…ä¸Šæ˜¯AndroidComposeViewï¼Œä» â‘§ å¤„å¯ä»¥çœ‹å‡º æ ¹LayoutNode å°±æ˜¯ owner.rootï¼Œå³ AndroidComposeView é‡Œçš„ rootæˆå‘˜å˜é‡ã€‚</p>
<p>é™¤äº†çœ‹ä¸Šè¿°æºç ä¸ºï¼Œè¿˜å¯ä»¥çœ‹ Applier çš„å®ç°ç±»ï¼Œåªæœ‰ä¸‰ä¸ª UiApplierã€VectorApplierå’ŒAbstractApplierï¼Œå‰ä¸¤è€…ç»§æ‰¿è‡ªæœ€åä¸€ä¸ªæŠ½è±¡ç±»ï¼Œè€Œ VectorApplier åªåº”ç”¨äº VectorComponent å’Œ VectorPainterä¸­ã€‚</p>
<blockquote>
<p><strong>æ€»ç»“</strong>ï¼š <strong>@Composable</strong> <strong>æ³¨é‡Šçš„æ–¹æ³•ï¼Œæœ€åéƒ½æ„å»ºæˆäº†LayoutNode è¢« insertAt åˆ° AndroidComposeViewçš„rootä¸­ï¼Œæ‰€ä»¥æœ€åçš„ æµ‹é‡å’Œå¸ƒå±€ éƒ½åœ¨AndroidComposeView ä¸­å¼€å§‹ã€‚</strong></p>
</blockquote>
<h2 id="jetpack-compose-æµ‹é‡æµç¨‹">Jetpack Compose æµ‹é‡æµç¨‹<a hidden class="anchor" aria-hidden="true" href="#jetpack-compose-æµ‹é‡æµç¨‹">#</a></h2>
<p>æˆ‘ä»¬ä»ä¸Šé¢å¾—çŸ¥ root æ ¹LayoutNodeåœ¨ AndroidComposeView ä¸­ï¼Œæ‰€ä»¥LayoutNodeçš„æµ‹é‡è‚¯å®šä¹Ÿæ˜¯åœ¨AndroidComposeViewé‡Œå¼€å§‹çš„ï¼Œæˆ‘ä»¬å…ˆä» AndroidComposeView çš„ <strong>onMeasure</strong> æ–¹æ³•çœ‹èµ·ï¼š</p>
<p>js</p>
<p>ä»£ç è§£è¯»</p>
<p>å¤åˆ¶ä»£ç </p>
<p><code>override val root = LayoutNode().also {     it.measurePolicy = RootMeasurePolicy     it.modifier = Modifier         .then(semanticsModifier)         .then(_focusManager.modifier)         .then(keyInputModifier) } private val measureAndLayoutDelegate = MeasureAndLayoutDelegate(root) override fun onMeasure(widthMeasureSpec: Int, heightMeasureSpec: Int) {     trace(&quot;AndroidOwner:onMeasure&quot;) {         ...         val (minWidth, maxWidth) = convertMeasureSpec(widthMeasureSpec)         val (minHeight, maxHeight) = convertMeasureSpec(heightMeasureSpec)         val constraints = Constraints(minWidth, maxWidth, minHeight, maxHeight)         ...         // â‘  æ›´æ–°çº¦æŸ å’Œ çŠ¶æ€         measureAndLayoutDelegate.updateRootConstraints(constraints)         // â‘¡ æµ‹é‡å’Œå¸ƒå±€         measureAndLayoutDelegate.measureAndLayout()         setMeasuredDimension(root.width, root.height)         ...     } } ==========================  â‘  æ›´æ–°çº¦æŸ å’Œ çŠ¶æ€  ============================= fun updateRootConstraints(constraints: Constraints) {     if (rootConstraints != constraints) {         require(!duringMeasureLayout)         rootConstraints = constraints         // æ›´æ–° root çŠ¶æ€         root.layoutState = LayoutNode.LayoutState.NeedsRemeasure         // å°†root æ·»åŠ è¿› éœ€è¦æµ‹é‡æˆ–å¸ƒå±€çš„å¸ƒå±€èŠ‚ç‚¹         relayoutNodes.add(root)     } } ==========================   â‘¡ æµ‹é‡å’Œå¸ƒå±€  ==================================      fun measureAndLayout(): Boolean {     ...     val rootConstraints = rootConstraints ?: return false     var rootNodeResized = false     if (relayoutNodes.isNotEmpty()) {         duringMeasureLayout = true         try {             // å–å‡ºåˆšåˆšaddè¿›çš„root             relayoutNodes.popEach { layoutNode -&gt;                 if (layoutNode.isPlaced ||                     layoutNode.canAffectParent ||                     layoutNode.alignmentLines.required                 ) {                     // åœ¨ â‘  ä¸­çŠ¶æ€å·²ç»æ›´æ”¹ä¸º NeedsRemeasure                     if (layoutNode.layoutState == LayoutNode.LayoutState.NeedsRemeasure) {                         // â‘¢ å»æµ‹é‡                         if (doRemeasure(layoutNode, rootConstraints)) {                             rootNodeResized = true                         }                     }                     ......                 }             }         } finally {             duringMeasureLayout = false         }         consistencyChecker?.assertConsistent()     }     return rootNodeResized } ==========================   â‘¢ å»æµ‹é‡  ================================== private fun doRemeasure(layoutNode: LayoutNode, rootConstraints: Constraints): Boolean {     // å½“å‰ layoutNode å°±æ˜¯ root     val sizeChanged = if (layoutNode === root) {         // â‘£ å¼€å§‹æµ‹é‡         layoutNode.remeasure(rootConstraints)     } else {         layoutNode.remeasure()     }     val parent = layoutNode.parent     if (sizeChanged) {         if (parent == null) {             return true         } else if (layoutNode.measuredByParent == LayoutNode.UsageByParent.InMeasureBlock) {             requestRemeasure(parent)         } else {             require(layoutNode.measuredByParent == LayoutNode.UsageByParent.InLayoutBlock)             requestRelayout(parent)         }     }     return false } // æ ¹LayoutNode root internal fun remeasure(     constraints: Constraints = outerMeasurablePlaceable.lastConstraints ) = outerMeasurablePlaceable.remeasure(constraints) // OuterMeasurablePlaceable fun remeasure(constraints: Constraints): Boolean {     ......     // æ­¤æ—¶ layoutState == NeedsRemeasure     if (layoutNode.layoutState == LayoutNode.LayoutState.NeedsRemeasure ||         measurementConstraints != constraints     ) {         layoutNode.alignmentLines.usedByModifierMeasurement = false         layoutNode._children.forEach { it.alignmentLines.usedDuringParentMeasurement = false }         measuredOnce = true         layoutNode.layoutState = LayoutNode.LayoutState.Measuring         measurementConstraints = constraints         val outerWrapperPreviousMeasuredSize = outerWrapper.size         owner.snapshotObserver.observeMeasureSnapshotReads(layoutNode) {             // â‘¤ LayoutNodeWrapper é“¾å¼€å§‹ æµ‹é‡å…¥å£             outerWrapper.measure(constraints)         }         ......         return sizeChanged     }     return false } ==================   â‘¤ LayoutNodeWrapper é“¾å¼€å§‹ æµ‹é‡å…¥å£ ===================== internal class OuterMeasurablePlaceable(     private val layoutNode: LayoutNode,     var outerWrapper: LayoutNodeWrapper // outerWrapperæ„é€ ä¼ å…¥ ) // LayoutNode ä¸­åˆå§‹åŒ– OuterMeasurablePlaceable internal val innerLayoutNodeWrapper: LayoutNodeWrapper = InnerPlaceable(this)     private val outerMeasurablePlaceable = OuterMeasurablePlaceable(this, innerLayoutNodeWrapper)</code></p>
<p>æœ€åè°ƒç”¨äº†rootçš„ innerLayoutNodeWrapperçš„ measure è¿›è¡Œæ•´æ¡LayoutNodeWrapper é“¾çš„æµ‹é‡</p>
<h3 id="outerwrapper-æ˜¯è°layoutnodewrapper-é“¾-åˆæ˜¯ä»€ä¹ˆ">outerWrapper æ˜¯è°ï¼ŸLayoutNodeWrapper é“¾ åˆæ˜¯ä»€ä¹ˆï¼Ÿ<a hidden class="anchor" aria-hidden="true" href="#outerwrapper-æ˜¯è°layoutnodewrapper-é“¾-åˆæ˜¯ä»€ä¹ˆ">#</a></h3>
<p>ç­”ï¼šåœ¨ã€LayoutNode çš„ å‰ä¸–ä»Šç”Ÿã€‘â‘¡ ç»‘å®šmodifierï¼Œæœ€åå®é™…ä¸Šè°ƒç”¨äº†LayoutNodeçš„modifieræˆå‘˜å±æ€§</p>
<p>çš„setæ–¹æ³•ï¼š</p>
<p>js</p>
<p>ä»£ç è§£è¯»</p>
<p>å¤åˆ¶ä»£ç </p>
<p><code>internal val innerLayoutNodeWrapper: LayoutNodeWrapper = InnerPlaceable(this) private val outerMeasurablePlaceable = OuterMeasurablePlaceable(this, innerLayoutNodeWrapper) override var modifier: Modifier = Modifier     set(value) {         if (value == field) return         if (modifier != Modifier) {             require(!isVirtual) { &quot;Modifiers are not supported on virtual LayoutNodes&quot; }         }         field = value         ...         // â‘  modifier.foldOut         val outerWrapper = modifier.foldOut(innerLayoutNodeWrapper) { mod, toWrap -&gt;             var wrapper = toWrap             if (mod is RemeasurementModifier) {                 mod.onRemeasurementAvailable(this)             }             val delegate = reuseLayoutNodeWrapper(mod, toWrap)             if (delegate != null) {                 if (delegate is OnGloballyPositionedModifierWrapper) {                     getOrCreateOnPositionedCallbacks() += delegate                 }                 wrapper = delegate             } else {                 // â‘¡ é€šè¿‡åˆ¤æ–­Modifierç±»å‹ï¼Œå°†å„ä¸ªmodifieræ“ä½œåŒ…è£…åˆ°LayoutNodeWrapperä¸­                 if (mod is DrawModifier) {                     wrapper = ModifiedDrawNode(wrapper, mod)                 }                 if (mod is FocusModifier) {                     wrapper = ModifiedFocusNode(wrapper, mod).assignChained(toWrap)                 }                 if (mod is FocusEventModifier) {                     wrapper = ModifiedFocusEventNode(wrapper, mod).assignChained(toWrap)                 }                 if (mod is FocusRequesterModifier) {                     wrapper = ModifiedFocusRequesterNode(wrapper, mod).assignChained(toWrap)                 }                 if (mod is FocusOrderModifier) {                     wrapper = ModifiedFocusOrderNode(wrapper, mod).assignChained(toWrap)                 }                 if (mod is KeyInputModifier) {                     wrapper = ModifiedKeyInputNode(wrapper, mod).assignChained(toWrap)                 }                 if (mod is PointerInputModifier) {                     wrapper = PointerInputDelegatingWrapper(wrapper, mod).assignChained(toWrap)                 }                 if (mod is NestedScrollModifier) {                     wrapper = NestedScrollDelegatingWrapper(wrapper, mod).assignChained(toWrap)                 }                 if (mod is LayoutModifier) {                     wrapper = ModifiedLayoutNode(wrapper, mod).assignChained(toWrap)                 }                 if (mod is ParentDataModifier) {                     wrapper = ModifiedParentDataNode(wrapper, mod).assignChained(toWrap)                 }                 if (mod is SemanticsModifier) {                     wrapper = SemanticsWrapper(wrapper, mod).assignChained(toWrap)                 }                 if (mod is OnRemeasuredModifier) {                     wrapper = RemeasureModifierWrapper(wrapper, mod).assignChained(toWrap)                 }                 if (mod is OnGloballyPositionedModifier) {                     wrapper =                         OnGloballyPositionedModifierWrapper(wrapper, mod).assignChained(toWrap)                     getOrCreateOnPositionedCallbacks() += wrapper                 }             }             wrapper         }         outerWrapper.wrappedBy = parent?.innerLayoutNodeWrapper         outerMeasurablePlaceable.outerWrapper = outerWrapper         ......     } // æ­¤é«˜é˜¶å‡½æ•°ä¸æ˜¯å¾ˆå®¹æ˜“ç†è§£ override fun &lt;R&gt; foldOut(initial: R, operation: (Modifier.Element, R) -&gt; R): R =         outer.foldOut(inner.foldOut(initial, operation), operation) // æˆ‘ä»¬ç¨å¾®è½¬æ¢ä¸€ä¸‹ override fun &lt;R&gt; foldOut(initial: R, operation: (Modifier.Element, R) -&gt; R): R = {     // â‘¢      val inn = inner.foldOut(initial, operation)     outer.foldOut(inn , operation) }    // é€’å½’æœ€åï¼Œè°ƒç”¨operationå›è°ƒå‡½æ•° override fun &lt;R&gt; foldOut(initial: R, operation: (Element, R) -&gt; R): R =     operation(this, initial)</code></p>
<ol>
<li>
<p>é€šè¿‡â‘  foldOut å‡½æ•°æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œå®é™…ä¸Šæ˜¯é€’å½’éå†äº†æ‰€æœ‰çš„Modifieræ“ä½œï¼Œç„¶åé€šè¿‡operation å›è°ƒå‡½æ•°æ¥è½¬æ¢å½“å‰çš„Modifierå’Œinitialå€¼ï¼›</p>
</li>
<li>
<p>operation å®é™…ä¸Šæ˜¯å°† å½“å‰modifieræ“ä½œå’Œ initialå€¼(å³â‘¢å¤„inner.foldOuté€’å½’å€¼ï¼ŒLayoutNodeWrapper) åŒ…è£¹è¿›æ–°çš„LayoutNodeWrapperä¸­ï¼Œå³â‘¡å¤„çš„é€»è¾‘ï¼›</p>
</li>
<li>
<p>ç”±äºé€’å½’éå†ä¸€ç›´å°† å½“å‰modifieræ“ä½œå’Œ initialå€¼åŒ…è£¹è¿›æ–°çš„LayoutNodeWrapperä¸­ï¼Œè€Œæ–°çš„LayoutNodeWrapperåˆæ˜¯inner.foldOutçš„è¿”å›å€¼ è¾“å…¥åˆ°ä¸‹ä¸€æ¬¡é€’å½’ä¸­ï¼Œå› æ­¤æœ€åå½¢æˆäº†ä¸€ä¸ªLayoutNodeWrapperé“¾ç»“æ„ã€‚</p>
</li>
<li>
<p>ç”±äºåˆå§‹initialå€¼ æ˜¯InnerPlaceableï¼Œå› æ­¤ æ•´ä¸ªLayoutNodeWrapperé“¾æœ€ç»ˆèŠ‚ç‚¹å°±æ˜¯InnerPlaceableã€‚</p>
</li>
<li>
<p>rootçš„ innerLayoutNodeWrapper æœ€åå®é™…ä¸Šå·²ç»æ˜¯ç»è¿‡â‘  foldOut å‡½æ•°è½¬æ¢è¿‡çš„ outerWrapper æ–°çš„LayoutNodeWrapperé“¾ å¤´LayoutNodeWrapperäº†ã€‚</p>
</li>
</ol>
<h2 id="jetpack-compose-ç»˜åˆ¶æµç¨‹">Jetpack Compose ç»˜åˆ¶æµç¨‹<a hidden class="anchor" aria-hidden="true" href="#jetpack-compose-ç»˜åˆ¶æµç¨‹">#</a></h2>
<p>js</p>
<p>ä»£ç è§£è¯»</p>
<p>å¤åˆ¶ä»£ç </p>
<p><code>// AndroidComposeView override fun dispatchDraw(canvas: android.graphics.Canvas) {     if (!isAttachedToWindow) {         invalidateLayers(root)     }     measureAndLayout()     isDrawingContent = true     canvasHolder.drawInto(canvas) { root.draw(this) }     ...... } // LayoutNode internal fun draw(canvas: Canvas) = outerLayoutNodeWrapper.draw(canvas) // LayoutNodeWrapper var layer: OwnedLayer? = null // ç”¨äºåˆ†éš” ç»˜åˆ¶å†…å®¹ çš„å±‚     private set      fun draw(canvas: Canvas) {     val layer = layer     if (layer != null) {         // éš”ç¦»å±‚è‹¥å­˜åœ¨ï¼Œåˆ™æ‰§è¡ŒdrawLayer         layer.drawLayer(canvas)     } else {         // ç»˜åˆ¶è‡ªå·±æˆ–è€…é€’å½’ä¸‹ä¸€ä¸ªLayoutNodeWrapperé“¾èŠ‚ç‚¹ç»˜åˆ¶         // LayoutNodeWrapperé“¾ï¼šã€outerWrapper æ˜¯è°ï¼ŸLayoutNodeWrapper é“¾ åˆæ˜¯ä»€ä¹ˆï¼Ÿã€‘         val x = position.x.toFloat()         val y = position.y.toFloat()         canvas.translate(x, y)         performDraw(canvas)         canvas.translate(-x, -y)     } } protected abstract fun performDraw(canvas: Canvas) // --------------------------performDrawçš„å®ç°------------------------- internal open class DelegatingLayoutNodeWrapper&lt;T : Modifier.Element&gt;(     override var wrapped: LayoutNodeWrapper,     open var modifier: T ) : LayoutNodeWrapper(wrapped.layoutNode) {          override fun performDraw(canvas: Canvas) {         // æ‰§è¡Œä¸‹ä¸€ä¸ªèŠ‚ç‚¹ç»˜åˆ¶         wrapped.draw(canvas)     } } // LayoutNodeWrapperé“¾ä¸­æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¼€å§‹éå†ç»˜åˆ¶å­ç»„ä»¶ internal class InnerPlaceable(     layoutNode: LayoutNode ) : LayoutNodeWrapper(layoutNode), Density by layoutNode.measureScope {     override fun performDraw(canvas: Canvas) {         val owner = layoutNode.requireOwner()         // éå†ç»˜åˆ¶å­ç»„ä»¶         layoutNode.zSortedChildren.forEach { child -&gt;             if (child.isPlaced) {                 child.draw(canvas)             }         }         if (owner.showLayoutBounds) {             drawBorder(canvas, innerBoundsPaint)         }     } } // ç»˜åˆ¶èŠ‚ç‚¹ internal class ModifiedDrawNode(     wrapped: LayoutNodeWrapper,     drawModifier: DrawModifier ) : DelegatingLayoutNodeWrapper&lt;DrawModifier&gt;(wrapped, drawModifier), OwnerScope {     override fun performDraw(canvas: Canvas) {         val size = measuredSize.toSize()         if (cacheDrawModifier != null &amp;&amp; invalidateCache) {             layoutNode.requireOwner().snapshotObserver.observeReads(                 this,                 onCommitAffectingModifiedDrawNode,                 updateCache             )         }         // ç»˜åˆ¶èŒƒå›´         val drawScope = layoutNode.mDrawScope         drawScope.draw(canvas, size, wrapped) {             with(drawScope) {                 with(modifier) {                     // ç»˜åˆ¶è‡ªå·±ï¼Œdraw()æ–¹æ³•é‡Œå¿…ä¼šè°ƒç”¨drawContent()è§¦å‘æ‰§è¡Œä¸‹ä¸€ä¸ªèŠ‚ç‚¹ç»˜åˆ¶                     draw()                 }             }         }     } // ç»˜åˆ¶èŒƒå›´ï¼šä»ç»™å®šçš„ LayoutNodeWrapper ä¸­æå–å¯†åº¦å’Œå¸ƒå±€æ–¹å‘ä¿¡æ¯ // canvasDrawScope ä¸­å¯å‘æŒ‡å®šçš„ç”»å¸ƒå’Œè¾¹ç•Œå‘å‡ºç»˜å›¾å‘½ä»¤ internal class LayoutNodeDrawScope(     private val canvasDrawScope: CanvasDrawScope = CanvasDrawScope() ) : DrawScope by canvasDrawScope, ContentDrawScope {     private var wrapped: LayoutNodeWrapper? = null     override fun drawContent() {         // ç»§ç»­ç»˜åˆ¶ä¸‹ä¸€èŠ‚ç‚¹         // &quot;æ³¨ï¼šè‹¥è¦é€šè¿‡Modifier.drawWithContentè‡ªå®šä¹‰ï¼Œåˆ™ä¸€å®šè°ƒç”¨æ­¤æ–¹æ³•ï¼Œå¦åˆ™ç»˜åˆ¶é“¾ä¼šå°±æ­¤æ–­å¼€ï¼ï¼ï¼&quot;         drawIntoCanvas { canvas -&gt; wrapped?.draw(canvas) }     }     internal inline fun draw(         canvas: Canvas,         size: Size,         LayoutNodeWrapper: LayoutNodeWrapper,         block: DrawScope.() -&gt; Unit     ) {         val previousWrapper = wrapped         wrapped = LayoutNodeWrapper         canvasDrawScope.draw(             LayoutNodeWrapper.measureScope,             LayoutNodeWrapper.measureScope.layoutDirection,             canvas,             size,             block         )         wrapped = previousWrapper     } }</code></p>
<h1 id="jetpack-compose-ä»»é‡å‰è¡Œ">Jetpack Compose ä»»é‡å‰è¡Œ<a hidden class="anchor" aria-hidden="true" href="#jetpack-compose-ä»»é‡å‰è¡Œ">#</a></h1>
<p>Composeæ˜¯é¢å‘æœªæ¥çš„UIæ¡†æ¶ï¼Œæˆ‘ä»¬ç”¨ä¸€ç»„å‡½æ•°æ¥å£°æ˜UIï¼Œå¹¶ä¸”ä¸€ä¸ªComposeå‡½æ•°å¯ä»¥åµŒå¥—å¦ä¸€ä¸ªComposeå‡½æ•°ï¼Œå¹¶ä»¥æ ‘çš„ç»“æ„æ¥æ„é€ æ‰€éœ€è¦çš„UIï¼Œæ­¤æ ‘å®é™…ä¸Šå°±æ˜¯<code>LayoutNode</code> æ ‘ã€‚åœ¨Composeçš„ä¸–ç•Œä¸­ï¼Œæ²¡æœ‰ç±»çš„æ¦‚å¿µï¼Œå…¨éƒ½æ˜¯å‡½æ•°ï¼Œå¹¶ä¸”éƒ½æ˜¯é¡¶å±‚å‡½æ•°ï¼Œå› æ­¤ä¸ä¼šæœ‰ä»»ä½•ç»§æ‰¿å’Œå±‚æ¬¡æœºæ„é—®é¢˜ã€‚</p>
<p>Androidä¸­çš„å‡ ä¹æ‰€æœ‰ç»„ä»¶éƒ½ç»§æ‰¿äºViewç±»ï¼ˆç›´æ¥æˆ–é—´æ¥ç»§æ‰¿ï¼‰ã€‚æ¯”å¦‚EidtText ç»§æ‰¿äºTextViewï¼Œè€ŒåŒæ—¶TextViewåˆç»§æ‰¿äºå…¶ä»–ä¸€äº›View,è¿™æ ·çš„ç»§æ‰¿æœºæ„æœ€ç»ˆä¼šæŒ‡å‘è·ŸViewå³View.javaã€‚å¹¶ä¸”View.javaæœ‰éå¸¸å¤šçš„åŠŸèƒ½ã€‚è€ŒComposeå›¢é˜Ÿåˆ™å°†æ•´ä¸ªç³»ç»Ÿä»ç»§æ‰¿è½¬ç§»åˆ°äº†é¡¶å±‚å‡½æ•°ã€‚Textviewï¼ŒEditTextï¼Œå¤é€‰æ¡†å’Œæ‰€æœ‰UIç»„ä»¶éƒ½æ˜¯å®ƒä»¬è‡ªå·±çš„Composeå‡½æ•°ï¼Œè€Œå®ƒä»¬æ„æˆäº†è¦åˆ›å»ºUIçš„å…¶ä»–å‡½æ•°ï¼Œä»£æ›¿äº†ä»å¦ä¸€ä¸ªç±»ç»§æ‰¿ã€‚</p>
<p>è€Œæˆ‘ä»¬ä¸Šé¢ Composeçš„åŸºç¡€ç»„ä»¶ å’Œ åŸç”Ÿç»„ä»¶çš„ å¯¹åº”è¡¨ï¼Œå®é™…ä¸Šä¸èƒ½è¯´ æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œå› ä¸ºä¸¤è€…å®Œå…¨ä¸å±äºä¸€ä¸ªå±‚é¢ï¼Œåªèƒ½è¯´å®ç°çš„æ•ˆæœå¤§è‡´ç›¸å½“ã€‚å¹¶ä¸”æœ‰äº›ç”šè‡³ä¸èƒ½è¯´æ˜¯ Viewå±‚æ¬¡ï¼Œæ¯”å¦‚Buttonï¼šButtonå®é™…ä¸Šåœ¨Composeé‡Œå±äºLayoutï¼Œå› ä¸ºButtonå¯ä»¥ä¼ å…¥<code>@Composable</code> æ–¹æ³•ï¼Œå…¶å†…å¯ä»¥é€šè¿‡å›¾ç‰‡å®ç°ã€‚</p>
<p>Jetpack Composeçš„ç»˜åˆ¶ä¹Ÿæ¯”è¾ƒç‰¹æ®Šï¼Œé€šè¿‡æºç çš„äº†è§£ï¼Œå…¶ç»˜åˆ¶ä¹Ÿæ˜¯ Modifier æ¥å®ç°çš„ï¼Œè€Œ <code>@Composable</code> æ–¹æ³•ä¸»è¦æ˜¯ç”¨æ¥ç”Ÿæˆå„ä¸ªLayoutNode çš„ã€‚Modifier ä¸­åŒ…å«å„ç§ç»„ä»¶å±æ€§ï¼Œæ¯”å¦‚ å¤§å°ã€å†…è¾¹è·ã€èƒŒæ™¯ã€ç‚¹å‡»ã€åç§»ç­‰ç­‰ï¼Œæ³¨æ„Composeä¸­æš‚æ—¶æ²¡æœ‰Marginå³å¤–è¾¹è·ï¼Œå¯èƒ½Composeå›¢é˜Ÿä¸å¸Œæœ›è®¾ç½®Marginå€¼ï¼Œè€Œæ˜¯åº”è¯¥ä½¿ç”¨paddingå€¼ã€‚åŒæ—¶è¿˜æä¾›äº† çŠ¶æ€æ çš„é«˜åº¦è®¾ç½® <em>statusBarsPadding</em> <em>ä»¥åŠåº•éƒ¨å¯¼èˆªæ é«˜åº¦çš„è®¾ç½®</em> <em>navigationBarsPadding</em></p>
<p>Jetpack Compose æœ¬æ–‡åªæ˜¯äº†è§£äº†å…¶å¹³æ—¶å’ŒåŸç”ŸViewç›¸å…³æˆ–è€…æƒ¯æ€§æ€ç»´çš„ä¸€äº›å†…å®¹ï¼Œå¯¹äºComposeæ¥è¯´åªäº†è§£äº†å…¶ä¸€è§’ï¼Œå¹¶ä¸”æ­¤æ–‡æ˜¯æ ¹æ® <strong>1.0.0-beta09</strong> ç‰ˆæœ¬å­¦ä¹ åˆ†æï¼Œç›®å‰ç‰ˆæœ¬å·²æ›´æ–°è‡³ <strong>1.0.0-rc02</strong> ç”šè‡³åé¢çš„æ­£å¼ç‰ˆæœ¬ï¼Œéƒ½å¯èƒ½å­˜åœ¨èˆå¼ƒçš„apiæˆ–è€…æ–°å¢apiç­‰ã€‚</p>
<p>Jetpack Compose ä¼˜ç§€æ–‡ç« ï¼š</p>
<ul>
<li>
<p>ã€å®˜ç½‘ã€‘<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.google.cn%2Fjetpack%2Fcompose%2Fdocumentation%3Fhl%3Dzh_cn" title="https://developer.android.google.cn/jetpack/compose/documentation?hl=zh_cn">Jetpack Compose ä½¿ç”¨å…¥é—¨</a></p>
</li>
<li>
<p>ã€å…¥é—¨ã€‘<a href="https://juejin.cn/post/6844903999347359751" title="https://juejin.cn/post/6844903999347359751">Android Jetpack Compose æœ€å…¨ä¸Šæ‰‹æŒ‡å—</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/6844904165408243725" title="https://juejin.cn/post/6844904165408243725">ã€è¯‘ã€‘Jetpack Compose,ä¸æ­¢æ˜¯ä¸€ä¸ªUIæ¡†æ¶ï¼</a></p>
</li>
<li>
<p>ã€åŸç†ã€‘<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.compose.net.cn%2Fprinciple%2Frecomposition_scope%2F" title="https://docs.compose.net.cn/principle/recomposition_scope/">Jetpack Compose åšç‰©é¦†</a></p>
</li>
<li>
<p>ã€è°·æ­Œå¼€å‘è€…ã€‘<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzAwODY4OTk2Mg%253D%253D%26chksm%3D808cf5b6b7fb7ca0fb12604578387cf1cf0c7d7d1847499e50b3700c4039c35adb6e806406b9%26idx%3D1%26mid%3D2652067315%26scene%3D21%26sn%3Db003ced0f0c86684c5189d31a6a77f92%23wechat_redirect" title="https://mp.weixin.qq.com/s?__biz=MzAwODY4OTk2Mg%3D%3D&amp;chksm=808cf5b6b7fb7ca0fb12604578387cf1cf0c7d7d1847499e50b3700c4039c35adb6e806406b9&amp;idx=1&amp;mid=2652067315&amp;scene=21&amp;sn=b003ced0f0c86684c5189d31a6a77f92#wechat_redirect">æ·±å…¥è¯¦è§£ Jetpack Compose | ä¼˜åŒ– UI æ„å»º</a></p>
</li>
<li>
<p>ã€è°·æ­Œå¼€å‘è€…ã€‘<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzAwODY4OTk2Mg%3D%3D%26mid%3D2652068391%26idx%3D1%26sn%3D29c63fb6af42c03450b59133d1f6acb3%26chksm%3D808cfa62b7fb7374f2c1240c1eda4046afe9bd187784d792e011c402347a233ea4bebd5a371b%26scene%3D178%26cur_album_id%3D1355322955810799617%23rd" title="https://mp.weixin.qq.com/s?__biz=MzAwODY4OTk2Mg==&amp;mid=2652068391&amp;idx=1&amp;sn=29c63fb6af42c03450b59133d1f6acb3&amp;chksm=808cfa62b7fb7374f2c1240c1eda4046afe9bd187784d792e011c402347a233ea4bebd5a371b&amp;scene=178&amp;cur_album_id=1355322955810799617#rd">æ·±å…¥è¯¦è§£ Jetpack Compose | å®ç°åŸç†</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FlkQ7AMVRulf-c02-Niju7g" title="https://mp.weixin.qq.com/s/lkQ7AMVRulf-c02-Niju7g">Jetpack Compose 1.0 æ­£å¼å‘å¸ƒï¼æ‰“é€ åŸç”Ÿ UI çš„ Android ç°ä»£å·¥å…·åŒ…</a></p>
</li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/androidjetpack/">AndroidJetpack</a></li>
      <li><a href="http://localhost:1313/tags/android/">Android</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="http://localhost:1313/posts/wiki/%E5%85%BB%E7%94%9F%E8%A1%8C%E4%B8%9A-%E8%99%9A%E6%8B%9F%E4%BA%BA%E8%B0%83%E7%A0%94%E6%8A%A5%E5%91%8A/">
    <span class="title">Â« ä¸Šä¸€é¡µ</span>
    <br>
    <span>å…»ç”Ÿè¡Œä¸š-è™šæ‹Ÿäººè°ƒç ”æŠ¥å‘Š</span>
  </a>
  <a class="next" href="http://localhost:1313/posts/juejin/arkts%E4%B8%8E%E4%BB%93%E9%A2%89%E8%AF%AD%E8%A8%80%E6%96%B0%E5%85%B4%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E7%89%B9%E6%80%A7%E5%85%A8%E9%9D%A2%E5%AF%B9%E6%AF%94/">
    <span class="title">ä¸‹ä¸€é¡µ Â»</span>
    <br>
    <span>ArkTSä¸ä»“é¢‰è¯­è¨€ï¼šæ–°å…´ç¼–ç¨‹è¯­è¨€ç‰¹æ€§å…¨é¢å¯¹æ¯”</span>
  </a>
</nav>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share JetpackComposeä»å…¥é—¨åˆ°æµ…æ on x"
            href="https://x.com/intent/tweet/?text=JetpackCompose%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%e6%b5%85%e6%9e%90&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2fjetpackcompose%25E4%25BB%258E%25E5%2585%25A5%25E9%2597%25A8%25E5%2588%25B0%25E6%25B5%2585%25E6%259E%2590%2f&amp;hashtags=AndroidJetpack%2cAndroid">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share JetpackComposeä»å…¥é—¨åˆ°æµ…æ on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2fjetpackcompose%25E4%25BB%258E%25E5%2585%25A5%25E9%2597%25A8%25E5%2588%25B0%25E6%25B5%2585%25E6%259E%2590%2f&amp;title=JetpackCompose%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%e6%b5%85%e6%9e%90&amp;summary=JetpackCompose%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%e6%b5%85%e6%9e%90&amp;source=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2fjetpackcompose%25E4%25BB%258E%25E5%2585%25A5%25E9%2597%25A8%25E5%2588%25B0%25E6%25B5%2585%25E6%259E%2590%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share JetpackComposeä»å…¥é—¨åˆ°æµ…æ on reddit"
            href="https://reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2fjetpackcompose%25E4%25BB%258E%25E5%2585%25A5%25E9%2597%25A8%25E5%2588%25B0%25E6%25B5%2585%25E6%259E%2590%2f&title=JetpackCompose%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%e6%b5%85%e6%9e%90">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share JetpackComposeä»å…¥é—¨åˆ°æµ…æ on facebook"
            href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2fjetpackcompose%25E4%25BB%258E%25E5%2585%25A5%25E9%2597%25A8%25E5%2588%25B0%25E6%25B5%2585%25E6%259E%2590%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share JetpackComposeä»å…¥é—¨åˆ°æµ…æ on whatsapp"
            href="https://api.whatsapp.com/send?text=JetpackCompose%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%e6%b5%85%e6%9e%90%20-%20http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2fjetpackcompose%25E4%25BB%258E%25E5%2585%25A5%25E9%2597%25A8%25E5%2588%25B0%25E6%25B5%2585%25E6%259E%2590%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share JetpackComposeä»å…¥é—¨åˆ°æµ…æ on telegram"
            href="https://telegram.me/share/url?text=JetpackCompose%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%e6%b5%85%e6%9e%90&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2fjetpackcompose%25E4%25BB%258E%25E5%2585%25A5%25E9%2597%25A8%25E5%2588%25B0%25E6%25B5%2585%25E6%259E%2590%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share JetpackComposeä»å…¥é—¨åˆ°æµ…æ on ycombinator"
            href="https://news.ycombinator.com/submitlink?t=JetpackCompose%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%e6%b5%85%e6%9e%90&u=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2fjetpackcompose%25E4%25BB%258E%25E5%2585%25A5%25E9%2597%25A8%25E5%2588%25B0%25E6%25B5%2585%25E6%259E%2590%2f">
            <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
                <path
                    d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
            </svg>
        </a>
    </li>
</ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span><a href="https://beian.miit.gov.cn/">ç²¤ICPå¤‡2023039897å·-1</a></span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'å¤åˆ¶';

        function copyingDone() {
            copybutton.innerHTML = 'å·²å¤åˆ¶ï¼';
            setTimeout(() => {
                copybutton.innerHTML = 'å¤åˆ¶';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
