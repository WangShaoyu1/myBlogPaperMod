<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>魔改和上线你的合成大西瓜，最全教程！ | PaperMod</title>
<meta name="keywords" content="前端">
<meta name="description" content="当然，游戏本身非常有趣，玩法简单，就是俄罗斯方块、2048、水果忍者的结合，控制水果的下落，相同的两个水果会合成更大的水果，然后消除，并发出溅射效果。玩了一会后，看到朋友圈的晒图，我也安耐不住了，开始思考怎么拿高分。对于程序员来说，最简单的方式就是直接改造程序。首先去Gi…">
<meta name="author" content="程序员鱼皮">
<link rel="canonical" href="http://localhost:1313/posts/juejin/%E9%AD%94%E6%94%B9%E5%92%8C%E4%B8%8A%E7%BA%BF%E4%BD%A0%E7%9A%84%E5%90%88%E6%88%90%E5%A4%A7%E8%A5%BF%E7%93%9C%E6%9C%80%E5%85%A8%E6%95%99%E7%A8%8B/">
<meta name="google-site-verification" content="XYZabc">
<link crossorigin="anonymous" href="/assets/css/stylesheet.7b92bf4867c997b58ec50f63451b83777173d5bd5593376852abd85746d09d71.css" integrity="sha256-e5K/SGfJl7WOxQ9jRRuDd3Fz1b1VkzdoUqvYV0bQnXE=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="apple-touch-icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="mask-icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="http://localhost:1313/posts/juejin/%E9%AD%94%E6%94%B9%E5%92%8C%E4%B8%8A%E7%BA%BF%E4%BD%A0%E7%9A%84%E5%90%88%E6%88%90%E5%A4%A7%E8%A5%BF%E7%93%9C%E6%9C%80%E5%85%A8%E6%95%99%E7%A8%8B/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><meta property="og:title" content="魔改和上线你的合成大西瓜，最全教程！" />
<meta property="og:description" content="当然，游戏本身非常有趣，玩法简单，就是俄罗斯方块、2048、水果忍者的结合，控制水果的下落，相同的两个水果会合成更大的水果，然后消除，并发出溅射效果。玩了一会后，看到朋友圈的晒图，我也安耐不住了，开始思考怎么拿高分。对于程序员来说，最简单的方式就是直接改造程序。首先去Gi…" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/posts/juejin/%E9%AD%94%E6%94%B9%E5%92%8C%E4%B8%8A%E7%BA%BF%E4%BD%A0%E7%9A%84%E5%90%88%E6%88%90%E5%A4%A7%E8%A5%BF%E7%93%9C%E6%9C%80%E5%85%A8%E6%95%99%E7%A8%8B/" />
<meta property="og:image" content="http://localhost:1313/images/papermod-cover.png" />
<meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-01-29T00:00:00+00:00" />
<meta property="article:modified_time" content="2021-01-29T00:00:00+00:00" />


<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="http://localhost:1313/images/papermod-cover.png" />
<meta name="twitter:title" content="魔改和上线你的合成大西瓜，最全教程！"/>
<meta name="twitter:description" content="当然，游戏本身非常有趣，玩法简单，就是俄罗斯方块、2048、水果忍者的结合，控制水果的下落，相同的两个水果会合成更大的水果，然后消除，并发出溅射效果。玩了一会后，看到朋友圈的晒图，我也安耐不住了，开始思考怎么拿高分。对于程序员来说，最简单的方式就是直接改造程序。首先去Gi…"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://localhost:1313/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "魔改和上线你的合成大西瓜，最全教程！",
      "item": "http://localhost:1313/posts/juejin/%E9%AD%94%E6%94%B9%E5%92%8C%E4%B8%8A%E7%BA%BF%E4%BD%A0%E7%9A%84%E5%90%88%E6%88%90%E5%A4%A7%E8%A5%BF%E7%93%9C%E6%9C%80%E5%85%A8%E6%95%99%E7%A8%8B/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "魔改和上线你的合成大西瓜，最全教程！",
  "name": "魔改和上线你的合成大西瓜，最全教程！",
  "description": "当然，游戏本身非常有趣，玩法简单，就是俄罗斯方块、2048、水果忍者的结合，控制水果的下落，相同的两个水果会合成更大的水果，然后消除，并发出溅射效果。玩了一会后，看到朋友圈的晒图，我也安耐不住了，开始思考怎么拿高分。对于程序员来说，最简单的方式就是直接改造程序。首先去Gi…",
  "keywords": [
    "前端"
  ],
  "articleBody": " 本文是从 0 到 1 的教程，让小白也能够魔改和上线发布属于你的合成大西瓜！\nPS. 最新上线了 大西瓜改图工具，效率提升十倍！\n最近，一款名为『 合成大西瓜 』的游戏突然火了！看来真的是大家吃瓜吃太多了，这个小游戏深抓人心！\n当然，游戏本身非常有趣，玩法简单，就是俄罗斯方块、2048、水果忍者的结合，控制水果的下落，相同的两个水果会合成更大的水果，然后消除，并发出溅射效果。\n玩了一会后，看到朋友圈的晒图，我也安耐不住了，开始思考怎么拿高分。对于程序员来说，最简单的方式就是直接改造程序。\n正好在知乎上偶然刷到了一个相关问题，“ 小游戏《合成大西瓜》源代码有吗？”\n那就开工吧！\n首先去 GitHub 搜索源代码，发现源码已经被曝光的稀巴烂了，然后就下载了一份源代码到本地，摩拳擦掌。\n浏览源码后，发现只是魔改一些基础功能的话，不要太简单！\n这是我魔改的自定义加分版，轻轻松松千万分！可在线玩：dadaxigua.liyupi.com\n下面一起来打造自己的魔改合成大西瓜吧！\n主要分为如下几个步骤：\n下载源代码及本地运行 动手魔改及原理分析 发布上线 1. 下载源码，本地运行 下载源码 首先从 GitHub 上下载源代码（地址在文末）：\n下载代码后，我们得到这样的目录结构：\n可以看到整个代码目录并不复杂，是基于 cocos2d 游戏引擎开发，我们只需要了解几个重要文件：\nindex.html，整个项目的主页面 project.js，项目核心代码，游戏逻辑都在这里 settings.js，项目配置文件 res 目录，存放图片和音频等资源 下面我们先试着在本地运行小游戏。\n本地运行 如果直接双击 index.html，是无法运行游戏的，也就是很多同学遇到的 “卡在 99%” 问题。因为直接双击网页文件，访问协议是 file，而不是 http，会导致一些资源无法请求，缺失文件。\n因此，我们需要在本地搭建一个 web 服务器，以支持 http 协议访问。\n最简单的方式就是使用 serve 工具。只需三步，就能使用，已完成的步骤可以直接跳过：\n安装 Node 和 npm\nNode 是服务器端运行 Js 代码的引擎；npm 则是依赖包管理工具，可以轻松安装工具和代码类库。\n进入 Node 中文网 nodejs.cn/download/，下… Node.js，会自动安装 npm。\n安装成功后，进入命令行 cmd，输入命令来判断 npm 是否安装成功：\nbash\n代码解读\n复制代码\nnpm -v\n输出版本号，则安装成功：\n一行命令安装 serve 工具：\nbash\n代码解读\n复制代码\nnpm i -g serve\n进入源代码目录（我这里是 daxigua），启动 serve：\nbash\n代码解读\n复制代码\nserve\n启动成功后，打开浏览器访问 localhost:5000 即可！\n动手魔改及原理 在魔改前，我们要先认清游戏过程，然后根据自己要修改的内容去找对应的文件，再做修改。\n游戏的过程是：点击鼠标 =\u003e 水果下落 =\u003e 水果碰撞 =\u003e 计算分数 =\u003e 展示分数\n下面列举几种简单的魔改方式，包括改游戏分数、替换游戏图片、无敌模式、控制水果生成、由大水果合成小水果、让水果更 Q 弹等。\n（部分创意源于 B 站 UP GJhuxiao，给大佬跪了！）\n1. 改分数 拿到源代码后，怎么最快的定位要修改哪里呢？\n通过分析游戏过程，发现改分数有两种实现方式，在计算分数阶段修改，或者直接修改最后要展示的分数。\n再简单浏览下项目里的各个文件，发现 project.js 就是影响游戏逻辑的核心文件。\n那么很简单，直接在 project.js 中搜索代码。分数对应的英文单词是 “score” ，添加分数的英文单词是 “addScore”，搜搜看能不能找到线索。\n果然，很快就发现了，分数是由 default.score 变量作为统计值的，有这么一行代码：\njavascript\n代码解读\n复制代码\na.default.score += this.fruitNumber + 1\n显然，\"+1\" 是参与分数计算的，那我只要把基数 “1” 改为自己定义的数字即可~\njavascript\n代码解读\n复制代码\n// extraScore 可以自己改为任意值 a.default.score += this.fruitNumber + extraScore\n当然也可以在进入游戏前让用户自己输入！我在 project.js 开头加入了这样一段代码：\njavascript\n代码解读\n复制代码\n// 让用户输入分数加成 let extraScore; let extraScoreStr = ''; // 输入有效数字才进入游戏 while (isNaN(extraScore)) { extraScoreStr = prompt('请输入分数加成数字', '1').trim(); extraScore = parseInt(extraScoreStr); }\n效果如下：\n当然，这种方式玩游戏更多地是晒个圈，希望别影响大家的乐趣~\n通过这种方式，代码中的所有变量和配置，理论上都可以支持让用户来输入。可以通过新增一个菜单页面来实现，有大佬已经做出来了，效果很好，瑞思拜！\n2. 改图片 改图片应该是目前乐趣最大的魔改了吧！我看到了很多有趣的创意，合成 B 站硬币、合成大胸、合成 xx 等等。\n但其实，改图片的原理非常简单！\n直接在 res 资源目录下，找到原有的图片，然后用相同名称、相同格式、相同尺寸的图片进行替换即可！\n我帮大家整理了图片替换表哦，帮助提升替换效率，地址如下：\n魔改大西瓜可替换的素材：docs.qq.com/sheet/DS0d2…\n3. 无敌模式 无敌模式是指水果堆积到顶部、超出线条，游戏依然不会结束。\n既然游戏会结束，那么必定有一个判断游戏结束的逻辑，也就是条件表达式。\n那就在代码中搜索 “end”（结束），果然找到了下面这串判断逻辑，运算结果为 true 则游戏结束，为 false 则继续。\n这里 B 站 UP GJhuxiao 哥提供了非常好的思路，增加一个条件判断，而不是修改原有判断逻辑，极大地方便大家修改！\n4. 控制水果生成 能不能控制下一个水果是什么呢？比如每次都出现大西瓜。\n当然，同样的思路，先找到水果生成的逻辑在代码的哪个位置。通过搜索 “fruit”、“create” 等关键字，定位到了这段代码：\n这段代码的功能是，根据当前的水果决定下一个水果。\n逻辑看起来很复杂，但其实就是，前 5 个水果的生成是固定的，类似新手教程，总不能刚开始就给大水果吧！\n当生成第几个水果（用 createFruitCount 统计）之后，开始随机生成水果。\n每一个水果都对应一个数字序号（下标），由小到大依次是 0-9，葡萄到西瓜。因此刚开始是两次 createOneFruit(0)，即生成两次葡萄，后面就是随机生成葡萄（0）到西红柿（5）。\n那如果想要生成第一个水果，怎么办？\n第一个水果是葡萄，对应序号 0，那直接搜索 createOneFruit(0) 不就成了！\n直接找到对应代码，可以把 0 修改成其他数字~\n5. 大水果合成小水果 大水果合成小水果听起来很有趣，即可以把游戏 “倒着玩”，两个西瓜合成椰子，最终合成葡萄即胜利！✌️\n如果把水果膨胀理解为 “升级”，那说白了，就是反转下水果的升级顺序。这里的代码不是很好定位，主要是先找到水果的合成逻辑，可以通过搜索边界值（比如 \u003c 9）、或者关键词 LevelUp 的方式找到下面代码，将 “+1” 变为 “-1” 即可！\n每次合并水果，升级改为降级。\n当然，只改这里肯定是有问题的，B 站的 UP GJhuxiao 也犯了一个小小小小的错误，就是没有处理边界值。\n原本当合成大西瓜后，会有特殊逻辑，比如闪光特效。在顺序反转后，我们要把边界值由 9 改为 0。同时记得修改一下初始生成的水果，应该是大西瓜而不是小葡萄啦！\n6. 让水果更 Q 弹 现在的水果好像没什么弹性，怎么让它们像果味香浓、Q 弹多汁的旺仔 QQ 糖一样弹性十足呢？\n这就涉及到物理引擎层面的修改，由于我本人对 cocos2d 不熟悉，以下依然是 B 站的 UP GJhuxiao 的实现方式。\n在生成水果的函数中，可以看到 cc.PhysicsCircleCollider，就是控制水果下落行为的物理引擎。\n由于整个游戏是基于 cocos2d 开发，我们可以看看官方 API 文档中，该物理引擎有哪些参数，很快就找到了弹性系数：\n然后去修改物理引擎的参数即可，此处设置为 0.9。\n别看数值改动不大，设置 0.9 后，水果就已经能飞起来了。如果你乐意，想要让它一飞冲天也是可以的！\n记得打开无敌模式，否则一下就 GameOver 了！\n还可以看看 cocos2d 有什么其他的参数，试着修改一下，也许会发现新的创意和惊喜哦~\n发布上线 最多同学关心的问题，在本地修改好代码后，怎么发布到网上供其他人访问呢？\n这里提供最简单的两种方法，使用『 腾讯云静态网站托管 』或『 Vercel 』，不需要购买域名、也不需要买服务器！\n而且自己娱乐、用户量不大的话，免费空间完全够用！\n1. 腾讯云静态网站托管 使用腾讯云静态网站托管，服务器完全在国内，还有 CDN（静态内容分发）加速，让你的网站飞起来~\n使用步骤也很简单。\n首先进入腾讯云的云开发 (cloudbase) 控制台，地址：cloud.tencent.com/product/wh：\n点击立即创建，开通一个云环境：\n点击立即开通，喝杯 ☕️，稍等片刻即可创建完成。\n创建完成后，进入到提示页，点击开始使用，初始化静态网站服务。\n现在我们就可以使用云开发提供的静态网站服务了，可以通过界面上传，也可以使用 cloudbase 命令行上传。推荐后者，效率更高！\n首先，安装 cloudbase 命令行工具：\nbash\n代码解读\n复制代码\nnpm install -g @cloudbase/cli\n执行登录命令：\nbash\n代码解读\n复制代码\ncloudbase login\n在弹出的页面确认授权：\n进入到已开通的云环境查看页面，复制刚刚创建的云环境 id：\n接着，在 index.html 所在目录中（我的是 daxigua），执行 cloudbase 的 deploy 命令将目录中的网站文件全部发布：\nbash\n代码解读\n复制代码\ncd daxigua cloudbase hosting:deploy . -e 这里的 要替换为刚刚复制的云环境 id！\n看到如下结果，就算成功啦，点击链接即可访问和分享！\n2. Vercel Vercel 是免费网站托管平台，可以帮我们部署网站，并生成可访问的简短网址，还能够和自己购买的域名进行绑定。\n先在命令行通过 npm 命令安装 Vercel：\n代码解读\n复制代码\nnpm install -g vercel\n安装完成后，进入 index.html 所在目录（我的是 daxigua），使用 vercel 命令发布网站：\nbash\n代码解读\n复制代码\ncd daxigua vercel --prod\n然后会让你输入一些选项，比如项目名称、是否修改配置等，一路回车就可以了~\n发布成功，会得到一个网址，打开就可以看到游戏啦，还可以把网址分享给别人！\n最后 通过这个小游戏，我们能够看到大家各种奇思妙想的创意，在乐趣之外，还能学习一些编程小知识，何乐而不为呢？\n可惜由于工作，我没有时间去完成自己的其他创意啦，比如水果爆炸、水果围城、反重力 😢\n大家还有什么好的创意欢迎在评论区告诉我吧！\n以上所有代码和文档都发布到了我的 GitHub 中\ngithub.com/liyupi/daxi…\n",
  "wordCount" : "405",
  "inLanguage": "zh",
  "image": "http://localhost:1313/images/papermod-cover.png","datePublished": "2021-01-29T00:00:00Z",
  "dateModified": "2021-01-29T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "程序员鱼皮"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/posts/juejin/%E9%AD%94%E6%94%B9%E5%92%8C%E4%B8%8A%E7%BA%BF%E4%BD%A0%E7%9A%84%E5%90%88%E6%88%90%E5%A4%A7%E8%A5%BF%E7%93%9C%E6%9C%80%E5%85%A8%E6%95%99%E7%A8%8B/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "PaperMod",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/%3Clink%20/%20abs%20url%3E"
    }
  }
}
</script>
</head>

<body class=" dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Home (Alt + H)">
                        
                    <img src="http://localhost:1313/images/msg_hu15231257772499651944.png" alt="" aria-label="logo"
                        height="20">Home</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://github.com/adityatelange/hugo-PaperMod/wiki/" title="WiKi">
                    <span>WiKi</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://localhost:1313/">主页</a>&nbsp;»&nbsp;<a href="http://localhost:1313/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      魔改和上线你的合成大西瓜，最全教程！
    </h1>
    <div class="post-description">
      当然，游戏本身非常有趣，玩法简单，就是俄罗斯方块、2048、水果忍者的结合，控制水果的下落，相同的两个水果会合成更大的水果，然后消除，并发出溅射效果。玩了一会后，看到朋友圈的晒图，我也安耐不住了，开始思考怎么拿高分。对于程序员来说，最简单的方式就是直接改造程序。首先去Gi…
    </div>
    <div class="post-meta"><span title='2021-01-29 00:00:00 +0000 UTC'>一月 29, 2021</span>&nbsp;·&nbsp;2 分钟&nbsp;·&nbsp;程序员鱼皮&nbsp;|&nbsp;<a href="https://github.com/WangShaoyu1/myBlogPaperMod/tree/master/content/posts/jueJin/%e9%ad%94%e6%94%b9%e5%92%8c%e4%b8%8a%e7%ba%bf%e4%bd%a0%e7%9a%84%e5%90%88%e6%88%90%e5%a4%a7%e8%a5%bf%e7%93%9c%ef%bc%8c%e6%9c%80%e5%85%a8%e6%95%99%e7%a8%8b%ef%bc%81.md" rel="noopener noreferrer" target="_blank">Suggest Changes</a>

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">目录</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#1-%e4%b8%8b%e8%bd%bd%e6%ba%90%e7%a0%81%e6%9c%ac%e5%9c%b0%e8%bf%90%e8%a1%8c" aria-label="1. 下载源码，本地运行">1. 下载源码，本地运行</a><ul>
                        
                <li>
                    <a href="#%e4%b8%8b%e8%bd%bd%e6%ba%90%e7%a0%81" aria-label="下载源码">下载源码</a></li>
                <li>
                    <a href="#%e6%9c%ac%e5%9c%b0%e8%bf%90%e8%a1%8c" aria-label="本地运行">本地运行</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%8a%a8%e6%89%8b%e9%ad%94%e6%94%b9%e5%8f%8a%e5%8e%9f%e7%90%86" aria-label="动手魔改及原理">动手魔改及原理</a><ul>
                        
                <li>
                    <a href="#1-%e6%94%b9%e5%88%86%e6%95%b0" aria-label="1. 改分数">1. 改分数</a></li>
                <li>
                    <a href="#2-%e6%94%b9%e5%9b%be%e7%89%87" aria-label="2. 改图片">2. 改图片</a></li>
                <li>
                    <a href="#3-%e6%97%a0%e6%95%8c%e6%a8%a1%e5%bc%8f" aria-label="3. 无敌模式">3. 无敌模式</a></li>
                <li>
                    <a href="#4-%e6%8e%a7%e5%88%b6%e6%b0%b4%e6%9e%9c%e7%94%9f%e6%88%90" aria-label="4. 控制水果生成">4. 控制水果生成</a></li>
                <li>
                    <a href="#5-%e5%a4%a7%e6%b0%b4%e6%9e%9c%e5%90%88%e6%88%90%e5%b0%8f%e6%b0%b4%e6%9e%9c" aria-label="5. 大水果合成小水果">5. 大水果合成小水果</a></li>
                <li>
                    <a href="#6-%e8%ae%a9%e6%b0%b4%e6%9e%9c%e6%9b%b4-q-%e5%bc%b9" aria-label="6. 让水果更 Q 弹">6. 让水果更 Q 弹</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%8f%91%e5%b8%83%e4%b8%8a%e7%ba%bf" aria-label="发布上线">发布上线</a><ul>
                        
                <li>
                    <a href="#1-%e8%85%be%e8%ae%af%e4%ba%91%e9%9d%99%e6%80%81%e7%bd%91%e7%ab%99%e6%89%98%e7%ae%a1" aria-label="1. 腾讯云静态网站托管">1. 腾讯云静态网站托管</a></li>
                <li>
                    <a href="#2-vercel" aria-label="2. Vercel">2. Vercel</a></li></ul>
                </li>
                <li>
                    <a href="#%e6%9c%80%e5%90%8e" aria-label="最后">最后</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><blockquote>
<p>本文是从 0 到 1 的教程，让小白也能够魔改和上线发布属于你的合成大西瓜！</p>
<p>PS. 最新上线了 <a href="https://link.juejin.cn?target=https%3A%2F%2Fdaxigua-tools.liyupi.com" title="https://daxigua-tools.liyupi.com">大西瓜改图工具</a>，效率提升十倍！</p>
</blockquote>
<p>最近，一款名为『 合成大西瓜 』的游戏突然火了！看来真的是大家吃瓜吃太多了，这个小游戏深抓人心！</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fcc3b72054da434786e81ec5819e416d~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<p>当然，游戏本身非常有趣，玩法简单，就是俄罗斯方块、2048、水果忍者的结合，控制水果的下落，相同的两个水果会合成更大的水果，然后消除，并发出溅射效果。</p>
<p>玩了一会后，看到朋友圈的晒图，我也安耐不住了，开始思考怎么拿高分。对于程序员来说，最简单的方式就是直接改造程序。</p>
<p>正好在知乎上偶然刷到了一个相关问题，“ 小游戏《合成大西瓜》源代码有吗？”</p>
<p>那就开工吧！</p>
<p>首先去 GitHub 搜索源代码，发现源码已经被曝光的稀巴烂了，然后就下载了一份源代码到本地，摩拳擦掌。</p>
<p>浏览源码后，发现只是魔改一些基础功能的话，不要太简单！</p>
<p>这是我魔改的自定义加分版，轻轻松松千万分！可在线玩：<a href="https://link.juejin.cn?target=https%3A%2F%2Fdadaxigua.liyupi.com" title="https://dadaxigua.liyupi.com">dadaxigua.liyupi.com</a></p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4fd1c950c7ae412eaa6dff708db5d8ee~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="大西瓜魔改版"  />
</p>
<p>下面一起来打造自己的魔改合成大西瓜吧！</p>
<hr>
<p>主要分为如下几个步骤：</p>
<ol>
<li>下载源代码及本地运行</li>
<li>动手魔改及原理分析</li>
<li>发布上线</li>
</ol>
<h3 id="1-下载源码本地运行">1. 下载源码，本地运行<a hidden class="anchor" aria-hidden="true" href="#1-下载源码本地运行">#</a></h3>
<h4 id="下载源码">下载源码<a hidden class="anchor" aria-hidden="true" href="#下载源码">#</a></h4>
<p>首先从 GitHub 上下载源代码（地址在文末）：</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6e7c92c53b89449f87f0893dba90fef1~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="下载源代码"  />
</p>
<p>下载代码后，我们得到这样的目录结构：</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0ee2ac8d0b0e46eaa205886d627a1d86~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="目录结构"  />
</p>
<p>可以看到整个代码目录并不复杂，是基于 cocos2d 游戏引擎开发，我们只需要了解几个重要文件：</p>
<ol>
<li>index.html，整个项目的主页面</li>
<li>project.js，项目核心代码，游戏逻辑都在这里</li>
<li>settings.js，项目配置文件</li>
<li>res 目录，存放图片和音频等资源</li>
</ol>
<p>下面我们先试着在本地运行小游戏。</p>
<h4 id="本地运行">本地运行<a hidden class="anchor" aria-hidden="true" href="#本地运行">#</a></h4>
<p>如果直接双击 <code>index.html</code>，是无法运行游戏的，也就是很多同学遇到的 “卡在 99%” 问题。因为直接双击网页文件，访问协议是 <code>file</code>，而不是 <code>http</code>，会导致一些资源无法请求，缺失文件。</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/96055628ac2a44a09b5585c9ad59dd4f~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<p>因此，我们需要在本地搭建一个 web 服务器，以支持 <code>http</code> 协议访问。</p>
<p>最简单的方式就是使用 serve 工具。只需三步，就能使用，已完成的步骤可以直接跳过：</p>
<ol>
<li>
<p>安装 Node 和 npm</p>
<p>Node 是服务器端运行 Js 代码的引擎；npm 则是依赖包管理工具，可以轻松安装工具和代码类库。</p>
<p>进入 Node 中文网 <a href="https://link.juejin.cn?target=http%3A%2F%2Fnodejs.cn%2Fdownload%2F%25EF%25BC%258C%25E4%25B8%258B%25E8%25BD%25BD" title="http://nodejs.cn/download/%EF%BC%8C%E4%B8%8B%E8%BD%BD">nodejs.cn/download/，下…</a> Node.js，会自动安装 npm。</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5f26f65d2f9147e5b72982cd6c6c7421~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<p>安装成功后，进入命令行 cmd，输入命令来判断 npm 是否安装成功：</p>
<p>bash</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>npm -v</code></p>
<p>输出版本号，则安装成功：</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b7937838d44041279b5d32377d925dd6~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="安装成功"  />
</p>
</li>
<li>
<p>一行命令安装 serve 工具：</p>
<p>bash</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>npm i -g serve</code></p>
</li>
<li>
<p>进入源代码目录（我这里是 <code>daxigua</code>），启动 serve：</p>
<p>bash</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>serve</code></p>
<p>启动成功后，打开浏览器访问 <code>localhost:5000</code> 即可！</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/73539f0165f449099805f27adf088c22~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="启动成功"  />
</p>
</li>
</ol>
<h3 id="动手魔改及原理">动手魔改及原理<a hidden class="anchor" aria-hidden="true" href="#动手魔改及原理">#</a></h3>
<p>在魔改前，我们要先认清游戏过程，然后根据自己要修改的内容去找对应的文件，再做修改。</p>
<p>游戏的过程是：点击鼠标 =&gt; 水果下落 =&gt; 水果碰撞 =&gt; 计算分数 =&gt; 展示分数</p>
<p>下面列举几种简单的魔改方式，包括改游戏分数、替换游戏图片、无敌模式、控制水果生成、由大水果合成小水果、让水果更 Q 弹等。</p>
<p><strong>（部分创意源于 B 站 UP GJhuxiao，给大佬跪了！）</strong></p>
<h4 id="1-改分数">1. 改分数<a hidden class="anchor" aria-hidden="true" href="#1-改分数">#</a></h4>
<p>拿到源代码后，怎么最快的定位要修改哪里呢？</p>
<p>通过分析游戏过程，发现改分数有两种实现方式，在计算分数阶段修改，或者直接修改最后要展示的分数。</p>
<p>再简单浏览下项目里的各个文件，发现 <code>project.js</code> 就是影响游戏逻辑的核心文件。</p>
<p>那么很简单，直接在 <code>project.js</code> 中搜索代码。分数对应的英文单词是 &ldquo;score&rdquo; ，添加分数的英文单词是 &ldquo;addScore&rdquo;，搜搜看能不能找到线索。</p>
<p>果然，很快就发现了，分数是由 <code>default.score</code> 变量作为统计值的，有这么一行代码：</p>
<p>javascript</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>a.default.score += this.fruitNumber + 1</code></p>
<p>显然，&quot;+1&quot; 是参与分数计算的，那我只要把基数 &ldquo;1&rdquo; 改为自己定义的数字即可~</p>
<p>javascript</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>// extraScore 可以自己改为任意值 a.default.score += this.fruitNumber + extraScore</code></p>
<p>当然也可以在进入游戏前让用户自己输入！我在 <code>project.js</code> 开头加入了这样一段代码：</p>
<p>javascript</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>// 让用户输入分数加成 let extraScore; let extraScoreStr = ''; // 输入有效数字才进入游戏 while (isNaN(extraScore)) {   extraScoreStr = prompt('请输入分数加成数字', '1').trim();   extraScore = parseInt(extraScoreStr); }</code></p>
<p>效果如下：</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/29822d1691a14f57a7992f5c4292d231~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="自行输入加分"  />
</p>
<p>当然，这种方式玩游戏更多地是晒个圈，希望别影响大家的乐趣~</p>
<p>通过这种方式，代码中的所有变量和配置，理论上都可以支持让用户来输入。可以通过新增一个菜单页面来实现，有大佬已经做出来了，效果很好，瑞思拜！</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0a6224b6e8b941c788ed72c9f27c2c2e~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="GitHub xiaopengand 哥制作"  />
</p>
<h4 id="2-改图片">2. 改图片<a hidden class="anchor" aria-hidden="true" href="#2-改图片">#</a></h4>
<p>改图片应该是目前乐趣最大的魔改了吧！我看到了很多有趣的创意，合成 B 站硬币、合成大胸、合成 xx 等等。</p>
<p>但其实，改图片的原理非常简单！</p>
<p>直接在 <code>res</code> 资源目录下，找到原有的图片，然后用<strong>相同名称、相同格式、相同尺寸</strong>的图片进行替换即可！</p>
<p>我帮大家整理了图片替换表哦，帮助提升替换效率，地址如下：</p>
<p>魔改大西瓜可替换的素材：<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.qq.com%2Fsheet%2FDS0d2VVVJYmpvZ0pZ" title="https://docs.qq.com/sheet/DS0d2VVVJYmpvZ0pZ">docs.qq.com/sheet/DS0d2…</a></p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ff60ae46d6334b909f158c3bd9d584c4~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="替换素材表"  />
</p>
<h4 id="3-无敌模式">3. 无敌模式<a hidden class="anchor" aria-hidden="true" href="#3-无敌模式">#</a></h4>
<p>无敌模式是指水果堆积到顶部、超出线条，游戏依然不会结束。</p>
<p>既然游戏会结束，那么必定有一个判断游戏结束的逻辑，也就是条件表达式。</p>
<p>那就在代码中搜索 &ldquo;end&rdquo;（结束），果然找到了下面这串判断逻辑，运算结果为 <code>true</code> 则游戏结束，为 <code>false</code> 则继续。</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c2721ab506ae4ec4a7422e415fbaf930~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<p>这里 B 站 UP GJhuxiao 哥提供了非常好的思路，增加一个条件判断，而不是修改原有判断逻辑，极大地方便大家修改！</p>
<h4 id="4-控制水果生成">4. 控制水果生成<a hidden class="anchor" aria-hidden="true" href="#4-控制水果生成">#</a></h4>
<p>能不能控制下一个水果是什么呢？比如每次都出现大西瓜。</p>
<p>当然，同样的思路，先找到水果生成的逻辑在代码的哪个位置。通过搜索 &ldquo;fruit&rdquo;、&ldquo;create&rdquo; 等关键字，定位到了这段代码：</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4c80eac06b6a48668c382f6c2ec9250c~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="生成指定水果"  />
</p>
<p>这段代码的功能是，根据当前的水果决定下一个水果。</p>
<p>逻辑看起来很复杂，但其实就是，前 5 个水果的生成是固定的，类似新手教程，总不能刚开始就给大水果吧！</p>
<p>当生成第几个水果（用 <code>createFruitCount</code> 统计）之后，开始随机生成水果。</p>
<p>每一个水果都对应一个数字序号（下标），由小到大依次是 0-9，葡萄到西瓜。因此刚开始是两次 <code>createOneFruit(0)</code>，即生成两次葡萄，后面就是随机生成葡萄（0）到西红柿（5）。</p>
<p>那如果想要生成第一个水果，怎么办？</p>
<p>第一个水果是葡萄，对应序号 0，那直接搜索 <code>createOneFruit(0)</code> 不就成了！</p>
<p>直接找到对应代码，可以把 0 修改成其他数字~</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/49557f0c29eb43429e74288112548312~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="修改第一个水果"  />
</p>
<h4 id="5-大水果合成小水果">5. 大水果合成小水果<a hidden class="anchor" aria-hidden="true" href="#5-大水果合成小水果">#</a></h4>
<p>大水果合成小水果听起来很有趣，即可以把游戏 “倒着玩”，两个西瓜合成椰子，最终合成葡萄即胜利！✌️</p>
<p>如果把水果膨胀理解为 “升级”，那说白了，就是反转下水果的升级顺序。这里的代码不是很好定位，主要是先找到水果的合成逻辑，可以通过搜索边界值（比如 &lt; 9）、或者关键词 <code>LevelUp</code> 的方式找到下面代码，将 &ldquo;+1&rdquo; 变为 &ldquo;-1&rdquo; 即可！</p>
<p>每次合并水果，升级改为降级。</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7aae7a5866c74b899f52f7f7941dea6a~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="修改合成水果逻辑"  />
</p>
<p>当然，只改这里肯定是有问题的，B 站的 UP GJhuxiao 也犯了一个小小小小的错误，就是没有处理边界值。</p>
<p>原本当合成大西瓜后，会有特殊逻辑，比如闪光特效。在顺序反转后，我们要把边界值由 9 改为 0。同时记得修改一下初始生成的水果，应该是大西瓜而不是小葡萄啦！</p>
<h4 id="6-让水果更-q-弹">6. 让水果更 Q 弹<a hidden class="anchor" aria-hidden="true" href="#6-让水果更-q-弹">#</a></h4>
<p>现在的水果好像没什么弹性，怎么让它们像果味香浓、Q 弹多汁的旺仔 QQ 糖一样弹性十足呢？</p>
<p>这就涉及到物理引擎层面的修改，由于我本人对 cocos2d 不熟悉，以下依然是 B 站的 UP GJhuxiao 的实现方式。</p>
<p>在生成水果的函数中，可以看到 <code>cc.PhysicsCircleCollider</code>，就是控制水果下落行为的物理引擎。</p>
<p>由于整个游戏是基于 cocos2d 开发，我们可以看看官方 API 文档中，该物理引擎有哪些参数，很快就找到了弹性系数：</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5e841c11a3bf4966ad3db7615322d10a~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="cocos2d API 文档"  />
</p>
<p>然后去修改物理引擎的参数即可，此处设置为 0.9。</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e7d6a74d0d324882b21e4d5cac3e0ade~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="修改物理引擎参数"  />
</p>
<p>别看数值改动不大，设置 0.9 后，水果就已经能飞起来了。如果你乐意，想要让它一飞冲天也是可以的！</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/680838e880a34e6d9748158e357a810c~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="飞了起来"  />
</p>
<blockquote>
<p>记得打开无敌模式，否则一下就 GameOver 了！</p>
</blockquote>
<p>还可以看看 cocos2d 有什么其他的参数，试着修改一下，也许会发现新的创意和惊喜哦~</p>
<h3 id="发布上线">发布上线<a hidden class="anchor" aria-hidden="true" href="#发布上线">#</a></h3>
<p>最多同学关心的问题，在本地修改好代码后，怎么发布到网上供其他人访问呢？</p>
<p>这里提供最简单的两种方法，使用『 腾讯云静态网站托管 』或『 Vercel 』，不需要购买域名、也不需要买服务器！</p>
<p>而且自己娱乐、用户量不大的话，免费空间完全够用！</p>
<h4 id="1-腾讯云静态网站托管">1. 腾讯云静态网站托管<a hidden class="anchor" aria-hidden="true" href="#1-腾讯云静态网站托管">#</a></h4>
<p>使用腾讯云静态网站托管，服务器完全在国内，还有 CDN（静态内容分发）加速，让你的网站飞起来~</p>
<p>使用步骤也很简单。</p>
<p>首先进入腾讯云的云开发 (cloudbase) 控制台，地址：<a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.tencent.com%2Fproduct%2Fwh%25EF%25BC%259A" title="https://cloud.tencent.com/product/wh%EF%BC%9A">cloud.tencent.com/product/wh：</a></p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/62df1715812d4c1ca7fcb49d2d87d38c~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="进入控制台"  />
</p>
<p>点击立即创建，开通一个云环境：</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bc80af536ad342f1b33dcd6787e3b5dc~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="一定要开启免费资源"  />
</p>
<p>点击立即开通，喝杯 ☕️，稍等片刻即可创建完成。</p>
<p>创建完成后，进入到提示页，点击开始使用，初始化静态网站服务。</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3eb06df0909645ff82a6af5925323fa1~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="初始化静态服务"  />
</p>
<p>现在我们就可以使用云开发提供的静态网站服务了，可以通过界面上传，也可以使用 <code>cloudbase</code> 命令行上传。推荐后者，效率更高！</p>
<p>首先，安装 <code>cloudbase</code> 命令行工具：</p>
<p>bash</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>npm install -g @cloudbase/cli</code></p>
<p>执行登录命令：</p>
<p>bash</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>cloudbase login</code></p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/768e1738f99b4e06b10cb0ffde602be7~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="登录"  />
</p>
<p>在弹出的页面确认授权：</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3d4ede350da645e1a802df08ff57aa68~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="授权"  />
</p>
<p>进入到已开通的云环境查看页面，复制刚刚创建的云环境 id：</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3348ced0ef93482f9465ef47497dbcb0~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="复制云环境 id"  />
</p>
<p>接着，在 <code>index.html</code> 所在目录中（我的是 <code>daxigua</code>），执行 <code>cloudbase</code> 的 <code>deploy</code> 命令将目录中的网站文件全部发布：</p>
<p>bash</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>cd daxigua cloudbase hosting:deploy . -e &lt;EnvID&gt;</code></p>
<p><strong>这里的 <code>&lt;EnvID&gt;</code> 要替换为刚刚复制的云环境 id！</strong></p>
<p>看到如下结果，就算成功啦，点击链接即可访问和分享！</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d7677e133e124741be0d847cbc427867~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="发布网页文件"  />
</p>
<h4 id="2-vercel">2. Vercel<a hidden class="anchor" aria-hidden="true" href="#2-vercel">#</a></h4>
<p>Vercel 是免费网站托管平台，可以帮我们部署网站，并生成可访问的简短网址，还能够和自己购买的域名进行绑定。</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b4b174bbdbb045c9b82edfdf6ccf0f81~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<p>先在命令行通过 npm 命令安装 Vercel：</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>npm install -g vercel</code></p>
<p>安装完成后，进入 <code>index.html</code> 所在目录（我的是 daxigua），使用 <code>vercel</code> 命令发布网站：</p>
<p>bash</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>cd daxigua vercel --prod</code></p>
<p>然后会让你输入一些选项，比如项目名称、是否修改配置等，一路回车就可以了~</p>
<p>发布成功，会得到一个网址，打开就可以看到游戏啦，还可以把网址分享给别人！</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0243f74bc40a4abbac6ed323c54c5e41~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="发布成功"  />
</p>
<h3 id="最后">最后<a hidden class="anchor" aria-hidden="true" href="#最后">#</a></h3>
<p>通过这个小游戏，我们能够看到大家各种奇思妙想的创意，在乐趣之外，还能学习一些编程小知识，何乐而不为呢？</p>
<p>可惜由于工作，我没有时间去完成自己的其他创意啦，比如水果爆炸、水果围城、反重力 😢</p>
<p>大家还有什么好的创意欢迎在评论区告诉我吧！</p>
<p><strong>以上所有代码和文档都发布到了我的 GitHub 中</strong></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fliyupi%2Fdaxigua" title="https://github.com/liyupi/daxigua">github.com/liyupi/daxi…</a></p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/%E5%89%8D%E7%AB%AF/">前端</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="http://localhost:1313/posts/juejin/%E6%88%91%E4%B8%A4%E5%B9%B4%E7%9A%84%E5%9D%9A%E6%8C%81%E5%80%BC%E4%BA%86/">
    <span class="title">« 上一页</span>
    <br>
    <span>我两年的坚持，值了！</span>
  </a>
  <a class="next" href="http://localhost:1313/posts/juejin/%E5%9C%A8%E8%BD%A6%E4%B8%8A%E5%81%B6%E9%81%87%E4%B8%80%E4%BD%8D%E9%98%BF%E9%87%8C%E5%A4%A7%E4%BD%AC/">
    <span class="title">下一页 »</span>
    <br>
    <span>在车上偶遇一位阿里大佬</span>
  </a>
</nav>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 魔改和上线你的合成大西瓜，最全教程！ on x"
            href="https://x.com/intent/tweet/?text=%e9%ad%94%e6%94%b9%e5%92%8c%e4%b8%8a%e7%ba%bf%e4%bd%a0%e7%9a%84%e5%90%88%e6%88%90%e5%a4%a7%e8%a5%bf%e7%93%9c%ef%bc%8c%e6%9c%80%e5%85%a8%e6%95%99%e7%a8%8b%ef%bc%81&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2f%25E9%25AD%2594%25E6%2594%25B9%25E5%2592%258C%25E4%25B8%258A%25E7%25BA%25BF%25E4%25BD%25A0%25E7%259A%2584%25E5%2590%2588%25E6%2588%2590%25E5%25A4%25A7%25E8%25A5%25BF%25E7%2593%259C%25E6%259C%2580%25E5%2585%25A8%25E6%2595%2599%25E7%25A8%258B%2f&amp;hashtags=%e5%89%8d%e7%ab%af">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 魔改和上线你的合成大西瓜，最全教程！ on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2f%25E9%25AD%2594%25E6%2594%25B9%25E5%2592%258C%25E4%25B8%258A%25E7%25BA%25BF%25E4%25BD%25A0%25E7%259A%2584%25E5%2590%2588%25E6%2588%2590%25E5%25A4%25A7%25E8%25A5%25BF%25E7%2593%259C%25E6%259C%2580%25E5%2585%25A8%25E6%2595%2599%25E7%25A8%258B%2f&amp;title=%e9%ad%94%e6%94%b9%e5%92%8c%e4%b8%8a%e7%ba%bf%e4%bd%a0%e7%9a%84%e5%90%88%e6%88%90%e5%a4%a7%e8%a5%bf%e7%93%9c%ef%bc%8c%e6%9c%80%e5%85%a8%e6%95%99%e7%a8%8b%ef%bc%81&amp;summary=%e9%ad%94%e6%94%b9%e5%92%8c%e4%b8%8a%e7%ba%bf%e4%bd%a0%e7%9a%84%e5%90%88%e6%88%90%e5%a4%a7%e8%a5%bf%e7%93%9c%ef%bc%8c%e6%9c%80%e5%85%a8%e6%95%99%e7%a8%8b%ef%bc%81&amp;source=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2f%25E9%25AD%2594%25E6%2594%25B9%25E5%2592%258C%25E4%25B8%258A%25E7%25BA%25BF%25E4%25BD%25A0%25E7%259A%2584%25E5%2590%2588%25E6%2588%2590%25E5%25A4%25A7%25E8%25A5%25BF%25E7%2593%259C%25E6%259C%2580%25E5%2585%25A8%25E6%2595%2599%25E7%25A8%258B%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 魔改和上线你的合成大西瓜，最全教程！ on reddit"
            href="https://reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2f%25E9%25AD%2594%25E6%2594%25B9%25E5%2592%258C%25E4%25B8%258A%25E7%25BA%25BF%25E4%25BD%25A0%25E7%259A%2584%25E5%2590%2588%25E6%2588%2590%25E5%25A4%25A7%25E8%25A5%25BF%25E7%2593%259C%25E6%259C%2580%25E5%2585%25A8%25E6%2595%2599%25E7%25A8%258B%2f&title=%e9%ad%94%e6%94%b9%e5%92%8c%e4%b8%8a%e7%ba%bf%e4%bd%a0%e7%9a%84%e5%90%88%e6%88%90%e5%a4%a7%e8%a5%bf%e7%93%9c%ef%bc%8c%e6%9c%80%e5%85%a8%e6%95%99%e7%a8%8b%ef%bc%81">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 魔改和上线你的合成大西瓜，最全教程！ on facebook"
            href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2f%25E9%25AD%2594%25E6%2594%25B9%25E5%2592%258C%25E4%25B8%258A%25E7%25BA%25BF%25E4%25BD%25A0%25E7%259A%2584%25E5%2590%2588%25E6%2588%2590%25E5%25A4%25A7%25E8%25A5%25BF%25E7%2593%259C%25E6%259C%2580%25E5%2585%25A8%25E6%2595%2599%25E7%25A8%258B%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 魔改和上线你的合成大西瓜，最全教程！ on whatsapp"
            href="https://api.whatsapp.com/send?text=%e9%ad%94%e6%94%b9%e5%92%8c%e4%b8%8a%e7%ba%bf%e4%bd%a0%e7%9a%84%e5%90%88%e6%88%90%e5%a4%a7%e8%a5%bf%e7%93%9c%ef%bc%8c%e6%9c%80%e5%85%a8%e6%95%99%e7%a8%8b%ef%bc%81%20-%20http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2f%25E9%25AD%2594%25E6%2594%25B9%25E5%2592%258C%25E4%25B8%258A%25E7%25BA%25BF%25E4%25BD%25A0%25E7%259A%2584%25E5%2590%2588%25E6%2588%2590%25E5%25A4%25A7%25E8%25A5%25BF%25E7%2593%259C%25E6%259C%2580%25E5%2585%25A8%25E6%2595%2599%25E7%25A8%258B%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 魔改和上线你的合成大西瓜，最全教程！ on telegram"
            href="https://telegram.me/share/url?text=%e9%ad%94%e6%94%b9%e5%92%8c%e4%b8%8a%e7%ba%bf%e4%bd%a0%e7%9a%84%e5%90%88%e6%88%90%e5%a4%a7%e8%a5%bf%e7%93%9c%ef%bc%8c%e6%9c%80%e5%85%a8%e6%95%99%e7%a8%8b%ef%bc%81&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2f%25E9%25AD%2594%25E6%2594%25B9%25E5%2592%258C%25E4%25B8%258A%25E7%25BA%25BF%25E4%25BD%25A0%25E7%259A%2584%25E5%2590%2588%25E6%2588%2590%25E5%25A4%25A7%25E8%25A5%25BF%25E7%2593%259C%25E6%259C%2580%25E5%2585%25A8%25E6%2595%2599%25E7%25A8%258B%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 魔改和上线你的合成大西瓜，最全教程！ on ycombinator"
            href="https://news.ycombinator.com/submitlink?t=%e9%ad%94%e6%94%b9%e5%92%8c%e4%b8%8a%e7%ba%bf%e4%bd%a0%e7%9a%84%e5%90%88%e6%88%90%e5%a4%a7%e8%a5%bf%e7%93%9c%ef%bc%8c%e6%9c%80%e5%85%a8%e6%95%99%e7%a8%8b%ef%bc%81&u=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2f%25E9%25AD%2594%25E6%2594%25B9%25E5%2592%258C%25E4%25B8%258A%25E7%25BA%25BF%25E4%25BD%25A0%25E7%259A%2584%25E5%2590%2588%25E6%2588%2590%25E5%25A4%25A7%25E8%25A5%25BF%25E7%2593%259C%25E6%259C%2580%25E5%2585%25A8%25E6%2595%2599%25E7%25A8%258B%2f">
            <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
                <path
                    d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
            </svg>
        </a>
    </li>
</ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span><a href="https://beian.miit.gov.cn/">粤ICP备2023039897号-1</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = '复制';

        function copyingDone() {
            copybutton.innerHTML = '已复制！';
            setTimeout(() => {
                copybutton.innerHTML = '复制';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
