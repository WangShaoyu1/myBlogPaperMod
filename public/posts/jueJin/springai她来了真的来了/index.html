<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>SpringAI她来了，真的来了 | PaperMod</title>
<meta name="keywords" content="后端">
<meta name="description" content="自从ChatGPT火了之后，各种产品都在不停的拥抱AI，在各自场景中接入AI，国内外各种大模型层出不穷。好像有点扯远了，言归正传，今天我们要说的是SpringAI">
<meta name="author" content="程序员晓凡">
<link rel="canonical" href="http://localhost:1313/posts/juejin/springai%E5%A5%B9%E6%9D%A5%E4%BA%86%E7%9C%9F%E7%9A%84%E6%9D%A5%E4%BA%86/">
<meta name="google-site-verification" content="XYZabc">
<link crossorigin="anonymous" href="/assets/css/stylesheet.7b92bf4867c997b58ec50f63451b83777173d5bd5593376852abd85746d09d71.css" integrity="sha256-e5K/SGfJl7WOxQ9jRRuDd3Fz1b1VkzdoUqvYV0bQnXE=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="apple-touch-icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="mask-icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="http://localhost:1313/posts/juejin/springai%E5%A5%B9%E6%9D%A5%E4%BA%86%E7%9C%9F%E7%9A%84%E6%9D%A5%E4%BA%86/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><meta property="og:title" content="SpringAI她来了，真的来了" />
<meta property="og:description" content="自从ChatGPT火了之后，各种产品都在不停的拥抱AI，在各自场景中接入AI，国内外各种大模型层出不穷。好像有点扯远了，言归正传，今天我们要说的是SpringAI" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/posts/juejin/springai%E5%A5%B9%E6%9D%A5%E4%BA%86%E7%9C%9F%E7%9A%84%E6%9D%A5%E4%BA%86/" />
<meta property="og:image" content="http://localhost:1313/images/papermod-cover.png" />
<meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-04-15T00:00:00+00:00" />
<meta property="article:modified_time" content="2024-04-15T00:00:00+00:00" />


<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="http://localhost:1313/images/papermod-cover.png" />
<meta name="twitter:title" content="SpringAI她来了，真的来了"/>
<meta name="twitter:description" content="自从ChatGPT火了之后，各种产品都在不停的拥抱AI，在各自场景中接入AI，国内外各种大模型层出不穷。好像有点扯远了，言归正传，今天我们要说的是SpringAI"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://localhost:1313/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "SpringAI她来了，真的来了",
      "item": "http://localhost:1313/posts/juejin/springai%E5%A5%B9%E6%9D%A5%E4%BA%86%E7%9C%9F%E7%9A%84%E6%9D%A5%E4%BA%86/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "SpringAI她来了，真的来了",
  "name": "SpringAI她来了，真的来了",
  "description": "自从ChatGPT火了之后，各种产品都在不停的拥抱AI，在各自场景中接入AI，国内外各种大模型层出不穷。好像有点扯远了，言归正传，今天我们要说的是SpringAI",
  "keywords": [
    "后端"
  ],
  "articleBody": "写在前面 自从ChatGPT火了之后，各种产品都在不停的拥抱AI，在各自场景中接入AI，国内外各种大模型层出不穷。\n好像有点扯远了，言归正传，今天我们要说的是SpringAI，大家在逛Spring 官网（spring.io/） 应该发现了，在官网中多了SpringAI 模块\n一、SpringAI 简介 我们来看看官网是怎么介绍的\nSpring AI is an application framework for AI engineering. Its goal is to apply to the AI domain Spring ecosystem design principles such as portability and modular design and promote using POJOs as the building blocks of an application to the AI domain.\nPortable API support across AI providers for Chat, text-to-image, and Embedding models. Both synchronous and stream API options are supported. Dropping down to access model-specific features is also supported.\n上面翻译过来就是\nSpring AI是一个面向AI工程的应用框架。其目标是将可移植性和模块化设计等设计原则应用于AI领域的Spring生态系统，并将POJO作为应用程序的构建块推广到AI领域。\n跨AI提供商的便携API支持聊天、文本到图像和嵌入模型。同时支持同步和流API选项。还支持各种定制的功能。\n总的来说就是：Spring出了一个AI框架，帮助我们快速调用AI，从而实现各种功能场景。\n在之前的文章中我们有说过Java怎么调用OpenAI， 传送门👉Java程序接入ChatGPT 👈\n今天我们就来看看怎么使用Spring 自己提供的框架调用AI\n二、各种模型 这里列举出了支持的各种厂商的各种模型接入，有我们熟悉的Amazon、Google 等模型，但目前还不支持国内的任何一种模型\n2.1 Chat Models 聊天模型 2.2 Text-to-image Models 文生图模型 2.3 Transcription (audio to text) Models 音频文本互转模型 2.4 Embedding Models 嵌入模型 三、接入准备 我们这里以接入OpenAI 为例，看看需要做哪些准备\n① 首先我们得能魔法上网\n② 注册过OpenAI账号，并创建了API keys\n还不知道怎么注册的可以翻一翻之前的文章， 传送门 👉 如何注册OpenAI 👈\n注： 之前我们注册生成的API keys 可能过期了，有可能需要重新创建一个\n要想接下来调用成功，上面两步缺一不可\n四、创建springboot项目 ① Spring Initializr 创建项目\n注：\nServer URL 这里一定要 填start.spring.io/ ，而不是 start.aliyun.com/ 阿里云暂时还不支持 jdk一定要选择17及以上版本 ② 选择支持模块\n如果上面一步选择正确的话，这一步我们会看到一个AI模块，这里选择OpenAI 模型和Spring Web即可，\n如果这一步没看到AI模块的，请return到上一步\n五、所需依赖 按照上面添加模块之后，idea会默认给我们添加如下依赖，当然了也还用到其他依赖，这里就不都贴出来了\nxml\n代码解读\n复制代码\norg.springframework.ai spring-ai-openai-spring-boot-starter 如果你用的是Gradle 构建工具，那就是\nxml\n代码解读\n复制代码\ndependencies { implementation 'org.springframework.ai:spring-ai-openai-spring-boot-starter' }\n注：\n添加依赖之后，如果我们项目配置的是阿里云镜像的话，需要修改成如下仓库地址，否则依赖下载不下来\nxml\n代码解读\n复制代码\nspring-milestones Spring Milestones https://repo.spring.io/milestone false 六、修改配置文件 application.properties 或者application.yml配置文件\nproperties\n代码解读\n复制代码\nspring.ai.openai.api-key=前面步骤创建的apikey spring.ai.openai.chat.options.model=gpt-3.5-turbo spring.ai.openai.chat.options.temperature=0.7\n或者\nyml\n代码解读\n复制代码\nspring: ai: openai: api-key: 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 chat: options: model: gpt-3.5-turbo temperature: 0.7\napi-key : 前面步骤创建的apikey chat.options.model: gpt模型 ,上面我们配置的是3.5 模型 chat.options.temperature:Spring AI与PT模型交互时，特别是在聊天或文本生成场景下，模型生成文本时的随机性程度为0.7 七、代码编写 这里我们只是简单测试一下，所以代码都写在了controller 层里\njava\n代码解读\n复制代码\n@RestController public class ChatController { private final OpenAiChatClient chatClient; @Autowired public ChatController(OpenAiChatClient chatClient) { this.chatClient = chatClient; } @GetMapping(\"/ai/generate\") public Map generate(@RequestParam(value = \"message\", defaultValue = \"Tell me a joke\") String message) { return Map.of(\"generation\", chatClient.call(message)); } @GetMapping(\"/ai/generateStream\") public Flux generateStream(@RequestParam(value = \"message\", defaultValue = \"Tell me a joke\") String message) { Prompt prompt = new Prompt(new UserMessage(message)); return chatClient.stream(prompt); } }\n代码解释：上面代码提供了generate和generateStream 两个方法接收前端传来的参数message,然后将message作为prompt （如果你还不知道prompt可以去百度一下）去调用封装好的大模型，并将大模型的结果返回去。\n八、Spring AI函数调用流程 九、其他模型调用 上面例子中我们只是列举出OpenAI 模型调用方式，其他模型大家可以参考官方文档，文档写的也非常详细\n假设我们想使用亚马逊的大模型，可以到docs.spring.io/spring-ai/r… 查看文档\n本期内容到这儿就结束了，希望对你有所帮助\n我们下期再见 (●’◡’●)\n",
  "wordCount" : "300",
  "inLanguage": "zh",
  "image": "http://localhost:1313/images/papermod-cover.png","datePublished": "2024-04-15T00:00:00Z",
  "dateModified": "2024-04-15T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "程序员晓凡"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/posts/juejin/springai%E5%A5%B9%E6%9D%A5%E4%BA%86%E7%9C%9F%E7%9A%84%E6%9D%A5%E4%BA%86/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "PaperMod",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/%3Clink%20/%20abs%20url%3E"
    }
  }
}
</script>
</head>

<body class=" dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Home (Alt + H)">
                        
                    <img src="http://localhost:1313/images/msg_hu15231257772499651944.png" alt="" aria-label="logo"
                        height="20">Home</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://github.com/adityatelange/hugo-PaperMod/wiki/" title="WiKi">
                    <span>WiKi</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://localhost:1313/">主页</a>&nbsp;»&nbsp;<a href="http://localhost:1313/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      SpringAI她来了，真的来了
    </h1>
    <div class="post-description">
      自从ChatGPT火了之后，各种产品都在不停的拥抱AI，在各自场景中接入AI，国内外各种大模型层出不穷。好像有点扯远了，言归正传，今天我们要说的是SpringAI
    </div>
    <div class="post-meta"><span title='2024-04-15 00:00:00 +0000 UTC'>四月 15, 2024</span>&nbsp;·&nbsp;2 分钟&nbsp;·&nbsp;程序员晓凡&nbsp;|&nbsp;<a href="https://github.com/WangShaoyu1/myBlogPaperMod/tree/master/content/posts/jueJin/SpringAI%e5%a5%b9%e6%9d%a5%e4%ba%86%ef%bc%8c%e7%9c%9f%e7%9a%84%e6%9d%a5%e4%ba%86.md" rel="noopener noreferrer" target="_blank">Suggest Changes</a>

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">目录</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e5%86%99%e5%9c%a8%e5%89%8d%e9%9d%a2" aria-label="写在前面">写在前面</a></li>
                <li>
                    <a href="#%e4%b8%80springai-%e7%ae%80%e4%bb%8b" aria-label="一、SpringAI 简介">一、SpringAI 简介</a></li>
                <li>
                    <a href="#%e4%ba%8c%e5%90%84%e7%a7%8d%e6%a8%a1%e5%9e%8b" aria-label="二、各种模型">二、各种模型</a><ul>
                        
                <li>
                    <a href="#21-chat-models-%e8%81%8a%e5%a4%a9%e6%a8%a1%e5%9e%8b" aria-label="2.1 Chat Models 聊天模型">2.1 Chat Models 聊天模型</a></li>
                <li>
                    <a href="#22-text-to-image-models-%e6%96%87%e7%94%9f%e5%9b%be%e6%a8%a1%e5%9e%8b" aria-label="2.2 Text-to-image Models 文生图模型">2.2 Text-to-image Models 文生图模型</a></li>
                <li>
                    <a href="#23-transcription-audio-to-text-models-%e9%9f%b3%e9%a2%91%e6%96%87%e6%9c%ac%e4%ba%92%e8%bd%ac%e6%a8%a1%e5%9e%8b" aria-label="2.3 Transcription (audio to text) Models 音频文本互转模型">2.3 Transcription (audio to text) Models 音频文本互转模型</a></li>
                <li>
                    <a href="#24-embedding-models-%e5%b5%8c%e5%85%a5%e6%a8%a1%e5%9e%8b" aria-label="2.4 Embedding Models 嵌入模型">2.4 Embedding Models 嵌入模型</a></li></ul>
                </li>
                <li>
                    <a href="#%e4%b8%89%e6%8e%a5%e5%85%a5%e5%87%86%e5%a4%87" aria-label="三、接入准备">三、接入准备</a></li>
                <li>
                    <a href="#%e5%9b%9b%e5%88%9b%e5%bb%baspringboot%e9%a1%b9%e7%9b%ae" aria-label="四、创建springboot项目">四、创建springboot项目</a></li>
                <li>
                    <a href="#%e4%ba%94%e6%89%80%e9%9c%80%e4%be%9d%e8%b5%96" aria-label="五、所需依赖">五、所需依赖</a></li>
                <li>
                    <a href="#%e5%85%ad%e4%bf%ae%e6%94%b9%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6" aria-label="六、修改配置文件">六、修改配置文件</a></li>
                <li>
                    <a href="#%e4%b8%83%e4%bb%a3%e7%a0%81%e7%bc%96%e5%86%99" aria-label="七、代码编写">七、代码编写</a></li>
                <li>
                    <a href="#%e5%85%abspring-ai%e5%87%bd%e6%95%b0%e8%b0%83%e7%94%a8%e6%b5%81%e7%a8%8b" aria-label="八、Spring AI函数调用流程">八、Spring AI函数调用流程</a></li>
                <li>
                    <a href="#%e4%b9%9d%e5%85%b6%e4%bb%96%e6%a8%a1%e5%9e%8b%e8%b0%83%e7%94%a8" aria-label="九、其他模型调用">九、其他模型调用</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h3 id="写在前面">写在前面<a hidden class="anchor" aria-hidden="true" href="#写在前面">#</a></h3>
<p>自从<code>ChatGPT</code>火了之后，各种产品都在不停的拥抱AI，在各自场景中接入AI，国内外各种大模型层出不穷。</p>
<p>好像有点扯远了，言归正传，今天我们要说的是SpringAI，大家在逛Spring 官网（<a href="https://link.juejin.cn?target=https%3A%2F%2Fspring.io%2F%25EF%25BC%2589" title="https://spring.io/%EF%BC%89">spring.io/）</a> 应该发现了，在官网中多了<code>SpringAI</code> 模块</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/72ec3c34ee224b60993e82ff56e082d3~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1702&amp;h=979&amp;s=192651&amp;e=png&amp;b=ffffff" alt="springAI"  />
</p>
<h3 id="一springai-简介">一、SpringAI 简介<a hidden class="anchor" aria-hidden="true" href="#一springai-简介">#</a></h3>
<p>我们来看看官网是怎么介绍的</p>
<p>Spring AI is an application framework for AI engineering. Its goal is to apply to the AI domain Spring ecosystem design principles such as portability and modular design and promote using POJOs as the building blocks of an application to the AI domain.</p>
<p>Portable API support across AI providers for Chat, text-to-image, and Embedding models. Both synchronous and stream API options are supported. Dropping down to access model-specific features is also supported.</p>
<p>上面翻译过来就是</p>
<p>Spring AI是一个面向AI工程的应用框架。其目标是将可移植性和模块化设计等设计原则应用于AI领域的Spring生态系统，并将POJO作为应用程序的构建块推广到AI领域。</p>
<p>跨AI提供商的便携API支持聊天、文本到图像和嵌入模型。同时支持同步和流API选项。还支持各种定制的功能。</p>
<p>总的来说就是：Spring出了一个AI框架，帮助我们快速调用AI，从而实现各种功能场景。</p>
<p>在之前的文章中我们有说过Java怎么调用OpenAI， <strong>传送门</strong>👉<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FwZSAKtauOzXK1AZxL_nekg" title="https://mp.weixin.qq.com/s/wZSAKtauOzXK1AZxL_nekg">Java程序接入ChatGPT</a> 👈</p>
<p>今天我们就来看看怎么使用Spring 自己提供的框架调用AI</p>
<h3 id="二各种模型">二、各种模型<a hidden class="anchor" aria-hidden="true" href="#二各种模型">#</a></h3>
<blockquote>
<p>这里列举出了支持的各种厂商的各种模型接入，有我们熟悉的Amazon、Google 等模型，但目前还不支持国内的任何一种模型</p>
</blockquote>
<h4 id="21-chat-models-聊天模型">2.1 Chat Models 聊天模型<a hidden class="anchor" aria-hidden="true" href="#21-chat-models-聊天模型">#</a></h4>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b79cb03c83eb4b0f8d8a769726b2cbd6~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=899&amp;h=482&amp;s=35369&amp;e=png&amp;b=ffffff" alt="聊天模型"  />
</p>
<h4 id="22-text-to-image-models-文生图模型">2.2 Text-to-image Models 文生图模型<a hidden class="anchor" aria-hidden="true" href="#22-text-to-image-models-文生图模型">#</a></h4>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/19885c6c71144418aadfdd40f1989c3f~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=364&amp;h=110&amp;s=4605&amp;e=png&amp;b=ffffff" alt="文生图模型"  />
</p>
<h4 id="23-transcription-audio-to-text-models-音频文本互转模型">2.3 Transcription (audio to text) Models 音频文本互转模型<a hidden class="anchor" aria-hidden="true" href="#23-transcription-audio-to-text-models-音频文本互转模型">#</a></h4>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/032f852508d34989bf410f1ff528e9b8~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=397&amp;h=65&amp;s=1637&amp;e=png&amp;b=ffffff" alt="音频模型"  />
</p>
<h4 id="24-embedding-models-嵌入模型">2.4 Embedding Models 嵌入模型<a hidden class="anchor" aria-hidden="true" href="#24-embedding-models-嵌入模型">#</a></h4>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/86160ba787164d97897a65b7bddd1c1a~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=456&amp;h=374&amp;s=15847&amp;e=png&amp;b=ffffff" alt="嵌入模型"  />
</p>
<h3 id="三接入准备">三、接入准备<a hidden class="anchor" aria-hidden="true" href="#三接入准备">#</a></h3>
<p>我们这里以接入<code>OpenAI</code> 为例，看看需要做哪些准备</p>
<p>① 首先我们得能魔法上网</p>
<p>② 注册过<code>OpenAI</code>账号，并创建了<code>API keys</code></p>
<p>还不知道怎么注册的可以翻一翻之前的文章， <strong>传送门</strong> 👉 <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FwZSAKtauOzXK1AZxL_nekg" title="https://mp.weixin.qq.com/s/wZSAKtauOzXK1AZxL_nekg">如何注册OpenAI</a> 👈</p>
<p><strong>注：</strong> 之前我们注册生成的<code>API keys</code> 可能过期了，有可能需要重新创建一个</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fdc50f3e45b64a65839b34f469705754~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1804&amp;h=680&amp;s=82671&amp;e=png&amp;b=fefefe" alt="创建API key"  />
</p>
<p>要想接下来调用成功，上面两步缺一不可</p>
<h3 id="四创建springboot项目">四、创建springboot项目<a hidden class="anchor" aria-hidden="true" href="#四创建springboot项目">#</a></h3>
<p>① <code>Spring Initializr</code> 创建项目</p>
<p><strong>注：</strong></p>
<ul>
<li>Server URL 这里一定要 填<a href="https://link.juejin.cn?target=https%3A%2F%2Fstart.spring.io%2F" title="https://start.spring.io/">start.spring.io/</a> ，而不是 <a href="https://link.juejin.cn?target=https%3A%2F%2Fstart.aliyun.com%2F" title="https://start.aliyun.com/">start.aliyun.com/</a> 阿里云暂时还不支持</li>
<li>jdk一定要选择17及以上版本</li>
</ul>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1763675a1be54a5ba45f4eded9f78b99~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=917&amp;h=774&amp;s=53935&amp;e=png&amp;b=3d4042" alt="创建springboot项目"  />
</p>
<p>② 选择支持模块</p>
<p>如果上面一步选择正确的话，这一步我们会看到一个AI模块，这里选择<code>OpenAI</code> 模型和Spring Web即可，</p>
<p>如果这一步没看到AI模块的，请return到上一步</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/119b37105ccc46ffafddc11da5b4cc4d~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=901&amp;h=774&amp;s=47275&amp;e=png&amp;b=3c3f41" alt="模块选择"  />
</p>
<h3 id="五所需依赖">五、所需依赖<a hidden class="anchor" aria-hidden="true" href="#五所需依赖">#</a></h3>
<p>按照上面添加模块之后，idea会默认给我们添加如下依赖，当然了也还用到其他依赖，这里就不都贴出来了</p>
<p>xml</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>&lt;dependency&gt;     &lt;groupId&gt;org.springframework.ai&lt;/groupId&gt;     &lt;artifactId&gt;spring-ai-openai-spring-boot-starter&lt;/artifactId&gt; &lt;/dependency&gt;</code></p>
<p>如果你用的是<code>Gradle</code> 构建工具，那就是</p>
<p>xml</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>dependencies {     implementation 'org.springframework.ai:spring-ai-openai-spring-boot-starter' }</code></p>
<p><strong>注：</strong></p>
<p>添加依赖之后，如果我们项目配置的是阿里云镜像的话，需要修改成如下仓库地址，否则依赖下载不下来</p>
<p>xml</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>&lt;repositories&gt;     &lt;repository&gt;         &lt;id&gt;spring-milestones&lt;/id&gt;         &lt;name&gt;Spring Milestones&lt;/name&gt;         &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;         &lt;snapshots&gt;             &lt;enabled&gt;false&lt;/enabled&gt;         &lt;/snapshots&gt;     &lt;/repository&gt; &lt;/repositories&gt;</code></p>
<h3 id="六修改配置文件">六、修改配置文件<a hidden class="anchor" aria-hidden="true" href="#六修改配置文件">#</a></h3>
<p><code>application.properties</code> 或者<code>application.yml</code>配置文件</p>
<p>properties</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>spring.ai.openai.api-key=前面步骤创建的apikey spring.ai.openai.chat.options.model=gpt-3.5-turbo spring.ai.openai.chat.options.temperature=0.7</code></p>
<p>或者</p>
<p>yml</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>spring:   ai:     openai:       api-key: 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       chat:         options:           model: gpt-3.5-turbo           temperature: 0.7</code></p>
<ul>
<li><code>api-key</code> : 前面步骤创建的<code>apikey</code></li>
<li><code>chat.options.model</code>: <code>gpt</code>模型 ,上面我们配置的是3.5 模型</li>
<li><code>chat.options.temperature</code>:<code>Spring AI</code>与PT模型交互时，特别是在聊天或文本生成场景下，模型生成文本时的随机性程度为0.7</li>
</ul>
<h3 id="七代码编写">七、代码编写<a hidden class="anchor" aria-hidden="true" href="#七代码编写">#</a></h3>
<p>这里我们只是简单测试一下，所以代码都写在了<code>controller</code> 层里</p>
<p>java</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>@RestController public class ChatController {     private final OpenAiChatClient chatClient;     @Autowired     public ChatController(OpenAiChatClient chatClient) {         this.chatClient = chatClient;     }     @GetMapping(&quot;/ai/generate&quot;)     public Map  generate(@RequestParam(value = &quot;message&quot;, defaultValue = &quot;Tell me a joke&quot;) String message) {         return Map.of(&quot;generation&quot;, chatClient.call(message));     }     @GetMapping(&quot;/ai/generateStream&quot;)     public Flux&lt;ChatResponse&gt; generateStream(@RequestParam(value = &quot;message&quot;, defaultValue = &quot;Tell me a joke&quot;) String message) {         Prompt prompt = new Prompt(new UserMessage(message));         return chatClient.stream(prompt);     } }</code></p>
<p>代码解释：上面代码提供了<code>generate</code>和<code>generateStream</code> 两个方法接收前端传来的参数<code>message</code>,然后将<code>message</code>作为<code>prompt</code> （如果你还不知道<code>prompt</code>可以去百度一下）去调用封装好的大模型，并将大模型的结果返回去。</p>
<h3 id="八spring-ai函数调用流程">八、Spring AI函数调用流程<a hidden class="anchor" aria-hidden="true" href="#八spring-ai函数调用流程">#</a></h3>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/49350b34b4964c229f8e9db70ee756cf~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1131&amp;h=884&amp;s=117823&amp;e=jpg&amp;b=fcfcfc" alt="AI函数调用流程1"  />
</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5994100e43fc4affa42a3e5d5dbe6dab~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1117&amp;h=895&amp;s=176558&amp;e=jpg&amp;b=fbfbfb" alt="AI函数调用流程2"  />
</p>
<h3 id="九其他模型调用">九、其他模型调用<a hidden class="anchor" aria-hidden="true" href="#九其他模型调用">#</a></h3>
<p>上面例子中我们只是列举出<code>OpenAI</code> 模型调用方式，其他模型大家可以参考官方文档，文档写的也非常详细</p>
<p>假设我们想使用亚马逊的大模型，可以到<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.spring.io%2Fspring-ai%2Freference%2Fapi%2Fbedrock-chat.html" title="https://docs.spring.io/spring-ai/reference/api/bedrock-chat.html">docs.spring.io/spring-ai/r…</a> 查看文档</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/27646e5c060d4085b931c205965f44dc~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1867&amp;h=949&amp;s=182794&amp;e=png&amp;b=1e2226" alt="其他模型调用"  />
</p>
<p>本期内容到这儿就结束了，希望对你有所帮助</p>
<p>我们下期再见 (●&rsquo;◡&rsquo;●)</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/%E5%90%8E%E7%AB%AF/">后端</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="http://localhost:1313/posts/juejin/%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E6%94%BE%E5%BC%83%E4%BD%BF%E7%94%A8usecallbackusecallback%E7%9A%84%E7%BC%BA%E7%82%B9/">
    <span class="title">« 上一页</span>
    <br>
    <span>为什么要放弃使用useCallback(useCallback的缺点)</span>
  </a>
  <a class="next" href="http://localhost:1313/posts/juejin/visualstudiocode1.91%E5%8F%91%E5%B8%83/">
    <span class="title">下一页 »</span>
    <br>
    <span>VisualStudioCode1.91发布</span>
  </a>
</nav>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share SpringAI她来了，真的来了 on x"
            href="https://x.com/intent/tweet/?text=SpringAI%e5%a5%b9%e6%9d%a5%e4%ba%86%ef%bc%8c%e7%9c%9f%e7%9a%84%e6%9d%a5%e4%ba%86&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2fspringai%25E5%25A5%25B9%25E6%259D%25A5%25E4%25BA%2586%25E7%259C%259F%25E7%259A%2584%25E6%259D%25A5%25E4%25BA%2586%2f&amp;hashtags=%e5%90%8e%e7%ab%af">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share SpringAI她来了，真的来了 on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2fspringai%25E5%25A5%25B9%25E6%259D%25A5%25E4%25BA%2586%25E7%259C%259F%25E7%259A%2584%25E6%259D%25A5%25E4%25BA%2586%2f&amp;title=SpringAI%e5%a5%b9%e6%9d%a5%e4%ba%86%ef%bc%8c%e7%9c%9f%e7%9a%84%e6%9d%a5%e4%ba%86&amp;summary=SpringAI%e5%a5%b9%e6%9d%a5%e4%ba%86%ef%bc%8c%e7%9c%9f%e7%9a%84%e6%9d%a5%e4%ba%86&amp;source=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2fspringai%25E5%25A5%25B9%25E6%259D%25A5%25E4%25BA%2586%25E7%259C%259F%25E7%259A%2584%25E6%259D%25A5%25E4%25BA%2586%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share SpringAI她来了，真的来了 on reddit"
            href="https://reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2fspringai%25E5%25A5%25B9%25E6%259D%25A5%25E4%25BA%2586%25E7%259C%259F%25E7%259A%2584%25E6%259D%25A5%25E4%25BA%2586%2f&title=SpringAI%e5%a5%b9%e6%9d%a5%e4%ba%86%ef%bc%8c%e7%9c%9f%e7%9a%84%e6%9d%a5%e4%ba%86">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share SpringAI她来了，真的来了 on facebook"
            href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2fspringai%25E5%25A5%25B9%25E6%259D%25A5%25E4%25BA%2586%25E7%259C%259F%25E7%259A%2584%25E6%259D%25A5%25E4%25BA%2586%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share SpringAI她来了，真的来了 on whatsapp"
            href="https://api.whatsapp.com/send?text=SpringAI%e5%a5%b9%e6%9d%a5%e4%ba%86%ef%bc%8c%e7%9c%9f%e7%9a%84%e6%9d%a5%e4%ba%86%20-%20http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2fspringai%25E5%25A5%25B9%25E6%259D%25A5%25E4%25BA%2586%25E7%259C%259F%25E7%259A%2584%25E6%259D%25A5%25E4%25BA%2586%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share SpringAI她来了，真的来了 on telegram"
            href="https://telegram.me/share/url?text=SpringAI%e5%a5%b9%e6%9d%a5%e4%ba%86%ef%bc%8c%e7%9c%9f%e7%9a%84%e6%9d%a5%e4%ba%86&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2fspringai%25E5%25A5%25B9%25E6%259D%25A5%25E4%25BA%2586%25E7%259C%259F%25E7%259A%2584%25E6%259D%25A5%25E4%25BA%2586%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share SpringAI她来了，真的来了 on ycombinator"
            href="https://news.ycombinator.com/submitlink?t=SpringAI%e5%a5%b9%e6%9d%a5%e4%ba%86%ef%bc%8c%e7%9c%9f%e7%9a%84%e6%9d%a5%e4%ba%86&u=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2fspringai%25E5%25A5%25B9%25E6%259D%25A5%25E4%25BA%2586%25E7%259C%259F%25E7%259A%2584%25E6%259D%25A5%25E4%25BA%2586%2f">
            <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
                <path
                    d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
            </svg>
        </a>
    </li>
</ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span><a href="https://beian.miit.gov.cn/">粤ICP备2023039897号-1</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = '复制';

        function copyingDone() {
            copybutton.innerHTML = '已复制！';
            setTimeout(() => {
                copybutton.innerHTML = '复制';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
