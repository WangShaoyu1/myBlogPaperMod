<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>小程序面试8问，你能接下几招？ | PaperMod</title>
<meta name="keywords" content="前端, 微信小程序, 面试">
<meta name="description" content="你在面试的时候有被问到过小程序吗？你答上来了吗？下面的这面试官8问你能接招吗？掌握这8道面试题，基本在面试中就能如鱼得水了">
<meta name="author" content="白哥学前端">
<link rel="canonical" href="http://localhost:1313/posts/juejin/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E9%9D%A2%E8%AF%958%E9%97%AE%E4%BD%A0%E8%83%BD%E6%8E%A5%E4%B8%8B%E5%87%A0%E6%8B%9B/">
<meta name="google-site-verification" content="XYZabc">
<link crossorigin="anonymous" href="/assets/css/stylesheet.7b92bf4867c997b58ec50f63451b83777173d5bd5593376852abd85746d09d71.css" integrity="sha256-e5K/SGfJl7WOxQ9jRRuDd3Fz1b1VkzdoUqvYV0bQnXE=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="apple-touch-icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="mask-icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="http://localhost:1313/posts/juejin/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E9%9D%A2%E8%AF%958%E9%97%AE%E4%BD%A0%E8%83%BD%E6%8E%A5%E4%B8%8B%E5%87%A0%E6%8B%9B/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><meta property="og:title" content="小程序面试8问，你能接下几招？" />
<meta property="og:description" content="你在面试的时候有被问到过小程序吗？你答上来了吗？下面的这面试官8问你能接招吗？掌握这8道面试题，基本在面试中就能如鱼得水了" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/posts/juejin/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E9%9D%A2%E8%AF%958%E9%97%AE%E4%BD%A0%E8%83%BD%E6%8E%A5%E4%B8%8B%E5%87%A0%E6%8B%9B/" />
<meta property="og:image" content="http://localhost:1313/images/papermod-cover.png" />
<meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-10-04T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-10-04T00:00:00+00:00" />


<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="http://localhost:1313/images/papermod-cover.png" />
<meta name="twitter:title" content="小程序面试8问，你能接下几招？"/>
<meta name="twitter:description" content="你在面试的时候有被问到过小程序吗？你答上来了吗？下面的这面试官8问你能接招吗？掌握这8道面试题，基本在面试中就能如鱼得水了"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://localhost:1313/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "小程序面试8问，你能接下几招？",
      "item": "http://localhost:1313/posts/juejin/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E9%9D%A2%E8%AF%958%E9%97%AE%E4%BD%A0%E8%83%BD%E6%8E%A5%E4%B8%8B%E5%87%A0%E6%8B%9B/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "小程序面试8问，你能接下几招？",
  "name": "小程序面试8问，你能接下几招？",
  "description": "你在面试的时候有被问到过小程序吗？你答上来了吗？下面的这面试官8问你能接招吗？掌握这8道面试题，基本在面试中就能如鱼得水了",
  "keywords": [
    "前端", "微信小程序", "面试"
  ],
  "articleBody": "你在面试的时候有被问到过小程序吗？你答上来了吗？下面的这面试官8问你能接招吗？\n1、面试官：说说你对微信小程序的理解？优缺点？ 一、是什么 2017年，微信正式推出了小程序，允许外部开发者在微信内部运行自己的代码，开展业务\n截至目前，小程序已经成为国内前端的一个重要业务，跟 Web 和手机 App 有着同等的重要性\n小程序是一种不需要下载安装即可使用的应用，它实现了应用“触手可及”的梦想，用户扫一扫或者搜一下即可打开应用\n也体现了“用完即走”的理念，用户不用关心是否安装太多应用的问题。应用将无处不在，随时可用，但又无需安装卸载\n注意的是，除了微信小程序，还有百度小程序、微信小程序、支付宝小程序、抖音小程序，都是每个平台自己开发的，都是有针对性平台的应用程序\n二、背景 ⼩程序并⾮凭空冒出来的⼀个概念，当微信中的 WebView 逐渐成为移动 Web的⼀个重要⼊⼝时，微信就有相关的 JS-SDK\nJS-SDK 解决了移动⽹⻚能⼒不⾜的问题，通过暴露微信的接⼝使得 Web 开发者能够拥有更多的能⼒，然⽽在更多的能⼒之外，JS-SDK的模式并没有解决使⽤移动⽹⻚遇到的体验不良的问题\n因此需要设计⼀个⽐较好的系统，使得所有开发者在微信中都能获得⽐较好的体验：\n快速的加载 更强⼤的能⼒ 原⽣的体验 易⽤且安全的微信数据开放 ⾼效和简单的开发 这些是JS-SDK做不到的，需要设计一个全新的小程序系统\n对于小程序的开发，提供一个简单、高效的应用开发框架和丰富的组件及API，帮助开发者开发出具有原生体验的服务\n其中相比H5，小程序与其的区别有如下：\n运⾏环境：⼩程序基于浏览器内核重构的内置解析器 系统权限：⼩程序能获得更多的系统权限，如⽹络通信状态、数据缓存能⼒等 渲染机制：⼩程序的逻辑层和渲染层是分开的 小程序可以视为只能用微信打开和浏览的H5，小程序和网页的技术模型是一样的，用到的 JavaScript 语言和 CSS 样式也是一样的，只是网页的 HTML 标签被稍微修改成了 WXML 标签\n因此可以说，小程序页面本质上就是网页\n其中关于微信小程序的实现原理，我们在后面的文章讲到\n三、优缺点 优点：\n随搜随用，用完即走：使得小程序可以代替许多APP，或是做APP的整体嫁接，或是作为阉割版功能的承载体 流量大，易接受：小程序借助自身平台更加容易引入更多的流量 安全 开发门槛低 降低兼容性限制 缺点：\n用户留存：及相关数据显示，小程序的平均次日留存在13%左右，但是双周留存骤降到仅有1% 体积限制：微信小程序只有2M的大小，这样导致无法开发大型一些的小程序 受控微信：比起APP，尤其是安卓版的高自由度，小程序要面对很多来自微信的限制，从功能接口，甚至到类别内容，都要接受微信的管控 2、面试官：说说微信小程序的生命周期函数有哪些？ 一、是什么 跟vue、react框架一样，微信小程序框架也存在生命周期，实质也是一堆会在特定时期执行的函数\n小程序中，生命周期主要分成了三部分：\n应用的生命周期 页面的生命周期 组件的生命周期 应用的生命周期 小程序的生命周期函数是在app.js里面调用的，通过App(Object)函数用来注册一个小程序，指定其小程序的生命周期回调\n页面的生命周期 页面生命周期函数就是当你每进入/切换到一个新的页面的时候，就会调用的生命周期函数，同样通过App(Object)函数用来注册一个页面\n组件的生命周期 组件的生命周期，指的是组件自身的一些函数，这些函数在特殊的时间点或遇到一些特殊的框架事件时被自动触发，通过Component(Object)进行注册组件\n二、有哪些 应用的生命周期 生命周期\n说明\nonLaunch\n小程序初始化完成时触发，全局只触发一次\nonShow\n小程序启动，或从后台进入前台显示时触发\nonHide\n小程序从前台进入后台时触发\nonError\n小程序发生脚本错误或 API 调用报错时触发\nonPageNotFound\n小程序要打开的页面不存在时触发\nonUnhandledRejection()\n小程序有未处理的 Promise 拒绝时触发\nonThemeChange\n系统切换主题时触发\n页面的生命周期 生命周期\n说明\n作用\nonLoad\n生命周期回调—监听页面加载\n发送请求获取数据\nonShow\n生命周期回调—监听页面显示\n请求数据\nonReady\n生命周期回调—监听页面初次渲染完成\n获取页面元素（少用）\nonHide\n生命周期回调—监听页面隐藏\n终止任务，如定时器或者播放音乐\nonUnload\n生命周期回调—监听页面卸载\n终止任务\n组件的生命周期 生命周期\n说明\ncreated\n生命周期回调—监听页面加载\nattached\n生命周期回调—监听页面显示\nready\n生命周期回调—监听页面初次渲染完成\nmoved\n生命周期回调—监听页面隐藏\ndetached\n生命周期回调—监听页面卸载\nerror\n每当组件方法抛出错误时执行\n注意的是：\n组件实例刚刚被创建好时， created 生命周期被触发，此时，组件数据 this.data 就是在 Component 构造器中定义的数据 data ， 此时不能调用 setData 在组件完全初始化完毕、进入页面节点树后， attached 生命周期被触发。此时， this.data 已被初始化为组件的当前值。这个生命周期很有用，绝大多数初始化工作可以在这个时机进行 在组件离开页面节点树后， detached 生命周期被触发。退出一个页面时，如果组件还在页面节点树中，则 detached 会被触发 还有一些特殊的生命周期，它们并非与组件有很强的关联，但有时组件需要获知，以便组件内部处理，这样的生命周期称为“组件所在页面的生命周期”，在 pageLifetimes 定义段中定义，如下：\n生命周期\n说明\nshow\n组件所在的页面被展示时执行\nhide\n组件所在的页面被隐藏时执行\n代码如下：\njs\n代码解读\n复制代码\nComponent({ pageLifetimes: { show: function() { // 页面被展示 }, hide: function() { // 页面被隐藏 }, } })\n三、执行过程 应⽤的⽣命周期执行过程： ⽤户⾸次打开⼩程序，触发 onLaunch（全局只触发⼀次）\n⼩程序初始化完成后，触发onShow⽅法，监听⼩程序显示\n⼩程序从前台进⼊后台，触发 onHide⽅法\n⼩程序从后台进⼊前台显示，触发 onShow⽅法\n⼩程序后台运⾏⼀定时间，或系统资源占⽤过⾼，会被销毁\n⻚⾯⽣命周期的执行过程： ⼩程序注册完成后，加载⻚⾯，触发onLoad⽅法 ⻚⾯载⼊后触发onShow⽅法，显示⻚⾯ ⾸次显示⻚⾯，会触发onReady⽅法，渲染⻚⾯元素和样式，⼀个⻚⾯只会调⽤⼀次 当⼩程序后台运⾏或跳转到其他⻚⾯时，触发onHide⽅法 当⼩程序有后台进⼊到前台运⾏或重新进⼊⻚⾯时，触发onShow⽅法 当使⽤重定向⽅法 wx.redirectTo() 或关闭当前⻚返回上⼀⻚wx.navigateBack()，触发onUnload 当存在也应用生命周期和页面周期的时候，相关的执行顺序如下：\n打开小程序：(App)onLaunch –\u003e (App)onShow –\u003e (Pages)onLoad –\u003e (Pages)onShow –\u003e (pages)onRead 进入下一个页面：(Pages)onHide –\u003e (Next)onLoad –\u003e (Next)onShow –\u003e (Next)onReady 返回上一个页面：(curr)onUnload –\u003e (pre)onShow 离开小程序：(App)onHide 再次进入：小程序未销毁 –\u003e (App)onShow(执行上面的顺序），小程序被销毁，（App)onLaunch重新开始执行. 3、面试官：说说微信小程序中路由跳转的方式有哪些？区别？ 一、是什么 微信小程序拥有web网页和Application共同的特征，我们的页面都不是孤立存在的，而是通过和其他页面进行交互，来共同完成系统的功能\n在微信小程序中，每个页面可以看成是一个 pageModel，pageModel 全部以栈的形式进行管理\n二、有哪些 常见的微信小程序页面跳转方式有如下：\nwx.navigateTo(Object) wx.redirectTo(Object) wx.switchTab(Object) wx.navigateBack(Object) wx.reLaunch(Object) wx.navigateTo(Object) wx.navigateTo()用于保留当前页面、跳转到应用内的某个页面，使用 wx.navigateBack可以返回到原页面\n对于页面不是特别多的小程序，通常推荐使用 wx.navigateTo进行跳转， 以便返回原页面，以提高加载速度。当页面特别多时，则不推荐使用\n参数表如下所示：\n流程图如下：\nwx.redirectTo(Object) 重定向，当页面过多时，被保留页面会挤占微信分配给小程序的内存，或是达到微信所限制的 10 层页面栈的情况下，我们应该考虑选择 wx.redirectTo\nwx.redirectTo()用于关闭当前页面，跳转到应用内的某个页面\n这样的跳转，可以避免跳转前页面占据运行内存，但返回时页面需要重新加载，增加了返回页面的显示时间\n参数表如下所示：\n流程图如下所示：\nwx.switchTab(Object) 跳转到 tabBar 页面，并关闭其他所有非 tabBar 页面\n参数表如下所示：\nwx.navigateBack(Object) wx.navigateBack() 用于关闭当前页面，并返回上一页面或多级页面，开发者可通过 getCurrentPages() 获取当前的页面栈，决定需要返回几层则设置对象的delta属性即可\n参数表如下：\nwx.reLaunch(Object) 关闭所有页面，打开到应用内的某个页面，返回的时候跳到首页\n流程图如下所示：\n参数表如下所示：\n三、总结 关于上述五种跳转方式，做下总结：\nnavigateTo 保留当前页面，跳转到应用内的某个页面，使用 wx.navigateBack 可以返回到原页 redirectTo 关闭当前页面，跳转到应用内的某个页面 switchTab 跳转到 tabBar 页面，同时关闭其他非 tabBar 页面 navigateBack 返回上一页面 reLanch 关闭所有页面，打开到应用内的某个页面 其中关于它们的页面栈的关系如下：\navigateTo 新页面入栈\nredirectTo 当前页面出栈，新页面入栈\nnavigateBack 页面不断出栈，直到目标返回页，新页面入栈\nswitchTab 页面全部出栈，只留下新的 Tab 页面\nreLanch 页面全部出栈，只留下新的页面\n4、面试官：说说提高微信小程序的应用速度的手段有哪些？ 一、是什么 小程序启动会常常遇到如下图场景：\n这是因为，小程序首次启动前，微信会在小程序启动前为小程序准备好通用的运行环境，如运行中的线程和一些基础库的初始化\n然后才开始进入启动状态，展示一个固定的启动界面，界面内包含小程序的图标、名称和加载提示图标。此时，微信会在背后完成几项工作：\n下载小程序代码包 加载小程序代码包 初始化小程序首页 下载到的小程序代码包不是小程序的源代码，而是编译、压缩、打包之后的代码包\n整体流程如下图：\n二、手段 围绕上图小程序的启动流程， 我们可以从加载、渲染两个纬度进行切入：\n加载 提升体验最直接的方法是控制小程序包的大小，常见手段有如下：\n代码包的体积压缩可以通过勾选开发者工具中“上传代码时，压缩代码”选项 及时清理无用的代码和资源文件 减少资源包中的图片等资源的数量和大小（理论上除了小icon，其他图片资源从网络下载），图片资源压缩率有限 并且可以采取分包加载的操作，将用户访问率高的页面放在主包里，将访问率低的页面放入子包里，按需加载\n当用户点击到子包的目录时，还是有一个代码包下载的过程，这会感觉到明显的卡顿，所以子包也不建议拆的太大，当然我们可以采用子包预加载技术，并不需要等到用户点击到子包页面后在下载子包\n渲染 关于微信小程序首屏渲染优化的手段如下：\n请求可以在页面onLoad就加载，不需要等页面ready后在异步请求数据 尽量减少不必要的https请求，可使用 getStorageSync() 及 setStorageSync() 方法将数据存储在本地 可以在前置页面将一些有用的字段带到当前页，进行首次渲染（列表页的某些数据–\u003e 详情页），没有数据的模块可以进行骨架屏的占位 在微信小程序中，提高页面的多次渲染效率主要在于正确使用setData：\n不要过于频繁调用setData，应考虑将多次setData合并成一次setData调用 数据通信的性能与数据量正相关，因而如果有一些数据字段不在界面中展示且数据结构比较复杂或包含长字符串，则不应使用setData来设置这些数据 与界面渲染无关的数据最好不要设置在data中，可以考虑设置在page对象的其他字段下 除此之外，对于一些独立的模块我们尽可能抽离出来，这是因为自定义组件的更新并不会影响页面上其他元素的更新\n各个组件也将具有各自独立的逻辑空间。每个组件都分别拥有自己的独立的数据、setData调用\n三、总结 小程序启动加载性能：\n控制代码包的大小 分包加载 首屏体验（预请求，利用缓存，避免白屏，及时反馈 小程序渲染性能：\n避免不当的使用setData 使用自定义组件 5、面试官：说说微信小程序的登录流程？ 一、背景 传统的web开发实现登陆功能，一般的做法是输入账号密码、或者输入手机号及短信验证码进行登录\n服务端校验用户信息通过之后，下发一个代表登录态的 token 给客户端，以便进行后续的交互,每当token过期，用户都需要重新登录\n而在微信小程序中，可以通过微信官方提供的登录能力方便地获取微信提供的用户身份标识，快速建立小程序内的用户体系，从而实现登陆功能\n实现小程序用户体系主要涉及到openid和code的概念：\n调用wx.login()方法会生成code，将code作为参数传递给微信服务器指定接口，就可以获取用户的openid 对于每个小程序，微信都会将用户的微信ID映射出一个小程序 openid，作为这个用户在这个小程序的唯一标识\n二、流程 微信小程序登陆具体实现的逻辑如下图所示：\n通过 wx.login() 获取到用户的code判断用户是否授权读取用户信息，调用wx.getUserInfo 读取用户数据 由于小程序后台授权域名无法授权微信的域名，所以需要自身后端调用微信服务器获取用户信息 通过 wx.request() 方法请求业务方服务器，后端把 appid , appsecret 和 code 一起发送到微信服务器。 appid 和 appsecret 都是微信提供的，可以在管理员后台找到 微信服务器返回了 openid 及本次登录的会话密钥 session_key 后端从数据库中查找 openid ，如果没有查到记录，说明该用户没有注册，如果有记录，则继续往下走 session_key 是对用户数据进行加密签名的密钥。为了自身应用安全，session_key 不应该在网络上传输 然后生成 session并返回给小程序 小程序把 session 存到 storage 里面 下次请求时，先从 storage 里面读取，然后带给服务端 服务端对比 session 对应的记录，然后校验有效期 更加详细的功能图如下所示：\n三、扩展 实际业务中，我们还需要登录态是否过期，通常的做法是在登录态（临时令牌）中保存有效期数据，该有效期数据应该在服务端校验登录态时和约定的时间（如服务端本地的系统时间或时间服务器上的标准时间）做对比\n这种方法需要将本地存储的登录态发送到小程序的服务端，服务端判断为无效登录态时再返回需重新执行登录过程的消息给小程\n另一种方式可以通过调用wx.checkSession检查微信登陆态是否过期：\n如果过期，则发起完整的登录流程 如果不过期，则继续使用本地保存的自定义登录态 这种方式的好处是不需要小程序服务端来参与校验，而是在小程序端调用AP，流程如下所示：\n6、面试官：说说微信小程序的发布流程？ 一、背景 在中大型的公司里，人员的分工非常仔细，一般会有不同岗位角色的员工同时参与同一个小程序项目。为此，小程序平台设计了不同的权限管理使得项目管理者可以更加高效管理整个团队的协同工作\n以往我们在开发完网页之后，需要把网页的代码和资源放在服务器上，让用户通过互联网来访问\n在小程序的平台里，开发者完成开发之后，需要在开发者工具提交小程序的代码包，然后在小程序后台发布小程序\n二、流程 关于发布的流程，主要分成了三个部分：\n上传代码 提交审核 发布版本 上传代码 在开发者工具中，可以点击代码上传功能：\n然后就可以填写版本信息：\n然后点击上传，编译器则会提示上传代码成功\n提交审核 代码上传完毕，就可以登陆微信公众号的官网首页，点击【开发管理】，查看应用详情：\n提交审核过程需要填写审核信息，如下图：\n提交审核成功之后如下图：\n发布版本 当审核通过之后，即可提交发布\n发布成功之后则如下：\n三、扩展 上述是最简单的小程序代码发布的流程，通常的流程如下：\n代码管理服务器上新建分支 开发测试新需求 测试完成后，将本地分支合并到 master 分支 拉取 master 分支最新代码，执行 build 命令生成小程序可执行文件 开发者工具点击“上传” 提审 发布 但是面对多人协调开发的时候，有可能出现已经上线的代码还没合并到master的情况\n因此可以考虑自动化构建部署，就是将从开发到部署的一系列流程变成自动化，衔接连贯，在构建失败时能够告知开发者，构建成功后能够告知测试和实施人员，可参考如下流程图：\n7、面试官：说说微信小程序的支付流程？ 一、前言 微信小程序为电商类小程序，提供了非常完善、优秀、安全的支付功能\n在小程序内可调用微信的API完成支付功能，方便、快捷\n场景如下图所示：\n用户通过分享或扫描二维码进入商户小程序，用户选择购买，完成选购流程 调起微信支付控件，用户开始输入支付密码 密码验证通过，支付成功。商户后台得到支付成功的通知 返回商户小程序，显示购买成功 微信支付公众号下发支付凭证 二、流程 以电商小程序为例\n支付流程图如下所示：\n具体的做法：\n打开某小程序，点击直接下单 wx.login获取用户临时登录凭证code，发送到后端服务器换取openId 在下单时，小程序需要将购买的商品Id，商品数量，以及用户的openId传送到服务器 服务器在接收到商品Id、商品数量、openId后，生成服务期订单数据，同时经过一定的签名算法，向微信支付发送请求，获取预付单信息(prepay_id)，同时将获取的数据再次进行相应规则的签名，向小程序端响应必要的信息 小程序端在获取对应的参数后，调用wx.requestPayment()发起微信支付，唤醒支付工作台，进行支付 接下来的一些列操作都是由用户来操作的包括了微信支付密码，指纹等验证，确认支付之后执行鉴权调起支付 鉴权调起支付：在微信后台进行鉴权，微信后台直接返回给前端支付的结果，前端收到返回数据后对支付结果进行展示 推送支付结果：微信后台在给前端返回支付的结果后，也会向后台也返回一个支付结果，后台通过这个支付结果来更新订单的状态 其中后端响应数据必要的信息则是wx.requestPayment方法所需要的参数，大致如下：\nJS\n代码解读\n复制代码\nwx.requestPayment({ // 时间戳 timeStamp: '', // 随机字符串 nonceStr: '', // 统一下单接口返回的 prepay_id 参数值 package: '', // 签名类型 signType: '', // 签名 paySign: '', // 调用成功回调 success () {}, // 失败回调 fail () {}, // 接口调用结束回调 complete () {} })\n参数表如下所示：\n三、结束 小程序支付和以往的网页、APP微信支付大同小异，可以说小程序的支付变得更加简洁，不需要设置支付目录、域名授权等操作\n8、面试官：说说微信小程序的实现原理？ 一、背景 网页开发，渲染线程和脚本是互斥的，这也是为什么长时间的脚本运行可能会导致页面失去响应的原因，本质就是我们常说的 JS 是单线程的\n而在小程序中，选择了 Hybrid 的渲染方式，将视图层和逻辑层是分开的，双线程同时运行，视图层的界面使用 WebView 进行渲染，逻辑层运行在 JSCore 中\n渲染层：界面渲染相关的任务全都在 WebView 线程里执行。一个小程序存在多个界面，所以渲染层存在多个 WebView 线程\n逻辑层：采用 JsCore 线程运行 JS 脚本，在这个环境下执行的都是有关小程序业务逻辑的代码\n二、通信 小程序在渲染层，宿主环境会把wxml转化成对应的JS对象\n在逻辑层发生数据变更的时候，通过宿主环境提供的setData方法把数据从逻辑层传递到渲染层，再经过对比前后差异，把差异应用在原来的Dom树上，渲染出正确的视图\n当视图存在交互的时候，例如用户点击你界面上某个按钮，这类反馈应该通知给开发者的逻辑层，需要将对应的处理状态呈现给用户\n对于事件的分发处理，微信进行了特殊的处理，将所有的事件拦截后，丢到逻辑层交给JavaScript进行处理\n由于小程序是基于双线程的，也就是任何在视图层和逻辑层之间的数据传递都是线程间的通信，会有一定的延时，因此在小程序中，页面更新成了异步操作\n异步会使得各部分的运行时序变得复杂一些，比如在渲染首屏的时候，逻辑层与渲染层会同时开始初始化工作，但是渲染层需要有逻辑层的数据才能把界面渲染出来\n如果渲染层初始化工作较快完成，就要等逻辑层的指令才能进行下一步工作\n因此逻辑层与渲染层需要有一定的机制保证时序正确，在每个小程序页面的生命周期中，存在着若干次页面数据通信\n三、运行机制 小程序启动运行两种情况：\n冷启动（重新开始）：用户首次打开或者小程序被微信主动销毁后再次打开的情况，此时小程序需要重新加载启动，即为冷启动 热启动：用户已经打开过小程序，然后在一定时间内再次打开该小程序，此时无需重新启动，只需要将后台态的小程序切换到前台，这个过程就是热启动 需要注意： 1.小程序没有重启的概念\n2.当小程序进入后台，客户端会维持一段时间的运行状态，超过一定时间后会被微信主动销毁\n3.短时间内收到系统两次以上内存警告，也会对小程序进行销毁，这也就为什么一旦页面内存溢出，页面会奔溃的本质原因了\n开发者在后台发布新版本之后，无法立刻影响到所有现网用户，但最差情况下，也在发布之后 24 小时之内下发新版本信息到用户\n每次冷启动时，都会检查是否有更新版本，如果发现有新版本，将会异步下载新版本的代码包，并同时用客户端本地的包进行启动，即新版本的小程序需要等下一次冷启动才会应用上\n参考网站 interview.xiumubai.com/\n如果这份面试题你觉得对你有帮助，不妨点个赞👍👍👍\n",
  "wordCount" : "556",
  "inLanguage": "zh",
  "image": "http://localhost:1313/images/papermod-cover.png","datePublished": "2022-10-04T00:00:00Z",
  "dateModified": "2022-10-04T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "白哥学前端"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/posts/juejin/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E9%9D%A2%E8%AF%958%E9%97%AE%E4%BD%A0%E8%83%BD%E6%8E%A5%E4%B8%8B%E5%87%A0%E6%8B%9B/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "PaperMod",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/%3Clink%20/%20abs%20url%3E"
    }
  }
}
</script>
</head>

<body class=" dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Home (Alt + H)">
                        
                    <img src="http://localhost:1313/images/msg_hu15231257772499651944.png" alt="" aria-label="logo"
                        height="20">Home</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://github.com/adityatelange/hugo-PaperMod/wiki/" title="WiKi">
                    <span>WiKi</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://localhost:1313/">主页</a>&nbsp;»&nbsp;<a href="http://localhost:1313/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      小程序面试8问，你能接下几招？
    </h1>
    <div class="post-description">
      你在面试的时候有被问到过小程序吗？你答上来了吗？下面的这面试官8问你能接招吗？掌握这8道面试题，基本在面试中就能如鱼得水了
    </div>
    <div class="post-meta"><span title='2022-10-04 00:00:00 +0000 UTC'>十月 4, 2022</span>&nbsp;·&nbsp;3 分钟&nbsp;·&nbsp;白哥学前端&nbsp;|&nbsp;<a href="https://github.com/WangShaoyu1/myBlogPaperMod/tree/master/content/posts/jueJin/%e5%b0%8f%e7%a8%8b%e5%ba%8f%e9%9d%a2%e8%af%958%e9%97%ae%ef%bc%8c%e4%bd%a0%e8%83%bd%e6%8e%a5%e4%b8%8b%e5%87%a0%e6%8b%9b%ef%bc%9f.md" rel="noopener noreferrer" target="_blank">Suggest Changes</a>

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">目录</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#1%e9%9d%a2%e8%af%95%e5%ae%98%e8%af%b4%e8%af%b4%e4%bd%a0%e5%af%b9%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e7%9a%84%e7%90%86%e8%a7%a3%e4%bc%98%e7%bc%ba%e7%82%b9" aria-label="1、面试官：说说你对微信小程序的理解？优缺点？">1、面试官：说说你对微信小程序的理解？优缺点？</a><ul>
                        
                <li>
                    <a href="#%e4%b8%80%e6%98%af%e4%bb%80%e4%b9%88" aria-label="一、是什么">一、是什么</a></li>
                <li>
                    <a href="#%e4%ba%8c%e8%83%8c%e6%99%af" aria-label="二、背景">二、背景</a></li>
                <li>
                    <a href="#%e4%b8%89%e4%bc%98%e7%bc%ba%e7%82%b9" aria-label="三、优缺点">三、优缺点</a></li></ul>
                </li>
                <li>
                    <a href="#2%e9%9d%a2%e8%af%95%e5%ae%98%e8%af%b4%e8%af%b4%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e7%9a%84%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f%e5%87%bd%e6%95%b0%e6%9c%89%e5%93%aa%e4%ba%9b" aria-label="2、面试官：说说微信小程序的生命周期函数有哪些？">2、面试官：说说微信小程序的生命周期函数有哪些？</a><ul>
                        
                <li>
                    <a href="#%e4%b8%80%e6%98%af%e4%bb%80%e4%b9%88-1" aria-label="一、是什么">一、是什么</a><ul>
                        
                <li>
                    <a href="#%e5%ba%94%e7%94%a8%e7%9a%84%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f" aria-label="应用的生命周期">应用的生命周期</a></li>
                <li>
                    <a href="#%e9%a1%b5%e9%9d%a2%e7%9a%84%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f" aria-label="页面的生命周期">页面的生命周期</a></li>
                <li>
                    <a href="#%e7%bb%84%e4%bb%b6%e7%9a%84%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f" aria-label="组件的生命周期">组件的生命周期</a></li></ul>
                </li>
                <li>
                    <a href="#%e4%ba%8c%e6%9c%89%e5%93%aa%e4%ba%9b" aria-label="二、有哪些">二、有哪些</a><ul>
                        
                <li>
                    <a href="#%e5%ba%94%e7%94%a8%e7%9a%84%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f-1" aria-label="应用的生命周期">应用的生命周期</a></li>
                <li>
                    <a href="#%e9%a1%b5%e9%9d%a2%e7%9a%84%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f-1" aria-label="页面的生命周期">页面的生命周期</a></li>
                <li>
                    <a href="#%e7%bb%84%e4%bb%b6%e7%9a%84%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f-1" aria-label="组件的生命周期">组件的生命周期</a></li></ul>
                </li>
                <li>
                    <a href="#%e4%b8%89%e6%89%a7%e8%a1%8c%e8%bf%87%e7%a8%8b" aria-label="三、执行过程">三、执行过程</a><ul>
                        
                <li>
                    <a href="#%e5%ba%94%e7%9a%84%e5%91%bd%e5%91%a8%e6%9c%9f%e6%89%a7%e8%a1%8c%e8%bf%87%e7%a8%8b" aria-label="应⽤的⽣命周期执行过程：">应⽤的⽣命周期执行过程：</a></li>
                <li>
                    <a href="#%e5%91%bd%e5%91%a8%e6%9c%9f%e7%9a%84%e6%89%a7%e8%a1%8c%e8%bf%87%e7%a8%8b" aria-label="⻚⾯⽣命周期的执行过程：">⻚⾯⽣命周期的执行过程：</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#3%e9%9d%a2%e8%af%95%e5%ae%98%e8%af%b4%e8%af%b4%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e4%b8%ad%e8%b7%af%e7%94%b1%e8%b7%b3%e8%bd%ac%e7%9a%84%e6%96%b9%e5%bc%8f%e6%9c%89%e5%93%aa%e4%ba%9b%e5%8c%ba%e5%88%ab" aria-label="3、面试官：说说微信小程序中路由跳转的方式有哪些？区别？">3、面试官：说说微信小程序中路由跳转的方式有哪些？区别？</a><ul>
                        
                <li>
                    <a href="#%e4%b8%80%e6%98%af%e4%bb%80%e4%b9%88-2" aria-label="一、是什么">一、是什么</a></li>
                <li>
                    <a href="#%e4%ba%8c%e6%9c%89%e5%93%aa%e4%ba%9b-1" aria-label="二、有哪些">二、有哪些</a><ul>
                        
                <li>
                    <a href="#wxnavigatetoobject" aria-label="wx.navigateTo(Object)">wx.navigateTo(Object)</a></li>
                <li>
                    <a href="#wxredirecttoobject" aria-label="wx.redirectTo(Object)">wx.redirectTo(Object)</a></li>
                <li>
                    <a href="#wxswitchtabobject" aria-label="wx.switchTab(Object)">wx.switchTab(Object)</a></li>
                <li>
                    <a href="#wxnavigatebackobject" aria-label="wx.navigateBack(Object)">wx.navigateBack(Object)</a></li>
                <li>
                    <a href="#wxrelaunchobject" aria-label="wx.reLaunch(Object)">wx.reLaunch(Object)</a></li></ul>
                </li>
                <li>
                    <a href="#%e4%b8%89%e6%80%bb%e7%bb%93" aria-label="三、总结">三、总结</a></li></ul>
                </li>
                <li>
                    <a href="#4%e9%9d%a2%e8%af%95%e5%ae%98%e8%af%b4%e8%af%b4%e6%8f%90%e9%ab%98%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e7%9a%84%e5%ba%94%e7%94%a8%e9%80%9f%e5%ba%a6%e7%9a%84%e6%89%8b%e6%ae%b5%e6%9c%89%e5%93%aa%e4%ba%9b" aria-label="4、面试官：说说提高微信小程序的应用速度的手段有哪些？">4、面试官：说说提高微信小程序的应用速度的手段有哪些？</a><ul>
                        
                <li>
                    <a href="#%e4%b8%80%e6%98%af%e4%bb%80%e4%b9%88-3" aria-label="一、是什么">一、是什么</a></li>
                <li>
                    <a href="#%e4%ba%8c%e6%89%8b%e6%ae%b5" aria-label="二、手段">二、手段</a><ul>
                        
                <li>
                    <a href="#%e5%8a%a0%e8%bd%bd" aria-label="加载">加载</a></li>
                <li>
                    <a href="#%e6%b8%b2%e6%9f%93" aria-label="渲染">渲染</a></li></ul>
                </li>
                <li>
                    <a href="#%e4%b8%89%e6%80%bb%e7%bb%93-1" aria-label="三、总结">三、总结</a></li></ul>
                </li>
                <li>
                    <a href="#5%e9%9d%a2%e8%af%95%e5%ae%98%e8%af%b4%e8%af%b4%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e7%9a%84%e7%99%bb%e5%bd%95%e6%b5%81%e7%a8%8b" aria-label="5、面试官：说说微信小程序的登录流程？">5、面试官：说说微信小程序的登录流程？</a><ul>
                        
                <li>
                    <a href="#%e4%b8%80%e8%83%8c%e6%99%af" aria-label="一、背景">一、背景</a></li>
                <li>
                    <a href="#%e4%ba%8c%e6%b5%81%e7%a8%8b" aria-label="二、流程">二、流程</a></li>
                <li>
                    <a href="#%e4%b8%89%e6%89%a9%e5%b1%95" aria-label="三、扩展">三、扩展</a></li></ul>
                </li>
                <li>
                    <a href="#6%e9%9d%a2%e8%af%95%e5%ae%98%e8%af%b4%e8%af%b4%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e7%9a%84%e5%8f%91%e5%b8%83%e6%b5%81%e7%a8%8b" aria-label="6、面试官：说说微信小程序的发布流程？">6、面试官：说说微信小程序的发布流程？</a><ul>
                        
                <li>
                    <a href="#%e4%b8%80%e8%83%8c%e6%99%af-1" aria-label="一、背景">一、背景</a></li>
                <li>
                    <a href="#%e4%ba%8c%e6%b5%81%e7%a8%8b-1" aria-label="二、流程">二、流程</a><ul>
                        
                <li>
                    <a href="#%e4%b8%8a%e4%bc%a0%e4%bb%a3%e7%a0%81" aria-label="上传代码">上传代码</a></li>
                <li>
                    <a href="#%e6%8f%90%e4%ba%a4%e5%ae%a1%e6%a0%b8" aria-label="提交审核">提交审核</a></li>
                <li>
                    <a href="#%e5%8f%91%e5%b8%83%e7%89%88%e6%9c%ac" aria-label="发布版本">发布版本</a></li></ul>
                </li>
                <li>
                    <a href="#%e4%b8%89%e6%89%a9%e5%b1%95-1" aria-label="三、扩展">三、扩展</a></li></ul>
                </li>
                <li>
                    <a href="#7%e9%9d%a2%e8%af%95%e5%ae%98%e8%af%b4%e8%af%b4%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e7%9a%84%e6%94%af%e4%bb%98%e6%b5%81%e7%a8%8b" aria-label="7、面试官：说说微信小程序的支付流程？">7、面试官：说说微信小程序的支付流程？</a><ul>
                        
                <li>
                    <a href="#%e4%b8%80%e5%89%8d%e8%a8%80" aria-label="一、前言">一、前言</a></li>
                <li>
                    <a href="#%e4%ba%8c%e6%b5%81%e7%a8%8b-2" aria-label="二、流程">二、流程</a></li>
                <li>
                    <a href="#%e4%b8%89%e7%bb%93%e6%9d%9f" aria-label="三、结束">三、结束</a></li></ul>
                </li>
                <li>
                    <a href="#8%e9%9d%a2%e8%af%95%e5%ae%98%e8%af%b4%e8%af%b4%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e7%9a%84%e5%ae%9e%e7%8e%b0%e5%8e%9f%e7%90%86" aria-label="8、面试官：说说微信小程序的实现原理？">8、面试官：说说微信小程序的实现原理？</a><ul>
                        
                <li>
                    <a href="#%e4%b8%80%e8%83%8c%e6%99%af-2" aria-label="一、背景">一、背景</a></li>
                <li>
                    <a href="#%e4%ba%8c%e9%80%9a%e4%bf%a1" aria-label="二、通信">二、通信</a></li>
                <li>
                    <a href="#%e4%b8%89%e8%bf%90%e8%a1%8c%e6%9c%ba%e5%88%b6" aria-label="三、运行机制">三、运行机制</a><ul>
                        <ul>
                        
                <li>
                    <a href="#%e9%9c%80%e8%a6%81%e6%b3%a8%e6%84%8f" aria-label="需要注意：">需要注意：</a></li></ul>
                    </ul>
                </li></ul>
                </li>
                <li>
                    <a href="#%e5%8f%82%e8%80%83%e7%bd%91%e7%ab%99" aria-label="参考网站">参考网站</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>你在面试的时候有被问到过小程序吗？你答上来了吗？下面的这面试官8问你能接招吗？</p>
<h1 id="1面试官说说你对微信小程序的理解优缺点">1、面试官：说说你对微信小程序的理解？优缺点？<a hidden class="anchor" aria-hidden="true" href="#1面试官说说你对微信小程序的理解优缺点">#</a></h1>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6255cbb883fd4c59952ce9a2f9317529~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<h2 id="一是什么">一、是什么<a hidden class="anchor" aria-hidden="true" href="#一是什么">#</a></h2>
<p>2017年，微信正式推出了小程序，允许外部开发者在微信内部运行自己的代码，开展业务</p>
<p>截至目前，小程序已经成为国内前端的一个重要业务，跟 <code>Web</code> 和手机 <code>App</code> 有着同等的重要性</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ce6dc5ab3b514f189674c5f7e48b1819~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<p>小程序是一种不需要下载安装即可使用的应用，它实现了应用“触手可及”的梦想，用户扫一扫或者搜一下即可打开应用</p>
<p>也体现了“用完即走”的理念，用户不用关心是否安装太多应用的问题。应用将无处不在，随时可用，但又无需安装卸载</p>
<p>注意的是，除了微信小程序，还有百度小程序、微信小程序、支付宝小程序、抖音小程序，都是每个平台自己开发的，都是有针对性平台的应用程序</p>
<h2 id="二背景">二、背景<a hidden class="anchor" aria-hidden="true" href="#二背景">#</a></h2>
<p>⼩程序并⾮凭空冒出来的⼀个概念，当微信中的 <code>WebView</code> 逐渐成为移动 <code>Web</code>的⼀个重要⼊⼝时，微信就有相关的 <code>JS-SDK</code></p>
<p><code>JS-SDK</code> 解决了移动⽹⻚能⼒不⾜的问题，通过暴露微信的接⼝使得 <code>Web</code> 开发者能够拥有更多的能⼒，然⽽在更多的能⼒之外，<code>JS-SDK</code>的模式并没有解决使⽤移动⽹⻚遇到的体验不良的问题</p>
<p>因此需要设计⼀个⽐较好的系统，使得所有开发者在微信中都能获得⽐较好的体验：</p>
<ul>
<li>快速的加载</li>
<li>更强⼤的能⼒</li>
<li>原⽣的体验</li>
<li>易⽤且安全的微信数据开放</li>
<li>⾼效和简单的开发</li>
</ul>
<p>这些是<code>JS-SDK</code>做不到的，需要设计一个全新的小程序系统</p>
<p>对于小程序的开发，提供一个简单、高效的应用开发框架和丰富的组件及<code>API</code>，帮助开发者开发出具有原生体验的服务</p>
<p>其中相比<code>H5</code>，小程序与其的区别有如下：</p>
<ul>
<li>运⾏环境：⼩程序基于浏览器内核重构的内置解析器</li>
<li>系统权限：⼩程序能获得更多的系统权限，如⽹络通信状态、数据缓存能⼒等</li>
<li>渲染机制：⼩程序的逻辑层和渲染层是分开的</li>
</ul>
<p>小程序可以视为只能用微信打开和浏览的<code>H5</code>，小程序和网页的技术模型是一样的，用到的 <code>JavaScript</code> 语言和 <code>CSS</code> 样式也是一样的，只是网页的 <code>HTML</code> 标签被稍微修改成了 <code>WXML</code> 标签</p>
<p>因此可以说，小程序页面本质上就是网页</p>
<p>其中关于微信小程序的实现原理，我们在后面的文章讲到</p>
<h2 id="三优缺点">三、优缺点<a hidden class="anchor" aria-hidden="true" href="#三优缺点">#</a></h2>
<p>优点：</p>
<ul>
<li>随搜随用，用完即走：使得小程序可以代替许多APP，或是做APP的整体嫁接，或是作为阉割版功能的承载体</li>
<li>流量大，易接受：小程序借助自身平台更加容易引入更多的流量</li>
<li>安全</li>
<li>开发门槛低</li>
<li>降低兼容性限制</li>
</ul>
<p>缺点：</p>
<ul>
<li>用户留存：及相关数据显示，小程序的平均次日留存在13%左右，但是双周留存骤降到仅有1%</li>
<li>体积限制：微信小程序只有2M的大小，这样导致无法开发大型一些的小程序</li>
<li>受控微信：比起APP，尤其是安卓版的高自由度，小程序要面对很多来自微信的限制，从功能接口，甚至到类别内容，都要接受微信的管控</li>
</ul>
<h1 id="2面试官说说微信小程序的生命周期函数有哪些">2、面试官：说说微信小程序的生命周期函数有哪些？<a hidden class="anchor" aria-hidden="true" href="#2面试官说说微信小程序的生命周期函数有哪些">#</a></h1>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/220e33ed06fb4f2994e352eff571da81~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<h2 id="一是什么-1">一、是什么<a hidden class="anchor" aria-hidden="true" href="#一是什么-1">#</a></h2>
<p>跟<code>vue</code>、<code>react</code>框架一样，微信小程序框架也存在生命周期，实质也是一堆会在特定时期执行的函数</p>
<p>小程序中，生命周期主要分成了三部分：</p>
<ul>
<li>应用的生命周期</li>
<li>页面的生命周期</li>
<li>组件的生命周期</li>
</ul>
<h3 id="应用的生命周期">应用的生命周期<a hidden class="anchor" aria-hidden="true" href="#应用的生命周期">#</a></h3>
<p>小程序的生命周期函数是在<code>app.js</code>里面调用的，通过<code>App(Object)</code>函数用来注册一个小程序，指定其小程序的生命周期回调</p>
<h3 id="页面的生命周期">页面的生命周期<a hidden class="anchor" aria-hidden="true" href="#页面的生命周期">#</a></h3>
<p>页面生命周期函数就是当你每进入/切换到一个新的页面的时候，就会调用的生命周期函数，同样通过<code>App(Object)</code>函数用来注册一个页面</p>
<h3 id="组件的生命周期">组件的生命周期<a hidden class="anchor" aria-hidden="true" href="#组件的生命周期">#</a></h3>
<p>组件的生命周期，指的是组件自身的一些函数，这些函数在特殊的时间点或遇到一些特殊的框架事件时被自动触发，通过<code>Component(Object)</code>进行注册组件</p>
<h2 id="二有哪些">二、有哪些<a hidden class="anchor" aria-hidden="true" href="#二有哪些">#</a></h2>
<h3 id="应用的生命周期-1">应用的生命周期<a hidden class="anchor" aria-hidden="true" href="#应用的生命周期-1">#</a></h3>
<p>生命周期</p>
<p>说明</p>
<p>onLaunch</p>
<p>小程序初始化完成时触发，全局只触发一次</p>
<p>onShow</p>
<p>小程序启动，或从后台进入前台显示时触发</p>
<p>onHide</p>
<p>小程序从前台进入后台时触发</p>
<p>onError</p>
<p>小程序发生脚本错误或 API 调用报错时触发</p>
<p>onPageNotFound</p>
<p>小程序要打开的页面不存在时触发</p>
<p>onUnhandledRejection()</p>
<p>小程序有未处理的 Promise 拒绝时触发</p>
<p>onThemeChange</p>
<p>系统切换主题时触发</p>
<h3 id="页面的生命周期-1">页面的生命周期<a hidden class="anchor" aria-hidden="true" href="#页面的生命周期-1">#</a></h3>
<p>生命周期</p>
<p>说明</p>
<p>作用</p>
<p>onLoad</p>
<p>生命周期回调—监听页面加载</p>
<p>发送请求获取数据</p>
<p>onShow</p>
<p>生命周期回调—监听页面显示</p>
<p>请求数据</p>
<p>onReady</p>
<p>生命周期回调—监听页面初次渲染完成</p>
<p>获取页面元素（少用）</p>
<p>onHide</p>
<p>生命周期回调—监听页面隐藏</p>
<p>终止任务，如定时器或者播放音乐</p>
<p>onUnload</p>
<p>生命周期回调—监听页面卸载</p>
<p>终止任务</p>
<h3 id="组件的生命周期-1">组件的生命周期<a hidden class="anchor" aria-hidden="true" href="#组件的生命周期-1">#</a></h3>
<p>生命周期</p>
<p>说明</p>
<p>created</p>
<p>生命周期回调—监听页面加载</p>
<p>attached</p>
<p>生命周期回调—监听页面显示</p>
<p>ready</p>
<p>生命周期回调—监听页面初次渲染完成</p>
<p>moved</p>
<p>生命周期回调—监听页面隐藏</p>
<p>detached</p>
<p>生命周期回调—监听页面卸载</p>
<p>error</p>
<p>每当组件方法抛出错误时执行</p>
<p>注意的是：</p>
<ul>
<li>组件实例刚刚被创建好时， created 生命周期被触发，此时，组件数据 this.data 就是在 Component 构造器中定义的数据 data ， 此时不能调用 setData</li>
<li>在组件完全初始化完毕、进入页面节点树后， attached 生命周期被触发。此时， this.data 已被初始化为组件的当前值。这个生命周期很有用，绝大多数初始化工作可以在这个时机进行</li>
<li>在组件离开页面节点树后， detached 生命周期被触发。退出一个页面时，如果组件还在页面节点树中，则 detached 会被触发</li>
</ul>
<p>还有一些特殊的生命周期，它们并非与组件有很强的关联，但有时组件需要获知，以便组件内部处理，这样的生命周期称为“组件所在页面的生命周期”，在 <code>pageLifetimes</code> 定义段中定义，如下：</p>
<p>生命周期</p>
<p>说明</p>
<p>show</p>
<p>组件所在的页面被展示时执行</p>
<p>hide</p>
<p>组件所在的页面被隐藏时执行</p>
<p>代码如下：</p>
<p>js</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>Component({   pageLifetimes: {     show: function() {       // 页面被展示     },     hide: function() {       // 页面被隐藏     },   } })</code></p>
<h2 id="三执行过程">三、执行过程<a hidden class="anchor" aria-hidden="true" href="#三执行过程">#</a></h2>
<h3 id="应的命周期执行过程">应⽤的⽣命周期执行过程：<a hidden class="anchor" aria-hidden="true" href="#应的命周期执行过程">#</a></h3>
<ul>
<li>
<p>⽤户⾸次打开⼩程序，触发 onLaunch（全局只触发⼀次）</p>
</li>
<li>
<p>⼩程序初始化完成后，触发onShow⽅法，监听⼩程序显示</p>
</li>
<li>
<p>⼩程序从前台进⼊后台，触发 onHide⽅法</p>
</li>
<li>
<p>⼩程序从后台进⼊前台显示，触发 onShow⽅法</p>
</li>
<li>
<p>⼩程序后台运⾏⼀定时间，或系统资源占⽤过⾼，会被销毁</p>
</li>
</ul>
<h3 id="命周期的执行过程">⻚⾯⽣命周期的执行过程：<a hidden class="anchor" aria-hidden="true" href="#命周期的执行过程">#</a></h3>
<ul>
<li>⼩程序注册完成后，加载⻚⾯，触发onLoad⽅法</li>
<li>⻚⾯载⼊后触发onShow⽅法，显示⻚⾯</li>
<li>⾸次显示⻚⾯，会触发onReady⽅法，渲染⻚⾯元素和样式，⼀个⻚⾯只会调⽤⼀次</li>
<li>当⼩程序后台运⾏或跳转到其他⻚⾯时，触发onHide⽅法</li>
<li>当⼩程序有后台进⼊到前台运⾏或重新进⼊⻚⾯时，触发onShow⽅法</li>
<li>当使⽤重定向⽅法 wx.redirectTo() 或关闭当前⻚返回上⼀⻚wx.navigateBack()，触发onUnload</li>
</ul>
<p>当存在也应用生命周期和页面周期的时候，相关的执行顺序如下：</p>
<ul>
<li>打开小程序：(App)onLaunch &ndash;&gt; (App)onShow &ndash;&gt; (Pages)onLoad &ndash;&gt; (Pages)onShow &ndash;&gt; (pages)onRead</li>
<li>进入下一个页面：(Pages)onHide &ndash;&gt; (Next)onLoad &ndash;&gt; (Next)onShow &ndash;&gt; (Next)onReady</li>
<li>返回上一个页面：(curr)onUnload &ndash;&gt; (pre)onShow</li>
<li>离开小程序：(App)onHide</li>
<li>再次进入：小程序未销毁 &ndash;&gt; (App)onShow(执行上面的顺序），小程序被销毁，（App)onLaunch重新开始执行.</li>
</ul>
<h1 id="3面试官说说微信小程序中路由跳转的方式有哪些区别">3、面试官：说说微信小程序中路由跳转的方式有哪些？区别？<a hidden class="anchor" aria-hidden="true" href="#3面试官说说微信小程序中路由跳转的方式有哪些区别">#</a></h1>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/58d54dcf32744e02a6f9bb3cf572e99d~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<h2 id="一是什么-2">一、是什么<a hidden class="anchor" aria-hidden="true" href="#一是什么-2">#</a></h2>
<p>微信小程序拥有<code>web</code>网页和<code>Application</code>共同的特征，我们的页面都不是孤立存在的，而是通过和其他页面进行交互，来共同完成系统的功能</p>
<p>在微信小程序中，每个页面可以看成是一个 <code>pageModel</code>，<code>pageModel</code> 全部以栈的形式进行管理</p>
<h2 id="二有哪些-1">二、有哪些<a hidden class="anchor" aria-hidden="true" href="#二有哪些-1">#</a></h2>
<p>常见的微信小程序页面跳转方式有如下：</p>
<ul>
<li>wx.navigateTo(Object)</li>
<li>wx.redirectTo(Object)</li>
<li>wx.switchTab(Object)</li>
<li>wx.navigateBack(Object)</li>
<li>wx.reLaunch(Object)</li>
</ul>
<h3 id="wxnavigatetoobject">wx.navigateTo(Object)<a hidden class="anchor" aria-hidden="true" href="#wxnavigatetoobject">#</a></h3>
<p><code>wx.navigateTo()</code>用于保留当前页面、跳转到应用内的某个页面，使用 <code>wx.navigateBack</code>可以返回到原页面</p>
<p>对于页面不是特别多的小程序，通常推荐使用 <code>wx.navigateTo</code>进行跳转， 以便返回原页面，以提高加载速度。当页面特别多时，则不推荐使用</p>
<p>参数表如下所示：</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2298d704832548e4afe41adf2cbd82bb~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<p>流程图如下：</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7596bc2356a14afc876ede532dea97ce~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<h3 id="wxredirecttoobject">wx.redirectTo(Object)<a hidden class="anchor" aria-hidden="true" href="#wxredirecttoobject">#</a></h3>
<p>重定向，当页面过多时，被保留页面会挤占微信分配给小程序的内存，或是达到微信所限制的 10 层页面栈的情况下，我们应该考虑选择 <code>wx.redirectTo</code></p>
<p><code>wx.redirectTo()</code>用于关闭当前页面，跳转到应用内的某个页面</p>
<p>这样的跳转，可以避免跳转前页面占据运行内存，但返回时页面需要重新加载，增加了返回页面的显示时间</p>
<p>参数表如下所示：</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/711b1e7ea7f244139cdb5b71304e2f95~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<p>流程图如下所示：</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/65ef581da598402a96bdbc66a44d35a8~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<h3 id="wxswitchtabobject">wx.switchTab(Object)<a hidden class="anchor" aria-hidden="true" href="#wxswitchtabobject">#</a></h3>
<p>跳转到 <code>tabBar</code> 页面，并关闭其他所有非 <code>tabBar</code> 页面</p>
<p>参数表如下所示：</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f9579a2d04fb45eda100bffc26692854~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<h3 id="wxnavigatebackobject">wx.navigateBack(Object)<a hidden class="anchor" aria-hidden="true" href="#wxnavigatebackobject">#</a></h3>
<p><code>wx.navigateBack()</code> 用于关闭当前页面，并返回上一页面或多级页面，开发者可通过 <code>getCurrentPages()</code> 获取当前的页面栈，决定需要返回几层则设置对象的<code>delta</code>属性即可</p>
<p>参数表如下：</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9e2da2e8973940a4bfc9c1fabb6a9ed2~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<h3 id="wxrelaunchobject">wx.reLaunch(Object)<a hidden class="anchor" aria-hidden="true" href="#wxrelaunchobject">#</a></h3>
<p>关闭所有页面，打开到应用内的某个页面，返回的时候跳到首页</p>
<p>流程图如下所示：</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b8656a9d8ede4afb89c7c4dfd17a4615~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<p>参数表如下所示：</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ba32553164db4532a628253e5ca81072~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<h2 id="三总结">三、总结<a hidden class="anchor" aria-hidden="true" href="#三总结">#</a></h2>
<p>关于上述五种跳转方式，做下总结：</p>
<ul>
<li>navigateTo 保留当前页面，跳转到应用内的某个页面，使用 wx.navigateBack 可以返回到原页</li>
<li>redirectTo 关闭当前页面，跳转到应用内的某个页面</li>
<li>switchTab 跳转到 tabBar 页面，同时关闭其他非 tabBar 页面</li>
<li>navigateBack 返回上一页面</li>
<li>reLanch 关闭所有页面，打开到应用内的某个页面</li>
</ul>
<p>其中关于它们的页面栈的关系如下：</p>
<ul>
<li>
<p>avigateTo 新页面入栈</p>
</li>
<li>
<p>redirectTo 当前页面出栈，新页面入栈</p>
</li>
<li>
<p>navigateBack 页面不断出栈，直到目标返回页，新页面入栈</p>
</li>
<li>
<p>switchTab 页面全部出栈，只留下新的 Tab 页面</p>
</li>
<li>
<p>reLanch 页面全部出栈，只留下新的页面</p>
</li>
</ul>
<h1 id="4面试官说说提高微信小程序的应用速度的手段有哪些">4、面试官：说说提高微信小程序的应用速度的手段有哪些？<a hidden class="anchor" aria-hidden="true" href="#4面试官说说提高微信小程序的应用速度的手段有哪些">#</a></h1>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3f7bb4979af6411bb0c16ff0725b6068~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<h2 id="一是什么-3">一、是什么<a hidden class="anchor" aria-hidden="true" href="#一是什么-3">#</a></h2>
<p>小程序启动会常常遇到如下图场景：</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/59fe407b50ff4a408e6502914955170e~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<p>这是因为，小程序首次启动前，微信会在小程序启动前为小程序准备好通用的运行环境，如运行中的线程和一些基础库的初始化</p>
<p>然后才开始进入启动状态，展示一个固定的启动界面，界面内包含小程序的图标、名称和加载提示图标。此时，微信会在背后完成几项工作：</p>
<ul>
<li>下载小程序代码包</li>
<li>加载小程序代码包</li>
<li>初始化小程序首页</li>
</ul>
<p>下载到的小程序代码包不是小程序的源代码，而是编译、压缩、打包之后的代码包</p>
<p>整体流程如下图：</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a3dbdf1dc0c046349f3ec17b340e3ef9~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<h2 id="二手段">二、手段<a hidden class="anchor" aria-hidden="true" href="#二手段">#</a></h2>
<p>围绕上图小程序的启动流程， 我们可以从加载、渲染两个纬度进行切入：</p>
<h3 id="加载">加载<a hidden class="anchor" aria-hidden="true" href="#加载">#</a></h3>
<p>提升体验最直接的方法是控制小程序包的大小，常见手段有如下：</p>
<ul>
<li>代码包的体积压缩可以通过勾选开发者工具中“上传代码时，压缩代码”选项</li>
<li>及时清理无用的代码和资源文件</li>
<li>减少资源包中的图片等资源的数量和大小（理论上除了小icon，其他图片资源从网络下载），图片资源压缩率有限</li>
</ul>
<p>并且可以采取分包加载的操作，将用户访问率高的页面放在主包里，将访问率低的页面放入子包里，按需加载</p>
<p>当用户点击到子包的目录时，还是有一个代码包下载的过程，这会感觉到明显的卡顿，所以子包也不建议拆的太大，当然我们可以采用子包预加载技术，并不需要等到用户点击到子包页面后在下载子包</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ca2a20113be14621bc0eed605669c318~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<h3 id="渲染">渲染<a hidden class="anchor" aria-hidden="true" href="#渲染">#</a></h3>
<p>关于微信小程序首屏渲染优化的手段如下：</p>
<ul>
<li>请求可以在页面onLoad就加载，不需要等页面ready后在异步请求数据</li>
<li>尽量减少不必要的https请求，可使用 getStorageSync() 及 setStorageSync() 方法将数据存储在本地</li>
<li>可以在前置页面将一些有用的字段带到当前页，进行首次渲染（列表页的某些数据&ndash;&gt; 详情页），没有数据的模块可以进行骨架屏的占位</li>
</ul>
<p>在微信小程序中，提高页面的多次渲染效率主要在于正确使用<code>setData</code>：</p>
<ul>
<li>不要过于频繁调用setData，应考虑将多次setData合并成一次setData调用</li>
<li>数据通信的性能与数据量正相关，因而如果有一些数据字段不在界面中展示且数据结构比较复杂或包含长字符串，则不应使用<code>setData</code>来设置这些数据</li>
<li>与界面渲染无关的数据最好不要设置在data中，可以考虑设置在page对象的其他字段下</li>
</ul>
<p>除此之外，对于一些独立的模块我们尽可能抽离出来，这是因为自定义组件的更新并不会影响页面上其他元素的更新</p>
<p>各个组件也将具有各自独立的逻辑空间。每个组件都分别拥有自己的独立的数据、<code>setData</code>调用</p>
<h2 id="三总结-1">三、总结<a hidden class="anchor" aria-hidden="true" href="#三总结-1">#</a></h2>
<p><strong>小程序启动加载性能</strong>：</p>
<ul>
<li>控制代码包的大小</li>
<li>分包加载</li>
<li>首屏体验（预请求，利用缓存，避免白屏，及时反馈</li>
</ul>
<p><strong>小程序渲染性能</strong>：</p>
<ul>
<li>避免不当的使用setData</li>
<li>使用自定义组件</li>
</ul>
<h1 id="5面试官说说微信小程序的登录流程">5、面试官：说说微信小程序的登录流程？<a hidden class="anchor" aria-hidden="true" href="#5面试官说说微信小程序的登录流程">#</a></h1>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b6cabad0a2914bdb879d96a30c0744b2~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<h2 id="一背景">一、背景<a hidden class="anchor" aria-hidden="true" href="#一背景">#</a></h2>
<p>传统的<code>web</code>开发实现登陆功能，一般的做法是输入账号密码、或者输入手机号及短信验证码进行登录</p>
<p>服务端校验用户信息通过之后，下发一个代表登录态的 <code>token</code> 给客户端，以便进行后续的交互,每当<code>token</code>过期，用户都需要重新登录</p>
<p>而在微信小程序中，可以通过微信官方提供的登录能力方便地获取微信提供的用户身份标识，快速建立小程序内的用户体系，从而实现登陆功能</p>
<p>实现小程序用户体系主要涉及到<code>openid</code>和<code>code</code>的概念：</p>
<ul>
<li>调用<code>wx.login()</code>方法会生成<code>code</code>，将<code>code</code>作为参数传递给微信服务器指定接口，就可以获取用户的<code>openid</code></li>
</ul>
<p>对于每个小程序，微信都会将用户的微信<code>ID</code>映射出一个小程序 <code>openid</code>，作为这个用户在这个小程序的唯一标识</p>
<h2 id="二流程">二、流程<a hidden class="anchor" aria-hidden="true" href="#二流程">#</a></h2>
<p>微信小程序登陆具体实现的逻辑如下图所示：</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e89c9c5891a6496fac7197958b0cf056~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<ul>
<li>通过 wx.login() 获取到用户的code判断用户是否授权读取用户信息，调用wx.getUserInfo 读取用户数据</li>
<li>由于小程序后台授权域名无法授权微信的域名，所以需要自身后端调用微信服务器获取用户信息</li>
<li>通过 wx.request() 方法请求业务方服务器，后端把 appid , appsecret 和 code 一起发送到微信服务器。 appid 和 appsecret 都是微信提供的，可以在管理员后台找到</li>
<li>微信服务器返回了 openid 及本次登录的会话密钥 session_key</li>
<li>后端从数据库中查找 openid ，如果没有查到记录，说明该用户没有注册，如果有记录，则继续往下走</li>
<li>session_key 是对用户数据进行加密签名的密钥。为了自身应用安全，session_key 不应该在网络上传输</li>
<li>然后生成 session并返回给小程序</li>
<li>小程序把 session 存到 storage 里面</li>
<li>下次请求时，先从 storage 里面读取，然后带给服务端</li>
<li>服务端对比 session 对应的记录，然后校验有效期</li>
</ul>
<p>更加详细的功能图如下所示：</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/08dfaf9744a34c88ae1f8f7e271d274f~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<h2 id="三扩展">三、扩展<a hidden class="anchor" aria-hidden="true" href="#三扩展">#</a></h2>
<p>实际业务中，我们还需要登录态是否过期，通常的做法是在登录态（临时令牌）中保存有效期数据，该有效期数据应该在服务端校验登录态时和约定的时间（如服务端本地的系统时间或时间服务器上的标准时间）做对比</p>
<p>这种方法需要将本地存储的登录态发送到小程序的服务端，服务端判断为无效登录态时再返回需重新执行登录过程的消息给小程</p>
<p>另一种方式可以通过调用<code>wx.checkSession</code>检查微信登陆态是否过期：</p>
<ul>
<li>如果过期，则发起完整的登录流程</li>
<li>如果不过期，则继续使用本地保存的自定义登录态</li>
</ul>
<p>这种方式的好处是不需要小程序服务端来参与校验，而是在小程序端调用AP，流程如下所示：</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/66463b026ba04db8bfc2e55bd8f35d97~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<h1 id="6面试官说说微信小程序的发布流程">6、面试官：说说微信小程序的发布流程？<a hidden class="anchor" aria-hidden="true" href="#6面试官说说微信小程序的发布流程">#</a></h1>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/32b268f1c8324ff4b6e8c0a473ca734d~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<h2 id="一背景-1">一、背景<a hidden class="anchor" aria-hidden="true" href="#一背景-1">#</a></h2>
<p>在中大型的公司里，人员的分工非常仔细，一般会有不同岗位角色的员工同时参与同一个小程序项目。为此，小程序平台设计了不同的权限管理使得项目管理者可以更加高效管理整个团队的协同工作</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9232257625454388ad5b246718b0d777~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<p>以往我们在开发完网页之后，需要把网页的代码和资源放在服务器上，让用户通过互联网来访问</p>
<p>在小程序的平台里，开发者完成开发之后，需要在开发者工具提交小程序的代码包，然后在小程序后台发布小程序</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/56b3975dc65d4d9588de8a78fc53172a~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<h2 id="二流程-1">二、流程<a hidden class="anchor" aria-hidden="true" href="#二流程-1">#</a></h2>
<p>关于发布的流程，主要分成了三个部分：</p>
<ul>
<li>上传代码</li>
<li>提交审核</li>
<li>发布版本</li>
</ul>
<h3 id="上传代码">上传代码<a hidden class="anchor" aria-hidden="true" href="#上传代码">#</a></h3>
<p>在开发者工具中，可以点击代码上传功能：</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5434c93adb6b49aab7edde483def53e6~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<p>然后就可以填写版本信息：</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/424fb661a6aa4c6cafe7785b5965efde~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<p>然后点击上传，编译器则会提示上传代码成功</p>
<h3 id="提交审核">提交审核<a hidden class="anchor" aria-hidden="true" href="#提交审核">#</a></h3>
<p>代码上传完毕，就可以登陆微信公众号的官网首页，点击【开发管理】，查看应用详情：</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f53c749bb72f467eb3f393e91a2355c8~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<p>提交审核过程需要填写审核信息，如下图：</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6c3e79c144bc44c486c96c270ccbff32~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<p>提交审核成功之后如下图：</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7afb1763c59e4f5da0c37032fe0e24e3~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<h3 id="发布版本">发布版本<a hidden class="anchor" aria-hidden="true" href="#发布版本">#</a></h3>
<p>当审核通过之后，即可提交发布</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1514be59c84841158d7ee1944910b255~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<p>发布成功之后则如下：</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/505d6af306fd4289ad0e3fb0116ffe0e~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<h2 id="三扩展-1">三、扩展<a hidden class="anchor" aria-hidden="true" href="#三扩展-1">#</a></h2>
<p>上述是最简单的小程序代码发布的流程，通常的流程如下：</p>
<ul>
<li>代码管理服务器上新建分支</li>
<li>开发测试新需求</li>
<li>测试完成后，将本地分支合并到 master 分支</li>
<li>拉取 master 分支最新代码，执行 build 命令生成小程序可执行文件</li>
<li>开发者工具点击“上传”</li>
<li>提审</li>
<li>发布</li>
</ul>
<p>但是面对多人协调开发的时候，有可能出现已经上线的代码还没合并到<code>master</code>的情况</p>
<p>因此可以考虑自动化构建部署，就是将从开发到部署的一系列流程变成自动化，衔接连贯，在构建失败时能够告知开发者，构建成功后能够告知测试和实施人员，可参考如下流程图：</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/de4a3320d63b45b3b371a8704d862887~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<h1 id="7面试官说说微信小程序的支付流程">7、面试官：说说微信小程序的支付流程？<a hidden class="anchor" aria-hidden="true" href="#7面试官说说微信小程序的支付流程">#</a></h1>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cdb74743565444328c386efdee5a5a41~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<h2 id="一前言">一、前言<a hidden class="anchor" aria-hidden="true" href="#一前言">#</a></h2>
<p>微信小程序为电商类小程序，提供了非常完善、优秀、安全的支付功能</p>
<p>在小程序内可调用微信的<code>API</code>完成支付功能，方便、快捷</p>
<p>场景如下图所示：</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ed6b57de1b424102b76add9c2731139c~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e00722e2579a4c28857f01d7f3a4eb94~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<ul>
<li>用户通过分享或扫描二维码进入商户小程序，用户选择购买，完成选购流程</li>
<li>调起微信支付控件，用户开始输入支付密码</li>
<li>密码验证通过，支付成功。商户后台得到支付成功的通知</li>
<li>返回商户小程序，显示购买成功</li>
<li>微信支付公众号下发支付凭证</li>
</ul>
<h2 id="二流程-2">二、流程<a hidden class="anchor" aria-hidden="true" href="#二流程-2">#</a></h2>
<p>以电商小程序为例</p>
<p>支付流程图如下所示：</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8015ab5d571243ae8a4cea3c71217210~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<p>具体的做法：</p>
<ul>
<li>打开某小程序，点击直接下单</li>
<li>wx.login获取用户临时登录凭证code，发送到后端服务器换取openId</li>
<li>在下单时，小程序需要将购买的商品Id，商品数量，以及用户的openId传送到服务器</li>
<li>服务器在接收到商品Id、商品数量、openId后，生成服务期订单数据，同时经过一定的签名算法，向微信支付发送请求，获取预付单信息(prepay_id)，同时将获取的数据再次进行相应规则的签名，向小程序端响应必要的信息</li>
<li>小程序端在获取对应的参数后，调用wx.requestPayment()发起微信支付，唤醒支付工作台，进行支付</li>
<li>接下来的一些列操作都是由用户来操作的包括了微信支付密码，指纹等验证，确认支付之后执行鉴权调起支付</li>
<li>鉴权调起支付：在微信后台进行鉴权，微信后台直接返回给前端支付的结果，前端收到返回数据后对支付结果进行展示</li>
<li>推送支付结果：微信后台在给前端返回支付的结果后，也会向后台也返回一个支付结果，后台通过这个支付结果来更新订单的状态</li>
</ul>
<p>其中后端响应数据必要的信息则是<code>wx.requestPayment</code>方法所需要的参数，大致如下：</p>
<p>JS</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>wx.requestPayment({   // 时间戳   timeStamp: '',   // 随机字符串   nonceStr: '',   // 统一下单接口返回的 prepay_id 参数值   package: '',   // 签名类型   signType: '',   // 签名   paySign: '',   // 调用成功回调   success () {},   // 失败回调   fail () {},   // 接口调用结束回调   complete () {} })</code></p>
<p>参数表如下所示：</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/789de1ca5dc645a996eab2595b52f53f~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<h2 id="三结束">三、结束<a hidden class="anchor" aria-hidden="true" href="#三结束">#</a></h2>
<p>小程序支付和以往的网页、APP微信支付大同小异，可以说小程序的支付变得更加简洁，不需要设置支付目录、域名授权等操作</p>
<h1 id="8面试官说说微信小程序的实现原理">8、面试官：说说微信小程序的实现原理？<a hidden class="anchor" aria-hidden="true" href="#8面试官说说微信小程序的实现原理">#</a></h1>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5ac2a22cb4434c8784ff044473951d15~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<h2 id="一背景-2">一、背景<a hidden class="anchor" aria-hidden="true" href="#一背景-2">#</a></h2>
<p>网页开发，渲染线程和脚本是互斥的，这也是为什么长时间的脚本运行可能会导致页面失去响应的原因，本质就是我们常说的 <code>JS</code> 是单线程的</p>
<p>而在小程序中，选择了 <code>Hybrid</code> 的渲染方式，将视图层和逻辑层是分开的，双线程同时运行，视图层的界面使用 <code>WebView</code> 进行渲染，逻辑层运行在 <code>JSCore</code> 中</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ad744a5e59df43d190374214ae975b58~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<ul>
<li>
<p>渲染层：界面渲染相关的任务全都在 WebView 线程里执行。一个小程序存在多个界面，所以渲染层存在多个 WebView 线程</p>
</li>
<li>
<p>逻辑层：采用 JsCore 线程运行 JS 脚本，在这个环境下执行的都是有关小程序业务逻辑的代码</p>
</li>
</ul>
<h2 id="二通信">二、通信<a hidden class="anchor" aria-hidden="true" href="#二通信">#</a></h2>
<p>小程序在渲染层，宿主环境会把<code>wxml</code>转化成对应的<code>JS</code>对象</p>
<p>在逻辑层发生数据变更的时候，通过宿主环境提供的<code>setData</code>方法把数据从逻辑层传递到渲染层，再经过对比前后差异，把差异应用在原来的<code>Dom</code>树上，渲染出正确的视图</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/91c44a46c2b340de916a61a4bee5e88d~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<p>当视图存在交互的时候，例如用户点击你界面上某个按钮，这类反馈应该通知给开发者的逻辑层，需要将对应的处理状态呈现给用户</p>
<p>对于事件的分发处理，微信进行了特殊的处理，将所有的事件拦截后，丢到逻辑层交给<code>JavaScript</code>进行处理</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/73849ae2cea641a1a1a468d99fa8d0b8~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<p>由于小程序是基于双线程的，也就是任何在视图层和逻辑层之间的数据传递都是线程间的通信，会有一定的延时，因此在小程序中，页面更新成了异步操作</p>
<p>异步会使得各部分的运行时序变得复杂一些，比如在渲染首屏的时候，逻辑层与渲染层会同时开始初始化工作，但是渲染层需要有逻辑层的数据才能把界面渲染出来</p>
<p>如果渲染层初始化工作较快完成，就要等逻辑层的指令才能进行下一步工作</p>
<p>因此逻辑层与渲染层需要有一定的机制保证时序正确，在每个小程序页面的生命周期中，存在着若干次页面数据通信</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c29cb09258dd4ae18b5938432fae36bd~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<h2 id="三运行机制">三、运行机制<a hidden class="anchor" aria-hidden="true" href="#三运行机制">#</a></h2>
<p>小程序启动运行两种情况：</p>
<ul>
<li>冷启动（重新开始）：用户首次打开或者小程序被微信主动销毁后再次打开的情况，此时小程序需要重新加载启动，即为冷启动</li>
<li>热启动：用户已经打开过小程序，然后在一定时间内再次打开该小程序，此时无需重新启动，只需要将后台态的小程序切换到前台，这个过程就是热启动</li>
</ul>
<h4 id="需要注意">需要注意：<a hidden class="anchor" aria-hidden="true" href="#需要注意">#</a></h4>
<blockquote>
<p>1.小程序没有重启的概念<br>
2.当小程序进入后台，客户端会维持一段时间的运行状态，超过一定时间后会被微信主动销毁<br>
3.短时间内收到系统两次以上内存警告，也会对小程序进行销毁，这也就为什么一旦页面内存溢出，页面会奔溃的本质原因了</p>
</blockquote>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/050616aed8944aa88e4411312fccd689~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<p>开发者在后台发布新版本之后，无法立刻影响到所有现网用户，但最差情况下，也在发布之后 24 小时之内下发新版本信息到用户</p>
<p>每次冷启动时，都会检查是否有更新版本，如果发现有新版本，将会异步下载新版本的代码包，并同时用客户端本地的包进行启动，即新版本的小程序需要等下一次冷启动才会应用上</p>
<h1 id="参考网站">参考网站<a hidden class="anchor" aria-hidden="true" href="#参考网站">#</a></h1>
<p><a href="https://link.juejin.cn?target=http%3A%2F%2Finterview.xiumubai.com%2F" title="http://interview.xiumubai.com/">interview.xiumubai.com/</a></p>
<p>如果这份面试题你觉得对你有帮助，不妨点个赞👍👍👍</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/%E5%89%8D%E7%AB%AF/">前端</a></li>
      <li><a href="http://localhost:1313/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/">微信小程序</a></li>
      <li><a href="http://localhost:1313/tags/%E9%9D%A2%E8%AF%95/">面试</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="http://localhost:1313/posts/juejin/%E5%8F%91%E7%8E%B0%E4%B8%80%E4%B8%AA%E7%A8%8B%E5%BA%8F%E5%91%98%E6%9C%80%E5%BC%BA%E5%A4%96%E8%AE%BE%E5%8A%A9%E4%BD%A0%E9%AB%98%E6%95%88%E5%BC%80%E5%8F%91%E6%97%A9%E6%97%A5%E6%91%B8%E9%B1%BC/">
    <span class="title">« 上一页</span>
    <br>
    <span>发现一个程序员最强外设，助你高效开发早日摸鱼！</span>
  </a>
  <a class="next" href="http://localhost:1313/posts/wiki/10.6%E8%99%9A%E6%8B%9F%E4%BA%BAsdk%E9%9B%86%E6%88%90/">
    <span class="title">下一页 »</span>
    <br>
    <span>10.6虚拟人SDK集成</span>
  </a>
</nav>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 小程序面试8问，你能接下几招？ on x"
            href="https://x.com/intent/tweet/?text=%e5%b0%8f%e7%a8%8b%e5%ba%8f%e9%9d%a2%e8%af%958%e9%97%ae%ef%bc%8c%e4%bd%a0%e8%83%bd%e6%8e%a5%e4%b8%8b%e5%87%a0%e6%8b%9b%ef%bc%9f&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2f%25E5%25B0%258F%25E7%25A8%258B%25E5%25BA%258F%25E9%259D%25A2%25E8%25AF%25958%25E9%2597%25AE%25E4%25BD%25A0%25E8%2583%25BD%25E6%258E%25A5%25E4%25B8%258B%25E5%2587%25A0%25E6%258B%259B%2f&amp;hashtags=%e5%89%8d%e7%ab%af%2c%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%2c%e9%9d%a2%e8%af%95">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 小程序面试8问，你能接下几招？ on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2f%25E5%25B0%258F%25E7%25A8%258B%25E5%25BA%258F%25E9%259D%25A2%25E8%25AF%25958%25E9%2597%25AE%25E4%25BD%25A0%25E8%2583%25BD%25E6%258E%25A5%25E4%25B8%258B%25E5%2587%25A0%25E6%258B%259B%2f&amp;title=%e5%b0%8f%e7%a8%8b%e5%ba%8f%e9%9d%a2%e8%af%958%e9%97%ae%ef%bc%8c%e4%bd%a0%e8%83%bd%e6%8e%a5%e4%b8%8b%e5%87%a0%e6%8b%9b%ef%bc%9f&amp;summary=%e5%b0%8f%e7%a8%8b%e5%ba%8f%e9%9d%a2%e8%af%958%e9%97%ae%ef%bc%8c%e4%bd%a0%e8%83%bd%e6%8e%a5%e4%b8%8b%e5%87%a0%e6%8b%9b%ef%bc%9f&amp;source=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2f%25E5%25B0%258F%25E7%25A8%258B%25E5%25BA%258F%25E9%259D%25A2%25E8%25AF%25958%25E9%2597%25AE%25E4%25BD%25A0%25E8%2583%25BD%25E6%258E%25A5%25E4%25B8%258B%25E5%2587%25A0%25E6%258B%259B%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 小程序面试8问，你能接下几招？ on reddit"
            href="https://reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2f%25E5%25B0%258F%25E7%25A8%258B%25E5%25BA%258F%25E9%259D%25A2%25E8%25AF%25958%25E9%2597%25AE%25E4%25BD%25A0%25E8%2583%25BD%25E6%258E%25A5%25E4%25B8%258B%25E5%2587%25A0%25E6%258B%259B%2f&title=%e5%b0%8f%e7%a8%8b%e5%ba%8f%e9%9d%a2%e8%af%958%e9%97%ae%ef%bc%8c%e4%bd%a0%e8%83%bd%e6%8e%a5%e4%b8%8b%e5%87%a0%e6%8b%9b%ef%bc%9f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 小程序面试8问，你能接下几招？ on facebook"
            href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2f%25E5%25B0%258F%25E7%25A8%258B%25E5%25BA%258F%25E9%259D%25A2%25E8%25AF%25958%25E9%2597%25AE%25E4%25BD%25A0%25E8%2583%25BD%25E6%258E%25A5%25E4%25B8%258B%25E5%2587%25A0%25E6%258B%259B%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 小程序面试8问，你能接下几招？ on whatsapp"
            href="https://api.whatsapp.com/send?text=%e5%b0%8f%e7%a8%8b%e5%ba%8f%e9%9d%a2%e8%af%958%e9%97%ae%ef%bc%8c%e4%bd%a0%e8%83%bd%e6%8e%a5%e4%b8%8b%e5%87%a0%e6%8b%9b%ef%bc%9f%20-%20http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2f%25E5%25B0%258F%25E7%25A8%258B%25E5%25BA%258F%25E9%259D%25A2%25E8%25AF%25958%25E9%2597%25AE%25E4%25BD%25A0%25E8%2583%25BD%25E6%258E%25A5%25E4%25B8%258B%25E5%2587%25A0%25E6%258B%259B%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 小程序面试8问，你能接下几招？ on telegram"
            href="https://telegram.me/share/url?text=%e5%b0%8f%e7%a8%8b%e5%ba%8f%e9%9d%a2%e8%af%958%e9%97%ae%ef%bc%8c%e4%bd%a0%e8%83%bd%e6%8e%a5%e4%b8%8b%e5%87%a0%e6%8b%9b%ef%bc%9f&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2f%25E5%25B0%258F%25E7%25A8%258B%25E5%25BA%258F%25E9%259D%25A2%25E8%25AF%25958%25E9%2597%25AE%25E4%25BD%25A0%25E8%2583%25BD%25E6%258E%25A5%25E4%25B8%258B%25E5%2587%25A0%25E6%258B%259B%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 小程序面试8问，你能接下几招？ on ycombinator"
            href="https://news.ycombinator.com/submitlink?t=%e5%b0%8f%e7%a8%8b%e5%ba%8f%e9%9d%a2%e8%af%958%e9%97%ae%ef%bc%8c%e4%bd%a0%e8%83%bd%e6%8e%a5%e4%b8%8b%e5%87%a0%e6%8b%9b%ef%bc%9f&u=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2f%25E5%25B0%258F%25E7%25A8%258B%25E5%25BA%258F%25E9%259D%25A2%25E8%25AF%25958%25E9%2597%25AE%25E4%25BD%25A0%25E8%2583%25BD%25E6%258E%25A5%25E4%25B8%258B%25E5%2587%25A0%25E6%258B%259B%2f">
            <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
                <path
                    d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
            </svg>
        </a>
    </li>
</ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span><a href="https://beian.miit.gov.cn/">粤ICP备2023039897号-1</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = '复制';

        function copyingDone() {
            copybutton.innerHTML = '已复制！';
            setTimeout(() => {
                copybutton.innerHTML = '复制';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
