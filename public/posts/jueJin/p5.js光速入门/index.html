<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>p5.js光速入门 | PaperMod</title>
<meta name="keywords" content="前端, 数据可视化, Canvas">
<meta name="description" content="❤️简单来说，p5.js能让“切图仔”更容易做出具有艺术感的作品（很能整活）。本文会用光的速度带你入门P5.js">
<meta name="author" content="德育处主任">
<link rel="canonical" href="http://localhost:1313/posts/juejin/p5.js%E5%85%89%E9%80%9F%E5%85%A5%E9%97%A8/">
<meta name="google-site-verification" content="XYZabc">
<link crossorigin="anonymous" href="/assets/css/stylesheet.7b92bf4867c997b58ec50f63451b83777173d5bd5593376852abd85746d09d71.css" integrity="sha256-e5K/SGfJl7WOxQ9jRRuDd3Fz1b1VkzdoUqvYV0bQnXE=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="apple-touch-icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="mask-icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="http://localhost:1313/posts/juejin/p5.js%E5%85%89%E9%80%9F%E5%85%A5%E9%97%A8/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><meta property="og:title" content="p5.js光速入门" />
<meta property="og:description" content="❤️简单来说，p5.js能让“切图仔”更容易做出具有艺术感的作品（很能整活）。本文会用光的速度带你入门P5.js" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/posts/juejin/p5.js%E5%85%89%E9%80%9F%E5%85%A5%E9%97%A8/" />
<meta property="og:image" content="http://localhost:1313/images/papermod-cover.png" />
<meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-12-05T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-12-05T00:00:00+00:00" />


<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="http://localhost:1313/images/papermod-cover.png" />
<meta name="twitter:title" content="p5.js光速入门"/>
<meta name="twitter:description" content="❤️简单来说，p5.js能让“切图仔”更容易做出具有艺术感的作品（很能整活）。本文会用光的速度带你入门P5.js"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://localhost:1313/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "p5.js光速入门",
      "item": "http://localhost:1313/posts/juejin/p5.js%E5%85%89%E9%80%9F%E5%85%A5%E9%97%A8/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "p5.js光速入门",
  "name": "p5.js光速入门",
  "description": "❤️简单来说，p5.js能让“切图仔”更容易做出具有艺术感的作品（很能整活）。本文会用光的速度带你入门P5.js",
  "keywords": [
    "前端", "数据可视化", "Canvas"
  ],
  "articleBody": "本文简介 点赞 + 关注 + 收藏 = 学会了\n本文的目标是和各位工友一起有序的快速上手 p5.js ，会讲解 p5.js 的基础用法。\n本文会涉及到的内容包括：\n项目搭建 p5.js 基础2D图形 文字 图形样式设置 图片 事件（交互相关的） 基础动画 其中还会讲解部分 p5.js 全局方法。\n本文不涉及3d部分（放到下一篇吧）。\n官方文档很重要，但对于初学者来说可能会有点懵。因为官方文档主要讲解api的用法，第一次接触p5.js的工友可能不是那么容易将各个知识点串联起来。\n本文在基于官方案例的基础上，把我觉得入门必学的知识点过一遍，然后串起来搞一个小特效。\n要快速学习一个库，尤其是可视化方面的库，最快速的方法是找到一个好教程，然后跟着敲代码，建立自己的 “demo仓库” 。\n学习本文内容，你需要有 JavaScript 基础。\n什么是p5.js p5.js 简介 引用官网的话：\np5.js 是个 JavaScript 创意编程程式库，其专注在让编程更易于使用及更加广泛的包容艺术家、设计师、教育家、初学者以及任何人！p5.js 是个免费及开源的软件因为我们相信所有人都应该能自由使用软件及用于学习软件的工具。\np5.js 使用绘图的比喻并有一副完整的绘画功能。除此之外，您也不单限于您的绘图画布。您可以将您整个浏览器页面当作您的绘图，这包括了 HTML5 物件，如文字、输入框、视频、摄像头及音频。\n简单来说，p5.js 能让“切图仔”更容易做出具有艺术感的作品（很能整活）。\n举个例子，p5.js 很擅长实现下面这种效果。\np5.js 是 Processing 往浏览器延伸的一个 canvas库 。Processing 是使用 Java 编写的，而 Java 对于从事艺术工作的工友来说上手是有点难度的。\n浏览器暂时只接受 HTML、CSS 和 JavaScript，如果能将 Processing 直接搬上浏览器运行的话，对于艺术家来说是大大的好事。于是，p5.js 应运而生！\np5.js 第一个测试版在 2014年8月 发布。\n更多的故事可在 p5.js 官网 中寻找，本文的目标是光速入门 p5.js 。\n找到 p5.js p5.js 官网 p5.js github地址 p5.js npm地址 快速上手 本文的目标是和各位工友快速上手 p5.js，所以 CDN 的方式引入 p5.js，因为这样非常快！\n接下来我们试试在画布创建一个圆形吧~\n环境搭建 CDN html\n代码解读\n复制代码\n[p5_version] 改成指定版本号即可，本文使用的版本是 1.5.0 ，所以我是这样引入 1.5.0 版的 p5.js：\nhtml\n代码解读\n复制代码\n查看其他版本可以浏览：cdn.jsdelivr.net/npm/p5@1.5.…\nnpm 安装\nmarkup\n代码解读\n复制代码\nnpm i p5 --save\n引入\njavascript\n代码解读\n复制代码\nimport p5 from 'p5'\n在画布创建一个圆形 我使用的开发工具是 vs code，并装了 Live Server 插件。这个插件可以帮我们快速启动一个服务端运行当前页面，并具备热更新的能力。启动完服务，在浏览器运行指定页面后，你代码的每一次保存，浏览器都会自动刷新。\nhtml\n代码解读\n复制代码\n上面的代码用到几个“奇怪”的方法，逐一讲解一下。\nsetup(): 可以理解为 p5.js 的一个生命周期，创建画布的方法通常写在 setup() 里。 draw(): 同样可以理解为 p5.js 的一个生命周期，在这函数里的代码会以 60帧每秒 的速度执行。 createCanvas(): 创建画布的方法，这个方法是 p5.js 在全局创建的，传入画布的宽高后，p5.js 会自动在页面的最后插入一个 canvas 元素。 background(): 设置背景色，可以分别传入 r、g、b ，该方法也是 p5.js 在全局创建的。 circle(): 创建圆形的方法，3个参数分别代表：圆心x坐标、圆心y坐标、直径。 暂时只需大概了解一下怎么画一个圆就行，详细的后面会讲到。\n项目代码结构 使用 p5.js ，你可以理解为用这个工具创造一个“有生命”的世界。\n创造世界的工作是放在 setup() 函数里的。\n“有声明” 的意思是这个世界有生物，生物无时无刻都在活动。而活动的过程是放在 draw() 函数里。\nsetup() 和 draw() 这两个函数非常重要，在前端的世界里，你可以把 setup() 和 draw() 理解为生命周期函数。\n启动函数 setup 使用 CDN 的方式开发时，引入 p5.js 后就会在全局创建一些函数和常量。\nsetup() 是 p5.js 里一个很重要的方法，你可以简单的理解为 setup 是 p5.js 里的一个生命周期函数。在该函数里可以做很多初始化工作，比如创建画布并设置大小、画布背景色等。\nsetup() 在每个页面都只能出现一次，并且它不能在一开始执行后再次被调用。\n更多说明可查看 setup()说明文档\n绘图 draw draw() 是 p5.js 里另一个很重要的函数。\ndraw() 会在 setup() 之后执行，并且会重复的执行。如果想打断 draw() 可以试用 noLoop() 方法。\ndraw() 每秒执行次数受到 frameRate() 影响，frameRate() 默认每秒60帧。如果需要修改帧率，可以直接传入指定数值，比如 frameRate(20)。\n如果要做动画，代码可以写在 draw() 里。\n更多说明可查看 draw()说明文档\n2D基础图形 p5.js 可以绘制 2D 和 3D 图形，但在光速入门阶段只会讲解 2D 图形的基础用法。\n先从最简单的点线面开始学起~\n点 point 点是 p5.js 的基础元素之一，语法如下：\njs\n代码解读\n复制代码\npoint(x, y, [z])\npoint() 接收3个参数，其中 x 和 y 是必传参；如果是在 2D 画布里，z 不需要传。\nx 表示点在 x 轴的坐标 y 表示点在 y轴的坐标 点出现在画布的中间\nhtml\n代码解读\n复制代码\n上面的例子中，画布的宽高是200像素，点在 100, 100 的位置，仔细看可以发现点出现在画布的中心。\n如果需要画一个更大的点，可以通过 strokeWeight() 方法设置\nhtml\n代码解读\n复制代码\n其实 strokeWeight() 方法是用来设置描边粗细的，用在 point 里也完全没问题。\n更多说明可查看 point()说明文档\n线段 line 要画一根线段的语法：\njs\n代码解读\n复制代码\nline(x1, y1, [z1], x2, y2, [z2])\n注意上面的参数顺序，一定不能写错的。\n其中 z1 和 z2 在 2D 情况下是不需要传的，所以语法变成这样：\njs\n代码解读\n复制代码\nline(x1, y1, x2, y2)\nx1 和 y1 代表起点坐标 x2 和 y2 代表终点坐标 使用 line() 方法会自动将起点和终点连接起来，形成一根线段。\nhtml\n代码解读\n复制代码\n更多说明可查看 line()说明文档\n三角形 triangle 三角形的语法是：\njs\n代码解读\n复制代码\ntriangle(x1, y1, x2, y2, x3, y3)\n和前面的 点(point) 和 线段(line) 不同，三角形(triangle) 的所有参数都是必传的。\n三角形有3个点，每个点需要用2个坐标(x和y)来描述，所以 triangle() 一共要传入6个参数。\n经过前面的 点(point) 和 线段(line) 练习，相信你看到三角形的参数名称就已经知道什么意思了。\n确定了3个点的坐标后，triangle() 会使用直线连接这3个点，形成一个三角形。\nhtml\n代码解读\n复制代码\n更多说明可查看 triangle()说明文档\n正方形 square 正方形是特殊的四边形，也可以说是特殊的矩形。\n所以先从正方形讲起。\n创建正方形用到的方法是 square()，语法如下所示：\njs\n代码解读\n复制代码\nsquare(x, y, s, [tl], [tr], [br], [bl])\nx 和 y 是正方形左上角的坐标 s 是正方形的边长 tl、tr、br、bl 是用来设置正方形的圆角半径，分别是 上左、上右、下右、下左。如果不传这几个参数，正方形的角默认是90°（直角）。\nhtml\n代码解读\n复制代码\n圆角半径 圆角半径参数遵循以下规则：\n代码解读\n复制代码\n省略的角半径参数设置为参数列表中先前指定的半径值的值。\n意思是，如果只传入1个半径值，那么后面3个圆角半径的值会取左上的圆角半径。\nhtml\n代码解读\n复制代码\n如果是传入2个圆角半径，那第三和第四个圆角半径的值会取第二个的值。\nhtml\n代码解读\n复制代码\n更多说明可查看 square()说明文档\n矩形 rect 前面了解完 正方形(quad) 如何创建后，学习 矩形(rect) 会觉得非常简单。\np5.js 提供了 rect() 方法绘制矩形，而且会根据参数的数量判断绘制矩形还是绘制正方形。\n语法如下：\njs\n代码解读\n复制代码\nrect(x, y, w, [h], [tl], [tr], [br], [bl])\nx 和 y 是矩形左上角坐标位置 w 是边长 如果只传3个参数，绘制出来的是正方形（长和宽的值都使用第三个参数）\nhtml\n代码解读\n复制代码\n如果传4个参数的话，就可以分别设置长和宽了，第3和第4个参数分别是 w 和 y。\nw: x轴方向的长度（宽） h: y轴方向的长度（高） html\n代码解读\n复制代码\n后面的4个参数 tl、tr、br、bl 分别设置四个角的圆角半径，不设置的话默认就是90°。用法和正方形一样的，自己动手试试看吧~\n更多说明可查看 rect()说明文档\n四边形 quad 如果需要绘制四边形，使用 quad() 即可。\n四边形有4个顶点，1个定点用2个参数表示 x 和 y 坐标。\n语法如下：\njs\n代码解读\n复制代码\nquad(x1, y1, x2, y2, x3, y3, x4, y4)\n需要注意绘制四边形时顶点的绘制顺序\nhtml\n代码解读\n复制代码\n更多说明可查看 quad()说明文档\n圆形 circle 圆形是“特殊椭圆”，使用 circle() 方法可以创建圆形。\n语法如下：\njs\n代码解读\n复制代码\ncircle(x, y, d)\nx 和 y 是圆形的坐标 d 是圆的直径 html\n代码解读\n复制代码\n上面代码的意思：圆心在 (80, 80) 的位置，直径是 100。换算一下半径就是50咯。\n更多说明可查看 circle()说明文档\n椭圆 ellipse 使用 ellipse() 可以创建椭圆，椭圆(ellipse) 的创建方法和 矩形(rect) 其实是有点像的。\nellipse() 方法会根据传入的参数数量判断创建圆形还是创建椭圆。\n语法如下：\njs\n代码解读\n复制代码\nellipse(x, y, w, [h])\nx 和 y 确定了椭圆的圆心 w 椭圆在x轴的宽度 h 椭圆在y轴的高度 如果只传3个参数，h 会取 w 的值，所以画出来的是正圆形。\n如果传4个参数，并且 w 和 h 的值不一样，那画出来就是一个椭圆。\nhtml\n代码解读\n复制代码\n更多说明可查看 ellipse()说明文档\n弧状 arc 弧形(arc) 是一个很好玩的方法，你可以用 arc() 画圆形、椭圆、饼图和弧线。\n随着功能的增加， arc() 所需的参数也会比圆形和椭圆更多。\n先来看看语法：\njs\n代码解读\n复制代码\narc(x, y, w, h, start, stop, [mode], [detail])\nx 和 y: 圆弧的圆心坐标 w : x轴方向的宽度 h: y轴方向的高度 start: 弧形开始的角度（用弧度定义） stop: 弧形结束的角度（用弧度定义） mode: 定义弧形的画法。可选值：开放式半圆形（OPEN），封闭式半圆形（CHORD），封闭式饼形段（PIE） detail: 指定构成圆弧周长的顶点数量，在 2D 模式下不会用到 我知道有很些工友对弧度制不太熟悉，其实也不需要担心，p5.js 提供了 radians() 方法，可以将角度转成弧度。\n接下来我就用角度的方式去画图展示一下 arc() 是如何使用的。\n我画4个弧形，分别表示 90°、180° 、270° 和 360°。\nhtml\n代码解读\n复制代码\n从上面的代码可以看出，0°（角度）是在图形的正右方。\n顺便展示一下不同 mode 的效果\nhtml\n代码解读\n复制代码\nOPEN、CHORD 和 PIE 这几个常量都不需要我们定义的，p5.js 已经在全局定义好了。\n更多说明可查看 arc()说明文档\n其他图形 除了前面讲到的几个基础图形，p5.js 还提供了贝塞尔曲线、球体、立方体、圆锥等图形元素，甚至还能自定义多边形。\n但在光速入门阶段我们只需掌握基础的图形，再加上自己的创意就可以做出很漂亮的作品。\n文本 创建文本的方法叫 text()。\n语法如下：\njs\n代码解读\n复制代码\ntext(str, x, y, [x2], [y2])\nstr: 文本 x 和 y 是文本基线左侧的坐标 x2 和 y2 定义文本内容占用的面积，x2 表示宽度，y2 表示高度。 html\n代码解读\n复制代码\n我们还可以传入 x2 和 y2 参数来控制内容的展示方式。\nx2 会影响文本换行方式，y2 控制文本显示的内容。\n先说 x2，这个参数是控制文本在 x 轴方向的展示长度，x2 - x 就可以得出这段文字在 x 轴方向可以展示的长度。\n比如一个字符的宽度是 5px ，x 设为10，x2 设为20，那么一行就可以展示2个文字。\n但 x2 并不能很好的控制文本长度，它只会判断这行文本里有没有空格，如果出现空格，且超出文本框宽度的内容就会换行。\ny2 - y 得出的长度就是y轴方向可展示的区域。超出这个区域的文本都不会展示出来了。\n举个例子\nhtml\n代码解读\n复制代码\n此时，在 x2 和 y2 的限制下，文本已经无法完全展示出来了。\n基础样式 p5.js 提供了几个设置样式的方法，我挑常用的几个来讲讲。\n颜色 p5.js 支持多种颜色值，比如 颜色关键字、十六进制CSS颜色字符串、RGB、HSB、HSL、灰度。\n关键字 与 十六进制 颜色关键字 和 十六进制CSS颜色字符串 就不多说了，合格的切图仔都懂这个。\n关键字: ‘red’、‘blue’ 等 十六进制: #ff0000 等 需要注意的是 RGB、HSB、HSL 和 灰度。\n其中，RGB、HSB 和 HSL 都支持传入第4个参数，这个参数表示透明通道。\nRGB RGB 的第4个参数取值范围是 0 ~ 255，0 表示完全透明，255 表示完全不透明。\n如果不传第4个参数，默认值是 255。\n我用 background 背景色来举例。\nhtml\n代码解读\n复制代码\n如果此时在 background() 里传入第4个参数就可以改变背景色的不透明度。\n比如\njs\n代码解读\n复制代码\nbackground(152, 231, 162, 100)\nHSB 与 HSL HSB 和 HSL 都是颜色表示的一种方法。\nHSB: H(Hue) 色相、S(Saturation) 饱和度、B(Brightness) 亮度 HSL: H(Hue) 色相、S(Saturation) 饱和度、L(Lightness) 明度 它们二者之间的区别可以自行百度搜搜，或者可以看看这篇文章：《色彩空间中的 HSL、HSV、HSB 有什么区别？》。这不是本文的重点。\nHSB 和 HSL 在 用法 上差不多，但和 RGB 是有区别的。\n使用 HSB 和 HSL 前，要设置颜色模式，告诉 p5.js 要使用哪种颜色模式去渲染。而 RGB 就省略了这步。 HSB 和 HSL 第1个参数取值 0 ~ 360，第2和第3个参数取值是 0 ~ 100。而 RGB 前3个参数的取值都是 0 ~ 255。 在透明度上，HSB 和 HSL 在第4个参数的取值范围是 0 ~ 1 ，而 RGB 是 0 ~ 255 。 如果要使用 HSB ，就需要使用 colorMode(HSB) 设置一下；HSL 就用 colorMode(HSL) 设置一下。\n还是用 background() 举例\nhtml\n代码解读\n复制代码\n灰度 灰度模式的意思是只有 “黑白灰” 三种颜色，而灰色是过渡颜色。\n灰度模式是默认的颜色模式，不需要进行特殊设置。\n灰度模式的取值范围是 0 ~ 255。0表示黑色，255表示白色，中间的其他值表示不同程度的灰色。\n使用 RGB 设置颜色，需要传 3 ~ 4 个参数，而使用灰度模式只需传1个参数。\n还是拿 background() 举例\nhtml\n代码解读\n复制代码\n背景色 background() 前面一直使用背景色，相信大家已经对 background() 的用法非常熟悉了。\n通常 background() 会在2个地方用到。\n一个是写在 setup() 里，在初始化画布时可以设置画布背景色。\n还可以写在 draw() 里，每次刷新画布都可以设置画布背景色。写在 draw() 里，画布每次刷新都会重新设置一次背景色。某些情况下是很有用的，比如移动图像时，如果背景色没重新设置一次，那么图形移动后会产生“残留”的现象。这个放在动画章节说。\n填充颜色 fill() 创建图像后，图像默认的填充色是白色。\n要修改图像填充色，使用 fill() 方法即可。\nhtml\n代码解读\n复制代码\n需要注意的是，一旦设置了 fill() ，在它后面创建的图形都会使用相同的填充色，正如上面的例子那样。\n如果希望后面的图形使用别的颜色，可以再重新调用一遍 fill() 进行设置。\nhtml\n代码解读\n复制代码\n无填充 noFill() 如果不想设置填充色，可以使用 noFill() 方法。\n不填充的情况下，图形内部将会设置成透明，会直接显示在它下层的颜色，如果它下层没有其他元素，则会直接显示背景色。\nhtml\n代码解读\n复制代码\n边框颜色 stroke() p5.js 创建出来的元素默认是有一个黑色边框，如果想要修改边框颜色，可以使用 stroke() 方法。\nhtml\n代码解读\n复制代码\n和 fill() 一样，在使用 stroke() 设置完颜色之后的图形都会使用这个边框颜色。如果要再次修改边框颜色，只需再次使用 stroke() 即可。\n无边框 noStroke() 如果不希望图形有边框，可以使用 noStroke() 方法。\nhtml\n代码解读\n复制代码\n设置边框粗细 strokeWeight() 使用 strokeWeight() 方法可以设置图形边框的粗细。\nhtml\n代码解读\n复制代码\n修改文字大小 textSize() 使用 textSize() 方法可以修改文字的字号\nhtml\n代码解读\n复制代码\n关于文字的样式，前面说到的 fill()、stroke()、strokeWeight() 方法都可以对文字的填充色、描边等样式进行设置。自己动手试试吧~\n图片 在打算将图片加入到画布之前，我们需要了解 preload() 函数。\npreload() 函数也是 p5.js 的一个生命周期函数，它会在 setup() 前执行。\npreload() 可以强制程序等待，直到 preload() 函数内的资源加载完成或者事件执行完再执行其他代码。\n所以一般会把图片和视频等资源加载写在 preload() 里。\n了解完 preload() 后，我们就可以使用 loadImage() 方法加载图片，使用 image() 方法渲染图片。\n注意：加载和渲染是分开2步操作的！\n本例请来的演员是 摸鱼的春哥\nhtml\n代码解读\n复制代码\nloadImage() 方法传入图片地址 image(img, x, y) 方法第一个参数是图片对象。x 和 y 是图片左上角的坐标。 除了可以渲染 jpg 和 png 外，p5.js 还可以渲染动图gif。\nhtml\n代码解读\n复制代码\n可以在 setup() 函数里使用 frameRate() 方法设置帧率，这可以影响gif的刷新率。\n交互事件 p5.js 提供了很多鼠标和键盘的交互事件，入门阶段我们挑2个来学就行。\n交互事件通常写在 draw() 函数里。\n鼠标点击 mouseIsPressed 本例使用 mouseIsPressed 判断用户是否点击了鼠标，点击鼠标时画布背景是蓝色，松开鼠标后画布背景是橙色\nhtml\n代码解读\n复制代码\ndraw() 函数在页面运行时会一直执行，所以 mouseIsPressed 写在 draw() 里可以被捕捉到。如果用户点击鼠标，且被捕捉到 mouseIsPressed 时，mouseIsPressed 会返回 true。\n按住键盘 keyIsPressed keyIsPressed 可以检测用户当前是否按住键盘，如果键盘被按下会返回 true ，否则返回 false。\nhtml\n代码解读\n复制代码\n动画 动画其实就是在修改元素属性的同时不断刷新画布。\n在 p5.js 里做动画效果其实很简单，只需要在 draw() 里修改元素属性即可。\n举个例子：圆形图案跟随鼠标指针移动\nhtml\n代码解读\n复制代码\n有没有发现，上面的例子在 draw() 里首先设置背景色，再创建一个新的圆。\n如果没重新设置背景色的话，上一帧的圆会保留下来。很多时候保留上一帧的数据会产生不错的艺术作品。\n试试把 draw() 里的 background(100) 这句删掉\nhtml\n代码解读\n复制代码\n这个也是p5.js官网的例子\n到此，相信各位工友已经对 p5.js 有一定的了解了。\n推荐阅读 👍《Canvas 从入门到劝朋友放弃（图解版）》\n👍《SVG 从入门到后悔，怎么不早点学起来（图解版）》\n👍《Three.js 起飞》\n👍《Fabric.js 从入门到膨胀》\n👍《纯CSS实现117个Loading效果》\n👍《这18个网站能让你的页面背景炫酷起来》\n点赞 + 关注 + 收藏 = 学会了\n",
  "wordCount" : "1913",
  "inLanguage": "zh",
  "image": "http://localhost:1313/images/papermod-cover.png","datePublished": "2022-12-05T00:00:00Z",
  "dateModified": "2022-12-05T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "德育处主任"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/posts/juejin/p5.js%E5%85%89%E9%80%9F%E5%85%A5%E9%97%A8/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "PaperMod",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/%3Clink%20/%20abs%20url%3E"
    }
  }
}
</script>
</head>

<body class=" dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Home (Alt + H)">
                        
                    <img src="http://localhost:1313/images/msg_hu15231257772499651944.png" alt="" aria-label="logo"
                        height="20">Home</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://github.com/adityatelange/hugo-PaperMod/wiki/" title="WiKi">
                    <span>WiKi</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://localhost:1313/">主页</a>&nbsp;»&nbsp;<a href="http://localhost:1313/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      p5.js光速入门
    </h1>
    <div class="post-description">
      ❤️简单来说，p5.js能让“切图仔”更容易做出具有艺术感的作品（很能整活）。本文会用光的速度带你入门P5.js
    </div>
    <div class="post-meta"><span title='2022-12-05 00:00:00 +0000 UTC'>十二月 5, 2022</span>&nbsp;·&nbsp;9 分钟&nbsp;·&nbsp;德育处主任&nbsp;|&nbsp;<a href="https://github.com/WangShaoyu1/myBlogPaperMod/tree/master/content/posts/jueJin/p5.js%e5%85%89%e9%80%9f%e5%85%a5%e9%97%a8.md" rel="noopener noreferrer" target="_blank">Suggest Changes</a>

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">目录</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e6%9c%ac%e6%96%87%e7%ae%80%e4%bb%8b" aria-label="本文简介">本文简介</a></li>
                <li>
                    <a href="#%e4%bb%80%e4%b9%88%e6%98%afp5js" aria-label="什么是p5.js">什么是p5.js</a><ul>
                        
                <li>
                    <a href="#p5js-%e7%ae%80%e4%bb%8b" aria-label="p5.js 简介">p5.js 简介</a></li>
                <li>
                    <a href="#%e6%89%be%e5%88%b0-p5js" aria-label="找到 p5.js">找到 p5.js</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%bf%ab%e9%80%9f%e4%b8%8a%e6%89%8b" aria-label="快速上手">快速上手</a><ul>
                        
                <li>
                    <a href="#%e7%8e%af%e5%a2%83%e6%90%ad%e5%bb%ba" aria-label="环境搭建">环境搭建</a><ul>
                        
                <li>
                    <a href="#cdn" aria-label="CDN">CDN</a></li>
                <li>
                    <a href="#npm" aria-label="npm">npm</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%9c%a8%e7%94%bb%e5%b8%83%e5%88%9b%e5%bb%ba%e4%b8%80%e4%b8%aa%e5%9c%86%e5%bd%a2" aria-label="在画布创建一个圆形">在画布创建一个圆形</a></li></ul>
                </li>
                <li>
                    <a href="#%e9%a1%b9%e7%9b%ae%e4%bb%a3%e7%a0%81%e7%bb%93%e6%9e%84" aria-label="项目代码结构">项目代码结构</a><ul>
                        
                <li>
                    <a href="#%e5%90%af%e5%8a%a8%e5%87%bd%e6%95%b0-setup" aria-label="启动函数 setup">启动函数 setup</a></li>
                <li>
                    <a href="#%e7%bb%98%e5%9b%be-draw" aria-label="绘图 draw">绘图 draw</a></li></ul>
                </li>
                <li>
                    <a href="#2d%e5%9f%ba%e7%a1%80%e5%9b%be%e5%bd%a2" aria-label="2D基础图形">2D基础图形</a><ul>
                        
                <li>
                    <a href="#%e7%82%b9-point" aria-label="点 point">点 point</a></li>
                <li>
                    <a href="#%e7%ba%bf%e6%ae%b5-line" aria-label="线段 line">线段 line</a></li>
                <li>
                    <a href="#%e4%b8%89%e8%a7%92%e5%bd%a2-triangle" aria-label="三角形 triangle">三角形 triangle</a></li>
                <li>
                    <a href="#%e6%ad%a3%e6%96%b9%e5%bd%a2-square" aria-label="正方形 square">正方形 square</a><ul>
                        
                <li>
                    <a href="#%e5%9c%86%e8%a7%92%e5%8d%8a%e5%be%84" aria-label="圆角半径">圆角半径</a></li></ul>
                </li>
                <li>
                    <a href="#%e7%9f%a9%e5%bd%a2-rect" aria-label="矩形 rect">矩形 rect</a></li>
                <li>
                    <a href="#%e5%9b%9b%e8%be%b9%e5%bd%a2-quad" aria-label="四边形 quad">四边形 quad</a></li>
                <li>
                    <a href="#%e5%9c%86%e5%bd%a2-circle" aria-label="圆形 circle">圆形 circle</a></li>
                <li>
                    <a href="#%e6%a4%ad%e5%9c%86-ellipse" aria-label="椭圆 ellipse">椭圆 ellipse</a></li>
                <li>
                    <a href="#%e5%bc%a7%e7%8a%b6-arc" aria-label="弧状 arc">弧状 arc</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%85%b6%e4%bb%96%e5%9b%be%e5%bd%a2" aria-label="其他图形">其他图形</a></li>
                <li>
                    <a href="#%e6%96%87%e6%9c%ac" aria-label="文本">文本</a></li>
                <li>
                    <a href="#%e5%9f%ba%e7%a1%80%e6%a0%b7%e5%bc%8f" aria-label="基础样式">基础样式</a><ul>
                        
                <li>
                    <a href="#%e9%a2%9c%e8%89%b2" aria-label="颜色">颜色</a><ul>
                        
                <li>
                    <a href="#%e5%85%b3%e9%94%ae%e5%ad%97-%e4%b8%8e-%e5%8d%81%e5%85%ad%e8%bf%9b%e5%88%b6" aria-label="关键字 与 十六进制">关键字 与 十六进制</a></li>
                <li>
                    <a href="#rgb" aria-label="RGB">RGB</a></li>
                <li>
                    <a href="#hsb-%e4%b8%8e-hsl" aria-label="HSB 与 HSL">HSB 与 HSL</a></li>
                <li>
                    <a href="#%e7%81%b0%e5%ba%a6" aria-label="灰度">灰度</a></li></ul>
                </li>
                <li>
                    <a href="#%e8%83%8c%e6%99%af%e8%89%b2-background" aria-label="背景色 background()">背景色 background()</a></li>
                <li>
                    <a href="#%e5%a1%ab%e5%85%85%e9%a2%9c%e8%89%b2-fill" aria-label="填充颜色 fill()">填充颜色 fill()</a></li>
                <li>
                    <a href="#%e6%97%a0%e5%a1%ab%e5%85%85-nofill" aria-label="无填充 noFill()">无填充 noFill()</a></li>
                <li>
                    <a href="#%e8%be%b9%e6%a1%86%e9%a2%9c%e8%89%b2-stroke" aria-label="边框颜色 stroke()">边框颜色 stroke()</a></li>
                <li>
                    <a href="#%e6%97%a0%e8%be%b9%e6%a1%86-nostroke" aria-label="无边框 noStroke()">无边框 noStroke()</a></li>
                <li>
                    <a href="#%e8%ae%be%e7%bd%ae%e8%be%b9%e6%a1%86%e7%b2%97%e7%bb%86-strokeweight" aria-label="设置边框粗细 strokeWeight()">设置边框粗细 strokeWeight()</a></li>
                <li>
                    <a href="#%e4%bf%ae%e6%94%b9%e6%96%87%e5%ad%97%e5%a4%a7%e5%b0%8f-textsize" aria-label="修改文字大小 textSize()">修改文字大小 textSize()</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%9b%be%e7%89%87" aria-label="图片">图片</a></li>
                <li>
                    <a href="#%e4%ba%a4%e4%ba%92%e4%ba%8b%e4%bb%b6" aria-label="交互事件">交互事件</a><ul>
                        
                <li>
                    <a href="#%e9%bc%a0%e6%a0%87%e7%82%b9%e5%87%bb-mouseispressed" aria-label="鼠标点击 mouseIsPressed">鼠标点击 mouseIsPressed</a></li>
                <li>
                    <a href="#%e6%8c%89%e4%bd%8f%e9%94%ae%e7%9b%98-keyispressed" aria-label="按住键盘 keyIsPressed">按住键盘 keyIsPressed</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%8a%a8%e7%94%bb" aria-label="动画">动画</a></li>
                <li>
                    <a href="#%e6%8e%a8%e8%8d%90%e9%98%85%e8%af%bb" aria-label="推荐阅读">推荐阅读</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="本文简介">本文简介<a hidden class="anchor" aria-hidden="true" href="#本文简介">#</a></h1>
<p><strong>点赞 + 关注 + 收藏 = 学会了</strong></p>
<p>本文的目标是和各位工友一起有序的快速上手 <a href="https://link.juejin.cn?target=https%3A%2F%2Fp5js.org%2Fzh-Hans%2Freference%2F" title="https://p5js.org/zh-Hans/reference/"><code>p5.js</code></a> ，会讲解 <code>p5.js</code> 的基础用法。</p>
<p>本文会涉及到的内容包括：</p>
<ul>
<li>项目搭建</li>
<li><code>p5.js</code> 基础2D图形</li>
<li>文字</li>
<li>图形样式设置</li>
<li>图片</li>
<li>事件（交互相关的）</li>
<li>基础动画</li>
</ul>
<p>其中还会讲解部分 <code>p5.js</code> 全局方法。</p>
<p>本文不涉及3d部分（放到下一篇吧）。</p>
<p>官方文档很重要，但对于初学者来说可能会有点懵。因为官方文档主要讲解api的用法，第一次接触<code>p5.js</code>的工友可能不是那么容易将各个知识点串联起来。</p>
<p>本文在基于官方案例的基础上，把我觉得入门必学的知识点过一遍，然后串起来搞一个小特效。</p>
<p>要快速学习一个库，尤其是可视化方面的库，最快速的方法是找到一个好教程，然后跟着敲代码，建立自己的 “demo仓库” 。</p>
<p>学习本文内容，你需要有 <code>JavaScript</code> 基础。</p>
<h1 id="什么是p5js">什么是p5.js<a hidden class="anchor" aria-hidden="true" href="#什么是p5js">#</a></h1>
<h2 id="p5js-简介">p5.js 简介<a hidden class="anchor" aria-hidden="true" href="#p5js-简介">#</a></h2>
<blockquote>
<p>引用官网的话：</p>
<p><code>p5.js</code> 是个 <code>JavaScript</code> 创意编程程式库，其专注在让编程更易于使用及更加广泛的包容艺术家、设计师、教育家、初学者以及任何人！<code>p5.js</code> 是个免费及开源的软件因为我们相信所有人都应该能自由使用软件及用于学习软件的工具。</p>
<p><code>p5.js</code> 使用绘图的比喻并有一副完整的绘画功能。除此之外，您也不单限于您的绘图画布。您可以将您整个浏览器页面当作您的绘图，这包括了 <code>HTML5</code> 物件，如文字、输入框、视频、摄像头及音频。</p>
</blockquote>
<p>简单来说，<code>p5.js</code> 能让“切图仔”更容易做出具有艺术感的作品（很能整活）。</p>
<p>举个例子，<code>p5.js</code> 很擅长实现下面这种效果。</p>
<p><img loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAJElEQVRoge3BMQEAAADCoPVP7WkJoAAAAAAAAAAAAAAAAAAAbjh8AAFte11jAAAAAElFTkSuQmCC" alt=""  />
</p>
<p><code>p5.js</code> 是 <code>Processing</code> 往浏览器延伸的一个 <code>canvas库</code> 。<code>Processing</code> 是使用 <code>Java</code> 编写的，而 <code>Java</code> 对于从事艺术工作的工友来说上手是有点难度的。</p>
<p>浏览器暂时只接受 <code>HTML</code>、<code>CSS</code> 和 <code>JavaScript</code>，如果能将 <code>Processing</code> 直接搬上浏览器运行的话，对于艺术家来说是大大的好事。于是，<code>p5.js</code> 应运而生！</p>
<p><code>p5.js</code> 第一个测试版在 2014年8月 发布。</p>
<p>更多的故事可在 <a href="https://link.juejin.cn?target=https%3A%2F%2Fp5js.org%2F" title="https://p5js.org/"><code>p5.js 官网</code></a> 中寻找，本文的目标是光速入门 <code>p5.js</code> 。</p>
<h2 id="找到-p5js">找到 p5.js<a hidden class="anchor" aria-hidden="true" href="#找到-p5js">#</a></h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fp5js.org%2F" title="https://p5js.org/">p5.js 官网</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fprocessing%2Fp5.js" title="https://github.com/processing/p5.js">p5.js github地址</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fp5" title="https://www.npmjs.com/package/p5">p5.js npm地址</a></li>
</ul>
<h1 id="快速上手">快速上手<a hidden class="anchor" aria-hidden="true" href="#快速上手">#</a></h1>
<p>本文的目标是和各位工友快速上手 <code>p5.js</code>，所以 <code>CDN</code> 的方式引入 <code>p5.js</code>，因为这样非常快！</p>
<p>接下来我们试试在画布创建一个圆形吧~</p>
<h2 id="环境搭建">环境搭建<a hidden class="anchor" aria-hidden="true" href="#环境搭建">#</a></h2>
<h3 id="cdn">CDN<a hidden class="anchor" aria-hidden="true" href="#cdn">#</a></h3>
<p>html</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>&lt;script src=&quot;https://cdn.jsdelivr.net/npm/p5@[p5_version]/lib/p5.js&quot;&gt;&lt;/script&gt;</code></p>
<p><code>[p5_version]</code> 改成指定版本号即可，本文使用的版本是 <code>1.5.0</code> ，所以我是这样引入 <code>1.5.0</code> 版的 <code>p5.js</code>：</p>
<p>html</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>&lt;script src=&quot;https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.js&quot;&gt;&lt;/script&gt;</code></p>
<p>查看其他版本可以浏览：<a href="https://link.juejin.cn?target=https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fp5%401.5.0%2F" title="https://cdn.jsdelivr.net/npm/p5@1.5.0/">cdn.jsdelivr.net/npm/p5@1.5.…</a></p>
<h3 id="npm">npm<a hidden class="anchor" aria-hidden="true" href="#npm">#</a></h3>
<p>安装</p>
<p>markup</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>npm i p5 --save</code></p>
<p>引入</p>
<p>javascript</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>import p5 from 'p5'</code></p>
<h2 id="在画布创建一个圆形">在画布创建一个圆形<a hidden class="anchor" aria-hidden="true" href="#在画布创建一个圆形">#</a></h2>
<p>我使用的开发工具是 <code>vs code</code>，并装了 <a href="https://link.juejin.cn?target=https%3A%2F%2Fmarketplace.visualstudio.com%2Fitems%3FitemName%3Dritwickdey.LiveServer" title="https://marketplace.visualstudio.com/items?itemName=ritwickdey.LiveServer">Live Server 插件</a>。这个插件可以帮我们快速启动一个服务端运行当前页面，并具备热更新的能力。启动完服务，在浏览器运行指定页面后，你代码的每一次保存，浏览器都会自动刷新。</p>
<p><img loading="lazy" src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5b9355052ff5464e814491cec3a6bce2~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" alt="02.png"  />
</p>
<p>html</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>&lt;script src=&quot;https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.js&quot;&gt;&lt;/script&gt; &lt;script&gt;   function setup() {     createCanvas(200, 200) // 创建一个 200 * 200 像素的画布     background(180, 180, 180) // 画布背景色 background(r, g, b)   }   function draw() {     circle(60, 60, 100) // 画一个圆形   } &lt;/script&gt;</code></p>
<p>上面的代码用到几个“奇怪”的方法，逐一讲解一下。</p>
<ul>
<li><code>setup()</code>: 可以理解为 <code>p5.js</code> 的一个生命周期，创建画布的方法通常写在 <code>setup()</code> 里。</li>
<li><code>draw()</code>: 同样可以理解为 <code>p5.js</code> 的一个生命周期，在这函数里的代码会以 60帧每秒 的速度执行。</li>
<li><code>createCanvas()</code>: 创建画布的方法，这个方法是 <code>p5.js</code> 在全局创建的，传入画布的宽高后，<code>p5.js</code> 会自动在页面的最后插入一个 <code>canvas</code> 元素。</li>
<li><code>background()</code>: 设置背景色，可以分别传入 <code>r、g、b</code> ，该方法也是 <code>p5.js</code> 在全局创建的。</li>
<li><code>circle()</code>: 创建圆形的方法，3个参数分别代表：圆心x坐标、圆心y坐标、直径。</li>
</ul>
<p>暂时只需大概了解一下怎么画一个圆就行，详细的后面会讲到。</p>
<h1 id="项目代码结构">项目代码结构<a hidden class="anchor" aria-hidden="true" href="#项目代码结构">#</a></h1>
<p>使用 <code>p5.js</code> ，你可以理解为用这个工具创造一个“有生命”的世界。</p>
<ul>
<li>
<p>创造世界的工作是放在 <code>setup()</code> 函数里的。</p>
</li>
<li>
<p>“有声明” 的意思是这个世界有生物，生物无时无刻都在活动。而活动的过程是放在 <code>draw()</code> 函数里。</p>
</li>
</ul>
<p><code>setup()</code> 和 <code>draw()</code> 这两个函数非常重要，在前端的世界里，你可以把 <code>setup()</code> 和 <code>draw()</code> 理解为生命周期函数。</p>
<h2 id="启动函数-setup">启动函数 setup<a hidden class="anchor" aria-hidden="true" href="#启动函数-setup">#</a></h2>
<p>使用 <code>CDN</code> 的方式开发时，引入 <code>p5.js</code> 后就会在全局创建一些函数和常量。</p>
<p><code>setup()</code> 是 <code>p5.js</code> 里一个很重要的方法，你可以简单的理解为 <code>setup</code> 是 <code>p5.js</code> 里的一个生命周期函数。在该函数里可以做很多初始化工作，比如创建画布并设置大小、画布背景色等。</p>
<p><code>setup()</code> 在每个页面都只能出现一次，并且它不能在一开始执行后再次被调用。</p>
<p>更多说明可查看 <a href="https://link.juejin.cn?target=https%3A%2F%2Fp5js.org%2Fzh-Hans%2Freference%2F%23%2Fp5%2Fsetup" title="https://p5js.org/zh-Hans/reference/#/p5/setup"><code>setup()说明文档</code></a></p>
<h2 id="绘图-draw">绘图 draw<a hidden class="anchor" aria-hidden="true" href="#绘图-draw">#</a></h2>
<p><code>draw()</code> 是 <code>p5.js</code> 里另一个很重要的函数。</p>
<p><code>draw()</code> 会在 <code>setup()</code> 之后执行，并且会重复的执行。如果想打断 <code>draw()</code> 可以试用 <code>noLoop()</code> 方法。</p>
<p><code>draw()</code> 每秒执行次数受到 <code>frameRate()</code> 影响，<code>frameRate()</code> 默认每秒60帧。如果需要修改帧率，可以直接传入指定数值，比如 <code>frameRate(20)</code>。</p>
<p>如果要做动画，代码可以写在 <code>draw()</code> 里。</p>
<p>更多说明可查看 <a href="https://link.juejin.cn?target=https%3A%2F%2Fp5js.org%2Fzh-Hans%2Freference%2F%23%2Fp5%2Fdraw" title="https://p5js.org/zh-Hans/reference/#/p5/draw"><code>draw()说明文档</code></a></p>
<h1 id="2d基础图形">2D基础图形<a hidden class="anchor" aria-hidden="true" href="#2d基础图形">#</a></h1>
<p><code>p5.js</code> 可以绘制 2D 和 3D 图形，但在光速入门阶段只会讲解 2D 图形的基础用法。</p>
<p>先从最简单的点线面开始学起~</p>
<h2 id="点-point">点 point<a hidden class="anchor" aria-hidden="true" href="#点-point">#</a></h2>
<p>点是 <code>p5.js</code> 的基础元素之一，语法如下：</p>
<p>js</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>point(x, y, [z])</code></p>
<p><code>point()</code> 接收3个参数，其中 <code>x</code> 和 <code>y</code> 是必传参；如果是在 2D 画布里，<code>z</code> 不需要传。</p>
<ul>
<li><code>x</code> 表示点在 <code>x</code> 轴的坐标</li>
<li><code>y</code> 表示点在 <code>y</code>轴的坐标</li>
</ul>
<p>点出现在画布的中间</p>
<p><img loading="lazy" src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5d17cc23986d4454b4320f24323c061e~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" alt="03.png"  />
</p>
<p>html</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>&lt;script src=&quot;https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.js&quot;&gt;&lt;/script&gt; &lt;script&gt;   function setup() {     createCanvas(200, 200)     background(220, 220, 220)   }   function draw() {     point(100, 100)   } &lt;/script&gt;</code></p>
<p>上面的例子中，画布的宽高是200像素，点在 <code>100, 100</code> 的位置，仔细看可以发现点出现在画布的中心。</p>
<p>如果需要画一个更大的点，可以通过 <code>strokeWeight()</code> 方法设置</p>
<p><img loading="lazy" src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/909c62f438014d83b4ff127224c68459~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" alt="04.png"  />
</p>
<p>html</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>&lt;script src=&quot;https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.js&quot;&gt;&lt;/script&gt; &lt;script&gt;   function setup() {     createCanvas(200, 200)     background(220, 220, 220)   }   function draw() {     point(100, 100)     strokeWeight(10) // 更大的点   } &lt;/script&gt;</code></p>
<p>其实 <code>strokeWeight()</code> 方法是用来设置描边粗细的，用在 <code>point</code> 里也完全没问题。</p>
<p>更多说明可查看 <a href="https://link.juejin.cn?target=https%3A%2F%2Fp5js.org%2Fzh-Hans%2Freference%2F%23%2Fp5%2Fpoint" title="https://p5js.org/zh-Hans/reference/#/p5/point"><code>point()说明文档</code></a></p>
<h2 id="线段-line">线段 line<a hidden class="anchor" aria-hidden="true" href="#线段-line">#</a></h2>
<p>要画一根线段的语法：</p>
<p>js</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>line(x1, y1, [z1], x2, y2, [z2])</code></p>
<p>注意上面的参数顺序，一定不能写错的。</p>
<p>其中 <code>z1</code> 和 <code>z2</code> 在 2D 情况下是不需要传的，所以语法变成这样：</p>
<p>js</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>line(x1, y1, x2, y2)</code></p>
<ul>
<li><code>x1</code> 和 <code>y1</code> 代表起点坐标</li>
<li><code>x2</code> 和 <code>y2</code> 代表终点坐标</li>
</ul>
<p>使用 <code>line()</code> 方法会自动将起点和终点连接起来，形成一根线段。</p>
<p><img loading="lazy" src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5a5896826825403286429b2ea2b8b4d8~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" alt="05.png"  />
</p>
<p>html</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>&lt;script src=&quot;https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.js&quot;&gt;&lt;/script&gt; &lt;script&gt;   function setup() {     createCanvas(200, 200)     background(220, 220, 220)   }   function draw() {     line(60, 30, 130, 140)   } &lt;/script&gt;</code></p>
<p>更多说明可查看 <a href="https://link.juejin.cn?target=https%3A%2F%2Fp5js.org%2Fzh-Hans%2Freference%2F%23%2Fp5%2Fline" title="https://p5js.org/zh-Hans/reference/#/p5/line"><code>line()说明文档</code></a></p>
<h2 id="三角形-triangle">三角形 triangle<a hidden class="anchor" aria-hidden="true" href="#三角形-triangle">#</a></h2>
<p>三角形的语法是：</p>
<p>js</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>triangle(x1, y1, x2, y2, x3, y3)</code></p>
<p>和前面的 点(point) 和 线段(line) 不同，三角形(triangle) 的所有参数都是必传的。</p>
<p>三角形有3个点，每个点需要用2个坐标(x和y)来描述，所以 <code>triangle()</code> 一共要传入6个参数。</p>
<p>经过前面的 点(point) 和 线段(line) 练习，相信你看到三角形的参数名称就已经知道什么意思了。</p>
<p>确定了3个点的坐标后，<code>triangle()</code> 会使用直线连接这3个点，形成一个三角形。</p>
<p><img loading="lazy" src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/263df036b9914662a0849e0f529a62a5~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" alt="06.png"  />
</p>
<p>html</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>&lt;script src=&quot;https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.js&quot;&gt;&lt;/script&gt; &lt;script&gt;   function setup() {     createCanvas(200, 200)     background(220, 220, 220)   }   function draw() {     triangle(100, 30, 40, 140, 160, 140)   } &lt;/script&gt;</code></p>
<p>更多说明可查看 <a href="https://link.juejin.cn?target=https%3A%2F%2Fp5js.org%2Fzh-Hans%2Freference%2F%23%2Fp5%2Ftriangle" title="https://p5js.org/zh-Hans/reference/#/p5/triangle"><code>triangle()说明文档</code></a></p>
<h2 id="正方形-square">正方形 square<a hidden class="anchor" aria-hidden="true" href="#正方形-square">#</a></h2>
<p>正方形是特殊的四边形，也可以说是特殊的矩形。</p>
<p>所以先从正方形讲起。</p>
<p>创建正方形用到的方法是 <code>square()</code>，语法如下所示：</p>
<p>js</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>square(x, y, s, [tl], [tr], [br], [bl])</code></p>
<ul>
<li><code>x</code> 和 <code>y</code> 是正方形左上角的坐标</li>
<li><code>s</code> 是正方形的边长</li>
</ul>
<p><code>tl</code>、<code>tr</code>、<code>br</code>、<code>bl</code> 是用来设置正方形的圆角半径，分别是 <code>上左</code>、<code>上右</code>、<code>下右</code>、<code>下左</code>。如果不传这几个参数，正方形的角默认是90°（直角）。</p>
<p><img loading="lazy" src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ff2e2bc773eb4a3f9071fee2f8c5696c~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" alt="07.png"  />
</p>
<p>html</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>&lt;script src=&quot;https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.js&quot;&gt;&lt;/script&gt; &lt;script&gt;   function setup() {     createCanvas(200, 200)     background(220, 220, 220)   }   function draw() {     square(10, 10, 80)   } &lt;/script&gt;</code></p>
<h3 id="圆角半径">圆角半径<a hidden class="anchor" aria-hidden="true" href="#圆角半径">#</a></h3>
<p>圆角半径参数遵循以下规则：</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>省略的角半径参数设置为参数列表中先前指定的半径值的值。</code></p>
<p>意思是，如果只传入1个半径值，那么后面3个圆角半径的值会取左上的圆角半径。</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ee417d8190b349e5ba92a7c81c8fb0d0~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" alt="08.png"  />
</p>
<p>html</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>&lt;script src=&quot;https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.js&quot;&gt;&lt;/script&gt; &lt;script&gt;   function setup() {     createCanvas(200, 200)     background(220, 220, 220)   }   function draw() {     square(10, 10, 80, 10)   } &lt;/script&gt;</code></p>
<p>如果是传入2个圆角半径，那第三和第四个圆角半径的值会取第二个的值。</p>
<p><img loading="lazy" src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e11688d338704595bd983d3a50beefbe~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" alt="09.png"  />
</p>
<p>html</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>&lt;script src=&quot;https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.js&quot;&gt;&lt;/script&gt; &lt;script&gt;   function setup() {     createCanvas(200, 200)     background(220, 220, 220)   }   function draw() {     square(10, 10, 80, 10, 30)   } &lt;/script&gt;</code></p>
<p>更多说明可查看 <a href="https://link.juejin.cn?target=https%3A%2F%2Fp5js.org%2Fzh-Hans%2Freference%2F%23%2Fp5%2Fsquare" title="https://p5js.org/zh-Hans/reference/#/p5/square"><code>square()说明文档</code></a></p>
<h2 id="矩形-rect">矩形 rect<a hidden class="anchor" aria-hidden="true" href="#矩形-rect">#</a></h2>
<p>前面了解完 正方形(quad) 如何创建后，学习 矩形(rect) 会觉得非常简单。</p>
<p><code>p5.js</code> 提供了 <code>rect()</code> 方法绘制矩形，而且会根据参数的数量判断绘制矩形还是绘制正方形。</p>
<p>语法如下：</p>
<p>js</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>rect(x, y, w, [h], [tl], [tr], [br], [bl])</code></p>
<ul>
<li><code>x</code> 和 <code>y</code> 是矩形左上角坐标位置</li>
<li><code>w</code> 是边长</li>
</ul>
<p>如果只传3个参数，绘制出来的是正方形（长和宽的值都使用第三个参数）</p>
<p><img loading="lazy" src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ddb60be635b34c04b3e2528ecf4b521f~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" alt="10.png"  />
</p>
<p>html</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>&lt;script src=&quot;https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.js&quot;&gt;&lt;/script&gt; &lt;script&gt;   function setup() {   	createCanvas(300, 300)   	background(220, 220, 220)   }   function draw() {     rect(10, 10, 60) // 矩形   } &lt;/script&gt;</code></p>
<p>如果传4个参数的话，就可以分别设置长和宽了，第3和第4个参数分别是 <code>w</code> 和 <code>y</code>。</p>
<ul>
<li><code>w</code>: x轴方向的长度（宽）</li>
<li><code>h</code>: y轴方向的长度（高）</li>
</ul>
<p><img loading="lazy" src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0212f333b8114d0790e368f141f97daa~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" alt="11.png"  />
</p>
<p>html</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>&lt;script src=&quot;https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.js&quot;&gt;&lt;/script&gt; &lt;script&gt;   function setup() {   	createCanvas(300, 300)   	background(220, 220, 220)   }   function draw() {     rect(10, 10, 60, 100) // 矩形   } &lt;/script&gt;</code></p>
<p>后面的4个参数 <code>tl</code>、<code>tr</code>、<code>br</code>、<code>bl</code> 分别设置四个角的圆角半径，不设置的话默认就是90°。用法和正方形一样的，自己动手试试看吧~</p>
<p>更多说明可查看 <a href="https://link.juejin.cn?target=https%3A%2F%2Fp5js.org%2Fzh-Hans%2Freference%2F%23%2Fp5%2Frect" title="https://p5js.org/zh-Hans/reference/#/p5/rect"><code>rect()说明文档</code></a></p>
<h2 id="四边形-quad">四边形 quad<a hidden class="anchor" aria-hidden="true" href="#四边形-quad">#</a></h2>
<p>如果需要绘制四边形，使用 <code>quad()</code> 即可。</p>
<p>四边形有4个顶点，1个定点用2个参数表示 <code>x</code> 和 <code>y</code> 坐标。</p>
<p>语法如下：</p>
<p>js</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>quad(x1, y1, x2, y2, x3, y3, x4, y4)</code></p>
<p>需要注意绘制四边形时顶点的绘制顺序</p>
<p><img loading="lazy" src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/368d31a6a205491f8825584a46d131d9~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" alt="12.png"  />
</p>
<p>html</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>&lt;script src=&quot;https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.js&quot;&gt;&lt;/script&gt; &lt;script&gt;   function setup() {   	createCanvas(300, 300)   	background(220, 220, 220)   }   function draw() {     quad(80, 40, 180, 40, 140, 80, 40, 80) // 四边形   } &lt;/script&gt;</code></p>
<p>更多说明可查看 <a href="https://link.juejin.cn?target=https%3A%2F%2Fp5js.org%2Fzh-Hans%2Freference%2F%23%2Fp5%2Fquad" title="https://p5js.org/zh-Hans/reference/#/p5/quad"><code>quad()说明文档</code></a></p>
<h2 id="圆形-circle">圆形 circle<a hidden class="anchor" aria-hidden="true" href="#圆形-circle">#</a></h2>
<p>圆形是“特殊椭圆”，使用 <code>circle()</code> 方法可以创建圆形。</p>
<p>语法如下：</p>
<p>js</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>circle(x, y, d)</code></p>
<ul>
<li><code>x</code> 和 <code>y</code> 是圆形的坐标</li>
<li><code>d</code> 是圆的直径</li>
</ul>
<p><img loading="lazy" src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/74d67e1d2c874387950b385aa2f2a733~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" alt="13.png"  />
</p>
<p>html</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>&lt;script src=&quot;https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.js&quot;&gt;&lt;/script&gt; &lt;script&gt;   function setup() {   	createCanvas(300, 300)   	background(220, 220, 220)   }   function draw() {     circle(80, 80, 100) // 圆形   } &lt;/script&gt;</code></p>
<p>上面代码的意思：圆心在 (80, 80) 的位置，直径是 100。换算一下半径就是50咯。</p>
<p>更多说明可查看 <a href="https://link.juejin.cn?target=https%3A%2F%2Fp5js.org%2Fzh-Hans%2Freference%2F%23%2Fp5%2Fcircle" title="https://p5js.org/zh-Hans/reference/#/p5/circle"><code>circle()说明文档</code></a></p>
<h2 id="椭圆-ellipse">椭圆 ellipse<a hidden class="anchor" aria-hidden="true" href="#椭圆-ellipse">#</a></h2>
<p>使用 <code>ellipse()</code> 可以创建椭圆，椭圆(ellipse) 的创建方法和 矩形(rect) 其实是有点像的。</p>
<p><code>ellipse()</code> 方法会根据传入的参数数量判断创建圆形还是创建椭圆。</p>
<p>语法如下：</p>
<p>js</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>ellipse(x, y, w, [h])</code></p>
<ul>
<li><code>x</code> 和 <code>y</code> 确定了椭圆的圆心</li>
<li><code>w</code> 椭圆在x轴的宽度</li>
<li><code>h</code> 椭圆在y轴的高度</li>
</ul>
<p>如果只传3个参数，<code>h</code> 会取 <code>w</code> 的值，所以画出来的是正圆形。</p>
<p>如果传4个参数，并且 <code>w</code> 和 <code>h</code> 的值不一样，那画出来就是一个椭圆。</p>
<p><img loading="lazy" src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b061fd1885914018801cdc3a78bce6f7~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" alt="14.png"  />
</p>
<p>html</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>&lt;script src=&quot;https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.js&quot;&gt;&lt;/script&gt; &lt;script&gt;   function setup() {   	createCanvas(300, 300)   	background(220, 220, 220)   }   function draw() {     ellipse(80, 80, 100, 50) // 椭圆   } &lt;/script&gt;</code></p>
<p>更多说明可查看 <a href="https://link.juejin.cn?target=https%3A%2F%2Fp5js.org%2Fzh-Hans%2Freference%2F%23%2Fp5%2Fellipse" title="https://p5js.org/zh-Hans/reference/#/p5/ellipse"><code>ellipse()说明文档</code></a></p>
<h2 id="弧状-arc">弧状 arc<a hidden class="anchor" aria-hidden="true" href="#弧状-arc">#</a></h2>
<p>弧形(arc) 是一个很好玩的方法，你可以用 <code>arc()</code> 画圆形、椭圆、饼图和弧线。</p>
<p>随着功能的增加， <code>arc()</code> 所需的参数也会比圆形和椭圆更多。</p>
<p>先来看看语法：</p>
<p>js</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>arc(x, y, w, h, start, stop, [mode], [detail])</code></p>
<ul>
<li><code>x</code> 和 <code>y</code>: 圆弧的圆心坐标</li>
<li><code>w</code> : x轴方向的宽度</li>
<li><code>h</code>: y轴方向的高度</li>
<li><code>start</code>: 弧形开始的角度（用弧度定义）</li>
<li><code>stop</code>: 弧形结束的角度（用弧度定义）</li>
<li><code>mode</code>: 定义弧形的画法。可选值：开放式半圆形（OPEN），封闭式半圆形（CHORD），封闭式饼形段（PIE）</li>
<li><code>detail</code>: 指定构成圆弧周长的顶点数量，在 2D 模式下不会用到</li>
</ul>
<p>我知道有很些工友对弧度制不太熟悉，其实也不需要担心，<code>p5.js</code> 提供了 <code>radians()</code> 方法，可以将角度转成弧度。</p>
<p>接下来我就用角度的方式去画图展示一下 <code>arc()</code> 是如何使用的。</p>
<p>我画4个弧形，分别表示 90°、180° 、270° 和 360°。</p>
<p><img loading="lazy" src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1ba12f70b79c437abea9e2a91c509042~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" alt="15.png"  />
</p>
<p>html</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>&lt;script src=&quot;https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.js&quot;&gt;&lt;/script&gt; &lt;script&gt;   function setup() {   	createCanvas(300, 300)   	background(220, 220, 220)   }   function draw() {     // 左上角的图形，0-90°（角度）     arc(50, 50, 50, 50, radians(0), radians(90))     // 右上角的图形，0-180°（角度）     arc(250, 50, 50, 50, radians(0), radians(180))     // 左下角的图形，0-270°（角度）     arc(50, 250, 50, 50, radians(0), radians(270))     // 右下角的图形，0-360°（角度）     arc(250, 250, 50, 50, radians(0), radians(360))   } &lt;/script&gt;</code></p>
<p>从上面的代码可以看出，0°（角度）是在图形的正右方。</p>
<p>顺便展示一下不同 <code>mode</code> 的效果</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3c01360d09f541c8aa799a8575fb33bf~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" alt="16.png"  />
</p>
<p>html</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>&lt;script src=&quot;https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.js&quot;&gt;&lt;/script&gt; &lt;script&gt;   function setup() {   	createCanvas(300, 300)   	background(220, 220, 220)   }   function draw() {     // 左上角的图形，默认     arc(50, 50, 50, 50, radians(0), radians(270))     // 右上角的图形，开放式半圆形（OPEN）     arc(250, 50, 50, 50, radians(0), radians(270), OPEN)     // 左下角的图形，封闭式半圆形（CHORD）     arc(50, 250, 50, 50, radians(0), radians(270), CHORD)     // 右下角的图形，封闭式饼形段（PIE）     arc(250, 250, 50, 50, radians(0), radians(270), PIE)   } &lt;/script&gt;</code></p>
<p><code>OPEN</code>、<code>CHORD</code> 和 <code>PIE</code> 这几个常量都不需要我们定义的，<code>p5.js</code> 已经在全局定义好了。</p>
<p>更多说明可查看 <a href="https://link.juejin.cn?target=https%3A%2F%2Fp5js.org%2Fzh-Hans%2Freference%2F%23%2Fp5%2Farc" title="https://p5js.org/zh-Hans/reference/#/p5/arc"><code>arc()说明文档</code></a></p>
<h1 id="其他图形">其他图形<a hidden class="anchor" aria-hidden="true" href="#其他图形">#</a></h1>
<p>除了前面讲到的几个基础图形，<code>p5.js</code> 还提供了贝塞尔曲线、球体、立方体、圆锥等图形元素，甚至还能自定义多边形。</p>
<p>但在光速入门阶段我们只需掌握基础的图形，再加上自己的创意就可以做出很漂亮的作品。</p>
<h1 id="文本">文本<a hidden class="anchor" aria-hidden="true" href="#文本">#</a></h1>
<p>创建文本的方法叫 <code>text()</code>。</p>
<p>语法如下：</p>
<p>js</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>text(str, x, y, [x2], [y2])</code></p>
<ul>
<li><code>str</code>: 文本</li>
<li><code>x</code> 和 <code>y</code> 是文本基线左侧的坐标</li>
<li><code>x2</code> 和 <code>y2</code> 定义文本内容占用的面积，<code>x2</code> 表示宽度，<code>y2</code> 表示高度。</li>
</ul>
<p><img loading="lazy" src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ba34d0b2538f4dd6bf9d43218f8408d6~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" alt="17.png"  />
</p>
<p>html</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>&lt;script src=&quot;https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.js&quot;&gt;&lt;/script&gt; &lt;script&gt;   function setup() {   	createCanvas(300, 300)   	background(220, 220, 220)   }   function draw() {     text('雷猴', 10, 20)   } &lt;/script&gt;</code></p>
<p>我们还可以传入 <code>x2</code> 和 <code>y2</code> 参数来控制内容的展示方式。</p>
<p><code>x2</code> 会影响文本换行方式，<code>y2</code> 控制文本显示的内容。</p>
<p>先说 <code>x2</code>，这个参数是控制文本在 <code>x</code> 轴方向的展示长度，<code>x2 - x</code> 就可以得出这段文字在 <code>x</code> 轴方向可以展示的长度。</p>
<p>比如一个字符的宽度是 <code>5px</code> ，<code>x</code> 设为10，<code>x2</code> 设为20，那么一行就可以展示2个文字。</p>
<p>但 <code>x2</code> 并不能很好的控制文本长度，它只会判断这行文本里有没有空格，如果出现空格，且超出文本框宽度的内容就会换行。</p>
<p><code>y2 - y</code> 得出的长度就是y轴方向可展示的区域。超出这个区域的文本都不会展示出来了。</p>
<p>举个例子</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e9c40705b04945f786b83b1f8d01a586~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" alt="18.png"  />
</p>
<p>html</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>&lt;script src=&quot;https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.js&quot;&gt;&lt;/script&gt; &lt;script&gt;   function setup() {   	createCanvas(300, 300)   	background(220, 220, 220)   }   function draw() {     text(       'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Doloremque et assumenda quibusdam quis, rerum incidunt animi nihil perspiciatis temporibus neque!',       10,       20,       40,       60     )   } &lt;/script&gt;</code></p>
<p>此时，在 <code>x2</code> 和 <code>y2</code> 的限制下，文本已经无法完全展示出来了。</p>
<h1 id="基础样式">基础样式<a hidden class="anchor" aria-hidden="true" href="#基础样式">#</a></h1>
<p><code>p5.js</code> 提供了几个设置样式的方法，我挑常用的几个来讲讲。</p>
<h2 id="颜色">颜色<a hidden class="anchor" aria-hidden="true" href="#颜色">#</a></h2>
<p><code>p5.js</code> 支持多种颜色值，比如 <code>颜色关键字</code>、<code>十六进制CSS颜色字符串</code>、<code>RGB</code>、<code>HSB</code>、<code>HSL</code>、<code>灰度</code>。</p>
<h3 id="关键字-与-十六进制">关键字 与 十六进制<a hidden class="anchor" aria-hidden="true" href="#关键字-与-十六进制">#</a></h3>
<p><code>颜色关键字</code> 和 <code>十六进制CSS颜色字符串</code> 就不多说了，合格的切图仔都懂这个。</p>
<ul>
<li>关键字: &lsquo;red&rsquo;、&lsquo;blue&rsquo; 等</li>
<li>十六进制: <code>#ff0000</code> 等</li>
</ul>
<p>需要注意的是 <code>RGB</code>、<code>HSB</code>、<code>HSL</code> 和 <code>灰度</code>。</p>
<p>其中，<code>RGB</code>、<code>HSB</code> 和 <code>HSL</code> 都支持传入第4个参数，这个参数表示透明通道。</p>
<h3 id="rgb">RGB<a hidden class="anchor" aria-hidden="true" href="#rgb">#</a></h3>
<p><code>RGB</code> 的第4个参数取值范围是 <code>0 ~ 255</code>，<code>0</code> 表示完全透明，<code>255</code> 表示完全不透明。</p>
<p>如果不传第4个参数，默认值是 <code>255</code>。</p>
<p>我用 <code>background</code> 背景色来举例。</p>
<p><img loading="lazy" src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/61147a1d677b4de4981912c290890285~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" alt="20.png"  />
</p>
<p>html</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>&lt;script src=&quot;https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.js&quot;&gt;&lt;/script&gt; &lt;script&gt;   function setup() {     createCanvas(300, 300)     background(152, 231, 162) // 设置绿色背景色   } &lt;/script&gt;</code></p>
<p>如果此时在 <code>background()</code> 里传入第4个参数就可以改变背景色的不透明度。</p>
<p>比如</p>
<p><img loading="lazy" src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d9872dfe405448b6977574e8f730c803~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" alt="21.png"  />
</p>
<p>js</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>background(152, 231, 162, 100)</code></p>
<h3 id="hsb-与-hsl">HSB 与 HSL<a hidden class="anchor" aria-hidden="true" href="#hsb-与-hsl">#</a></h3>
<p><code>HSB</code> 和 <code>HSL</code> 都是颜色表示的一种方法。</p>
<ul>
<li><code>HSB</code>: H(Hue) 色相、S(Saturation) 饱和度、B(Brightness) 亮度</li>
<li><code>HSL</code>: H(Hue) 色相、S(Saturation) 饱和度、L(Lightness) 明度</li>
</ul>
<p>它们二者之间的区别可以自行百度搜搜，或者可以看看这篇文章：<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.zhihu.com%2Fquestion%2F22077462%2Fanswer%2F342570140" title="https://www.zhihu.com/question/22077462/answer/342570140">《色彩空间中的 HSL、HSV、HSB 有什么区别？》</a>。这不是本文的重点。</p>
<p><code>HSB</code> 和 <code>HSL</code> 在 <strong>用法</strong> 上差不多，但和 <code>RGB</code> 是有区别的。</p>
<ol>
<li>使用 <code>HSB</code> 和 <code>HSL</code> 前，要设置颜色模式，告诉 <code>p5.js</code> 要使用哪种颜色模式去渲染。而 <code>RGB</code> 就省略了这步。</li>
<li><code>HSB</code> 和 <code>HSL</code> 第1个参数取值 <code>0 ~ 360</code>，第2和第3个参数取值是 <code>0 ~ 100</code>。而 <code>RGB</code> 前3个参数的取值都是 <code>0 ~ 255</code>。</li>
<li>在透明度上，<code>HSB</code> 和 <code>HSL</code> 在第4个参数的取值范围是 <code>0 ~ 1</code> ，而 <code>RGB</code> 是 <code>0 ~ 255</code> 。</li>
</ol>
<p>如果要使用 <code>HSB</code> ，就需要使用 <code>colorMode(HSB)</code> 设置一下；<code>HSL</code> 就用 <code>colorMode(HSL)</code> 设置一下。</p>
<p>还是用 <code>background()</code> 举例</p>
<p><img loading="lazy" src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dff2767e593a4a73862dfffeccbe645e~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" alt="22.png"  />
</p>
<p>html</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>&lt;script src=&quot;https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.js&quot;&gt;&lt;/script&gt; &lt;script&gt;   function setup() {     createCanvas(300, 300)     colorMode(HSB) // 设置 HSB 颜色模式     background(360, 30, 80) // 设置背景色     // background(360, 30, 80, 0.5) // 背景色，添加透明通道   } &lt;/script&gt;</code></p>
<h3 id="灰度">灰度<a hidden class="anchor" aria-hidden="true" href="#灰度">#</a></h3>
<p>灰度模式的意思是只有 “黑白灰” 三种颜色，而灰色是过渡颜色。</p>
<p>灰度模式是默认的颜色模式，不需要进行特殊设置。</p>
<p>灰度模式的取值范围是 <code>0 ~ 255</code>。0表示黑色，255表示白色，中间的其他值表示不同程度的灰色。</p>
<p>使用 <code>RGB</code> 设置颜色，需要传 3 ~ 4 个参数，而使用灰度模式只需传1个参数。</p>
<p>还是拿 <code>background()</code> 举例</p>
<p><img loading="lazy" src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c1c35a56f61e4403bb19d9c391979ab7~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" alt="23.png"  />
</p>
<p>html</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>&lt;script src=&quot;https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.js&quot;&gt;&lt;/script&gt; &lt;script&gt;   function setup() {     createCanvas(300, 300)     background(128) // 设置背景色   } &lt;/script&gt;</code></p>
<h2 id="背景色-background">背景色 background()<a hidden class="anchor" aria-hidden="true" href="#背景色-background">#</a></h2>
<p>前面一直使用背景色，相信大家已经对 <code>background()</code> 的用法非常熟悉了。</p>
<p>通常 <code>background()</code> 会在2个地方用到。</p>
<p>一个是写在 <code>setup()</code> 里，在初始化画布时可以设置画布背景色。</p>
<p>还可以写在 <code>draw()</code> 里，每次刷新画布都可以设置画布背景色。写在 <code>draw()</code> 里，画布每次刷新都会重新设置一次背景色。某些情况下是很有用的，比如移动图像时，如果背景色没重新设置一次，那么图形移动后会产生“残留”的现象。这个放在动画章节说。</p>
<h2 id="填充颜色-fill">填充颜色 fill()<a hidden class="anchor" aria-hidden="true" href="#填充颜色-fill">#</a></h2>
<p>创建图像后，图像默认的填充色是白色。</p>
<p>要修改图像填充色，使用 <code>fill()</code> 方法即可。</p>
<p><img loading="lazy" src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2028b4bf466144059b9b3055caaba720~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" alt="24.png"  />
</p>
<p>html</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>&lt;script src=&quot;https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.js&quot;&gt;&lt;/script&gt; &lt;script&gt;   function setup() {     createCanvas(300, 300)     background(200)   }   function draw() {     fill('#f2c0ca') // 设置填充色     rect(30, 30, 100, 80)     circle(220, 70, 80)   } &lt;/script&gt;</code></p>
<p>需要注意的是，一旦设置了 <code>fill()</code> ，在它后面创建的图形都会使用相同的填充色，正如上面的例子那样。</p>
<p>如果希望后面的图形使用别的颜色，可以再重新调用一遍 <code>fill()</code> 进行设置。</p>
<p><img loading="lazy" src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/14654f35a3b748889cd61e81f9527020~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" alt="25.png"  />
</p>
<p>html</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>&lt;script src=&quot;https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.js&quot;&gt;&lt;/script&gt; &lt;script&gt;   function setup() {     createCanvas(300, 300)     background(200)   }   function draw() {     fill('#f2c0ca') // 设置填充色     rect(30, 30, 100, 80)     fill('yellow') // 重新设置填充色     circle(220, 70, 80)   } &lt;/script&gt;</code></p>
<h2 id="无填充-nofill">无填充 noFill()<a hidden class="anchor" aria-hidden="true" href="#无填充-nofill">#</a></h2>
<p>如果不想设置填充色，可以使用 <code>noFill()</code> 方法。</p>
<p>不填充的情况下，图形内部将会设置成透明，会直接显示在它下层的颜色，如果它下层没有其他元素，则会直接显示背景色。</p>
<p><img loading="lazy" src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dc47d4fb34f44b21833f8f1361353518~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" alt="26.png"  />
</p>
<p>html</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>&lt;script src=&quot;https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.js&quot;&gt;&lt;/script&gt; &lt;script&gt;   function setup() {     createCanvas(300, 300)     background(200)   }   function draw() {     noFill()     rect(30, 30, 100, 80)     circle(220, 70, 80)   } &lt;/script&gt;</code></p>
<h2 id="边框颜色-stroke">边框颜色 stroke()<a hidden class="anchor" aria-hidden="true" href="#边框颜色-stroke">#</a></h2>
<p><code>p5.js</code> 创建出来的元素默认是有一个黑色边框，如果想要修改边框颜色，可以使用 <code>stroke()</code> 方法。</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1440ef2c8c6d4841b285ca7b9a803b36~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" alt="27.png"  />
</p>
<p>html</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>&lt;script src=&quot;https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.js&quot;&gt;&lt;/script&gt; &lt;script&gt;   function setup() {     createCanvas(300, 300)     background(200)   }   function draw() {     stroke('red') // 设置边框颜色     rect(30, 30, 100, 80)     circle(220, 70, 80)   } &lt;/script&gt;</code></p>
<p>和 <code>fill()</code> 一样，在使用 <code>stroke()</code> 设置完颜色之后的图形都会使用这个边框颜色。如果要再次修改边框颜色，只需再次使用 <code>stroke()</code> 即可。</p>
<h2 id="无边框-nostroke">无边框 noStroke()<a hidden class="anchor" aria-hidden="true" href="#无边框-nostroke">#</a></h2>
<p>如果不希望图形有边框，可以使用 <code>noStroke()</code> 方法。</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d8a99101cf2c4300bdd53c764e7cccad~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" alt="28.png"  />
</p>
<p>html</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>&lt;script src=&quot;https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.js&quot;&gt;&lt;/script&gt; &lt;script&gt;   function setup() {     createCanvas(300, 300)     background(200)   }   function draw() {     noStroke() // 无边框     rect(30, 30, 100, 80)     circle(220, 70, 80)   } &lt;/script&gt;</code></p>
<h2 id="设置边框粗细-strokeweight">设置边框粗细 strokeWeight()<a hidden class="anchor" aria-hidden="true" href="#设置边框粗细-strokeweight">#</a></h2>
<p>使用 <code>strokeWeight()</code> 方法可以设置图形边框的粗细。</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/58fd3f8581d940af8dda0b20d7844dc2~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" alt="29.png"  />
</p>
<p>html</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>&lt;script src=&quot;https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.js&quot;&gt;&lt;/script&gt; &lt;script&gt;   function setup() {     createCanvas(300, 300)     background(200)   }   function draw() {     strokeWeight(10) // 设置边框粗细     rect(30, 30, 100, 80)     circle(220, 70, 80)   } &lt;/script&gt;</code></p>
<h2 id="修改文字大小-textsize">修改文字大小 textSize()<a hidden class="anchor" aria-hidden="true" href="#修改文字大小-textsize">#</a></h2>
<p>使用 <code>textSize()</code> 方法可以修改文字的字号</p>
<p><img loading="lazy" src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8e4a0b113cbb419dba182db7243f4d5d~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" alt="30.png"  />
</p>
<p>html</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>&lt;script src=&quot;https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.js&quot;&gt;&lt;/script&gt; &lt;script&gt;   function setup() {     createCanvas(300, 300)     background(200)   }   function draw() {     textSize(100)     text('雷猴', 20, 100)   } &lt;/script&gt;</code></p>
<p>关于文字的样式，前面说到的 <code>fill()</code>、<code>stroke()</code>、<code>strokeWeight()</code> 方法都可以对文字的填充色、描边等样式进行设置。自己动手试试吧~</p>
<h1 id="图片">图片<a hidden class="anchor" aria-hidden="true" href="#图片">#</a></h1>
<p>在打算将图片加入到画布之前，我们需要了解 <code>preload()</code> 函数。</p>
<p><code>preload()</code> 函数也是 <code>p5.js</code> 的一个生命周期函数，它会在 <code>setup()</code> 前执行。</p>
<p><code>preload()</code> 可以强制程序等待，直到 <code>preload()</code> 函数内的资源加载完成或者事件执行完再执行其他代码。</p>
<p>所以一般会把图片和视频等资源加载写在 <code>preload()</code> 里。</p>
<p>了解完 <code>preload()</code> 后，我们就可以使用 <code>loadImage()</code> 方法加载图片，使用 <code>image()</code> 方法渲染图片。</p>
<p>注意：加载和渲染是分开2步操作的！</p>
<blockquote>
<p>本例请来的演员是 <a href="https://juejin.cn/user/1714893870865303" title="https://juejin.cn/user/1714893870865303">摸鱼的春哥</a></p>
</blockquote>
<p><img loading="lazy" src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cb04f1a21f524117a8e100da4bce12a6~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" alt="Snipaste_2022-12-03_09-15-36.png"  />
</p>
<p>html</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>&lt;script src=&quot;https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.js&quot;&gt;&lt;/script&gt; &lt;script&gt;   let img = null   function preload() {     img = loadImage('https://p3-passport.byteimg.com/img/user-avatar/848d36b5efa8e055ab080bff4f27e669~180x180.awebp') // 加载图片   }   function setup() {     createCanvas(180, 180) // 创建画布   }   function draw() {     image(img, 0, 0) // 渲染图片   } &lt;/script&gt;</code></p>
<ul>
<li><code>loadImage()</code> 方法传入图片地址</li>
<li><code>image(img, x, y)</code> 方法第一个参数是图片对象。<code>x</code> 和 <code>y</code> 是图片左上角的坐标。</li>
</ul>
<p>除了可以渲染 <code>jpg</code> 和 <code>png</code> 外，<code>p5.js</code> 还可以渲染动图gif。</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9d8482aa9c874187993d39dacd3f4f07~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" alt="32.gif"  />
</p>
<p>html</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>&lt;script src=&quot;https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.js&quot;&gt;&lt;/script&gt; &lt;script&gt;   let img = null   function preload() {     img = loadImage('https://p3-passport.byteimg.com/img/user-avatar/221976c6804d412aa876fdd5154129ae~180x180.awebp') // 加载 gif   }   function setup() {     240, 150   }   function draw() {     image(img, 0, 0) // 渲染图片   } &lt;/script&gt;</code></p>
<p>可以在 <code>setup()</code> 函数里使用 <code>frameRate()</code> 方法设置帧率，这可以影响gif的刷新率。</p>
<h1 id="交互事件">交互事件<a hidden class="anchor" aria-hidden="true" href="#交互事件">#</a></h1>
<p><code>p5.js</code> 提供了很多鼠标和键盘的交互事件，入门阶段我们挑2个来学就行。</p>
<p>交互事件通常写在 <code>draw()</code> 函数里。</p>
<h2 id="鼠标点击-mouseispressed">鼠标点击 mouseIsPressed<a hidden class="anchor" aria-hidden="true" href="#鼠标点击-mouseispressed">#</a></h2>
<p>本例使用 <code>mouseIsPressed</code> 判断用户是否点击了鼠标，点击鼠标时画布背景是蓝色，松开鼠标后画布背景是橙色</p>
<p><img loading="lazy" src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/30c0947f74284fbea3288636db1c335e~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" alt="33.gif"  />
</p>
<p>html</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>&lt;script src=&quot;https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.js&quot;&gt;&lt;/script&gt; &lt;script&gt;   function setup() {     createCanvas(300, 300)     background('orange')   }   function draw() {     if (mouseIsPressed) { // 检测鼠标是否按下       background('skyblue')     } else {       background('orange')     }   } &lt;/script&gt;</code></p>
<p><code>draw()</code> 函数在页面运行时会一直执行，所以 <code>mouseIsPressed</code> 写在 <code>draw()</code> 里可以被捕捉到。如果用户点击鼠标，且被捕捉到 <code>mouseIsPressed</code> 时，<code>mouseIsPressed</code> 会返回 <code>true</code>。</p>
<h2 id="按住键盘-keyispressed">按住键盘 keyIsPressed<a hidden class="anchor" aria-hidden="true" href="#按住键盘-keyispressed">#</a></h2>
<p><code>keyIsPressed</code> 可以检测用户当前是否按住键盘，如果键盘被按下会返回 <code>true</code> ，否则返回 <code>false</code>。</p>
<p><img loading="lazy" src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/16e179fa79984b29a7d05a5264f9f884~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" alt="34.gif"  />
</p>
<p>html</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>&lt;script src=&quot;https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.js&quot;&gt;&lt;/script&gt; &lt;script&gt;   function setup() {     createCanvas(300, 300)     background('orange')   }   function draw() {     if (mouseIsPressed) { // 检测键盘是否按下       background('skyblue')     } else {       background('orange')     }   } &lt;/script&gt;</code></p>
<h1 id="动画">动画<a hidden class="anchor" aria-hidden="true" href="#动画">#</a></h1>
<p>动画其实就是在修改元素属性的同时不断刷新画布。</p>
<p>在 <code>p5.js</code> 里做动画效果其实很简单，只需要在 <code>draw()</code> 里修改元素属性即可。</p>
<p>举个例子：圆形图案跟随鼠标指针移动</p>
<p><img loading="lazy" src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/386baf63a4ce485fba2cddd6b0b27bf3~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" alt="35.gif"  />
</p>
<p>html</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>&lt;script src=&quot;https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.js&quot;&gt;&lt;/script&gt; &lt;script&gt;   function setup() {     createCanvas(300, 300)     background(100)   }   function draw() {     background(100)     circle(mouseX, mouseY, 40, 40)   } &lt;/script&gt;</code></p>
<p>有没有发现，上面的例子在 <code>draw()</code> 里首先设置背景色，再创建一个新的圆。</p>
<p>如果没重新设置背景色的话，上一帧的圆会保留下来。很多时候保留上一帧的数据会产生不错的艺术作品。</p>
<p>试试把 <code>draw()</code> 里的 <code>background(100)</code> 这句删掉</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b3b75358ba1f43e18425d5c57c412d64~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" alt="36.png"  />
</p>
<p>html</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>&lt;script src=&quot;https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.js&quot;&gt;&lt;/script&gt; &lt;script&gt;   function setup() {     createCanvas(300, 300)     background(100)   }   function draw() {     circle(mouseX, mouseY, 40, 40)   } &lt;/script&gt;</code></p>
<p>这个也是<a href="https://link.juejin.cn?target=https%3A%2F%2Fp5js.org%2Fzh-Hans%2Fget-started%2F" title="https://p5js.org/zh-Hans/get-started/">p5.js官网的例子</a></p>
<p>到此，相信各位工友已经对 <code>p5.js</code> 有一定的了解了。</p>
<h1 id="推荐阅读">推荐阅读<a hidden class="anchor" aria-hidden="true" href="#推荐阅读">#</a></h1>
<p>👍<a href="https://juejin.cn/post/7116784455561248775" title="https://juejin.cn/post/7116784455561248775">《Canvas 从入门到劝朋友放弃（图解版）》</a></p>
<p>👍<a href="https://juejin.cn/post/7118985770408345630" title="https://juejin.cn/post/7118985770408345630">《SVG 从入门到后悔，怎么不早点学起来（图解版）》</a></p>
<p>👍<a href="https://juejin.cn/post/7101683178741432356" title="https://juejin.cn/post/7101683178741432356">《Three.js 起飞》</a></p>
<p>👍<a href="https://juejin.cn/post/7026941253845516324" title="https://juejin.cn/post/7026941253845516324">《Fabric.js 从入门到膨胀》</a></p>
<p>👍<a href="https://juejin.cn/post/7037636080539009038" title="https://juejin.cn/post/7037636080539009038">《纯CSS实现117个Loading效果》</a></p>
<p>👍<a href="https://juejin.cn/post/7044397764368662559" title="https://juejin.cn/post/7044397764368662559">《这18个网站能让你的页面背景炫酷起来》</a></p>
<p><strong>点赞 + 关注 + 收藏 = 学会了</strong></p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/%E5%89%8D%E7%AB%AF/">前端</a></li>
      <li><a href="http://localhost:1313/tags/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/">数据可视化</a></li>
      <li><a href="http://localhost:1313/tags/canvas/">Canvas</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="http://localhost:1313/posts/juejin/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%82%8E%E7%82%8E%E5%A4%8F%E6%97%A5%E6%B8%85%E7%88%BD%E4%B8%80%E5%A4%8F%E5%A4%B4%E5%83%8F%E5%A4%A7%E6%8D%A2%E8%A3%85/">
    <span class="title">« 上一页</span>
    <br>
    <span>小程序｜炎炎夏日、清爽一夏、头像大换装</span>
  </a>
  <a class="next" href="http://localhost:1313/posts/juejin/%E5%85%B3%E4%BA%8Enest%E4%B8%93%E6%A0%8F%E6%9B%B4%E6%96%B0%E5%88%B0%E4%B8%80%E5%8D%8A%E6%88%91%E8%B7%91%E5%8E%BB%E5%86%99%E4%B9%A6%E4%BA%86~/">
    <span class="title">下一页 »</span>
    <br>
    <span>关于Nest专栏更新到一半，我跑去写书了~</span>
  </a>
</nav>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share p5.js光速入门 on x"
            href="https://x.com/intent/tweet/?text=p5.js%e5%85%89%e9%80%9f%e5%85%a5%e9%97%a8&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2fp5.js%25E5%2585%2589%25E9%2580%259F%25E5%2585%25A5%25E9%2597%25A8%2f&amp;hashtags=%e5%89%8d%e7%ab%af%2c%e6%95%b0%e6%8d%ae%e5%8f%af%e8%a7%86%e5%8c%96%2cCanvas">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share p5.js光速入门 on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2fp5.js%25E5%2585%2589%25E9%2580%259F%25E5%2585%25A5%25E9%2597%25A8%2f&amp;title=p5.js%e5%85%89%e9%80%9f%e5%85%a5%e9%97%a8&amp;summary=p5.js%e5%85%89%e9%80%9f%e5%85%a5%e9%97%a8&amp;source=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2fp5.js%25E5%2585%2589%25E9%2580%259F%25E5%2585%25A5%25E9%2597%25A8%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share p5.js光速入门 on reddit"
            href="https://reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2fp5.js%25E5%2585%2589%25E9%2580%259F%25E5%2585%25A5%25E9%2597%25A8%2f&title=p5.js%e5%85%89%e9%80%9f%e5%85%a5%e9%97%a8">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share p5.js光速入门 on facebook"
            href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2fp5.js%25E5%2585%2589%25E9%2580%259F%25E5%2585%25A5%25E9%2597%25A8%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share p5.js光速入门 on whatsapp"
            href="https://api.whatsapp.com/send?text=p5.js%e5%85%89%e9%80%9f%e5%85%a5%e9%97%a8%20-%20http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2fp5.js%25E5%2585%2589%25E9%2580%259F%25E5%2585%25A5%25E9%2597%25A8%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share p5.js光速入门 on telegram"
            href="https://telegram.me/share/url?text=p5.js%e5%85%89%e9%80%9f%e5%85%a5%e9%97%a8&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2fp5.js%25E5%2585%2589%25E9%2580%259F%25E5%2585%25A5%25E9%2597%25A8%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share p5.js光速入门 on ycombinator"
            href="https://news.ycombinator.com/submitlink?t=p5.js%e5%85%89%e9%80%9f%e5%85%a5%e9%97%a8&u=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2fp5.js%25E5%2585%2589%25E9%2580%259F%25E5%2585%25A5%25E9%2597%25A8%2f">
            <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
                <path
                    d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
            </svg>
        </a>
    </li>
</ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span><a href="https://beian.miit.gov.cn/">粤ICP备2023039897号-1</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = '复制';

        function copyingDone() {
            copybutton.innerHTML = '已复制！';
            setTimeout(() => {
                copybutton.innerHTML = '复制';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
