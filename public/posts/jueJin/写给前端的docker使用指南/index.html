<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>写给前端的docker使用指南 | PaperMod</title>
<meta name="keywords" content="前端, Docker, Vue.js">
<meta name="description" content="富Web时代，应用变得越来越强大，与此同时也越来越复杂。集群部署、隔离环境、灰度发布以及动态扩容缺一不可，而容器化则成为中间的必要桥梁。本文带你从0搭建一个docker环境，让你0基础入门">
<meta name="author" content="白哥学前端">
<link rel="canonical" href="http://localhost:1313/posts/juejin/%E5%86%99%E7%BB%99%E5%89%8D%E7%AB%AF%E7%9A%84docker%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/">
<meta name="google-site-verification" content="XYZabc">
<link crossorigin="anonymous" href="/assets/css/stylesheet.7b92bf4867c997b58ec50f63451b83777173d5bd5593376852abd85746d09d71.css" integrity="sha256-e5K/SGfJl7WOxQ9jRRuDd3Fz1b1VkzdoUqvYV0bQnXE=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="apple-touch-icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="mask-icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="http://localhost:1313/posts/juejin/%E5%86%99%E7%BB%99%E5%89%8D%E7%AB%AF%E7%9A%84docker%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><meta property="og:title" content="写给前端的docker使用指南" />
<meta property="og:description" content="富Web时代，应用变得越来越强大，与此同时也越来越复杂。集群部署、隔离环境、灰度发布以及动态扩容缺一不可，而容器化则成为中间的必要桥梁。本文带你从0搭建一个docker环境，让你0基础入门" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/posts/juejin/%E5%86%99%E7%BB%99%E5%89%8D%E7%AB%AF%E7%9A%84docker%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/" />
<meta property="og:image" content="http://localhost:1313/images/papermod-cover.png" />
<meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-09-05T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-09-05T00:00:00+00:00" />


<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="http://localhost:1313/images/papermod-cover.png" />
<meta name="twitter:title" content="写给前端的docker使用指南"/>
<meta name="twitter:description" content="富Web时代，应用变得越来越强大，与此同时也越来越复杂。集群部署、隔离环境、灰度发布以及动态扩容缺一不可，而容器化则成为中间的必要桥梁。本文带你从0搭建一个docker环境，让你0基础入门"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://localhost:1313/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "写给前端的docker使用指南",
      "item": "http://localhost:1313/posts/juejin/%E5%86%99%E7%BB%99%E5%89%8D%E7%AB%AF%E7%9A%84docker%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "写给前端的docker使用指南",
  "name": "写给前端的docker使用指南",
  "description": "富Web时代，应用变得越来越强大，与此同时也越来越复杂。集群部署、隔离环境、灰度发布以及动态扩容缺一不可，而容器化则成为中间的必要桥梁。本文带你从0搭建一个docker环境，让你0基础入门",
  "keywords": [
    "前端", "Docker", "Vue.js"
  ],
  "articleBody": "富 Web 时代，应用变得越来越强大，与此同时也越来越复杂。集群部署、隔离环境、灰度发布以及动态扩容缺一不可，而容器化则成为中间的必要桥梁。\ndocker 使应用部署更加轻量，可移植，可扩展，更好的环境隔离也更大程度地避免了生产环境与测试环境不一致的巨大尴尬。\n由于 docker 轻便可移植的特点也极大促进了 CI/CD 的发展。 就让我们来探索一下 Docker 的神秘世界，从零到一掌握 Docker 的基本原理与实践操作。\n讲个雨前小故事 我需要盖一个房子，于是我搬石头、砍木头、画图纸、盖房子。一顿操作，终于把这个房子盖好了。\n结果，住了一段时间，心血来潮想搬到海边去。这时候按以往的办法，我只能去海边，再次搬石头、砍木头、画图纸、盖房子。\n烦恼之际，跑来一个叫Dokcer的魔法师教会我一种魔法。这种魔法可以把我盖好的房子复制一份，做成「镜像」，放在我的背包里。\n等我到了海边，就用这个「镜像」，复制一套房子，拎包入住。\n是不是很神奇？对应到我们的项目中来，房子就是项目本身，镜像就是项目的复制，背包就是镜像仓库。如果要动态扩容，从仓库中取出项目镜像，随便复制就可以了。Build once，Run anywhere!\n认识Docker 术语 docker 的架构图如下\n本图片来自官方文档 Docker architecture\n从图中可以看出几个组成部分\ndocker client: 即 docker 命令行工具 docker host: 宿主机，docker daemon 的运行环境服务器 docker daemon: docker 的守护进程，docker client 通过命令行与 docker daemon 交互 image: 镜像，可以理解为一个容器的模板，通过一个镜像可以创建多个容器 container: 最小型的一个操作系统环境，可以对各种服务以及应用容器化，是镜像的运行实例 registry: 镜像仓库，存储大量镜像，可以从镜像仓库拉取和推送镜像 Docker 技术的三大核心概念，分别是：镜像 Image、容器 Container、仓库 Repository。\n安装 Docker 软件安装 在本地安装 docker/docker-compose，通过 Docker Desktop下载 docker 后，双击安装即可。\n如果是个人服务器且为 linux，可参考 安装 docker ,它将 docker 与 docker compose 一并安装。\n命令行安装 Homebrew 的 Cask 已经支持 Docker for Mac，因此可以很方便的使用 Homebrew Cask 来进行安装，执行如下命令：\nbrew cask install docker\n查看版本\ndocker -v\n使用Docker启动一个vue项目 新建项目 使用Vue 脚手架构建项目\nnpm init vue@latest\n给项目起个名字，叫做docker-demo-vue\n然后一路回车。运行命令：\nshell\n代码解读\n复制代码\ncd docker-demo-vue npm install npm run dev\n等待安装完毕依赖包，打开http://localhost:5174/，\n我们就能看到如下界面：\n项目没啥问题，我们对项目进行打包：\nnpm run build\n可以看到，项目目录下的 Dist 就是我们要部署的静态资源了。\n新建 Dockerfile 在docker-demo-vue根目录下执行：touch Dockerfile\n此时的项目目录结构是这样的：\n拉取 Nginx 镜像 首先打开你的Docker，默认会启动。\n控制台拉取 Nginx 镜像：\ndocker pull nginx\n出现下面的信息说明拉取Nginx镜像成功\n在根目录创建 Nginx 配置文件：\ntouch default.conf\n写入：\nconf\n代码解读\n复制代码\nserver { listen 80; server_name localhost; #charset koi8-r; access_log /var/log/nginx/host.access.log main; error_log /var/log/nginx/error.log error; location / { root /usr/share/nginx/html; index index.html index.htm; } error_page 500 502 503 504 /50x.html; location = /50x.html { root /usr/share/nginx/html; } }\n配置镜像 打开Dockerfile文件，写入：\njavascript\n代码解读\n复制代码\nFROM nginx COPY dist/ /usr/share/nginx/html/ COPY default.conf /etc/nginx/conf.d/default.conf\n解释一下代码：\nFROM nginx 指定该镜像是基于 nginx:latest 镜像而构建的；\nCOPY dist/ /usr/share/nginx/html/ 命令的意思是将项目根目录下 dist 文件夹中的所有文件复制到镜像中 /usr/share/nginx/html/ 目录下；\nCOPY default.conf /etc/nginx/conf.d/default.conf 将 default.conf 复制到 etc/nginx/conf.d/default.conf，用本地的 default.conf 配置来替换 Nginx 镜像里的默认配置。\n构建镜像 Docker 通过 build 命令来构建镜像：\ndocker build -t docker-demo-vue .\n出现上面的信息，表示构建成成功了。\n参数说明：\n-t 参数给镜像命名 docker-demo-vue\n. 是基于当前目录的 Dockerfile 来构建镜像\n运行docker image ls | grep docker-demo-vue查看镜像\n可以看到我们构建了一个142MB的项目镜像。\n在docker中也可以查看生成的镜像\n运行容器 docker run -d -p 3000:80 --name docker-vue docker-demo-vue\n参数解释：\n-d 设置容器在后台运行\n-p 表示端口映射，把本机的 3000 端口映射到 container 的 80 端口（这样外网就能通过本机的 3000 端口访问了。\n--name 设置容器名 docker-vue\ndocker-demo-vue 是我们上面构建的镜像名字\n可以运行docker ps -a 查看容器id：\n可以看到我们刚才打印的docker-vue的容器id为b6c49793ad48，跟上面的容器idb6c49793ad48ccfc106fab63f988881a1467ae25b5c4c9cee87ad4f3515f9607对应，默认是取了前12位。\n同样的也可以在桌面端看到，正在运行的docker容器\n访问项目 我们打开http://localhost:3000/，就可以在浏览器中看到对应的页面，跟我们前面创建项目的时候看到的界面是一样的\n也可以使用curl -v -i localhost:3000 去查看对应的静态文件\n发布镜像 如果你想为社区贡献力量，那么需要将镜像发布，方便其他开发者使用。\n发布镜像需要如下步骤：\n登陆 dockerhub，注册账号；\n命令行执行 docker login，之后输入我们的账号密码，进行登录；\n推送镜像之前，需要打一个 Tag，执行 docker tag /:\n全流程结束，以后我们要使用，再也不需要「搬石头、砍木头、画图纸、盖房子」了，拎包入住。这也是 docker 独特魅力所在。\n以上，就是如何使用docker去运行一个基础项目的示例。\n完整代码示例\n底层原理简介 docker 底层使用了一些 linux 内核的特性，大概有 namespace，cgroups 和 ufs。\nnamespace docker 使用 linux namespace 构建隔离的环境，它由以下 namespace 组成\npid: 隔离进程 net: 隔离网络 ipc: 隔离 IPC mnt: 隔离文件系统挂载 uts: 隔离hostname user: 隔离uid/gid 进阶技巧总结 镜像仓库与拉取 大部分时候，我们不需要自己构建镜像，我们可以在官方镜像仓库 Docker Hub拉取镜像。\n可以简单使用命令 docker pull 拉取镜像。\n拉取镜像后可以使用 docker inspect 查看镜像信息，如配置及环境变量等。\nbash\n代码解读\n复制代码\n# 加入拉取一个 node:alpine 的镜像 $ docker pull node:alpine # 查看镜像信息 $ docker inspect node:alpine # 列出所有镜像 $ docker images REPOSITORY TAG IMAGE ID CREATED SIZE node alpine f20a6d8b6721 13 days ago 105MB mongo latest 965553e202a4 2 weeks ago 363MB centos latest 9f38484d220f 8 months ago 202MB\n构建镜像与发布 但并不是所有的镜像都可以在镜像仓库中找到，另外我们也需要为我们自己的业务应用去构建镜像。\n使用 docker build 构建镜像，docker build 会使用当前目录的 Dockerfile 构建镜像，至于 Dockerfile 的配置，参考下节。\nbash\n代码解读\n复制代码\n# -t node-base:10: 指定镜像以及版本号 # .: 指当前路径 $ docker build -t node-base:10 .\n当构建镜像成功后可以使用 docker push 推送到镜像仓库。\nDockerfile 在使用 docker 部署自己应用时，往往需要独立构建镜像。\ndocker 使用 Dockerfile 作为配置文件构建镜像，简单看一个 node 应用构建的 dockerfile。\nDockerfile 的各个指令可参考 Dockerfile Reference。\ndockerfile\n代码解读\n复制代码\nFROM node:alpine ADD package.json package-lock.json /code/ WORKDIR /code RUN npm install --production ADD . /code CMD npm start\nFROM 基于一个旧有的基础镜像，格式如下。\ndockerfile\n代码解读\n复制代码\nFROM [AS ] # 在多阶段构建时会用到 FROM [:] [AS ] FROM node:16-alpine FROM nginx:alpine\n而以上所述的 node 与 nginx 基础镜像可在Docker Hub中找到。\n需要了解常用的 alpine、node、nginx 基础镜像。\nADD 把宿主机的文件或目录加入到镜像的文件系统中。\ndockerfile\n代码解读\n复制代码\nADD [--chown=:] ... ADD . /code\nRUN 在镜像中执行命令，由于 ufs 的文件系统，它会在当前镜像的顶层新增一层。\ndockerfile\n代码解读\n复制代码\nRUN RUN npm run build\nCMD 指定容器如何启动。\n一个 Dockerfile 中只允许有一个 CMD\ndockerfile\n代码解读\n复制代码\n# exec form, this is the preferred form CMD [\"executable\",\"param1\",\"param2\"] # as default parameters to ENTRYPOINT CMD [\"param1\",\"param2\"] # shell form CMD command param1 param2 CMD npm start\n容器 镜像与容器的关系，类似于代码与进程的关系。\ndocker run 创建容器 docker stop 停止容器 docker rm 删除容器 创建容器 基于 nginx 镜像创建一个最简单的容器：启动一个最简单的 http 服务\n使用 docker run 来启动容器，docker ps 查看容器启动状态\nbash\n代码解读\n复制代码\n# 启动 nginx 容器，并在本地 8888 端口进行访问 $ docker run --rm -it --name nginx -p 8888:80 nginx:alpine $ docker ps -l CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 404e88f0d90c nginx:alpine \"nginx -g 'daemon of…\" 4 minutes ago Up 4 minutes 0.0.0.0:8888-\u003e80/tcp nginx CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES\n其中:\n--rm：当停止容器时自动清楚容器 -it：可交互式、赋予 tty 的方式 --name：为容器指定名称 -p host-port:container-port：宿主机与容器端口映射，方便容器对外提供服务 nginx:alpine：基于该基础镜像创建容器 此时在宿主机使用 curl 测试容器提供的服务是否正常\nbash\n代码解读\n复制代码\n$ curl localhost:8888 \u003c!DOCTYPE html\u003e Welcome to nginx! Welcome to nginx! If you see this page, the nginx web server is successfully installed and working. Further configuration is required.\nFor online documentation and support please refer to nginx.org. Commercial support is available at nginx.com.\nThank you for using nginx.\n那如果要进入容器环境中呢？使用 docker exec -it container-name 命令\nbash\n代码解读\n复制代码\n$ docker exec -it nginx sh / # / # / #\n容器管理 docker ps 列出所有容器\nbash\n代码解读\n复制代码\n$ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 404e88f0d90c nginx:alpine \"nginx -g 'daemon of…\" 4 minutes ago Up 4 minutes 0.0.0.0:8888-\u003e80/tcp nginx 498e7d74fb4f nginx:alpine \"nginx -g 'daemon of…\" 7 minutes ago Up 7 minutes 80/tcp lucid_mirzakhani 2ce10556dc8f redis:4.0.6-alpine \"docker-entrypoint.s…\" 2 months ago Up 2 months 0.0.0.0:6379-\u003e6379/tcp apolloserverstarter_redis_1\ndocker port 查看容器端口映射\nbash\n代码解读\n复制代码\n$ docker port nginx 80/tcp -\u003e 0.0.0.0:8888\ndocker stats 查看容器资源占用\nbash\n代码解读\n复制代码\n$ docker stats nginx CONTAINER ID NAME CPU % MEM USAGE / LIMIT MEM % NET I/O BLOCK I/O PIDS 404e88f0d90c nginx 0.00% 1.395MiB / 1.796GiB 0.08% 632B / 1.27kB 0B / 0B 2\n容器测试 如果某时某个容器出现问题，可直接进入容器内部进行调试。\nbash\n代码解读\n复制代码\n$ docker exec -it docker compose 在 docker compose v2 中，使用了 docker compose 命令去替代了 docker-compose 命令，可以通过 docker compose version 查看版本号。\n尽管目前 docker compose 最新版本为 v2，但是在本系列专栏中还是使用 v1 进行演示，自行替换即可。\nbash\n代码解读\n复制代码\n$ docker compose version Docker Compose version v2.6.0 # 如果是 v1 版本，则需要通过 docker-compose 查看命令 $ docker-compose version docker-compose version 1.29.2, build 5becea4c docker-py version: 5.0.0 CPython version: 3.7.10 OpenSSL version: OpenSSL 1.1.0l 10 Sep 2019\n在 2022 年 4 月 26 号，compose v2 已经成为了正式版本。更多见 Announcing Compose V2 General Availability\nbash\n代码解读\n复制代码\n# 使用 docker compose ls，可列出系统全局有多少容器是根据 docker compose 启动，比 v1 版本方便很多 $ docker compose ls NAME STATUS CONFIG FILES cra-deploy running(1) /home/train/Documents/cra-deploy/domain.docker-compose.yaml traefik running(1) /home/train/Documents/traefik/docker-compose.yml\n在当前目录，新建配置文件为 docker-compose.yaml，内容如下。\nyaml\n代码解读\n复制代码\nversion: \"3\" services: app: image: \"nginx:alpine\" ports: - 8000:80\n此时可通过 docker compose up 启动容器。\n至此，我们的全部docker教程结束，赶快去尝试一下吧！！！\n任务发布 了解 docker 常见操作，如构建镜像、运行容器、进入容器执行命令 如何进入 docker 容器中进行调试 使用 docker 启动 nginx 容器，并在本地浏览器某端口可直接打开 如何得知启动 nginx 容器的 IP 端口 了解 docker 原理，如何模拟 docker 隔离环境及限制资源 Dockerfile、Image、Container 有何区别 Dockerfile 中 CMD 与 RUN 有何区别 ",
  "wordCount" : "1017",
  "inLanguage": "zh",
  "image": "http://localhost:1313/images/papermod-cover.png","datePublished": "2022-09-05T00:00:00Z",
  "dateModified": "2022-09-05T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "白哥学前端"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/posts/juejin/%E5%86%99%E7%BB%99%E5%89%8D%E7%AB%AF%E7%9A%84docker%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "PaperMod",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/%3Clink%20/%20abs%20url%3E"
    }
  }
}
</script>
</head>

<body class=" dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Home (Alt + H)">
                        
                    <img src="http://localhost:1313/images/msg_hu15231257772499651944.png" alt="" aria-label="logo"
                        height="20">Home</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://github.com/adityatelange/hugo-PaperMod/wiki/" title="WiKi">
                    <span>WiKi</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://localhost:1313/">主页</a>&nbsp;»&nbsp;<a href="http://localhost:1313/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      写给前端的docker使用指南
    </h1>
    <div class="post-description">
      富Web时代，应用变得越来越强大，与此同时也越来越复杂。集群部署、隔离环境、灰度发布以及动态扩容缺一不可，而容器化则成为中间的必要桥梁。本文带你从0搭建一个docker环境，让你0基础入门
    </div>
    <div class="post-meta"><span title='2022-09-05 00:00:00 +0000 UTC'>九月 5, 2022</span>&nbsp;·&nbsp;5 分钟&nbsp;·&nbsp;白哥学前端&nbsp;|&nbsp;<a href="https://github.com/WangShaoyu1/myBlogPaperMod/tree/master/content/posts/jueJin/%e5%86%99%e7%bb%99%e5%89%8d%e7%ab%af%e7%9a%84docker%e4%bd%bf%e7%94%a8%e6%8c%87%e5%8d%97.md" rel="noopener noreferrer" target="_blank">Suggest Changes</a>

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">目录</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e8%ae%b2%e4%b8%aa%e9%9b%a8%e5%89%8d%e5%b0%8f%e6%95%85%e4%ba%8b" aria-label="讲个雨前小故事">讲个雨前小故事</a></li>
                <li>
                    <a href="#%e8%ae%a4%e8%af%86docker" aria-label="认识Docker">认识Docker</a><ul>
                        
                <li>
                    <a href="#%e6%9c%af%e8%af%ad" aria-label="术语">术语</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%ae%89%e8%a3%85-docker" aria-label="安装 Docker">安装 Docker</a><ul>
                        
                <li>
                    <a href="#%e8%bd%af%e4%bb%b6%e5%ae%89%e8%a3%85" aria-label="软件安装">软件安装</a></li>
                <li>
                    <a href="#%e5%91%bd%e4%bb%a4%e8%a1%8c%e5%ae%89%e8%a3%85" aria-label="命令行安装">命令行安装</a></li></ul>
                </li>
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8docker%e5%90%af%e5%8a%a8%e4%b8%80%e4%b8%aavue%e9%a1%b9%e7%9b%ae" aria-label="使用Docker启动一个vue项目">使用Docker启动一个vue项目</a><ul>
                        
                <li>
                    <a href="#%e6%96%b0%e5%bb%ba%e9%a1%b9%e7%9b%ae" aria-label="新建项目">新建项目</a></li>
                <li>
                    <a href="#%e6%96%b0%e5%bb%ba-dockerfile" aria-label="新建 Dockerfile">新建 Dockerfile</a></li>
                <li>
                    <a href="#%e6%8b%89%e5%8f%96-nginx-%e9%95%9c%e5%83%8f" aria-label="拉取 Nginx 镜像">拉取 Nginx 镜像</a></li>
                <li>
                    <a href="#%e9%85%8d%e7%bd%ae%e9%95%9c%e5%83%8f" aria-label="配置镜像">配置镜像</a></li>
                <li>
                    <a href="#%e6%9e%84%e5%bb%ba%e9%95%9c%e5%83%8f" aria-label="构建镜像">构建镜像</a></li>
                <li>
                    <a href="#%e8%bf%90%e8%a1%8c%e5%ae%b9%e5%99%a8" aria-label="运行容器">运行容器</a></li>
                <li>
                    <a href="#%e8%ae%bf%e9%97%ae%e9%a1%b9%e7%9b%ae" aria-label="访问项目">访问项目</a></li>
                <li>
                    <a href="#%e5%8f%91%e5%b8%83%e9%95%9c%e5%83%8f" aria-label="发布镜像">发布镜像</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%ba%95%e5%b1%82%e5%8e%9f%e7%90%86%e7%ae%80%e4%bb%8b" aria-label="底层原理简介">底层原理简介</a><ul>
                        
                <li>
                    <a href="#namespace" aria-label="namespace">namespace</a></li></ul>
                </li>
                <li>
                    <a href="#%e8%bf%9b%e9%98%b6%e6%8a%80%e5%b7%a7%e6%80%bb%e7%bb%93" aria-label="进阶技巧总结">进阶技巧总结</a><ul>
                        
                <li>
                    <a href="#%e9%95%9c%e5%83%8f%e4%bb%93%e5%ba%93%e4%b8%8e%e6%8b%89%e5%8f%96" aria-label="镜像仓库与拉取">镜像仓库与拉取</a></li>
                <li>
                    <a href="#%e6%9e%84%e5%bb%ba%e9%95%9c%e5%83%8f%e4%b8%8e%e5%8f%91%e5%b8%83" aria-label="构建镜像与发布">构建镜像与发布</a></li>
                <li>
                    <a href="#dockerfile" aria-label="Dockerfile">Dockerfile</a></li>
                <li>
                    <a href="#from" aria-label="FROM">FROM</a></li>
                <li>
                    <a href="#add" aria-label="ADD">ADD</a></li>
                <li>
                    <a href="#run" aria-label="RUN">RUN</a></li>
                <li>
                    <a href="#cmd" aria-label="CMD">CMD</a></li>
                <li>
                    <a href="#%e5%ae%b9%e5%99%a8" aria-label="容器">容器</a></li>
                <li>
                    <a href="#%e5%88%9b%e5%bb%ba%e5%ae%b9%e5%99%a8" aria-label="创建容器">创建容器</a></li>
                <li>
                    <a href="#%e5%ae%b9%e5%99%a8%e7%ae%a1%e7%90%86" aria-label="容器管理">容器管理</a></li>
                <li>
                    <a href="#%e5%ae%b9%e5%99%a8%e6%b5%8b%e8%af%95" aria-label="容器测试">容器测试</a></li>
                <li>
                    <a href="#docker-compose" aria-label="docker compose">docker compose</a></li></ul>
                </li>
                <li>
                    <a href="#%e4%bb%bb%e5%8a%a1%e5%8f%91%e5%b8%83" aria-label="任务发布">任务发布</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>富 Web 时代，应用变得越来越强大，与此同时也越来越复杂。集群部署、隔离环境、灰度发布以及动态扩容缺一不可，而容器化则成为中间的必要桥梁。</p>
<p>docker 使应用部署更加轻量，可移植，可扩展，更好的环境隔离也更大程度地避免了生产环境与测试环境不一致的巨大尴尬。</p>
<p>由于 docker 轻便可移植的特点也极大促进了 CI/CD 的发展。 就让我们来探索一下 Docker 的神秘世界，从零到一掌握 Docker 的基本原理与实践操作。</p>
<h2 id="讲个雨前小故事">讲个雨前小故事<a hidden class="anchor" aria-hidden="true" href="#讲个雨前小故事">#</a></h2>
<p>我需要盖一个房子，于是我搬石头、砍木头、画图纸、盖房子。一顿操作，终于把这个房子盖好了。</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a3e862e1f69f42858425a502c6157a17~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<p>结果，住了一段时间，心血来潮想搬到海边去。这时候按以往的办法，我只能去海边，再次搬石头、砍木头、画图纸、盖房子。</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9c5252fa81904480bd909938e0fb0fdd~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<p>烦恼之际，跑来一个叫Dokcer的魔法师教会我一种魔法。这种魔法可以把我盖好的房子复制一份，做成「镜像」，放在我的背包里。</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/07aa240cd37145fdb0066392197886f9~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<p>等我到了海边，就用这个「镜像」，复制一套房子，拎包入住。</p>
<p>是不是很神奇？对应到我们的项目中来，房子就是项目本身，镜像就是项目的复制，背包就是镜像仓库。如果要动态扩容，从仓库中取出项目镜像，随便复制就可以了。Build once，Run anywhere!</p>
<h2 id="认识docker">认识Docker<a hidden class="anchor" aria-hidden="true" href="#认识docker">#</a></h2>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2c09275e60e947e4836c7323809cbbec~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<h3 id="术语">术语<a hidden class="anchor" aria-hidden="true" href="#术语">#</a></h3>
<p>docker 的架构图如下</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b83f7ef6f44445fbbd960dfd3d656820~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<blockquote>
<p>本图片来自官方文档 <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.docker.com%2Fget-started%2Foverview%2F%23docker-architecture" title="https://docs.docker.com/get-started/overview/#docker-architecture">Docker architecture</a></p>
</blockquote>
<p>从图中可以看出几个组成部分</p>
<ul>
<li>docker client: 即 docker 命令行工具</li>
<li>docker host: 宿主机，docker daemon 的运行环境服务器</li>
<li>docker daemon: docker 的守护进程，docker client 通过命令行与 docker daemon 交互</li>
<li>image: 镜像，可以理解为一个容器的模板，通过一个镜像可以创建多个容器</li>
<li>container: 最小型的一个操作系统环境，可以对各种服务以及应用容器化，是镜像的运行实例</li>
<li>registry: 镜像仓库，存储大量镜像，可以从镜像仓库拉取和推送镜像</li>
</ul>
<p>Docker 技术的三大核心概念，分别是：镜像 Image、容器 Container、仓库 Repository。</p>
<h2 id="安装-docker">安装 Docker<a hidden class="anchor" aria-hidden="true" href="#安装-docker">#</a></h2>
<h3 id="软件安装">软件安装<a hidden class="anchor" aria-hidden="true" href="#软件安装">#</a></h3>
<p>在本地安装 docker/docker-compose，通过 <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.docker.com%2Fget-started%2F" title="https://www.docker.com/get-started/">Docker Desktop</a>下载 docker 后，双击安装即可。</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/40673e23937943c483aaaac567b0428f~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<p>如果是个人服务器且为 linux，可参考 <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.docker.com%2Fengine%2Finstall%2Fcentos%2F" title="https://docs.docker.com/engine/install/centos/">安装 docker</a> ,它将 docker 与 docker compose 一并安装。</p>
<h3 id="命令行安装">命令行安装<a hidden class="anchor" aria-hidden="true" href="#命令行安装">#</a></h3>
<p>Homebrew 的 Cask 已经支持 Docker for Mac，因此可以很方便的使用 Homebrew Cask 来进行安装，执行如下命令：</p>
<p><code>brew cask install docker</code></p>
<p>查看版本</p>
<p><code>docker -v</code></p>
<h2 id="使用docker启动一个vue项目">使用Docker启动一个vue项目<a hidden class="anchor" aria-hidden="true" href="#使用docker启动一个vue项目">#</a></h2>
<h3 id="新建项目">新建项目<a hidden class="anchor" aria-hidden="true" href="#新建项目">#</a></h3>
<p>使用Vue 脚手架构建项目</p>
<p><code>npm init vue@latest</code></p>
<p>给项目起个名字，叫做<code>docker-demo-vue</code></p>
<p>然后一路回车。运行命令：</p>
<p>shell</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>cd docker-demo-vue   npm install   npm run dev</code></p>
<p>等待安装完毕依赖包，打开<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A5174%2F%25EF%25BC%258C" title="http://localhost:5174/%EF%BC%8C">http://localhost:5174/，</a></p>
<p>我们就能看到如下界面：</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0b3959745fe84ffab9b262f0b020ec7c~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<p>项目没啥问题，我们对项目进行打包：</p>
<p><code>npm run build</code></p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b59483ca8955418f929b63df4c6b7b14~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<p>可以看到，项目目录下的 Dist 就是我们要部署的静态资源了。</p>
<h3 id="新建-dockerfile">新建 Dockerfile<a hidden class="anchor" aria-hidden="true" href="#新建-dockerfile">#</a></h3>
<p>在<code>docker-demo-vue</code>根目录下执行：<code>touch Dockerfile</code></p>
<p>此时的项目目录结构是这样的：</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3cd273772060479ba041a9ce76f3bd4e~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<h3 id="拉取-nginx-镜像">拉取 Nginx 镜像<a hidden class="anchor" aria-hidden="true" href="#拉取-nginx-镜像">#</a></h3>
<p>首先打开你的Docker，默认会启动。</p>
<p>控制台拉取 Nginx 镜像：</p>
<p><code>docker pull nginx</code></p>
<p>出现下面的信息说明拉取Nginx镜像成功</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/acd02c73c8bd4140a7000daef4a1b858~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<p>在根目录创建 Nginx 配置文件：</p>
<p><code>touch default.conf</code></p>
<p>写入：</p>
<p>conf</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>server {     listen       80;     server_name  localhost;     #charset koi8-r;     access_log  /var/log/nginx/host.access.log  main;     error_log  /var/log/nginx/error.log  error;     location / {         root   /usr/share/nginx/html;         index  index.html index.htm;     }     error_page   500 502 503 504  /50x.html;     location = /50x.html {         root   /usr/share/nginx/html;     } }</code></p>
<h3 id="配置镜像">配置镜像<a hidden class="anchor" aria-hidden="true" href="#配置镜像">#</a></h3>
<p>打开<code>Dockerfile</code>文件，写入：</p>
<p>javascript</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>FROM nginx   COPY dist/ /usr/share/nginx/html/   COPY default.conf /etc/nginx/conf.d/default.conf</code></p>
<p>解释一下代码：</p>
<ul>
<li>
<p><code>FROM nginx</code> 指定该镜像是基于 <code>nginx:latest</code> 镜像而构建的；</p>
</li>
<li>
<p><code>COPY dist/ /usr/share/nginx/html/</code> 命令的意思是将项目根目录下 <code>dist</code> 文件夹中的所有文件复制到镜像中 <code>/usr/share/nginx/html/</code> 目录下；</p>
</li>
<li>
<p><code>COPY default.conf /etc/nginx/conf.d/default.conf</code> 将 <code>default.conf</code> 复制到 <code>etc/nginx/conf.d/default.conf</code>，用本地的 <code>default.conf</code> 配置来替换 Nginx 镜像里的默认配置。</p>
</li>
</ul>
<h3 id="构建镜像">构建镜像<a hidden class="anchor" aria-hidden="true" href="#构建镜像">#</a></h3>
<p>Docker 通过 build 命令来构建镜像：</p>
<p><code>docker build -t docker-demo-vue .</code></p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/72205a4bd7d645e8aba8f94f9720974b~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<p>出现上面的信息，表示构建成成功了。</p>
<p>参数说明：</p>
<ul>
<li>
<p><code>-t</code> 参数给镜像命名 docker-demo-vue</p>
</li>
<li>
<p><code>.</code> 是基于当前目录的 Dockerfile 来构建镜像</p>
</li>
</ul>
<p>运行<code>docker image ls | grep docker-demo-vue</code>查看镜像</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b89dc49a84eb4e3f8c6a1f74f9497206~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<p>可以看到我们构建了一个142MB的项目镜像。</p>
<p>在docker中也可以查看生成的镜像</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4b32a3e1fa3d41b0a6a2fabc4f78fe2d~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<h3 id="运行容器">运行容器<a hidden class="anchor" aria-hidden="true" href="#运行容器">#</a></h3>
<p><code>docker run -d -p 3000:80 --name docker-vue docker-demo-vue</code></p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f987878af7294491bddd75e68bb24e9e~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<p>参数解释：</p>
<ul>
<li>
<p>-d 设置容器在后台运行</p>
</li>
<li>
<p>-p 表示端口映射，把本机的 3000 端口映射到 container 的 80 端口（这样外网就能通过本机的 3000 端口访问了。</p>
</li>
<li>
<p>--name 设置容器名 docker-vue</p>
</li>
<li>
<p>docker-demo-vue 是我们上面构建的镜像名字</p>
</li>
</ul>
<p>可以运行<code>docker ps -a</code> 查看容器id：</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bbe6a154009b48218d88c000043695ab~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<p>可以看到我们刚才打印的<code>docker-vue</code>的容器id为<code>b6c49793ad48</code>，跟上面的容器id<code>b6c49793ad48ccfc106fab63f988881a1467ae25b5c4c9cee87ad4f3515f9607</code>对应，默认是取了前12位。</p>
<p>同样的也可以在桌面端看到，正在运行的docker容器</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/93e73388cc0c46d0a709be93248a4193~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<h3 id="访问项目">访问项目<a hidden class="anchor" aria-hidden="true" href="#访问项目">#</a></h3>
<p>我们打开<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A3000%2F" title="http://localhost:3000/">http://localhost:3000/</a>，就可以在浏览器中看到对应的页面，跟我们前面创建项目的时候看到的界面是一样的</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/30e4d4c4caaf4d3e9803e33e5e041bf3~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<p>也可以使用<code>curl -v -i localhost:3000</code> 去查看对应的静态文件</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f86050487dd94dbfba8ffc6e72604a6a~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
 <img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e025efe159cd407889d8f41bfe0cac83~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt=""  />
</p>
<h3 id="发布镜像">发布镜像<a hidden class="anchor" aria-hidden="true" href="#发布镜像">#</a></h3>
<p>如果你想为社区贡献力量，那么需要将镜像发布，方便其他开发者使用。</p>
<p>发布镜像需要如下步骤：</p>
<p>登陆 <a href="https://link.juejin.cn?target=https%3A%2F%2Fhub.docker.com" title="https://hub.docker.com">dockerhub</a>，注册账号；</p>
<p>命令行执行 <code>docker login</code>，之后输入我们的账号密码，进行登录；</p>
<p>推送镜像之前，需要打一个 Tag，执行 <code>docker tag &lt;image&gt; &lt;username&gt;/&lt;repository&gt;:&lt;tag&gt;</code></p>
<p>全流程结束，以后我们要使用，再也不需要「搬石头、砍木头、画图纸、盖房子」了，拎包入住。这也是 docker 独特魅力所在。</p>
<p>以上，就是如何使用docker去运行一个基础项目的示例。</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxiumubai%2Fdocker-demo-vue" title="https://github.com/xiumubai/docker-demo-vue">完整代码示例</a></p>
<h2 id="底层原理简介">底层原理简介<a hidden class="anchor" aria-hidden="true" href="#底层原理简介">#</a></h2>
<p><code>docker</code> 底层使用了一些 <code>linux</code> 内核的特性，大概有 <code>namespace</code>，<code>cgroups</code> 和 <code>ufs</code>。</p>
<h3 id="namespace">namespace<a hidden class="anchor" aria-hidden="true" href="#namespace">#</a></h3>
<p><code>docker</code> 使用 <code>linux namespace</code> 构建隔离的环境，它由以下 <code>namespace</code> 组成</p>
<ul>
<li><code>pid</code>: 隔离进程</li>
<li><code>net</code>: 隔离网络</li>
<li><code>ipc</code>: 隔离 IPC</li>
<li><code>mnt</code>: 隔离文件系统挂载</li>
<li><code>uts</code>: 隔离hostname</li>
<li><code>user</code>: 隔离uid/gid</li>
</ul>
<h2 id="进阶技巧总结">进阶技巧总结<a hidden class="anchor" aria-hidden="true" href="#进阶技巧总结">#</a></h2>
<h3 id="镜像仓库与拉取">镜像仓库与拉取<a hidden class="anchor" aria-hidden="true" href="#镜像仓库与拉取">#</a></h3>
<p>大部分时候，我们不需要自己构建镜像，我们可以在<a href="https://link.juejin.cn?target=https%3A%2F%2Fhub.docker.com%2Fexplore%2F" title="https://hub.docker.com/explore/">官方镜像仓库 Docker Hub</a>拉取镜像。</p>
<p>可以简单使用命令 <code>docker pull</code> 拉取镜像。</p>
<p>拉取镜像后可以使用 <code>docker inspect</code> 查看镜像信息，如配置及环境变量等。</p>
<p>bash</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code># 加入拉取一个 node:alpine 的镜像 $ docker pull node:alpine # 查看镜像信息 $ docker inspect node:alpine # 列出所有镜像 $ docker images REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE node                alpine              f20a6d8b6721        13 days ago         105MB mongo               latest              965553e202a4        2 weeks ago         363MB centos              latest              9f38484d220f        8 months ago        202MB</code></p>
<h3 id="构建镜像与发布">构建镜像与发布<a hidden class="anchor" aria-hidden="true" href="#构建镜像与发布">#</a></h3>
<p>但并不是所有的镜像都可以在镜像仓库中找到，另外我们也需要为我们自己的业务应用去构建镜像。</p>
<p>使用 <code>docker build</code> 构建镜像，<strong><code>docker build</code> 会使用当前目录的 <code>Dockerfile</code> 构建镜像</strong>，至于 <code>Dockerfile</code> 的配置，参考下节。</p>
<p>bash</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code># -t node-base:10: 指定镜像以及版本号 # .: 指当前路径 $ docker build -t node-base:10 .</code></p>
<p>当构建镜像成功后可以使用 <code>docker push</code> 推送到镜像仓库。</p>
<h3 id="dockerfile">Dockerfile<a hidden class="anchor" aria-hidden="true" href="#dockerfile">#</a></h3>
<p>在使用 <code>docker</code> 部署自己应用时，往往需要独立构建镜像。</p>
<p><code>docker</code> 使用 <code>Dockerfile</code> 作为配置文件构建镜像，简单看一个 <code>node</code> 应用构建的 <code>dockerfile</code>。</p>
<p>Dockerfile 的各个指令可参考 <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.docker.com%2Fengine%2Freference%2Fbuilder%2F" title="https://docs.docker.com/engine/reference/builder/">Dockerfile Reference</a>。</p>
<p>dockerfile</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>FROM node:alpine ADD package.json package-lock.json /code/ WORKDIR /code RUN npm install --production ADD . /code CMD npm start</code></p>
<h3 id="from">FROM<a hidden class="anchor" aria-hidden="true" href="#from">#</a></h3>
<p>基于一个旧有的基础镜像，格式如下。</p>
<p>dockerfile</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>FROM &lt;image&gt; [AS &lt;name&gt;] # 在多阶段构建时会用到 FROM &lt;image&gt;[:&lt;tag&gt;] [AS &lt;name&gt;] FROM node:16-alpine FROM nginx:alpine</code></p>
<p>而以上所述的 node 与 nginx 基础镜像可在<a href="https://link.juejin.cn?target=https%3A%2F%2Fhub.docker.com%2F" title="https://hub.docker.com/">Docker Hub</a>中找到。</p>
<p>需要了解常用的 <code>alpine</code>、<code>node</code>、<code>nginx</code> 基础镜像。</p>
<h3 id="add">ADD<a hidden class="anchor" aria-hidden="true" href="#add">#</a></h3>
<p>把宿主机的文件或目录加入到镜像的文件系统中。</p>
<p>dockerfile</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>ADD [--chown=&lt;user&gt;:&lt;group&gt;] &lt;src&gt;... &lt;dest&gt; ADD . /code</code></p>
<h3 id="run">RUN<a hidden class="anchor" aria-hidden="true" href="#run">#</a></h3>
<p>在镜像中执行命令，由于 <code>ufs</code> 的文件系统，它会在当前镜像的顶层新增一层。</p>
<p>dockerfile</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>RUN &lt;command&gt; RUN npm run build</code></p>
<h3 id="cmd">CMD<a hidden class="anchor" aria-hidden="true" href="#cmd">#</a></h3>
<p>指定容器如何启动。</p>
<p><strong>一个 <code>Dockerfile</code> 中只允许有一个 CMD</strong></p>
<p>dockerfile</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code># exec form, this is the preferred form CMD [&quot;executable&quot;,&quot;param1&quot;,&quot;param2&quot;]  # as default parameters to ENTRYPOINT CMD [&quot;param1&quot;,&quot;param2&quot;] # shell form CMD command param1 param2 CMD npm start</code></p>
<h3 id="容器">容器<a hidden class="anchor" aria-hidden="true" href="#容器">#</a></h3>
<p>镜像与容器的关系，类似于代码与进程的关系。</p>
<ul>
<li><code>docker run</code> 创建容器</li>
<li><code>docker stop</code> 停止容器</li>
<li><code>docker rm</code> 删除容器</li>
</ul>
<h3 id="创建容器">创建容器<a hidden class="anchor" aria-hidden="true" href="#创建容器">#</a></h3>
<p>基于 <code>nginx</code> 镜像创建一个最简单的容器：启动一个最简单的 http 服务</p>
<p>使用 <code>docker run</code> 来启动容器，<code>docker ps</code> 查看容器启动状态</p>
<p>bash</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code># 启动 nginx 容器，并在本地 8888 端口进行访问 $ docker run --rm -it --name nginx -p 8888:80 nginx:alpine $ docker ps -l CONTAINER ID        IMAGE                COMMAND                  CREATED             STATUS              PORTS                    NAMES 404e88f0d90c        nginx:alpine         &quot;nginx -g 'daemon of…&quot;   4 minutes ago       Up 4 minutes        0.0.0.0:8888-&gt;80/tcp     nginx CONTAINER ID        IMAGE                COMMAND                  CREATED             STATUS              PORTS                    NAMES</code></p>
<p>其中:</p>
<ul>
<li><code>--rm</code>：当停止容器时自动清楚容器</li>
<li><code>-it</code>：可交互式、赋予 tty 的方式</li>
<li><code>--name</code>：为容器指定名称</li>
<li><code>-p host-port:container-port</code>：宿主机与容器端口映射，方便容器对外提供服务</li>
<li><code>nginx:alpine</code>：基于该基础镜像创建容器</li>
</ul>
<p>此时在宿主机使用 <code>curl</code> 测试容器提供的服务是否正常</p>
<p>bash</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>$ curl localhost:8888 &lt;!DOCTYPE html&gt; &lt;html&gt; &lt;head&gt; &lt;title&gt;Welcome to nginx!&lt;/title&gt; &lt;style&gt;     body {         width: 35em;         margin: 0 auto;         font-family: Tahoma, Verdana, Arial, sans-serif;     } &lt;/style&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;Welcome to nginx!&lt;/h1&gt; &lt;p&gt;If you see this page, the nginx web server is successfully installed and working. Further configuration is required.&lt;/p&gt; &lt;p&gt;For online documentation and support please refer to &lt;a href=&quot;http://nginx.org/&quot;&gt;nginx.org&lt;/a&gt;.&lt;br/&gt; Commercial support is available at &lt;a href=&quot;http://nginx.com/&quot;&gt;nginx.com&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt; &lt;/body&gt; &lt;/html&gt;</code></p>
<p>那如果要进入容器环境中呢？使用 <code>docker exec -it container-name</code> 命令</p>
<p>bash</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>$ docker exec -it nginx sh / # / # / #</code></p>
<h3 id="容器管理">容器管理<a hidden class="anchor" aria-hidden="true" href="#容器管理">#</a></h3>
<p><code>docker ps</code> 列出所有容器</p>
<p>bash</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>$ docker ps CONTAINER ID        IMAGE                COMMAND                  CREATED             STATUS              PORTS                    NAMES 404e88f0d90c        nginx:alpine         &quot;nginx -g 'daemon of…&quot;   4 minutes ago       Up 4 minutes        0.0.0.0:8888-&gt;80/tcp     nginx 498e7d74fb4f        nginx:alpine         &quot;nginx -g 'daemon of…&quot;   7 minutes ago       Up 7 minutes        80/tcp                   lucid_mirzakhani 2ce10556dc8f        redis:4.0.6-alpine   &quot;docker-entrypoint.s…&quot;   2 months ago        Up 2 months         0.0.0.0:6379-&gt;6379/tcp   apolloserverstarter_redis_1</code></p>
<p><code>docker port</code> 查看容器端口映射</p>
<p>bash</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>$ docker port nginx 80/tcp -&gt; 0.0.0.0:8888</code></p>
<p><code>docker stats</code> 查看容器资源占用</p>
<p>bash</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>$ docker stats nginx CONTAINER ID        NAME                CPU %               MEM USAGE / LIMIT     MEM %               NET I/O             BLOCK I/O           PIDS 404e88f0d90c        nginx               0.00%               1.395MiB / 1.796GiB   0.08%               632B / 1.27kB       0B / 0B             2</code></p>
<h3 id="容器测试">容器测试<a hidden class="anchor" aria-hidden="true" href="#容器测试">#</a></h3>
<p>如果某时某个容器出现问题，可直接进入容器内部进行调试。</p>
<p>bash</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>$ docker exec -it &lt;container_name&gt;</code></p>
<h3 id="docker-compose">docker compose<a hidden class="anchor" aria-hidden="true" href="#docker-compose">#</a></h3>
<p>在 docker compose v2 中，使用了 <code>docker compose</code> 命令去替代了 <code>docker-compose</code> 命令，可以通过 docker compose version 查看版本号。</p>
<blockquote>
<p>尽管目前 docker compose 最新版本为 v2，但是在本系列专栏中还是使用 v1 进行演示，自行替换即可。</p>
</blockquote>
<p>bash</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>$ docker compose version Docker Compose version v2.6.0 # 如果是 v1 版本，则需要通过 docker-compose 查看命令 $ docker-compose version docker-compose version 1.29.2, build 5becea4c docker-py version: 5.0.0 CPython version: 3.7.10 OpenSSL version: OpenSSL 1.1.0l  10 Sep 2019</code></p>
<p>在 2022 年 4 月 26 号，compose v2 已经成为了正式版本。更多见 <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.docker.com%2Fblog%2Fannouncing-compose-v2-general-availability%2F" title="https://www.docker.com/blog/announcing-compose-v2-general-availability/">Announcing Compose V2 General Availability</a></p>
<p>bash</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code># 使用 docker compose ls，可列出系统全局有多少容器是根据 docker compose 启动，比 v1 版本方便很多 $ docker compose ls NAME                STATUS              CONFIG FILES cra-deploy          running(1)          /home/train/Documents/cra-deploy/domain.docker-compose.yaml traefik             running(1)          /home/train/Documents/traefik/docker-compose.yml</code></p>
<p>在当前目录，新建配置文件为 <code>docker-compose.yaml</code>，内容如下。</p>
<p>yaml</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>version: &quot;3&quot; services:   app:     image: &quot;nginx:alpine&quot;     ports:       - 8000:80</code></p>
<p>此时可通过 <code>docker compose up</code> 启动容器。</p>
<p>至此，我们的全部docker教程结束，赶快去尝试一下吧！！！</p>
<h2 id="任务发布">任务发布<a hidden class="anchor" aria-hidden="true" href="#任务发布">#</a></h2>
<ol>
<li>了解 docker 常见操作，如构建镜像、运行容器、进入容器执行命令</li>
<li>如何进入 docker 容器中进行调试</li>
<li>使用 docker 启动 nginx 容器，并在本地浏览器某端口可直接打开</li>
<li>如何得知启动 nginx 容器的 IP 端口</li>
<li>了解 docker 原理，如何模拟 docker 隔离环境及限制资源</li>
<li>Dockerfile、Image、Container 有何区别</li>
<li>Dockerfile 中 CMD 与 RUN 有何区别</li>
</ol>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/%E5%89%8D%E7%AB%AF/">前端</a></li>
      <li><a href="http://localhost:1313/tags/docker/">Docker</a></li>
      <li><a href="http://localhost:1313/tags/vue.js/">Vue.js</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="http://localhost:1313/posts/juejin/langchain.js%E4%BD%A0%E5%BA%94%E8%AF%A5%E7%9F%A5%E5%A4%9A%E7%82%B9/">
    <span class="title">« 上一页</span>
    <br>
    <span>Langchain.js你应该知多点</span>
  </a>
  <a class="next" href="http://localhost:1313/posts/juejin/%E5%89%8D%E7%AB%AF%E5%BA%94%E8%AF%A5%E6%8E%8C%E6%8F%A1%E7%9A%84docker%E7%9F%A5%E8%AF%86/">
    <span class="title">下一页 »</span>
    <br>
    <span>前端应该掌握的Docker知识</span>
  </a>
</nav>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 写给前端的docker使用指南 on x"
            href="https://x.com/intent/tweet/?text=%e5%86%99%e7%bb%99%e5%89%8d%e7%ab%af%e7%9a%84docker%e4%bd%bf%e7%94%a8%e6%8c%87%e5%8d%97&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2f%25E5%2586%2599%25E7%25BB%2599%25E5%2589%258D%25E7%25AB%25AF%25E7%259A%2584docker%25E4%25BD%25BF%25E7%2594%25A8%25E6%258C%2587%25E5%258D%2597%2f&amp;hashtags=%e5%89%8d%e7%ab%af%2cDocker%2cVue.js">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 写给前端的docker使用指南 on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2f%25E5%2586%2599%25E7%25BB%2599%25E5%2589%258D%25E7%25AB%25AF%25E7%259A%2584docker%25E4%25BD%25BF%25E7%2594%25A8%25E6%258C%2587%25E5%258D%2597%2f&amp;title=%e5%86%99%e7%bb%99%e5%89%8d%e7%ab%af%e7%9a%84docker%e4%bd%bf%e7%94%a8%e6%8c%87%e5%8d%97&amp;summary=%e5%86%99%e7%bb%99%e5%89%8d%e7%ab%af%e7%9a%84docker%e4%bd%bf%e7%94%a8%e6%8c%87%e5%8d%97&amp;source=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2f%25E5%2586%2599%25E7%25BB%2599%25E5%2589%258D%25E7%25AB%25AF%25E7%259A%2584docker%25E4%25BD%25BF%25E7%2594%25A8%25E6%258C%2587%25E5%258D%2597%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 写给前端的docker使用指南 on reddit"
            href="https://reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2f%25E5%2586%2599%25E7%25BB%2599%25E5%2589%258D%25E7%25AB%25AF%25E7%259A%2584docker%25E4%25BD%25BF%25E7%2594%25A8%25E6%258C%2587%25E5%258D%2597%2f&title=%e5%86%99%e7%bb%99%e5%89%8d%e7%ab%af%e7%9a%84docker%e4%bd%bf%e7%94%a8%e6%8c%87%e5%8d%97">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 写给前端的docker使用指南 on facebook"
            href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2f%25E5%2586%2599%25E7%25BB%2599%25E5%2589%258D%25E7%25AB%25AF%25E7%259A%2584docker%25E4%25BD%25BF%25E7%2594%25A8%25E6%258C%2587%25E5%258D%2597%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 写给前端的docker使用指南 on whatsapp"
            href="https://api.whatsapp.com/send?text=%e5%86%99%e7%bb%99%e5%89%8d%e7%ab%af%e7%9a%84docker%e4%bd%bf%e7%94%a8%e6%8c%87%e5%8d%97%20-%20http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2f%25E5%2586%2599%25E7%25BB%2599%25E5%2589%258D%25E7%25AB%25AF%25E7%259A%2584docker%25E4%25BD%25BF%25E7%2594%25A8%25E6%258C%2587%25E5%258D%2597%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 写给前端的docker使用指南 on telegram"
            href="https://telegram.me/share/url?text=%e5%86%99%e7%bb%99%e5%89%8d%e7%ab%af%e7%9a%84docker%e4%bd%bf%e7%94%a8%e6%8c%87%e5%8d%97&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2f%25E5%2586%2599%25E7%25BB%2599%25E5%2589%258D%25E7%25AB%25AF%25E7%259A%2584docker%25E4%25BD%25BF%25E7%2594%25A8%25E6%258C%2587%25E5%258D%2597%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 写给前端的docker使用指南 on ycombinator"
            href="https://news.ycombinator.com/submitlink?t=%e5%86%99%e7%bb%99%e5%89%8d%e7%ab%af%e7%9a%84docker%e4%bd%bf%e7%94%a8%e6%8c%87%e5%8d%97&u=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2f%25E5%2586%2599%25E7%25BB%2599%25E5%2589%258D%25E7%25AB%25AF%25E7%259A%2584docker%25E4%25BD%25BF%25E7%2594%25A8%25E6%258C%2587%25E5%258D%2597%2f">
            <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
                <path
                    d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
            </svg>
        </a>
    </li>
</ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span><a href="https://beian.miit.gov.cn/">粤ICP备2023039897号-1</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = '复制';

        function copyingDone() {
            copybutton.innerHTML = '已复制！';
            setTimeout(() => {
                copybutton.innerHTML = '复制';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
