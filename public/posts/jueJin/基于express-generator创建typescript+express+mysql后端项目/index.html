<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>基于express-generator创建TypeScript&#43;Express&#43;MySQL后端项目 | PaperMod</title>
<meta name="keywords" content="后端, TypeScript">
<meta name="description" content="简单的记录一下项目创建的历程：Express&#43;TypeScript&#43;Node.js&#43;MySQL。因为目前网上的教程好像挺少的，所以决定自己写一个。希望对大家有帮助！">
<meta name="author" content="non_hana">
<link rel="canonical" href="http://localhost:1313/posts/juejin/%E5%9F%BA%E4%BA%8Eexpress-generator%E5%88%9B%E5%BB%BAtypescript&#43;express&#43;mysql%E5%90%8E%E7%AB%AF%E9%A1%B9%E7%9B%AE/">
<meta name="google-site-verification" content="XYZabc">
<link crossorigin="anonymous" href="/assets/css/stylesheet.7b92bf4867c997b58ec50f63451b83777173d5bd5593376852abd85746d09d71.css" integrity="sha256-e5K/SGfJl7WOxQ9jRRuDd3Fz1b1VkzdoUqvYV0bQnXE=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="apple-touch-icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="mask-icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="http://localhost:1313/posts/juejin/%E5%9F%BA%E4%BA%8Eexpress-generator%E5%88%9B%E5%BB%BAtypescript&#43;express&#43;mysql%E5%90%8E%E7%AB%AF%E9%A1%B9%E7%9B%AE/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><meta property="og:title" content="基于express-generator创建TypeScript&#43;Express&#43;MySQL后端项目" />
<meta property="og:description" content="简单的记录一下项目创建的历程：Express&#43;TypeScript&#43;Node.js&#43;MySQL。因为目前网上的教程好像挺少的，所以决定自己写一个。希望对大家有帮助！" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/posts/juejin/%E5%9F%BA%E4%BA%8Eexpress-generator%E5%88%9B%E5%BB%BAtypescript&#43;express&#43;mysql%E5%90%8E%E7%AB%AF%E9%A1%B9%E7%9B%AE/" />
<meta property="og:image" content="http://localhost:1313/images/papermod-cover.png" />
<meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-31T00:00:00+00:00" />
<meta property="article:modified_time" content="2023-07-31T00:00:00+00:00" />


<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="http://localhost:1313/images/papermod-cover.png" />
<meta name="twitter:title" content="基于express-generator创建TypeScript&#43;Express&#43;MySQL后端项目"/>
<meta name="twitter:description" content="简单的记录一下项目创建的历程：Express&#43;TypeScript&#43;Node.js&#43;MySQL。因为目前网上的教程好像挺少的，所以决定自己写一个。希望对大家有帮助！"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://localhost:1313/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "基于express-generator创建TypeScript+Express+MySQL后端项目",
      "item": "http://localhost:1313/posts/juejin/%E5%9F%BA%E4%BA%8Eexpress-generator%E5%88%9B%E5%BB%BAtypescript+express+mysql%E5%90%8E%E7%AB%AF%E9%A1%B9%E7%9B%AE/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "基于express-generator创建TypeScript+Express+MySQL后端项目",
  "name": "基于express-generator创建TypeScript\u002bExpress\u002bMySQL后端项目",
  "description": "简单的记录一下项目创建的历程：Express+TypeScript+Node.js+MySQL。因为目前网上的教程好像挺少的，所以决定自己写一个。希望对大家有帮助！",
  "keywords": [
    "后端", "TypeScript"
  ],
  "articleBody": "1. 背景说明 最近由于自己的技术栈进步需要，我在将我的前端项目从原本的Vue2.0+Vuex+ElementUI+JavaScript重构成了Vue3.0+Pinia+ElementPlus+TypeScript之后，我打算趁刚刚熟练完TypeScript的机会，也将我原本使用JavaScript编写的Express后端代码也一并的进行TypeScript的重构。\n但是，众所周知，Express作为一个极其轻量级的Node.js后端框架，你只要安好express的依赖，就可以直接编写app.js然后往里面加接口、加监听，最后用node或者nodemon启动一下就好了；虽然简单易起服务，但是想要使其能够担起规范化、易维护的职责，还是需要有一套规范的框架、文件结构目录来创建。在这里，我选择了express官方提供的一套脚手架express-generator来完成初始项目的创建。但是官方貌似没有随着TypeScript的流行进一步的升级它们的脚手架，因此生成的目录结构还是JavaScript的。为了更好的配合前端接口的数据规范化，将其改造成TypeScript是大势所趋。\n鉴于目前网络上相关的教程较少，我决定自己总结一下我的项目创建历程，供大家参考。\n2. 项目创建+改造流程说明 2.1 使用express-generator创建基本目录结构 首先，全局安装express-generator依赖（之前装过的就不用装了）：\nbash\n代码解读\n复制代码\nnpm install express-generator -g\n安装完成之后，切到你想新建项目的文件夹里面，打开powershell，在里面输入如下命令：\nbash\n代码解读\n复制代码\n# 我这边用ts-express作为我的项目名称，实际创建时根据自身需要进行更改 express ts-express\n之后用vscode或者其他的IDE打开它，然后在终端输入npm install进行依赖的安装。\n最终初步通过express-generator创建的目录结构如下图所示：\n其中：\nbin/www：是整个项目的启动脚本，内部配置了很多和服务启动相关的选项。 public：公共资源，比如前端传给后端图片，后端拿到之后就放在public/images目录里面。 routes：路由模块，配置的就是你和前端相交互的接口。 views：视图模块，包括了一些基础的请求渲染视图。.jade文件是一种模板引擎文件，通常用于创建HTML文档。它以简洁、缩进层次分明的方式来表示HTML标记和结构，是一种被称为Jade的模板语言的源文件格式。当请求的接口不存在或者发生错误的时候，就会调用这些视图。 app.js：express的入口程序，也是整个express的核心模块。app的主要功能有： 注册第三方的Node.js插件。在创建express项目的时候，肯定要用到很多第三方的库里面提供的方法，这时候就需要先通过npm进行下载，之后在app.js里面进行引入，再通过app.use()进行注册。 注册路由模块。引入routes里面写好的路由接口文件，通过app.use()进行注册并指定请求的url。 配置全局错误中间件。一般发生请求错误的时候，可以直接通过在app.js里面配置全局错误中间件捕获错误并抛出，这样就不会因为请求错误而使得后端服务崩溃而自动关闭。 2.2 进行TypeScript改造 在进行TS改造之前，需要安装与TS相关的依赖（之前安装过的就不用装了）：\nbash\n代码解读\n复制代码\nnpm install typescript -D npm install ts-node -g npm install ts-node-dev -g\n进行TS项目的初始化，生成tsconfig.json：\nbash\n代码解读\n复制代码\ntsc --init\n然后把原项目中所有的JS文件统统改成TS文件，把bin目录下的www改成server.ts：\n之后会发现一大堆的错，慢慢来修复就可以了。\napp.ts改造\n在app.ts当中，把所有的CommonJS语法的同步引入require全部换成ES6的import异步引入即可。如：\njs\n代码解读\n复制代码\nvar express = require('express');\n换成：\ntypescript\n代码解读\n复制代码\nimport express from \"express\";\n然后把末尾的模块导出也换成export default默认导出。\njavascript\n代码解读\n复制代码\nmodule.exports = app;\n换成：\ntypescript\n代码解读\n复制代码\nexport default app;\n然后把里面所有的var全部换成const。\n上述步骤完成之后，会发现有很多的包引入错误：\n因为我们还没有安装对应包的类型声明。\n运行以下命令进行安装：\nbash\n代码解读\n复制代码\nnpm install @types/node @types/express @types/http-errors @types/cookie-parser @types/morgan @types/debug -D\n下面两个路由的报错，我们按照改造app.ts的前三步对路由文件进行改造就可以了，也就是把引入模块、导出模块的方式改一下，然后把var改成const就可以。\n把上面的类型报错解决了之后，app.ts中只剩下错误处理器的4个报错：\n比较明显，是因为参数类型推断不出来。我们在最后加一个对这个函数的Express中错误处理函数的类型推断就可以了：\ntypescript\n代码解读\n复制代码\n// error handler app.use(function (err, req, res, next) { // set locals, only providing error in development res.locals.message = err.message; res.locals.error = req.app.get(\"env\") === \"development\" ? err : {}; // render the error page res.status(err.status || 500); res.render(\"error\"); } as express.ErrorRequestHandler);\n至此，app.ts的报错就已经全部解决了。\nserver.ts改造\n也和改造app.ts同理，先把require换成import，然后把var全换成const。因为没有导出，所以不用改导出方式。\n完成后，会发现三个报错：\n其中的val和error报错，可以直接加个any解决报错；最下面的addr的报错，根据提示是因为：\n因为addr可能为null，所以不能用.选择属性。因为我们这边确定addr不为null，所以我们只用加上非空断言操作符!就可以了。\ntypescript\n代码解读\n复制代码\nfunction onListening() { const addr = server.address(); const bind = typeof addr === \"string\" ? \"pipe \" + addr : \"port \" + addr!.port; debug(\"Listening on \" + bind); }\n至此，server.ts的报错就已经全部解决了。\n配置tsconfig.json输出目录+package.json启动运行脚本\n上面的两步都处理好之后，就可以进行编译输出目录的配置。因为最后我们启动服务还是需要采用JavaScript的形式，TypeScript只是我们编写代码的工具。\n打开tsconfig.json，找到\"outDir\"配置项，把它打开，并配置编译输出的目录\"./dist\"：\n但是要注意，ts只是将编译的文件放入到了dist中，但是public和views这些静态的资源没有被打包进去。\n所以要再继续配置静态资源的打包路径。我们在这里使用shelljs进行配置。\nShellJS是一个基于Node.js的包，它提供了一组简单的命令行工具，让你可以在Node.js环境下使用类似于Unix shell（如Bash）的命令。它在Node.js中提供了一个简单的、易于使用的接口，用于执行常见的Shell命令、操作文件系统和进行其他常见的命令行任务。\n安装shelljs及其声明文件：\nbash\n代码解读\n复制代码\nnpm i shelljs @types/shelljs -D\n在根目录新建一个文件：copyStatic.ts，代码如下：\ntypescript\n代码解读\n复制代码\nimport * as shelljs from \"shelljs\"; shelljs.cp(\"-R\" , \"public\" , \"dist\"); shelljs.cp(\"-R\" , \"views\" , \"dist\");\n这段代码的用途是将当前目录中的public目录和views目录，以及它们的所有子目录和文件，递归地复制到名为dist的目录中。\n安装nodemon模块，可以自动监听项目文件的变化，会自动的重启项目：\nbash\n代码解读\n复制代码\nnpm install nodemon -D\n完成后，在package.json内部修改脚本：\njson\n代码解读\n复制代码\n{ // ... \"scripts\": { \"start\": \"nodemon ./dist/bin/server.js\", \"copy-static\": \"ts-node copyStatic.ts\", \"ts-build\": \"tsc\", \"build\": \"npm run ts-build \u0026\u0026 npm run copy-static\" }, // ... }\nstart：对应启动服务。 copy-static：使用ts-node运行copyStatic.ts文件内容，拷贝静态文件资源到dist目录下。 ts-build：运行tsc，打包ts项目，根据outDir输出到对应的目录下。在我们这边就是dist目录下。 build：就是第二条+第三条命令一起运行。 完成后，在tsconfig.json增加：\njson\n代码解读\n复制代码\n{ \"compilerOptions\": { //... }, “exclude”: [ “copyStatic.ts” ] }\n以排除对copyStatic.ts文件的编译，不打到dist里面。\n和MySQL数据库建立连接\n上述步骤完成之后，就可以开始建立和MySQL数据库的连接了。\n首先安装mysql相关的依赖：\nbash\n代码解读\n复制代码\nnpm install mysql @types/mysql -D\n然后在根目录下新建database目录，再在里面新建index.ts文件，之后再里面就可以配置自己想要链接的数据库选项了。下面给出模板：\ntypescript\n代码解读\n复制代码\n// 导入mysql模块 import mysql from \"mysql\"; // 创建数据库连接对象 const db = mysql.createPool({ host: \"你想连接的数据库的IP地址，本地的就默认127.0.0.1\", user: \"你的用户名\", password: \"你的密码\", database: \"你想连接到的数据库\", }); // 向外共享db数据库连接对象 export default db;\n当然，想要正式进行开发的同学可以在本地编写.env文件，将数据库之类的环境信息配置全部塞到这个文件里面，然后再借助如dotenv之类的第三方库来对你的process.env进行统一管理，最后把数据库的配置文件和连接文件分离，可以确保数据库连接的隐蔽性和可维护性。\n上述文件编写好了之后，就可以导入它，并在对应的接口中进行数据库的操作了，这个放在后面说。\nroutes和controller分离\n原本的express-generator给我们生成的routes目录下的文件：index.ts和users.ts都是把接口请求的url和接口的具体逻辑全部放在一起了，这样使得代码冗杂而不易于维护。因此，最好是把具体的逻辑处理函数和接口路径的注册两者分开来存放，在controller目录下定义好对应的处理函数后在末尾导出，最后在routes中对应的文件中进行引入即可。\n以原本的index.ts文件为例：\ntypescript\n代码解读\n复制代码\nimport express from \"express\"; const router = express.Router(); /* GET home page. */ router.get(\"/\", function (req, res, next) { res.render(\"index\", { title: \"Express\" }); }); export default router;\n按照上述原则，我们应该把前面的url和后面的函数分开来进行存放。我们在根目录下新建controller目录，并在里面新建index.ts文件，内部具体的代码如下：\ntypescript\n代码解读\n复制代码\nimport { Request, Response } from 'express'; class UserController { // 注册 register = async (req: Request, res: Response) =\u003e { // ...内部的具体注册逻辑 }; // 登录 login = async (req: Request, res: Response) =\u003e { // ... 内部的具体登录逻辑 }; } // 创建一个上述类的一个实例，将其导出 export const userController = new UserController();\n然后，在routes里面的index.ts文件里面引入：\ntypescript\n代码解读\n复制代码\nimport express from \"express\"; import userController from \"../controller\"; const router = express.Router(); router.get(\"/login\", userController.login); export default router;\n这样，我们就实现了业务和接口本身分离的模式，易于接口的注册和业务的维护。\n最后，有关于db的使用方式，在这里不详细赘述（因为这单独讲会讲很多），没基础有兴趣的同学可以直接开始学习express框架，或者参考我下方的个人项目哦！包含了比较完整的Node.js框架开发目录。\n2.3 改造完成！ 经过上述步骤的改造之后，express+typescript+MySQL的项目已经基本搭建完成了，目录结构如下：\ndist是打包后的代码哦！之后就可以快乐的利用TypeScript进行后端的编写了！！\nps：鉴于大家在本地进行后端项目的调试不可能每次都打个包然后再通过nodemon来运行js代码，这样子调试既麻烦又低效。在这边推荐大家全局安装ts-node，这个npm第三方插件能够让用户直接在控制台执行TS代码，不用先对其进行编译了。这样子之后我们在本地的调试也可以简化为直接在根目录执行：\nbash\n代码解读\n复制代码\nnodemon bin/server.ts\n就可以直接通过TS开启后端服务了，调试也更加的简单了\n3. 结语 希望这篇小小的教程能够带给有需要的同学帮助！我本人也是不断的试错才总结出来如上的方法，如果我哪里有写错或者是不恰当的地方，希望在评论区能够多多指正！\n最后，附上我自己个人从零设计+实现的前后端分离的全栈项目：知识分享平台littleSharing~☆。\n访问地址：little-sharing.vercel.app\n前端技术栈：Vue3.0+TypeScript+ElementPlus+Pinia+Vite\n前端源码：github.com/nonhana/lit…\n后端技术栈：Node.js+Express+TypeScript+MySQL（就是按照我上述的总结方法进行重构的框架）\n后端源码：github.com/nonhana/lit…\n初学Vue或者对Express框架有兴趣的小伙伴可以看一看呀！\n",
  "wordCount" : "464",
  "inLanguage": "zh",
  "image": "http://localhost:1313/images/papermod-cover.png","datePublished": "2023-07-31T00:00:00Z",
  "dateModified": "2023-07-31T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "non_hana"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/posts/juejin/%E5%9F%BA%E4%BA%8Eexpress-generator%E5%88%9B%E5%BB%BAtypescript+express+mysql%E5%90%8E%E7%AB%AF%E9%A1%B9%E7%9B%AE/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "PaperMod",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/%3Clink%20/%20abs%20url%3E"
    }
  }
}
</script>
</head>

<body class=" dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Home (Alt + H)">
                        
                    <img src="http://localhost:1313/images/msg_hu15231257772499651944.png" alt="" aria-label="logo"
                        height="20">Home</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://github.com/adityatelange/hugo-PaperMod/wiki/" title="WiKi">
                    <span>WiKi</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://localhost:1313/">主页</a>&nbsp;»&nbsp;<a href="http://localhost:1313/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      基于express-generator创建TypeScript&#43;Express&#43;MySQL后端项目
    </h1>
    <div class="post-description">
      简单的记录一下项目创建的历程：Express&#43;TypeScript&#43;Node.js&#43;MySQL。因为目前网上的教程好像挺少的，所以决定自己写一个。希望对大家有帮助！
    </div>
    <div class="post-meta"><span title='2023-07-31 00:00:00 +0000 UTC'>七月 31, 2023</span>&nbsp;·&nbsp;3 分钟&nbsp;·&nbsp;non_hana&nbsp;|&nbsp;<a href="https://github.com/WangShaoyu1/myBlogPaperMod/tree/master/content/posts/jueJin/%e5%9f%ba%e4%ba%8eexpress-generator%e5%88%9b%e5%bb%baTypeScript&#43;Express&#43;MySQL%e5%90%8e%e7%ab%af%e9%a1%b9%e7%9b%ae.md" rel="noopener noreferrer" target="_blank">Suggest Changes</a>

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">目录</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#1-%e8%83%8c%e6%99%af%e8%af%b4%e6%98%8e" aria-label="1. 背景说明">1. 背景说明</a></li>
                <li>
                    <a href="#2-%e9%a1%b9%e7%9b%ae%e5%88%9b%e5%bb%ba%e6%94%b9%e9%80%a0%e6%b5%81%e7%a8%8b%e8%af%b4%e6%98%8e" aria-label="2. 项目创建&#43;改造流程说明">2. 项目创建+改造流程说明</a><ul>
                        
                <li>
                    <a href="#21-%e4%bd%bf%e7%94%a8express-generator%e5%88%9b%e5%bb%ba%e5%9f%ba%e6%9c%ac%e7%9b%ae%e5%bd%95%e7%bb%93%e6%9e%84" aria-label="2.1 使用express-generator创建基本目录结构">2.1 使用express-generator创建基本目录结构</a></li>
                <li>
                    <a href="#22-%e8%bf%9b%e8%a1%8ctypescript%e6%94%b9%e9%80%a0" aria-label="2.2 进行TypeScript改造">2.2 进行TypeScript改造</a></li>
                <li>
                    <a href="#23-%e6%94%b9%e9%80%a0%e5%ae%8c%e6%88%90" aria-label="2.3 改造完成！">2.3 改造完成！</a></li></ul>
                </li>
                <li>
                    <a href="#3-%e7%bb%93%e8%af%ad" aria-label="3. 结语">3. 结语</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="1-背景说明">1. 背景说明<a hidden class="anchor" aria-hidden="true" href="#1-背景说明">#</a></h2>
<p>最近由于自己的技术栈进步需要，我在将我的前端项目从原本的<code>Vue2.0+Vuex+ElementUI+JavaScript</code>重构成了<code>Vue3.0+Pinia+ElementPlus+TypeScript</code>之后，我打算趁刚刚熟练完<code>TypeScript</code>的机会，也将我原本使用<code>JavaScript</code>编写的<code>Express</code>后端代码也一并的进行<code>TypeScript</code>的重构。</p>
<p>但是，众所周知，<code>Express</code>作为一个极其轻量级的<code>Node.js</code>后端框架，你只要安好<code>express</code>的依赖，就可以直接编写<code>app.js</code>然后往里面加接口、加监听，最后用<code>node</code>或者<code>nodemon</code>启动一下就好了；虽然简单易起服务，但是想要使其能够担起规范化、易维护的职责，还是需要有一套规范的框架、文件结构目录来创建。在这里，我选择了<code>express</code>官方提供的一套脚手架<code>express-generator</code>来完成初始项目的创建。但是官方貌似没有随着<code>TypeScript</code>的流行进一步的升级它们的脚手架，因此生成的目录结构还是<code>JavaScript</code>的。为了更好的配合前端接口的数据规范化，将其改造成<code>TypeScript</code>是大势所趋。</p>
<p>鉴于目前网络上相关的教程较少，我决定自己总结一下我的项目创建历程，供大家参考。</p>
<h2 id="2-项目创建改造流程说明">2. 项目创建+改造流程说明<a hidden class="anchor" aria-hidden="true" href="#2-项目创建改造流程说明">#</a></h2>
<h3 id="21-使用express-generator创建基本目录结构">2.1 使用express-generator创建基本目录结构<a hidden class="anchor" aria-hidden="true" href="#21-使用express-generator创建基本目录结构">#</a></h3>
<p>首先，全局安装<code>express-generator</code>依赖（之前装过的就不用装了）：</p>
<p>bash</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>npm install express-generator -g</code></p>
<p>安装完成之后，切到你想新建项目的文件夹里面，打开<code>powershell</code>，在里面输入如下命令：</p>
<p>bash</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code># 我这边用ts-express作为我的项目名称，实际创建时根据自身需要进行更改 express ts-express</code></p>
<p>之后用<code>vscode</code>或者其他的<code>IDE</code>打开它，然后在终端输入<code>npm install</code>进行依赖的安装。</p>
<p>最终初步通过<code>express-generator</code>创建的目录结构如下图所示：</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ddc854be4f494205b894dd125a0a798e~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=374&amp;h=647&amp;s=34274&amp;e=png&amp;b=f8f8f8" alt="image-20230731135027688"  />
</p>
<p>其中：</p>
<ul>
<li>bin/www：是整个项目的启动脚本，内部配置了很多和服务启动相关的选项。</li>
<li>public：公共资源，比如前端传给后端图片，后端拿到之后就放在public/images目录里面。</li>
<li>routes：路由模块，配置的就是你和前端相交互的接口。</li>
<li>views：视图模块，包括了一些基础的请求渲染视图。.jade文件是一种模板引擎文件，通常用于创建HTML文档。它以简洁、缩进层次分明的方式来表示HTML标记和结构，是一种被称为Jade的模板语言的源文件格式。当请求的接口不存在或者发生错误的时候，就会调用这些视图。</li>
<li>app.js：express的入口程序，也是整个express的核心模块。app的主要功能有：
<ol>
<li>注册第三方的Node.js插件。在创建express项目的时候，肯定要用到很多第三方的库里面提供的方法，这时候就需要先通过npm进行下载，之后在app.js里面进行引入，再通过<code>app.use()</code>进行注册。</li>
<li>注册路由模块。引入routes里面写好的路由接口文件，通过<code>app.use()</code>进行注册并指定请求的<code>url</code>。</li>
<li>配置全局错误中间件。一般发生请求错误的时候，可以直接通过在app.js里面配置全局错误中间件捕获错误并抛出，这样就不会因为请求错误而使得后端服务崩溃而自动关闭。</li>
</ol>
</li>
</ul>
<h3 id="22-进行typescript改造">2.2 进行TypeScript改造<a hidden class="anchor" aria-hidden="true" href="#22-进行typescript改造">#</a></h3>
<p>在进行TS改造之前，需要安装与TS相关的依赖（之前安装过的就不用装了）：</p>
<p>bash</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>npm install typescript -D npm install ts-node -g npm install ts-node-dev -g</code></p>
<p>进行TS项目的初始化，生成<code>tsconfig.json</code>：</p>
<p>bash</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>tsc --init</code></p>
<p>然后把原项目中所有的JS文件统统改成TS文件，把bin目录下的www改成server.ts：</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/06e3127de71f4557b7e78af21a629d6f~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=376&amp;h=670&amp;s=38114&amp;e=png&amp;b=f8f8f8" alt="image-20230731141110016"  />
</p>
<p>之后会发现一大堆的错，慢慢来修复就可以了。</p>
<ol>
<li>
<p>app.ts改造</p>
<p>在app.ts当中，把所有的CommonJS语法的同步引入require全部换成ES6的import异步引入即可。如：</p>
<p>js</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>var express = require('express');</code></p>
<p>换成：</p>
<p>typescript</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>import express from &quot;express&quot;;</code></p>
<p>然后把末尾的模块导出也换成export default默认导出。</p>
<p>javascript</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>module.exports = app;</code></p>
<p>换成：</p>
<p>typescript</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>export default app;</code></p>
<p>然后把里面所有的var全部换成const。</p>
<p>上述步骤完成之后，会发现有很多的包引入错误：</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/71089e9d520740a7bedca3dc512ef5d5~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=598&amp;h=265&amp;s=41624&amp;e=png&amp;b=fffefe" alt="image-20230731141702715"  />
</p>
<p>因为我们还没有安装对应包的类型声明。</p>
<p>运行以下命令进行安装：</p>
<p>bash</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>npm install @types/node @types/express @types/http-errors @types/cookie-parser @types/morgan @types/debug -D</code></p>
<p>下面两个路由的报错，我们按照改造app.ts的前三步对路由文件进行改造就可以了，也就是把引入模块、导出模块的方式改一下，然后把var改成const就可以。</p>
<p>把上面的类型报错解决了之后，app.ts中只剩下错误处理器的4个报错：</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a0aef9053b9a4607bd7e676274d2d3cb~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=952&amp;h=340&amp;s=43046&amp;e=png&amp;b=ffffff" alt="image-20230731142321650"  />
</p>
<p>比较明显，是因为参数类型推断不出来。我们在最后加一个对这个函数的Express中错误处理函数的类型推断就可以了：</p>
<p>typescript</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>// error handler app.use(function (err, req, res, next) {   // set locals, only providing error in development   res.locals.message = err.message;   res.locals.error = req.app.get(&quot;env&quot;) === &quot;development&quot; ? err : {};   // render the error page   res.status(err.status || 500);   res.render(&quot;error&quot;); } as express.ErrorRequestHandler);</code></p>
<p>至此，app.ts的报错就已经全部解决了。</p>
</li>
<li>
<p>server.ts改造</p>
<p>也和改造app.ts同理，先把require换成import，然后把var全换成const。因为没有导出，所以不用改导出方式。</p>
<p>完成后，会发现三个报错：</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9172ff2be4d0482d985788a1fbbc0eb3~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1055&amp;h=763&amp;s=58217&amp;e=png&amp;b=ffffff" alt="20230731142921046"  />
</p>
<p>其中的val和error报错，可以直接加个any解决报错；最下面的addr的报错，根据提示是因为：</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1c3fa1b0c03f45dab29020b6587af630~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1350&amp;h=307&amp;s=49249&amp;e=png&amp;b=fefefe" alt="image-20230731143027257"  />
</p>
<p>因为<code>addr</code>可能为<code>null</code>，所以不能用<code>.</code>选择属性。因为我们这边确定<code>addr</code>不为<code>null</code>，所以我们只用加上非空断言操作符<code>!</code>就可以了。</p>
<p>typescript</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>function onListening() {   const addr = server.address();   const bind = typeof addr === &quot;string&quot; ? &quot;pipe &quot; + addr : &quot;port &quot; + addr!.port;   debug(&quot;Listening on &quot; + bind); }</code></p>
<p>至此，server.ts的报错就已经全部解决了。</p>
</li>
<li>
<p>配置tsconfig.json输出目录+package.json启动运行脚本</p>
<p>上面的两步都处理好之后，就可以进行编译输出目录的配置。因为最后我们启动服务还是需要采用<code>JavaScript</code>的形式，<code>TypeScript</code>只是我们编写代码的工具。</p>
<p>打开tsconfig.json，找到&quot;outDir&quot;配置项，把它打开，并配置编译输出的目录&quot;./dist&quot;：</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fef93f20b7894b4daa4566a1c8ba385c~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=568&amp;h=293&amp;s=32833&amp;e=png&amp;b=ffffff" alt="image-20230731143952577"  />
</p>
<p>但是要注意，<strong>ts只是将编译的文件放入到了dist中，但是public和views这些静态的资源没有被打包进去</strong>。</p>
<p>所以要再继续配置静态资源的打包路径。我们在这里使用<code>shelljs</code>进行配置。</p>
<p>ShellJS是一个基于Node.js的包，它提供了一组简单的命令行工具，让你可以在Node.js环境下使用类似于Unix shell（如Bash）的命令。它在Node.js中提供了一个简单的、易于使用的接口，用于执行常见的Shell命令、操作文件系统和进行其他常见的命令行任务。</p>
<p>安装<code>shelljs</code>及其声明文件：</p>
<p>bash</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>npm i shelljs @types/shelljs -D</code></p>
<p>在根目录新建一个文件：<code>copyStatic.ts</code>，代码如下：</p>
<p>typescript</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>import * as shelljs from &quot;shelljs&quot;; shelljs.cp(&quot;-R&quot; , &quot;public&quot; , &quot;dist&quot;); shelljs.cp(&quot;-R&quot; , &quot;views&quot; , &quot;dist&quot;);</code></p>
<p>这段代码的用途是将当前目录中的<code>public</code>目录和<code>views</code>目录，以及它们的所有子目录和文件，递归地复制到名为<code>dist</code>的目录中。</p>
<p>安装<code>nodemon</code>模块，可以自动监听项目文件的变化，会自动的重启项目：</p>
<p>bash</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>npm install nodemon -D</code></p>
<p>完成后，在package.json内部修改脚本：</p>
<p>json</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>{   // ...   &quot;scripts&quot;: {     &quot;start&quot;: &quot;nodemon ./dist/bin/server.js&quot;,     &quot;copy-static&quot;: &quot;ts-node copyStatic.ts&quot;,     &quot;ts-build&quot;: &quot;tsc&quot;,     &quot;build&quot;: &quot;npm run ts-build &amp;&amp; npm run copy-static&quot;   },   // ... }</code></p>
<ul>
<li>start：对应启动服务。</li>
<li>copy-static：使用ts-node运行copyStatic.ts文件内容，拷贝静态文件资源到dist目录下。</li>
<li>ts-build：运行tsc，打包ts项目，根据outDir输出到对应的目录下。在我们这边就是dist目录下。</li>
<li>build：就是第二条+第三条命令一起运行。</li>
</ul>
<p>完成后，在tsconfig.json增加：</p>
<p>json</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>{   &quot;compilerOptions&quot;: {     //...   },   “exclude”: [     “copyStatic.ts”   ] }</code></p>
<p>以排除对copyStatic.ts文件的编译，不打到dist里面。</p>
</li>
<li>
<p>和MySQL数据库建立连接</p>
<p>上述步骤完成之后，就可以开始建立和MySQL数据库的连接了。</p>
<p>首先安装mysql相关的依赖：</p>
<p>bash</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>npm install mysql @types/mysql -D</code></p>
<p>然后在根目录下新建<code>database</code>目录，再在里面新建<code>index.ts</code>文件，之后再里面就可以配置自己想要链接的数据库选项了。下面给出模板：</p>
<p>typescript</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>// 导入mysql模块 import mysql from &quot;mysql&quot;; // 创建数据库连接对象 const db = mysql.createPool({   host: &quot;你想连接的数据库的IP地址，本地的就默认127.0.0.1&quot;,   user: &quot;你的用户名&quot;,   password: &quot;你的密码&quot;,   database: &quot;你想连接到的数据库&quot;, }); // 向外共享db数据库连接对象 export default db;</code></p>
<p>当然，想要正式进行开发的同学可以在本地编写<code>.env</code>文件，将数据库之类的环境信息配置全部塞到这个文件里面，然后再借助如<code>dotenv</code>之类的第三方库来对你的<code>process.env</code>进行统一管理，最后把数据库的配置文件和连接文件分离，可以确保数据库连接的隐蔽性和可维护性。</p>
<p>上述文件编写好了之后，就可以导入它，并在对应的接口中进行数据库的操作了，这个放在后面说。</p>
</li>
<li>
<p>routes和controller分离</p>
<p>原本的express-generator给我们生成的routes目录下的文件：index.ts和users.ts都是把接口请求的url和接口的具体逻辑全部放在一起了，这样使得代码冗杂而不易于维护。因此，最好是把具体的逻辑处理函数和接口路径的注册两者分开来存放，在controller目录下定义好对应的处理函数后在末尾导出，最后在routes中对应的文件中进行引入即可。</p>
<p>以原本的index.ts文件为例：</p>
<p>typescript</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>import express from &quot;express&quot;; const router = express.Router(); /* GET home page. */ router.get(&quot;/&quot;, function (req, res, next) {   res.render(&quot;index&quot;, { title: &quot;Express&quot; }); }); export default router;</code></p>
<p>按照上述原则，我们应该把前面的url和后面的函数分开来进行存放。我们在根目录下新建controller目录，并在里面新建index.ts文件，内部具体的代码如下：</p>
<p>typescript</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>import { Request, Response } from 'express'; class UserController { 	// 注册 	register = async (req: Request, res: Response) =&gt; {         // ...内部的具体注册逻辑 	}; 	// 登录 	login = async (req: Request, res: Response) =&gt; {      	// ... 内部的具体登录逻辑 	}; } // 创建一个上述类的一个实例，将其导出 export const userController = new UserController();</code></p>
<p>然后，在routes里面的index.ts文件里面引入：</p>
<p>typescript</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>import express from &quot;express&quot;; import userController from &quot;../controller&quot;; const router = express.Router(); router.get(&quot;/login&quot;, userController.login); export default router;</code></p>
<p>这样，我们就实现了业务和接口本身分离的模式，易于接口的注册和业务的维护。</p>
<p>最后，有关于db的使用方式，在这里不详细赘述（因为这单独讲会讲很多），没基础有兴趣的同学可以直接开始学习express框架，或者参考我下方的个人项目哦！包含了比较完整的<code>Node.js</code>框架开发目录。</p>
</li>
</ol>
<h3 id="23-改造完成">2.3 改造完成！<a hidden class="anchor" aria-hidden="true" href="#23-改造完成">#</a></h3>
<p>经过上述步骤的改造之后，express+typescript+MySQL的项目已经基本搭建完成了，目录结构如下：</p>
<p><img loading="lazy" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b3d394b117154029b00d8af2f6691560~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=377&amp;h=866&amp;s=46979&amp;e=png&amp;b=f7f7f7" alt="image-20230731154712407"  />
</p>
<p>dist是打包后的代码哦！之后就可以快乐的利用TypeScript进行后端的编写了！！</p>
<p><strong>ps：鉴于大家在本地进行后端项目的调试不可能每次都打个包然后再通过nodemon来运行js代码，这样子调试既麻烦又低效。在这边推荐大家全局安装<code>ts-node</code>，这个<code>npm</code>第三方插件能够让用户直接在控制台执行<code>TS</code>代码，不用先对其进行编译了。这样子之后我们在本地的调试也可以简化为直接在根目录执行：</strong></p>
<p>bash</p>
<p>代码解读</p>
<p>复制代码</p>
<p><code>nodemon bin/server.ts</code></p>
<p><strong>就可以直接通过<code>TS</code>开启后端服务了，调试也更加的简单了</strong></p>
<h2 id="3-结语">3. 结语<a hidden class="anchor" aria-hidden="true" href="#3-结语">#</a></h2>
<p>希望这篇小小的教程能够带给有需要的同学帮助！我本人也是不断的试错才总结出来如上的方法，如果我哪里有写错或者是不恰当的地方，希望在评论区能够多多指正！</p>
<p>最后，附上我自己个人从零设计+实现的前后端分离的全栈项目：知识分享平台<code>littleSharing~☆</code>。</p>
<ul>
<li>
<p>访问地址：<a href="https://link.juejin.cn?target=https%3A%2F%2Flittle-sharing.vercel.app" title="https://little-sharing.vercel.app">little-sharing.vercel.app</a></p>
</li>
<li>
<p>前端技术栈：<code>Vue3.0+TypeScript+ElementPlus+Pinia+Vite</code></p>
<p>前端源码：<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnonhana%2FlittleSharing-Frontend" title="https://github.com/nonhana/littleSharing-Frontend">github.com/nonhana/lit…</a></p>
</li>
<li>
<p>后端技术栈：<code>Node.js+Express+TypeScript+MySQL</code>（就是按照我上述的总结方法进行重构的框架）</p>
<p>后端源码：<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnonhana%2FlittleSharing-Backend-TS" title="https://github.com/nonhana/littleSharing-Backend-TS">github.com/nonhana/lit…</a></p>
</li>
</ul>
<p>初学Vue或者对Express框架有兴趣的小伙伴可以看一看呀！</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/%E5%90%8E%E7%AB%AF/">后端</a></li>
      <li><a href="http://localhost:1313/tags/typescript/">TypeScript</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="http://localhost:1313/posts/juejin/%E8%B7%A8%E7%AB%AF%E6%8A%80%E6%9C%AF%E4%B8%8B%E7%9A%84%E9%B8%BF%E8%92%99%E5%BA%94%E7%94%A8%E6%96%87%E4%BB%B6%E8%B5%84%E6%BA%90%E8%AE%BF%E9%97%AE%E7%AD%96%E7%95%A5%E4%B8%8E%E5%AE%9E%E8%B7%B5/">
    <span class="title">« 上一页</span>
    <br>
    <span>跨端技术下的鸿蒙应用：文件资源访问策略与实践</span>
  </a>
  <a class="next" href="http://localhost:1313/posts/juejin/%E8%BF%98%E5%AD%A6%E9%B8%BF%E8%92%99%E5%8E%9F%E7%94%9Fvue3&#43;uniapp%E5%8F%AF%E4%BB%A5%E7%9B%B4%E6%8E%A5%E5%BC%80%E5%8F%91%E9%B8%BF%E8%92%99%E5%95%A6/">
    <span class="title">下一页 »</span>
    <br>
    <span>还学鸿蒙原生？vue3&#43;uniapp可以直接开发鸿蒙啦！</span>
  </a>
</nav>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 基于express-generator创建TypeScript&#43;Express&#43;MySQL后端项目 on x"
            href="https://x.com/intent/tweet/?text=%e5%9f%ba%e4%ba%8eexpress-generator%e5%88%9b%e5%bb%baTypeScript%2bExpress%2bMySQL%e5%90%8e%e7%ab%af%e9%a1%b9%e7%9b%ae&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2f%25E5%259F%25BA%25E4%25BA%258Eexpress-generator%25E5%2588%259B%25E5%25BB%25BAtypescript%2bexpress%2bmysql%25E5%2590%258E%25E7%25AB%25AF%25E9%25A1%25B9%25E7%259B%25AE%2f&amp;hashtags=%e5%90%8e%e7%ab%af%2cTypeScript">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 基于express-generator创建TypeScript&#43;Express&#43;MySQL后端项目 on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2f%25E5%259F%25BA%25E4%25BA%258Eexpress-generator%25E5%2588%259B%25E5%25BB%25BAtypescript%2bexpress%2bmysql%25E5%2590%258E%25E7%25AB%25AF%25E9%25A1%25B9%25E7%259B%25AE%2f&amp;title=%e5%9f%ba%e4%ba%8eexpress-generator%e5%88%9b%e5%bb%baTypeScript%2bExpress%2bMySQL%e5%90%8e%e7%ab%af%e9%a1%b9%e7%9b%ae&amp;summary=%e5%9f%ba%e4%ba%8eexpress-generator%e5%88%9b%e5%bb%baTypeScript%2bExpress%2bMySQL%e5%90%8e%e7%ab%af%e9%a1%b9%e7%9b%ae&amp;source=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2f%25E5%259F%25BA%25E4%25BA%258Eexpress-generator%25E5%2588%259B%25E5%25BB%25BAtypescript%2bexpress%2bmysql%25E5%2590%258E%25E7%25AB%25AF%25E9%25A1%25B9%25E7%259B%25AE%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 基于express-generator创建TypeScript&#43;Express&#43;MySQL后端项目 on reddit"
            href="https://reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2f%25E5%259F%25BA%25E4%25BA%258Eexpress-generator%25E5%2588%259B%25E5%25BB%25BAtypescript%2bexpress%2bmysql%25E5%2590%258E%25E7%25AB%25AF%25E9%25A1%25B9%25E7%259B%25AE%2f&title=%e5%9f%ba%e4%ba%8eexpress-generator%e5%88%9b%e5%bb%baTypeScript%2bExpress%2bMySQL%e5%90%8e%e7%ab%af%e9%a1%b9%e7%9b%ae">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 基于express-generator创建TypeScript&#43;Express&#43;MySQL后端项目 on facebook"
            href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2f%25E5%259F%25BA%25E4%25BA%258Eexpress-generator%25E5%2588%259B%25E5%25BB%25BAtypescript%2bexpress%2bmysql%25E5%2590%258E%25E7%25AB%25AF%25E9%25A1%25B9%25E7%259B%25AE%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 基于express-generator创建TypeScript&#43;Express&#43;MySQL后端项目 on whatsapp"
            href="https://api.whatsapp.com/send?text=%e5%9f%ba%e4%ba%8eexpress-generator%e5%88%9b%e5%bb%baTypeScript%2bExpress%2bMySQL%e5%90%8e%e7%ab%af%e9%a1%b9%e7%9b%ae%20-%20http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2f%25E5%259F%25BA%25E4%25BA%258Eexpress-generator%25E5%2588%259B%25E5%25BB%25BAtypescript%2bexpress%2bmysql%25E5%2590%258E%25E7%25AB%25AF%25E9%25A1%25B9%25E7%259B%25AE%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 基于express-generator创建TypeScript&#43;Express&#43;MySQL后端项目 on telegram"
            href="https://telegram.me/share/url?text=%e5%9f%ba%e4%ba%8eexpress-generator%e5%88%9b%e5%bb%baTypeScript%2bExpress%2bMySQL%e5%90%8e%e7%ab%af%e9%a1%b9%e7%9b%ae&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2f%25E5%259F%25BA%25E4%25BA%258Eexpress-generator%25E5%2588%259B%25E5%25BB%25BAtypescript%2bexpress%2bmysql%25E5%2590%258E%25E7%25AB%25AF%25E9%25A1%25B9%25E7%259B%25AE%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 基于express-generator创建TypeScript&#43;Express&#43;MySQL后端项目 on ycombinator"
            href="https://news.ycombinator.com/submitlink?t=%e5%9f%ba%e4%ba%8eexpress-generator%e5%88%9b%e5%bb%baTypeScript%2bExpress%2bMySQL%e5%90%8e%e7%ab%af%e9%a1%b9%e7%9b%ae&u=http%3a%2f%2flocalhost%3a1313%2fposts%2fjuejin%2f%25E5%259F%25BA%25E4%25BA%258Eexpress-generator%25E5%2588%259B%25E5%25BB%25BAtypescript%2bexpress%2bmysql%25E5%2590%258E%25E7%25AB%25AF%25E9%25A1%25B9%25E7%259B%25AE%2f">
            <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
                <path
                    d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
            </svg>
        </a>
    </li>
</ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span><a href="https://beian.miit.gov.cn/">粤ICP备2023039897号-1</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = '复制';

        function copyingDone() {
            copybutton.innerHTML = '已复制！';
            setTimeout(() => {
                copybutton.innerHTML = '复制';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
