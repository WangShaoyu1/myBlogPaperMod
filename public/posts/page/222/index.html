<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Posts | PaperMod</title>
<meta name="keywords" content="">
<meta name="description" content="Posts - PaperMod">
<meta name="author" content="Theme PaperMod">
<link rel="canonical" href="http://localhost:1313/posts/">
<meta name="google-site-verification" content="XYZabc">
<link crossorigin="anonymous" href="/assets/css/stylesheet.7b92bf4867c997b58ec50f63451b83777173d5bd5593376852abd85746d09d71.css" integrity="sha256-e5K/SGfJl7WOxQ9jRRuDd3Fz1b1VkzdoUqvYV0bQnXE=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="apple-touch-icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="mask-icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="http://localhost:1313/posts/index.xml">
<link rel="alternate" hreflang="zh" href="http://localhost:1313/posts/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><meta property="og:title" content="Posts" />
<meta property="og:description" content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://localhost:1313/posts/" />
<meta property="og:image" content="http://localhost:1313/images/papermod-cover.png" />



<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="http://localhost:1313/images/papermod-cover.png" />
<meta name="twitter:title" content="Posts"/>
<meta name="twitter:description" content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://localhost:1313/posts/"
    }
  ]
}
</script>
</head>

<body class="list dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Home (Alt + H)">
                        
                    <img src="http://localhost:1313/images/msg_hu15231257772499651944.png" alt="" aria-label="logo"
                        height="20">Home</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://github.com/adityatelange/hugo-PaperMod/wiki/" title="WiKi">
                    <span>WiKi</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header"><div class="breadcrumbs"><a href="http://localhost:1313/">主页</a></div>
  <h1>
    Posts
    <a href="/posts/index.xml" title="RSS" aria-label="RSS">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
        stroke-linecap="round" stroke-linejoin="round" height="23">
        <path d="M4 11a9 9 0 0 1 9 9" />
        <path d="M4 4a16 16 0 0 1 16 16" />
        <circle cx="5" cy="19" r="1" />
      </svg>
    </a>
  </h1>
</header>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">H5端内容需求评估
    </h2>
  </header>
  <div class="entry-content">
    <p>一、线上版本内容 现状：
1、业务冷启动，交互内容不足是正常现象；先用一定条数内容将业务运行起来，持续收集交互数据集；
2、当前版本FAQ与指令内容较深（标准问/相似问涉及业务内容过于细节、句子复杂），用户难触及，命中率低；
3、手机端，用户可能更倾向于文本交互；在文本交互场景下，用户不一定输入完整句子，需要处理短句与短语的query；（0912使用40个业务关键词测试，命中率仅45%，未进一步评估内容关联正确率）
4、配置讯飞闲聊库支持语音技能有限，开放性问题难以处理。
处理方案：
1、业务持续运行期间，根据会话记录，添加指令、FAQ，维护相似问；
2、梳理出业务关联高频词与短语，添加到指定指令或FAQ的相似问，用高频词先将用户意图过滤一道，提高命中率；需要仔细维护关键词及对应命中query，处理与其他内容的误触；
3、寻找NLP对话/闲聊数据集，暂时先用FAQ库进行训练后提供服务，处理短期的开放式闲聊需求；
4、闲聊接第三方成熟大模型服务，处理开放性问题；或接入用自有业务数据集训练过的开源模型。
内容版本概要： 1、干预内容：41个关键词及对应分发内容，详见干预内容-20230920
2、FAQ分类及内容情况：
2.1 基于截至0906的855条FAQ内容，重新分类、简要优化，截至20230925概要情况如下
FAQ分类
数量
线上-万得厨的厨
线下-自助美食餐厅
FAQ分类
数量
线上-万得厨的厨
线下-自助美食餐厅
万得美角色属性
40
未调整
配
寒暄话术
5
待更新添加（用炉端版本）
配
美食知识
312
未调整
配
万得厨宣传
12
轻量修订
配，少量需修改
...</p>
  </div>
  <footer class="entry-footer">1 分钟&nbsp;·&nbsp;王宇</footer>
  <a class="entry-link" aria-label="post link to H5端内容需求评估" href="http://localhost:1313/posts/wiki/h5%E7%AB%AF%E5%86%85%E5%AE%B9%E9%9C%80%E6%B1%82%E8%AF%84%E4%BC%B0/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">算法接口设计
    </h2>
  </header>
  <div class="entry-content">
    <p> 11. 领域通用检索服务接口 22. 知识插件检索服务接口 33. 知识库构建文件格式及限制 应用名(nacos注册的应用名)：yingzi-algorithm-rag
开发环境： 172.18.64.37
测试/预生产/生产环境：k8s
算法服务错误码：
错误码
触发条件
错误信息示例
备注
错误码
触发条件
错误信息示例
备注
100000000
成功返回
100100201
数据越界
数据越界：问题长度超出限制：[1, 750]
100100203
输入参数类型/格式错误。
不支持的数据格式：app_type
100100205
输入字段缺失
输入字段缺失：query
100100206
输入数据缺失
输入数据缺失：knowledge_configs
100600900
算法服务未知错误/服务器内部错误
未知错误，请联系算法管理员
...</p>
  </div>
  <footer class="entry-footer">3 分钟&nbsp;·&nbsp;王宇</footer>
  <a class="entry-link" aria-label="post link to 算法接口设计" href="http://localhost:1313/posts/wiki/%E7%AE%97%E6%B3%95%E6%8E%A5%E5%8F%A3%E8%AE%BE%E8%AE%A1/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">向量模型GPU支持镜像制作
    </h2>
  </header>
  <div class="entry-content">
    <p>1、使用基础镜像启动一个容器：nvcr.io/nvidia/cuda:12.2.0-runtime-ubuntu20.04
2、更新、安装依赖、选择时区、安装基础包
apt update
apt -y upgrade
apt install build-essential zlib1g-dev libffi-dev libssl-dev libreoffice -y
apt install ca-certificates apt-transport-https software-properties-common lsb-release -y
apt-get -y install $(grep -vE “^\s*#” /tmp/base_requirements.txt | tr “\r\n” &#34; “)
base_requirements.txt
3、下载 Python 3.11 源代码、配置、编译并安装
离线下载python3.11包：https://www.python.org/ftp/python/3.11.6/Python-3.11.6.tgz
tar -xzvf Python-3.11.6.tgz
cd Python-3.11.6
# 在配置文件时通过–prefix指定安装路径
# mkdir /usr/local/python3.11
# ./configure –prefix=/usr/local/python3.11
./configure
./configure –enable-optimizations # 执行后无序额外配置可直接使用python3调用python编辑器
make &amp;&amp; make install
4、验证安装、修改软链接
python3.11 –version
python3 –version
pip3 –version
which python3
# rm -rf /usr/local/bin/python
ln -s /usr/local/bin/python3.11 /usr/local/bin/python
# 升级pip版本
pip3 install –upgrade pip
5、清除安装包
rm -r Python-3.11.6.tgz
rm -r Python-3.11.6
6、安装指定版本的pytorch（安装太慢可在对应网址下载后离线安装）
# pip install torch==2.1.0 –index-url https://download.pytorch.org/whl/cu121
# pip install torch==2.1.0 -f https://download.pytorch.org/whl/cu121/torch_stable.html
pip install torch-2.1.0&#43;cu121-cp311-cp311-linux_x86_64.whl
pip install numpy==1.24.4 -i https://mirrors.aliyun.com/pypi/simple/ –trusted-host mirrors.aliyun.com/pypi
7、验证是否安装成功
python3
import torch
torch.cuda.is_available() # 成功返回true
...</p>
  </div>
  <footer class="entry-footer">1 分钟&nbsp;·&nbsp;王宇</footer>
  <a class="entry-link" aria-label="post link to 向量模型GPU支持镜像制作" href="http://localhost:1313/posts/wiki/%E5%90%91%E9%87%8F%E6%A8%A1%E5%9E%8Bgpu%E6%94%AF%E6%8C%81%E9%95%9C%E5%83%8F%E5%88%B6%E4%BD%9C/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">RAG技术实践及应用中的探索与思考
    </h2>
  </header>
  <div class="entry-content">
    <p> 1 前言 2一、RAG 技术介绍 2.11. 概述 2.22. 知识库的构建 2.2.12.1 文档拆分与处理 2.2.22.2 知识向量化入库 2.33. 检索召回 2.3.13.1 关键词检索 2.3.23.2 向量检索 2.3.33.3 召回重排序 2.44. 第三方平台能力概要 3二、RAG 技术实践 3.11. 短文本类问答实践 3.1.11.1 知识库的构建 3.1.21.2 检索应用 3.1.31.3 思考总结 3.22. 长文档类问答实践 3.2.12.1 知识库的构建 3.2.22.2 探索总结 3.33. 表格类问答实践 3.3.13.1 知识库的构建 3.3.23.2 探索总结 4三、思考与总结 前言 传统自然语言处理（NLP）算法和大规模语言模型（Large Language Models, LLMs）是自然语言处理领域的两大技术分支，各有其特点和适用场景。下面是两者优缺点的对比：
...</p>
  </div>
  <footer class="entry-footer">2 分钟&nbsp;·&nbsp;王宇</footer>
  <a class="entry-link" aria-label="post link to RAG技术实践及应用中的探索与思考" href="http://localhost:1313/posts/wiki/rag%E6%8A%80%E6%9C%AF%E5%AE%9E%E8%B7%B5%E5%8F%8A%E5%BA%94%E7%94%A8%E4%B8%AD%E7%9A%84%E6%8E%A2%E7%B4%A2%E4%B8%8E%E6%80%9D%E8%80%83/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">大模型知识问答技术实践方案总结
    </h2>
  </header>
  <div class="entry-content">
    <p>1. 文档拆分与处理 1.1. 文档拆分 1.1.1. 粒度分级 **FAQ 类型/短文本文档：**直接按照一问一答的粒度拆分。 长文本/带章节标题的书籍类文档：需要分级（段落、各章节）进行拆分。 **结构化/表格数据类文档：**按列、行进行拆分。 1.1.2. 基本原则 **整体拆分原则：**保证语义完整性、一致性。 **FAQ 类长度限制：**最长不能超过750个词（太长的内容做摘要），最短不能少于1个词（过短的内容去除）。 **长文本类长度限制：**最长不能超过400个词（太长的内容做摘要），最短段落级内容长度不能少于30个词，章节级内容长度不能少于50个词（过短的内容去除）。 **表格类长度限制：**最长不能超过400个词，最短表格内容不能为空。 1.1.3. 拆分方式 **FAQ 类型文档：**根据每一条问题&#43;答案之间的分隔符进行拆分，该类文件可以是具有明确分隔符的 txt\doc\docx 文本形式，也可以是带表头区分的表格形式。通常问题和答案都可以作为检索知识入库，故可以拼接每一对问题&#43;答案作为一条独立的知识，常以换行符（\n）作为每条知识的分隔符。 **长文本类文档：**该类文件一般要求是带不同层级标题的docx或doc文本，先按段落进行拆分，然后单独拆分每个章节下的文本。通常需要在文本中引入各级标题信息，增强文本的语义完整性。因为涉及多级拆分，所以还需要对各级内容进行去重，去重可用simhash算法，对于重复内容，优先去除较短的文本内容。 **表格类文档：**该类文件一般要求是带表头的csv和excel文件，可在固定位置放置表的标题和表的备注。一般根据长度限制先按列进行拆分，再考虑按行拆分，列拆分通常需要保留第一列，且要求每条数据加上第一列的内容后，字符数不超过限制，否则做摘要处理。每个拆分后的子表需要使用大模型做增强信息，以此来提高数据的检出率。因子表缺少全局信息，可以在拆分内容中加入全表的一些基础统计信息，比如：数值型数据的平均值、最大值、最小值，类别型数据的最高频值和最低频值等。 1.2. 长文档数据处理 **分隔符定义：**标题与内容或子标题（：）；标题类别与标题（-）；并列标题（；）；段落之间（ ）。
**标题处理：**每个文本块都要引入各级标题内容，书名或文档名按最大一级标题处理，纳入文件下每个文本块的文本内容中。
**段落级处理：**段落内容直接入库或摘要后入库。
**句级处理（保留，暂未采用）：**针对做了摘要的超长原始段落内容，按语义切分后直接入库。
**章节级处理：**全文按各章节标题切分，各级章节内容处理方式如下：
（1）若无子标题且是单段落内容：段落级处理已完成，无需重复处理。
（2）若无子标题且是多段落内容：所有章节内容去重后直接入库或摘要（超长内容）后入库。
（3）若有子标题且是单段落内容：提取出明确的标题关系才入库（若段落内容超出大模型长度，先做摘要再提取标题关系）
（4）若有子标题且是多段落内容：所有章节内容做摘要的同时需提取标题关系生成最终内容再入库。
**摘要处理：**根据文本块内容类型，选择不同的摘要处理方式：
（1）纯摘要：可选短文本摘要’summary’、分知识点摘要’point_summary’、问答对生成’qa_generation’三种方式，默认为智能方式（即文本长度不超过2倍块长度时，使用’summary’方式，否则使用’point_summary’方式）。
（2）标题关系提取：只支持’summary’摘要方式。
（3）摘要及标题关系提取：可选’summary’和’point_summary’方式，默认为智能方式（即文本长度不超过2倍块长度时，使用’summary’方式，否则使用’point_summary’方式）
...</p>
  </div>
  <footer class="entry-footer">1 分钟&nbsp;·&nbsp;王宇</footer>
  <a class="entry-link" aria-label="post link to 大模型知识问答技术实践方案总结" href="http://localhost:1313/posts/wiki/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%9F%A5%E8%AF%86%E9%97%AE%E7%AD%94%E6%8A%80%E6%9C%AF%E5%AE%9E%E8%B7%B5%E6%96%B9%E6%A1%88%E6%80%BB%E7%BB%93/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="prev" href="http://localhost:1313/posts/page/221/">
      «&nbsp;上一页&nbsp;221/237
    </a>
    <a class="next" href="http://localhost:1313/posts/page/223/">下一页&nbsp;223/237&nbsp;»
    </a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
        <span><a href="https://beian.miit.gov.cn/">粤ICP备2023039897号-1</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
