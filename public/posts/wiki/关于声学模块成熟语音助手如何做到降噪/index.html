<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>关于声学模块成熟语音助手如何做到降噪 | PaperMod</title>
<meta name="keywords" content="二、产品理念和PRD">
<meta name="description" content="二、产品理念和PRD">
<meta name="author" content="王宇">
<link rel="canonical" href="http://localhost:1313/posts/wiki/%E5%85%B3%E4%BA%8E%E5%A3%B0%E5%AD%A6%E6%A8%A1%E5%9D%97%E6%88%90%E7%86%9F%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%A6%82%E4%BD%95%E5%81%9A%E5%88%B0%E9%99%8D%E5%99%AA/">
<meta name="google-site-verification" content="XYZabc">
<link crossorigin="anonymous" href="/assets/css/stylesheet.7b92bf4867c997b58ec50f63451b83777173d5bd5593376852abd85746d09d71.css" integrity="sha256-e5K/SGfJl7WOxQ9jRRuDd3Fz1b1VkzdoUqvYV0bQnXE=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="apple-touch-icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="mask-icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="http://localhost:1313/posts/wiki/%E5%85%B3%E4%BA%8E%E5%A3%B0%E5%AD%A6%E6%A8%A1%E5%9D%97%E6%88%90%E7%86%9F%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%A6%82%E4%BD%95%E5%81%9A%E5%88%B0%E9%99%8D%E5%99%AA/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><meta property="og:title" content="关于声学模块成熟语音助手如何做到降噪" />
<meta property="og:description" content="二、产品理念和PRD" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/posts/wiki/%E5%85%B3%E4%BA%8E%E5%A3%B0%E5%AD%A6%E6%A8%A1%E5%9D%97%E6%88%90%E7%86%9F%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%A6%82%E4%BD%95%E5%81%9A%E5%88%B0%E9%99%8D%E5%99%AA/" />
<meta property="og:image" content="http://localhost:1313/images/papermod-cover.png" />
<meta property="article:section" content="posts" />




<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="http://localhost:1313/images/papermod-cover.png" />
<meta name="twitter:title" content="关于声学模块成熟语音助手如何做到降噪"/>
<meta name="twitter:description" content="二、产品理念和PRD"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://localhost:1313/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "关于声学模块成熟语音助手如何做到降噪",
      "item": "http://localhost:1313/posts/wiki/%E5%85%B3%E4%BA%8E%E5%A3%B0%E5%AD%A6%E6%A8%A1%E5%9D%97%E6%88%90%E7%86%9F%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%A6%82%E4%BD%95%E5%81%9A%E5%88%B0%E9%99%8D%E5%99%AA/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "关于声学模块成熟语音助手如何做到降噪",
  "name": "关于声学模块成熟语音助手如何做到降噪",
  "description": "二、产品理念和PRD",
  "keywords": [
    "二、产品理念和PRD"
  ],
  "articleBody": " 1 21、综述 32、背景 43、硬件层面 4.13.1、拾音端 4.23.2、电路层面 4.2.11）在噪声发源处抑制噪声最为有效 4.2.22）使接收电路对噪声不敏感 4.2.33）在噪声传播途径中抑制噪声 4.33.3、选择正确的麦克风指向 4.3.1（1）全指向麦克风 4.3.2（2）8字形麦克风 4.3.3（3）心形指向 4.43.4、双麦降噪 54、软件层面 5.14.1、噪声的分类 5.24.2、如何降噪？ 5.2.14.2.1、降噪算法第一招：线性滤波器 5.2.24.2.2、降噪算法第二招：谱减法 5.2.34.2.3、降噪算法第三招：基于统计模型的实时降噪算法 5.2.44.2.4、降噪算法第四招：子空间算法 5.2.54.2.5、降噪算法第五招：基于机器学习的降噪 65、硬件声学性能测试指标及标准 6.15.1、专业名词解释 6.25.2、硬件声学所需测试内容 6.35.3、硬件声学测试项目及指标 6.3.15.3.1、MIC密封性 6.3.25.3.2、时延一致性 6.3.35.3.3、回声消除 6.3.45.3.4、MIC相干一致性 6.3.55.3.5、声源定位同步性 6.3.65.3.6、信噪比 76、思考与总结 1、综述 本文主要从软、硬件两个大方面去介绍如何对设备进行降噪，从而达到提升我们的语音唤醒率、识别率，另外也通过查阅参考文献给出了行业类对硬件声学所需要测试的一些指标与行业标准值，可以辅助提升我们对于硬件声学的一个整体的清晰的认知。\n2、背景 近期在学习关于科大讯飞提供的一些专业的学习文档，其核心内容包括：降噪算法、语音唤醒、语音识别、语音合成这四大模块，其中对于降噪算法这一块的内容很少，基于此，通过学习了解这一块的内容显的尤为必要。\n3、硬件层面 3.1、拾音端 可以通过调整麦克风的灵敏度降低噪音的收录，典型的就是动圈麦克风，所以动圈麦克风一般用于大型的会议，KTV、音乐厅等场所，因为动圈麦的灵敏度相比电容麦克风低很多，所以动圈麦克风拾取声音的时候，音源需要靠动圈麦克风很近才行，稍微远一点就拾取不到声音。当然有一些场景反而要用收音灵敏度比较高的电容麦克风，譬如要整个环境拾音，或者录制很细微的声音的时候。\n显然在拾音端的麦克风选择上，我们万得厨肯定是会选择灵敏度高一点的电容麦克风，但是灵敏度太高会带来噪声干扰更大的现实问题，因此真正做到好的降噪还需要后面各个环节的配合。\n3.2、电路层面 （1）通过电路的优化，提高电路抗干扰的能力，以此降低环境电磁辐射的干扰；\n（2）同样是优化电路，调整电路静态参数或消除电路自激，降低电路本身产生的杂音；\n从硬件电路的层面上看，噪声产生的三个要素，即：噪声源、对噪声敏感的接收电路、耦合痛到。然后基于此，在这三个方面加以解决，简单点说，对于噪声源，采取抑制噪声源产生的噪声；对于噪声敏感的接收电路，应使接收电路对噪声不敏感；对于耦合通道，抑制耦合通道的传输。更细致的方法如下：\n1）在噪声发源处抑制噪声最为有效 理论上，从噪声发源处采取措施不让噪声传播出来，问题会迎刃而解。因此在遇到干扰的情况时无论情况怎样复杂，首先要查找和研究如何将噪声源的噪声抑制下去。常见噪声源有电源变压器、继电器、集成电路处于开关工作状态、白炽灯.电机运转等，根据不同情况采取适当措施，如电源变压器采取屏蔽措施，继电器用二极管并接到线圈上解决，等等。\n2）使接收电路对噪声不敏感 这有两方面含义，一是将易受干扰的元器件其至整个电路屏蔽起来，如对多级放大器中第一级用屏蔽体起来，使外来噪声尽量少进入放大器中去是放大器本身固有噪声尽量小，因此通常选用噪声系数小的元器件、合理布线以设计低噪声前置放大器来实现。\n3）在噪声传播途径中抑制噪声 根据噪声传播途径不同，采用相应手段将传播切断或削弱，从而达到抑制噪声的目的。\n噪声经导线传导羯合到电路中最常见的是经输入引线和电源引线。抑制噪声可用不同方法: 输入引线通常采用屏蔽方法来抑制噪声，如采用电缆线等，为防止经电源引线引入噪声，通常是在对噪声敏感的某一级或几级或整个电路直流供电线上加入RC去耦电路，另外使引线远离噪声源也是有效方法之一。 抑制公共阻抗有两种: 电源内阻和地线其抑制噪声千扰的方法与抑制自激振荡相同。 抑制电磁场耦合噪声方法。抑制电磁场耦合噪声的常用方法是采用屏蔽技术和接地技术。屏蔽，就是对两个指定空间区域进行金属隔离以抑制电场、磁场和电磁波由一个区域对另一个区域的感应和传播。屏蔽一般有两种:一是静电屏蔽，二是电磁屏蔽。 （3）增加钳位电压，转换成电信号的噪音一般电压级也比较低，通过设置电路钳位电压门限，将噪音电流加以隔挡；\n3.3、选择正确的麦克风指向 什么是麦克风指向性？麦克风的指向性指的是麦克风从不同的方向拾取声音。三种最基本的指向性为：\n全指向 8字型指向(双向) 心型指向 1：全指向 - 对整个红色区域的声音灵敏。\n2：8字形 - 对两个蓝色所在的一前一后区域灵敏，而左右两侧可以忽略。\n3：心形 - 对前方绿色区域灵敏，两侧灵敏度稍弱，而后方可以忽略。\n（1）全指向麦克风 全指向麦克风最早也叫“压强”麦克风，它们的振膜在空间的单一定点测量声音的压强。由于它们不能提供方位信息，所以对各个方向的声音同等灵敏。\n全指向式话筒对所有角度都有相同的灵敏度，这意味着它可以从所有方向均衡地拾取声音，因此，话筒不必指向某一方向。\n如果我们想做全方位的对小万进行唤醒，那么全指向麦克风必然是首选。\n（2）8字形麦克风 通常叫“气压梯度”麦克风，它们测量一个开放振膜单元两边的压强变化，对前后区域的声音十分灵敏，而对两侧的声音几乎屏蔽。\n8字型也叫双向型，这种拾音模式比较特殊，它分别从话筒前方和后方拾取声音，但不从侧面（90度角）拾音。\n如果不考虑全方面唤醒，只从用户最真实的应用场景的话，8字型麦克风是我们虚拟人的首选。\n（3）心形指向 心形指向相当于是全指向和8字形指向的结合体。心形麦克风前端灵敏度最强，后端灵敏度最弱。这样可以隔绝多余的环境噪音，且消除回音的效果优于全向麦克风。因此，心形话筒尤其适用于喧闹的场景。\n这种指向得名于它的拾音范围很像是一颗心：在话筒的正前方，其对音频信号的灵敏度非常高;而到了话筒的侧面(90度处) ，其灵敏度也不错，但是比正前方要低6个分贝;最后，对于来自话筒后方的声音，它则具有非常好的屏蔽作用。而正是由于这种对话筒后方声音的屏蔽作用，心形指向话筒在多重录音环境中，尤其是需要剔除大量室内环境声的情况下，非常有用。除此之外，在实际中，心形指向话筒也是各类话筒中使用率比较高的一种。\n显然，综合所有场景来看，最适合我们虚拟人搭载在炉端的麦克风，应该是心型。\n3.4、双麦降噪 硬件设备搭载两个麦克风，现在在市面上已经应用的很成熟，比如大多数手机都是采用双麦，我们的万得厨也是双麦。\n双麦噪音抵消，这个是通过双麦录取声音，A麦克风靠近音源，可以拾取到环境噪音和需要录制的声音，B麦克风置放在环境中拾取环境杂音，通过电路减法，将A麦克风拾取的声音减去B麦克风的声音，从而得到比较干净的录制音。比如手机中的两个麦克风，一个稳定保持清晰通话，另一个麦克风物理主动消除噪音，通过收集外界的声音，进行处理后，发出与噪音相反的声波，利用抵消原理消除噪音。\n但是一旦声音达到足够大，双麦降噪就会失去作用，因为声抵消是有一定阈值（范围）的，一般抵消声音大概在6~35dB（分贝）之间（正常降噪范围的大概参数，实际参数以手机自身设计标准为准），也就是说超过了降噪范围噪声也一样会传到硬件设备里。因此，如何选择麦克风阵列，尤为重要。\n4、软件层面 从软件层面上来讲，我们大多通过软件噪音算法来实现降噪，软件噪音算法是指通过软件识别的方式捕捉到音频中的噪音，通过一定的降噪算法，将音频中的噪音去除，降噪算法也需要针对不同的环境或用途，采用不同的降噪算法，一般是会根据实际情况和经验进行算法设计。下面，我将细讲有关我们语音降噪算法的相关内容。先总结一下噪声分类和5种降噪算法及其适用范围：\n4.1、噪声的分类 从通信系统的角度来说，噪声可以分为加性噪声和乘性噪声。\n加性噪声与信号之间满足加性条件，即加噪信号是由噪声和源信号相加得到的，这种情况下信号和噪声是不相关的，我们常见的自然噪声、人造的噪声如电子元器件发出的热噪声等都是这种，比如万得厨在烹饪过程中产生的噪声就属于加性噪声。\n乘性噪声则是，噪声和信号是相关联的，比如信号的衰减、房间的混响、多普勒效应等。这类噪声往往是以信号乘积的形式出现，而且往往是从信道传输中产生，所以也叫信道噪声。这里主要讲的是人声与其它不相关的噪声的处理，所以主要是针对加性噪声来讲。\n加性噪声的种类如果按照声源，比如风声、汽笛声、键盘敲击声等，种类则成千上万，但从降噪方法的选择角度上来说，可以按照噪声是否平稳，把噪声分为两类：稳态噪声和非稳态噪声。\n稳态噪声：比如手机、电脑之类的设备底噪、电脑散热器的风扇声等等**。它们一直存在且基本上响度、频率分布等声学特性都不随时间变化或者变换缓慢，万得厨在烹饪过程中产生的噪声就属于稳态噪声。**\n非稳态噪声：比如开关门的声音、背景的人声、门铃声等等。这些噪声的统计特性随时间而变化。就好像在一家餐馆里很多人在说话，还时不时掺杂着吃饭的时候碗碟碰撞的一些声音。在我们厨房领域，碟碗碰撞的声音会非常多，因此我们需要聚焦非稳态噪声。\n非稳态噪声按照是否连续又可以再分为连续性非稳态噪声和瞬态噪声，比如持续性的背景人声就是连续的噪声，而一些敲击声只会出现极其短暂的时间则为瞬态噪声。稳态噪声和非稳态噪声的时域图和频域图如图 1 所示：\n左边的图是稳态噪声示例图，右边的图是非稳态噪声示例图\n稳态噪声由于在时间维度上没有变化，很容易通过对之前出现过的噪声进行建模，然后用相同的模型来对以后出现的噪声来进行抑制。而非稳态噪声尤其是瞬态噪声，则需要更多的依靠来区分其和正常语音之间的差异。如果更像是语音，则将其保留，反之则将其抑制。\n值得注意的是，这些噪声往往不是单独存在的，比如万得厨的底噪是一直存在的，同时我们又将万得厨放在在人声、碟碗鼎沸的厨房，那这时候稳态和瞬态噪声就都会存在。\n4.2、如何降噪？ 在了解了噪声的分类后，下面基于自己的一些理解和学习，介绍一下现在音频类常用的算法，一些相关的算法公式我不会罗列太多，因为我看不懂，我们只需要清楚他们的降噪原理和方式即可。\n4.2.1、降噪算法第一招：线性滤波器 在一些音频采集硬件的噪声处理中十分常见，因为硬件厂商知道自己的硬件噪声特性。比如由于电路设计在一些频段会有持续的电流声，这时可以采用一些比如高通滤波器来消除低频噪声、用一些陷波滤波器来消除某些频段的持续噪声。\n线性滤波器的处理方法算力要求十分低，但必须事先知道噪声会在哪个频段出现。所以在实际使用中一般会先做噪声频段检测，看看噪声出现在哪个或哪些频段，再设计线性滤波器或滤波器组来消除噪声。\n4.2.2、降噪算法第二招：谱减法 谱减法的核心思想是先取一段非人声段音频，记录下噪声的频谱能量，然后从所有的音频频谱中减去这个噪声频谱能量。这种方法对稳态噪声比较有效果。但如果是非稳态噪声就会导致有的地方频谱减少了噪声有残留，有的地方频谱减多了人声有损伤。所以谱减法一般用于离线稳态噪声的降噪处理。离线的时候可以人工对音频进行分片处理，在每一个分片中噪声可以控制成稳态的。而在实时音频处理的时候，噪声状态经常是随时间变化的，很难让噪声一直保持绝对稳态。\n4.2.3、降噪算法第三招：基于统计模型的实时降噪算法 这类算法是实时音频降噪时最常用的算法类别。算法的思想就是利用统计的方法估算出音频频谱中每个频点所对应的噪声和语音的分量。基于统计的降噪方法其实都是针对相对平稳的噪声进行去除，且为了方便找出噪声和人声的直观统计区别，一般都需要基于两个假设。\n第一个假设：噪声相对于人声一定是在时域和频域上的声学统计特性都更平稳。\n第二个假设: 所有的噪声都满足加性条件。\n所以基于这两个假设，就可以解释很多平时在使用这些降噪算法时所遇到的现象。比如噪声中的瞬态噪声很难被抑制，比如敲桌子的声音、键盘声之类的。再比如在一些混响比较大的房间，听不出混响，且人声的失真也比较严重。了解了以上特性之后，我们可以看看常见的几种基于统计的降噪。\n常用的分位数噪声估计和维纳滤波。分位数噪声估计和维纳滤波这种方法是 WebRTC 中自带的降噪算法。\n维纳滤波是根据最小均方误差 MMSE 准则（滤波器的输出信号与需要信号之差的均方值最小）设计的线性滤波器。这里用到的是实时频域维纳滤波器，目标就是求出当前帧每个频点的能量有多少占比是语音，即语音的先验信噪比（SNR）。把当前帧的含噪信号与噪声的信噪比叫做后验信噪比，而纯净语音信号与噪声的信噪比叫先验信噪比。\n因为在实时处理时没有纯净的参考信号，所以先验信噪比通常为后验信噪比结合判决引导的方法来估算。那么根据维纳滤波的原理降噪的步骤也就变成了从动态平滑的噪声模型得到噪声信号，然后根据含噪信号和噪声模型经过维纳滤波器进行降噪。\n上面是算法原理，这里总结了一下WebRTC 原生降噪算法的 3 个特点：\n1. 由于 speech probability 的判断降噪在有人声的地方基本不会进行噪声模型的更新，从而不会对语音造成损伤也就是说基本不会吃字，但是如果噪声是在说话的时候发生了变化，那么噪声无法被有效消除。\n2. 基于 MMSE 的维纳滤波器有一个弊端，那就是对于浊音谐波间的噪声可能会有残留。这也就是为什么如果观测频谱的时候在谐波之间会有噪声的能量残留，这种噪声残留会随语音出现，听上去像是给语音加了伴奏。通常也把这种残留叫做音乐残留。\n3. 由于在低信噪比的时候，语音存在概率的判断会失效，那么就会产生比较大的语谱损伤。现在在使用 WebRTC 的时候遇到噪声残留和音乐噪声大致就能判断出原因了。\n4.2.4、降噪算法第四招：子空间算法 子空间算法主要是针对一些已知噪声类型，量身定做一个降噪算法。其思想就是把噪声和人声投影到一个高纬度的空间，让本来不容易分离的信号变成在高纬度占据一个可分的子空间，从而可分的信号。这类算法包括非负矩阵分解和字典法建模等。\n什么时候会用到这种算法呢？比如只是要去除风噪这一种噪声，可以用非负矩阵分解的方式单独为风噪建模，从而模型会自动消除音频中的风噪。这个在去风噪的场景下效果也是不错的。但这类方法缺点也很明显，每一种噪声都得单独建模，在噪声类型不定的情况下就很难穷尽达到好的效果。这里可以看一下基于非负矩阵分解的降噪。\n4.2.5、降噪算法第五招：基于机器学习的降噪 通过数据训练的方式，训练人工神经网络来进行降噪。特点是噪声鲁棒性好，能兼顾稳态、非稳态甚至是瞬态噪声。比如图 6 中咖啡馆的噪声属于混合类型的噪声，传统降噪算法对语谱的损伤就很大，很多高频信息都丢失了，而使用 AI 算法在保留语谱的同时又起到了比较好的降噪效果。\n图的左边是传统的降噪，右边是深度学习的降噪频谱对比，很明显基于深度学习的降噪效果更好。\n上面所罗列的算法都是单通道降噪算法。如果采集的时候可以用多个麦克风或者麦克风阵列，则可以使用波束形成的方法先锁定声源方向来收音，比如选择说话人的方向来收音。这样采集来的信号，信噪比就比较高了，再通过单通道降噪就可以事半功倍。\n5、硬件声学性能测试指标及标准 该部分内容主要介绍硬件声学测试的一些性能指标及标准，方便我们对硬件的标准给出具体的量化指标。\n5.1、专业名词解释 1）声压：瞬时压强与静压强之差。单位为帕斯卡（Pa）。\n2）声压级：声压平方与基准声压平方之比，取以10为底的对数的10倍，用分贝（dB）表示。\n3）MIC：指麦克风，学名为传声器，用拾取和传送声音，可以将声音信号转换为电信号。\n4）灵敏度：单通道的输出电压与无干扰时校准位置处声压的比值为灵敏度。\n5）频率响应：单通道灵敏度级随频率的变化关系曲线为频率响应，标识为FR，单位为dB。 灵敏度以10为底的对数乘以20为灵敏度级（Sensitivity Level），标识为S，单位dB。\n6）MIC同步性：MIC同步性又称MIC一致性，指各个MIC通道间接收到同一信号的时间差的稳定性。\n7）时延：任意两个通道间接收到同一信号的时间差，单位为采样点数。\n8）参考通道时延稳定性：参考通道信号和MIC通道信号的时延差随时间变化保持稳定的能力。\n9）总谐波失真： 输出电信号中谐波余量的有效值与谐波和基频的总的比值为总谐波失真，缩写为THD。\n10）截幅： 因信号波形的幅度太大，而超出系统的线性范围的现象。\n11）回声消除： 待测设备在播放声音时，通过声学回路又被自身麦克风采集到的信号，在接收信号中减去该信号称为回声消除，简称AEC。\n5.2、硬件声学所需测试内容 硬件声学测试包括：AEC性能、时延、噪声级、相干性、谐波失真以及一致性。其中，时延、AEC性能、噪声级为强制指标，其它为参考指标，不作为评判硬件通过的标准，只用来帮助定位硬件问题点。\n5.3、硬件声学测试项目及指标 硬件测试项目包括密封性、时延一致性、回声消除特性、本底噪声级、通道相干性、MIC信号同步性、回采预处理特性、通道频响一致性以及总谐波失真特性。\n5.3.1、MIC密封性 定义：MIC密封性，指待测设备MIC孔处通过物理密封隔绝外界噪声的能力，通常以物理密封MIC前后录到的音频时段的平均振幅差表征，单位为dB。\n目的：MIC密封性会影响MIC接收声信号的传播路径，MIC密封不好会影响声源定位。\n行业标准：\n1）Ⅰ级标准：各MIC的密封性数值均在20dB以上为合格。合格结果如下表所示。\n2）Ⅱ级标准：各MIC的密封性数值均在15dB以上为合格。\n1#MIC\n2#MIC\n3#MIC\n4#MIC\n5#MIC\n6#MIC\n1#MIC\n2#MIC\n3#MIC\n4#MIC\n5#MIC\n6#MIC\n密封性\n20dB\n20dB\n20dB\n20dB\n20dB\n20dB\n5.3.2、时延一致性 定义：时延，指参考信号和MIC通道的时延差。时延稳定性即参考信号和MIC通道的时延差随时间变化保持稳定的能力。\n目的：判断MIC信号和参考信号之间测得信号的时间差是否随时间发生波动。\n行业标准：\nⅠ级标准：chirp count的纵坐标单位为1/16000s，判定标准为chirp count的20个点稳定在同一个值，且该值范围在（0~512），且上下间波动最大不超过1个点认为合格。时延稳定合格如下\n图示例。\nⅡ级标准： chirp count的20个点稳定在同一个值，且该值范围在（0~1000），且上下间波动最大不超过1个点认为合格。\n5.3.3、回声消除 定义：回声消除定义：待测设备在播放声音时，通过声学回路又被自身麦克风采集到的信号，在接收信号中减去该信号称为回声消除（Acoustic Echo Cancellation），标识为AEC。\nERLE定义：回声返回损耗增益值（Echo Return Loss Enhancement）简称 ERLE，反映的是原回声信号与剩余回声残差的比值，单位为dB。\n目的：测试MIC阵列消除自身设备扬声器输出信号的能力。\n行业标准：\nⅠ级标准：要求100%音量下所有MIC的ERLE数值大于23dB，50%音量下所有MIC的ERLE数值大于20dB为合格。合格结果如下图示例。\nⅡ级标准：要求100%音量下所有MIC的ERLE数值大于18dB，50%音量下所有MIC的ERLE数值大于16dB。\n5.3.4、MIC相干一致性 定义：衡量两个变量之间的相关程度叫做相干性（Coherence）。在该项测试中，相干性衡量的是各MIC通道和REF通道之间的相关程度。\n目的：测试MIC信号和REF信号之间的相关程度，相关程度越小，说明MIC信号失真越大，噪音越多，AEC越差。\n行业标准：\nⅠ级标准：200Hz~1000Hz范围内相干性值大于0.3，且各MIC通道间同频率值对应的的相干性差值不大于0.1。相干性测试合格结果如下图示例。\nⅡ级标准：200Hz~1000Hz范围内各MIC通道间同频率值对应的的相干性差值不大于0.6。\n5.3.5、声源定位同步性 定义：声源定位同步性本质即MIC信号间的同步性，指各MIC之间接收信号的时间差随时间变化的稳定性。\n目的：测试MIC阵列不同MIC之间接收同一信号的时间差是否稳定。\n行业标准：\nⅠ级标准：环型MIC阵列的定位声源角度（Angle）随时间波动≤±5°，测得两个角度的角度差90°±15°，合格结果如图2示例；线型MIC阵列定位声源角度（Angle）随时间波动≤±5°，测试声源角度和实际声源摆放角度差值小于10°。\nⅡ级标准：环型MIC阵列的定位声源角度（Angle）随时间波动≤±10°，测得两个角度的角度差90°±20°；线型MIC阵列定位声源角度（Angle）随时间波动≤±10°，测试声源角度和实际声源摆放角度差值小于15°。\n5.3.6、信噪比 定义：音源产生最大不失真声音信号强度与同时发出噪音强度之间的比率称为信号噪声比（signal-noise ratio），标识为SNR，单位为dB。\n目的：设备的信噪比越高表明它产生的噪声越少。信噪比越大，信号对算法的影响越小。\n行业标准：\nⅠ级标准：各MIC通道信噪比均大于50dB，MIC灵敏度大于-25dBFS。合格结果如下图示例。\nⅡ级标准：各MIC通道信噪比均大于35dB，MIC灵敏度大于-32dBFS。\n该图是合格信噪比测试结果示例\n改图是合格底噪和灵敏度测试结果\n因此，我们可以通过表格的形式给到我们所需要深圳硬件团队测试的声学指标：\n测试项目\n定义\n测试目的\n行业标准值\n所期望标准值\n备注\n测试项目\n定义\n测试目的\n行业标准值\n所期望标准值\n备注\n1\nMIC密封性\nMIC密封性，指待测设备MIC孔处通过物理密封隔绝外界噪声的能力，通常以物理密封MIC前后录到的音频时段的平均振幅差表征，单位为dB。\nMIC密封性会影响MIC接收声信号的传播路径，MIC密封不好会影响声源定位。\nⅠ级标准：各MIC的密封性数值均在20dB以上为合格。\nⅡ级标准：各MIC的密封性数值均在15dB以上为合格。\n2\n时延一致性\n时延，指参考信号和MIC通道的时延差。时延稳定性即参考信号和MIC通道的时延差随时间变化保持稳定的能力。\n判断MIC信号和参考信号之间测得信号的时间差是否随时间发生波动。\nⅠ级标准：chirp count的纵坐标单位为1/16000s，判定标准为chirp count的20个点稳定在同一个值，且该值范围在（0~512），且上下间波动最大不超过1个点认为合格。\nⅡ级标准： chirp count的20个点稳定在同一个值，且该值范围在（0~1000），且上下间波动最大不超过1个点认为合格。\n3\n回声消除\n回声消除定义：待测设备在播放声音时，通过声学回路又被自身麦克风采集到的信号，在接收信号中减去该信号称为回声消除（Acoustic Echo Cancellation），标识为AEC。\nERLE定义：回声返回损耗增益值（Echo Return Loss Enhancement）简称 ERLE，反映的是原回声信号与剩余回声残差的比值，单位为dB。\n测试MIC阵列消除自身设备扬声器输出信号的能力。\nⅠ级标准：要求100%音量下所有MIC的ERLE数值大于23dB，50%音量下所有MIC的ERLE数值大于20dB为合格。\nⅡ级标准：要求100%音量下所有MIC的ERLE数值大于18dB，50%音量下所有MIC的ERLE数值大于16dB。\n4\nMIC相干一致性\n衡量两个变量之间的相关程度叫做相干性（Coherence）。在该项测试中，相干性衡量的是各MIC通道和REF通道之间的相关程度。\n测试MIC信号和REF信号之间的相关程度，相关程度越小，说明MIC信号失真越大，噪音越多，AEC越差。\nⅠ级标准：200Hz~1000Hz范围内相干性值大于0.3，且各MIC通道间同频率值对应的的相干性差值不大于0.1。\nⅡ级标准：200Hz~1000Hz范围内各MIC通道间同频率值对应的的相干性差值不大于0.6。\n5\n声源定位同步性\n声源定位同步性本质即MIC信号间的同步性，指各MIC之间接收信号的时间差随时间变化的稳定性。\n测试MIC阵列不同MIC之间接收同一信号的时间差是否稳定。\nⅠ级标准：环型MIC阵列的定位声源角度（Angle）随时间波动≤±5°，测得两个角度的角度差90°±15°，线型MIC阵列定位声源角度（Angle）随时间波动≤±5°，测试声源角度和实际声源摆放角度差值小于10°。\nⅡ级标准：环型MIC阵列的定位声源角度（Angle）随时间波动≤±10°，测得两个角度的角度差90°±20°；线型MIC阵列定位声源角度（Angle）随时间波动≤±10°，测试声源角度和实际声源摆放角度差值小于15°。\n6\n信噪比\n音源产生最大不失真声音信号强度与同时发出噪音强度之间的比率称为信号噪声比（signal-noise ratio），标识为SNR，单位为dB。\n设备的信噪比越高表明它产生的噪声越少。信噪比越大，信号对算法的影响越小。\nⅠ级标准：各MIC通道信噪比均大于50dB，MIC灵敏度大于-25dBFS。\nⅡ级标准：各MIC通道信噪比均大于35dB，MIC灵敏度大于-32dBFS。\n6、思考与总结 虚拟人项目是一个跨多部门合作的一个项目，这里面不仅涉及到国外团队、杭州第三方公司、科大讯飞，也涉及到我们深圳的硬件团队，以及我们影子内部的一些相关的团队，比如万得厨研发团队，因此如果我们想打造一个成熟的、可用的、聪明的小万虚拟人，那么一定需要我们能够高效的完成跨团队合作，环环相扣，紧紧相依。就如本文提到的降噪这一重要模块，想要在这一块有突破性的进展，硬件层面需要做好相应的优化，从根源上减少噪音的干扰，软件想要运行的好，必定需要一个可靠的硬件设备作为支撑。在软件层面，打铁还需自身硬，我们产品需要迅速成长，实时了解行业内相关标准，用最专业的术语、最准确的指标给到第三方公司，从而解决掉一些我们需要依赖到他们的能力的一些优化项。\nFilter table dataCreate a pivot tableCreate a chart from data series\nConfigure buttons visibility\n",
  "wordCount" : "321",
  "inLanguage": "zh",
  "image": "http://localhost:1313/images/papermod-cover.png","datePublished": "0001-01-01T00:00:00Z",
  "dateModified": "0001-01-01T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "王宇"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/posts/wiki/%E5%85%B3%E4%BA%8E%E5%A3%B0%E5%AD%A6%E6%A8%A1%E5%9D%97%E6%88%90%E7%86%9F%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%A6%82%E4%BD%95%E5%81%9A%E5%88%B0%E9%99%8D%E5%99%AA/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "PaperMod",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/%3Clink%20/%20abs%20url%3E"
    }
  }
}
</script>
</head>

<body class=" dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Home (Alt + H)">
                        
                    <img src="http://localhost:1313/images/msg_hu15231257772499651944.png" alt="" aria-label="logo"
                        height="20">Home</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://github.com/adityatelange/hugo-PaperMod/wiki/" title="WiKi">
                    <span>WiKi</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://localhost:1313/">主页</a>&nbsp;»&nbsp;<a href="http://localhost:1313/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      关于声学模块成熟语音助手如何做到降噪
    </h1>
    <div class="post-description">
      二、产品理念和PRD
    </div>
    <div class="post-meta">2 分钟&nbsp;·&nbsp;王宇&nbsp;|&nbsp;<a href="https://github.com/WangShaoyu1/myBlogPaperMod/tree/master/content/posts/wiki/%e5%85%b3%e4%ba%8e%e5%a3%b0%e5%ad%a6%e6%a8%a1%e5%9d%97%e6%88%90%e7%86%9f%e8%af%ad%e9%9f%b3%e5%8a%a9%e6%89%8b%e5%a6%82%e4%bd%95%e5%81%9a%e5%88%b0%e9%99%8d%e5%99%aa.md" rel="noopener noreferrer" target="_blank">Suggest Changes</a>

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">目录</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#1%e7%bb%bc%e8%bf%b0" aria-label="1、综述">1、综述</a></li>
                <li>
                    <a href="#2%e8%83%8c%e6%99%af" aria-label="2、背景">2、背景</a></li>
                <li>
                    <a href="#3%e7%a1%ac%e4%bb%b6%e5%b1%82%e9%9d%a2" aria-label="3、硬件层面">3、硬件层面</a><ul>
                        
                <li>
                    <a href="#31%e6%8b%be%e9%9f%b3%e7%ab%af" aria-label="3.1、拾音端">3.1、拾音端</a></li>
                <li>
                    <a href="#32%e7%94%b5%e8%b7%af%e5%b1%82%e9%9d%a2" aria-label="3.2、电路层面">3.2、电路层面</a><ul>
                        
                <li>
                    <a href="#1%e5%9c%a8%e5%99%aa%e5%a3%b0%e5%8f%91%e6%ba%90%e5%a4%84%e6%8a%91%e5%88%b6%e5%99%aa%e5%a3%b0%e6%9c%80%e4%b8%ba%e6%9c%89%e6%95%88" aria-label="1）在噪声发源处抑制噪声最为有效">1）在噪声发源处抑制噪声最为有效</a></li>
                <li>
                    <a href="#2%e4%bd%bf%e6%8e%a5%e6%94%b6%e7%94%b5%e8%b7%af%e5%af%b9%e5%99%aa%e5%a3%b0%e4%b8%8d%e6%95%8f%e6%84%9f" aria-label="2）使接收电路对噪声不敏感">2）使接收电路对噪声不敏感</a></li>
                <li>
                    <a href="#3%e5%9c%a8%e5%99%aa%e5%a3%b0%e4%bc%a0%e6%92%ad%e9%80%94%e5%be%84%e4%b8%ad%e6%8a%91%e5%88%b6%e5%99%aa%e5%a3%b0" aria-label="3）在噪声传播途径中抑制噪声">3）在噪声传播途径中抑制噪声</a></li></ul>
                </li>
                <li>
                    <a href="#33%e9%80%89%e6%8b%a9%e6%ad%a3%e7%a1%ae%e7%9a%84%e9%ba%a6%e5%85%8b%e9%a3%8e%e6%8c%87%e5%90%91" aria-label="3.3、选择正确的麦克风指向">3.3、选择正确的麦克风指向</a><ul>
                        
                <li>
                    <a href="#1%e5%85%a8%e6%8c%87%e5%90%91%e9%ba%a6%e5%85%8b%e9%a3%8e" aria-label="（1）全指向麦克风">（1）全指向麦克风</a></li>
                <li>
                    <a href="#28%e5%ad%97%e5%bd%a2%e9%ba%a6%e5%85%8b%e9%a3%8e" aria-label="（2）8字形麦克风">（2）8字形麦克风</a></li>
                <li>
                    <a href="#3%e5%bf%83%e5%bd%a2%e6%8c%87%e5%90%91" aria-label="（3）心形指向">（3）心形指向</a></li></ul>
                </li>
                <li>
                    <a href="#34%e5%8f%8c%e9%ba%a6%e9%99%8d%e5%99%aa" aria-label="3.4、双麦降噪">3.4、双麦降噪</a></li></ul>
                </li>
                <li>
                    <a href="#4%e8%bd%af%e4%bb%b6%e5%b1%82%e9%9d%a2" aria-label="4、软件层面">4、软件层面</a><ul>
                        
                <li>
                    <a href="#41%e5%99%aa%e5%a3%b0%e7%9a%84%e5%88%86%e7%b1%bb" aria-label="4.1、噪声的分类">4.1、噪声的分类</a></li>
                <li>
                    <a href="#42%e5%a6%82%e4%bd%95%e9%99%8d%e5%99%aa" aria-label="4.2、如何降噪？">4.2、如何降噪？</a><ul>
                        
                <li>
                    <a href="#421%e9%99%8d%e5%99%aa%e7%ae%97%e6%b3%95%e7%ac%ac%e4%b8%80%e6%8b%9b%e7%ba%bf%e6%80%a7%e6%bb%a4%e6%b3%a2%e5%99%a8" aria-label="4.2.1、降噪算法第一招：线性滤波器">4.2.1、降噪算法第一招：线性滤波器</a></li>
                <li>
                    <a href="#422%e9%99%8d%e5%99%aa%e7%ae%97%e6%b3%95%e7%ac%ac%e4%ba%8c%e6%8b%9b%e8%b0%b1%e5%87%8f%e6%b3%95" aria-label="4.2.2、降噪算法第二招：谱减法">4.2.2、降噪算法第二招：谱减法</a></li>
                <li>
                    <a href="#423%e9%99%8d%e5%99%aa%e7%ae%97%e6%b3%95%e7%ac%ac%e4%b8%89%e6%8b%9b%e5%9f%ba%e4%ba%8e%e7%bb%9f%e8%ae%a1%e6%a8%a1%e5%9e%8b%e7%9a%84%e5%ae%9e%e6%97%b6%e9%99%8d%e5%99%aa%e7%ae%97%e6%b3%95" aria-label="4.2.3、降噪算法第三招：基于统计模型的实时降噪算法">4.2.3、降噪算法第三招：基于统计模型的实时降噪算法</a></li>
                <li>
                    <a href="#424%e9%99%8d%e5%99%aa%e7%ae%97%e6%b3%95%e7%ac%ac%e5%9b%9b%e6%8b%9b%e5%ad%90%e7%a9%ba%e9%97%b4%e7%ae%97%e6%b3%95" aria-label="4.2.4、降噪算法第四招：子空间算法">4.2.4、降噪算法第四招：子空间算法</a></li>
                <li>
                    <a href="#425%e9%99%8d%e5%99%aa%e7%ae%97%e6%b3%95%e7%ac%ac%e4%ba%94%e6%8b%9b%e5%9f%ba%e4%ba%8e%e6%9c%ba%e5%99%a8%e5%ad%a6%e4%b9%a0%e7%9a%84%e9%99%8d%e5%99%aa" aria-label="4.2.5、降噪算法第五招：基于机器学习的降噪">4.2.5、降噪算法第五招：基于机器学习的降噪</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#5%e7%a1%ac%e4%bb%b6%e5%a3%b0%e5%ad%a6%e6%80%a7%e8%83%bd%e6%b5%8b%e8%af%95%e6%8c%87%e6%a0%87%e5%8f%8a%e6%a0%87%e5%87%86" aria-label="5、硬件声学性能测试指标及标准">5、硬件声学性能测试指标及标准</a><ul>
                        
                <li>
                    <a href="#51%e4%b8%93%e4%b8%9a%e5%90%8d%e8%af%8d%e8%a7%a3%e9%87%8a" aria-label="5.1、专业名词解释">5.1、专业名词解释</a></li>
                <li>
                    <a href="#52%e7%a1%ac%e4%bb%b6%e5%a3%b0%e5%ad%a6%e6%89%80%e9%9c%80%e6%b5%8b%e8%af%95%e5%86%85%e5%ae%b9" aria-label="5.2、硬件声学所需测试内容">5.2、硬件声学所需测试内容</a></li>
                <li>
                    <a href="#53%e7%a1%ac%e4%bb%b6%e5%a3%b0%e5%ad%a6%e6%b5%8b%e8%af%95%e9%a1%b9%e7%9b%ae%e5%8f%8a%e6%8c%87%e6%a0%87" aria-label="5.3、硬件声学测试项目及指标">5.3、硬件声学测试项目及指标</a><ul>
                        
                <li>
                    <a href="#531mic%e5%af%86%e5%b0%81%e6%80%a7" aria-label="5.3.1、MIC密封性">5.3.1、MIC密封性</a></li>
                <li>
                    <a href="#532%e6%97%b6%e5%bb%b6%e4%b8%80%e8%87%b4%e6%80%a7" aria-label="5.3.2、时延一致性">5.3.2、时延一致性</a></li>
                <li>
                    <a href="#533%e5%9b%9e%e5%a3%b0%e6%b6%88%e9%99%a4" aria-label="5.3.3、回声消除">5.3.3、回声消除</a></li>
                <li>
                    <a href="#534mic%e7%9b%b8%e5%b9%b2%e4%b8%80%e8%87%b4%e6%80%a7" aria-label="5.3.4、MIC相干一致性">5.3.4、MIC相干一致性</a></li>
                <li>
                    <a href="#535%e5%a3%b0%e6%ba%90%e5%ae%9a%e4%bd%8d%e5%90%8c%e6%ad%a5%e6%80%a7" aria-label="5.3.5、声源定位同步性">5.3.5、声源定位同步性</a></li>
                <li>
                    <a href="#536%e4%bf%a1%e5%99%aa%e6%af%94" aria-label="5.3.6、信噪比">5.3.6、信噪比</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#6%e6%80%9d%e8%80%83%e4%b8%8e%e6%80%bb%e7%bb%93" aria-label="6、思考与总结">6、思考与总结</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><ul>
<li>1<a href="/posts/wiki/%E5%85%B3%E4%BA%8E%E5%A3%B0%E5%AD%A6%E6%A8%A1%E5%9D%97%E6%88%90%E7%86%9F%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%A6%82%E4%BD%95%E5%81%9A%E5%88%B0%E9%99%8D%E5%99%AA/#id-关于声学模块成熟语音助手如何做到降噪-"></a></li>
<li>2<a href="/posts/wiki/%E5%85%B3%E4%BA%8E%E5%A3%B0%E5%AD%A6%E6%A8%A1%E5%9D%97%E6%88%90%E7%86%9F%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%A6%82%E4%BD%95%E5%81%9A%E5%88%B0%E9%99%8D%E5%99%AA/#id-关于声学模块成熟语音助手如何做到降噪-1、综述">1、综述</a></li>
<li>3<a href="/posts/wiki/%E5%85%B3%E4%BA%8E%E5%A3%B0%E5%AD%A6%E6%A8%A1%E5%9D%97%E6%88%90%E7%86%9F%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%A6%82%E4%BD%95%E5%81%9A%E5%88%B0%E9%99%8D%E5%99%AA/#id-关于声学模块成熟语音助手如何做到降噪-2、背景">2、背景</a></li>
<li>4<a href="/posts/wiki/%E5%85%B3%E4%BA%8E%E5%A3%B0%E5%AD%A6%E6%A8%A1%E5%9D%97%E6%88%90%E7%86%9F%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%A6%82%E4%BD%95%E5%81%9A%E5%88%B0%E9%99%8D%E5%99%AA/#id-关于声学模块成熟语音助手如何做到降噪-3、硬件层面">3、硬件层面</a>
<ul>
<li>4.1<a href="/posts/wiki/%E5%85%B3%E4%BA%8E%E5%A3%B0%E5%AD%A6%E6%A8%A1%E5%9D%97%E6%88%90%E7%86%9F%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%A6%82%E4%BD%95%E5%81%9A%E5%88%B0%E9%99%8D%E5%99%AA/#id-关于声学模块成熟语音助手如何做到降噪-3.1、拾音端">3.1、拾音端</a></li>
<li>4.2<a href="/posts/wiki/%E5%85%B3%E4%BA%8E%E5%A3%B0%E5%AD%A6%E6%A8%A1%E5%9D%97%E6%88%90%E7%86%9F%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%A6%82%E4%BD%95%E5%81%9A%E5%88%B0%E9%99%8D%E5%99%AA/#id-关于声学模块成熟语音助手如何做到降噪-3.2、电路层面">3.2、电路层面</a>
<ul>
<li>4.2.1<a href="/posts/wiki/%E5%85%B3%E4%BA%8E%E5%A3%B0%E5%AD%A6%E6%A8%A1%E5%9D%97%E6%88%90%E7%86%9F%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%A6%82%E4%BD%95%E5%81%9A%E5%88%B0%E9%99%8D%E5%99%AA/#id-关于声学模块成熟语音助手如何做到降噪-1）在噪声发源处抑制噪声最为有效">1）在噪声发源处抑制噪声最为有效</a></li>
<li>4.2.2<a href="/posts/wiki/%E5%85%B3%E4%BA%8E%E5%A3%B0%E5%AD%A6%E6%A8%A1%E5%9D%97%E6%88%90%E7%86%9F%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%A6%82%E4%BD%95%E5%81%9A%E5%88%B0%E9%99%8D%E5%99%AA/#id-关于声学模块成熟语音助手如何做到降噪-2）使接收电路对噪声不敏感">2）使接收电路对噪声不敏感</a></li>
<li>4.2.3<a href="/posts/wiki/%E5%85%B3%E4%BA%8E%E5%A3%B0%E5%AD%A6%E6%A8%A1%E5%9D%97%E6%88%90%E7%86%9F%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%A6%82%E4%BD%95%E5%81%9A%E5%88%B0%E9%99%8D%E5%99%AA/#id-关于声学模块成熟语音助手如何做到降噪-3）在噪声传播途径中抑制噪声">3）在噪声传播途径中抑制噪声</a></li>
</ul>
</li>
<li>4.3<a href="/posts/wiki/%E5%85%B3%E4%BA%8E%E5%A3%B0%E5%AD%A6%E6%A8%A1%E5%9D%97%E6%88%90%E7%86%9F%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%A6%82%E4%BD%95%E5%81%9A%E5%88%B0%E9%99%8D%E5%99%AA/#id-关于声学模块成熟语音助手如何做到降噪-3.3、选择正确的麦克风指向">3.3、选择正确的麦克风指向</a>
<ul>
<li>4.3.1<a href="/posts/wiki/%E5%85%B3%E4%BA%8E%E5%A3%B0%E5%AD%A6%E6%A8%A1%E5%9D%97%E6%88%90%E7%86%9F%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%A6%82%E4%BD%95%E5%81%9A%E5%88%B0%E9%99%8D%E5%99%AA/#id-关于声学模块成熟语音助手如何做到降噪-（1）全指向麦克风">（1）全指向麦克风</a></li>
<li>4.3.2<a href="/posts/wiki/%E5%85%B3%E4%BA%8E%E5%A3%B0%E5%AD%A6%E6%A8%A1%E5%9D%97%E6%88%90%E7%86%9F%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%A6%82%E4%BD%95%E5%81%9A%E5%88%B0%E9%99%8D%E5%99%AA/#id-关于声学模块成熟语音助手如何做到降噪-（2）8字形麦克风">（2）8字形麦克风</a></li>
<li>4.3.3<a href="/posts/wiki/%E5%85%B3%E4%BA%8E%E5%A3%B0%E5%AD%A6%E6%A8%A1%E5%9D%97%E6%88%90%E7%86%9F%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%A6%82%E4%BD%95%E5%81%9A%E5%88%B0%E9%99%8D%E5%99%AA/#id-关于声学模块成熟语音助手如何做到降噪-（3）心形指向">（3）心形指向</a></li>
</ul>
</li>
<li>4.4<a href="/posts/wiki/%E5%85%B3%E4%BA%8E%E5%A3%B0%E5%AD%A6%E6%A8%A1%E5%9D%97%E6%88%90%E7%86%9F%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%A6%82%E4%BD%95%E5%81%9A%E5%88%B0%E9%99%8D%E5%99%AA/#id-关于声学模块成熟语音助手如何做到降噪-3.4、双麦降噪">3.4、双麦降噪</a></li>
</ul>
</li>
<li>5<a href="/posts/wiki/%E5%85%B3%E4%BA%8E%E5%A3%B0%E5%AD%A6%E6%A8%A1%E5%9D%97%E6%88%90%E7%86%9F%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%A6%82%E4%BD%95%E5%81%9A%E5%88%B0%E9%99%8D%E5%99%AA/#id-关于声学模块成熟语音助手如何做到降噪-4、软件层面">4、软件层面</a>
<ul>
<li>5.1<a href="/posts/wiki/%E5%85%B3%E4%BA%8E%E5%A3%B0%E5%AD%A6%E6%A8%A1%E5%9D%97%E6%88%90%E7%86%9F%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%A6%82%E4%BD%95%E5%81%9A%E5%88%B0%E9%99%8D%E5%99%AA/#id-关于声学模块成熟语音助手如何做到降噪-4.1、噪声的分类">4.1、噪声的分类</a></li>
<li>5.2<a href="/posts/wiki/%E5%85%B3%E4%BA%8E%E5%A3%B0%E5%AD%A6%E6%A8%A1%E5%9D%97%E6%88%90%E7%86%9F%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%A6%82%E4%BD%95%E5%81%9A%E5%88%B0%E9%99%8D%E5%99%AA/#id-关于声学模块成熟语音助手如何做到降噪-4.2、如何降噪？">4.2、如何降噪？</a>
<ul>
<li>5.2.1<a href="/posts/wiki/%E5%85%B3%E4%BA%8E%E5%A3%B0%E5%AD%A6%E6%A8%A1%E5%9D%97%E6%88%90%E7%86%9F%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%A6%82%E4%BD%95%E5%81%9A%E5%88%B0%E9%99%8D%E5%99%AA/#id-关于声学模块成熟语音助手如何做到降噪-4.2.1、降噪算法第一招：线性滤波器">4.2.1、降噪算法第一招：线性滤波器</a></li>
<li>5.2.2<a href="/posts/wiki/%E5%85%B3%E4%BA%8E%E5%A3%B0%E5%AD%A6%E6%A8%A1%E5%9D%97%E6%88%90%E7%86%9F%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%A6%82%E4%BD%95%E5%81%9A%E5%88%B0%E9%99%8D%E5%99%AA/#id-关于声学模块成熟语音助手如何做到降噪-4.2.2、降噪算法第二招：谱减法">4.2.2、降噪算法第二招：谱减法</a></li>
<li>5.2.3<a href="/posts/wiki/%E5%85%B3%E4%BA%8E%E5%A3%B0%E5%AD%A6%E6%A8%A1%E5%9D%97%E6%88%90%E7%86%9F%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%A6%82%E4%BD%95%E5%81%9A%E5%88%B0%E9%99%8D%E5%99%AA/#id-关于声学模块成熟语音助手如何做到降噪-4.2.3、降噪算法第三招：基于统计模型的实时降噪算法">4.2.3、降噪算法第三招：基于统计模型的实时降噪算法</a></li>
<li>5.2.4<a href="/posts/wiki/%E5%85%B3%E4%BA%8E%E5%A3%B0%E5%AD%A6%E6%A8%A1%E5%9D%97%E6%88%90%E7%86%9F%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%A6%82%E4%BD%95%E5%81%9A%E5%88%B0%E9%99%8D%E5%99%AA/#id-关于声学模块成熟语音助手如何做到降噪-4.2.4、降噪算法第四招：子空间算法">4.2.4、降噪算法第四招：子空间算法</a></li>
<li>5.2.5<a href="/posts/wiki/%E5%85%B3%E4%BA%8E%E5%A3%B0%E5%AD%A6%E6%A8%A1%E5%9D%97%E6%88%90%E7%86%9F%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%A6%82%E4%BD%95%E5%81%9A%E5%88%B0%E9%99%8D%E5%99%AA/#id-关于声学模块成熟语音助手如何做到降噪-4.2.5、降噪算法第五招：基于机器学习的降噪">4.2.5、降噪算法第五招：基于机器学习的降噪</a></li>
</ul>
</li>
</ul>
</li>
<li>6<a href="/posts/wiki/%E5%85%B3%E4%BA%8E%E5%A3%B0%E5%AD%A6%E6%A8%A1%E5%9D%97%E6%88%90%E7%86%9F%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%A6%82%E4%BD%95%E5%81%9A%E5%88%B0%E9%99%8D%E5%99%AA/#id-关于声学模块成熟语音助手如何做到降噪-5、硬件声学性能测试指标及标准">5、硬件声学性能测试指标及标准</a>
<ul>
<li>6.1<a href="/posts/wiki/%E5%85%B3%E4%BA%8E%E5%A3%B0%E5%AD%A6%E6%A8%A1%E5%9D%97%E6%88%90%E7%86%9F%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%A6%82%E4%BD%95%E5%81%9A%E5%88%B0%E9%99%8D%E5%99%AA/#id-关于声学模块成熟语音助手如何做到降噪-5.1、专业名词解释">5.1、专业名词解释</a></li>
<li>6.2<a href="/posts/wiki/%E5%85%B3%E4%BA%8E%E5%A3%B0%E5%AD%A6%E6%A8%A1%E5%9D%97%E6%88%90%E7%86%9F%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%A6%82%E4%BD%95%E5%81%9A%E5%88%B0%E9%99%8D%E5%99%AA/#id-关于声学模块成熟语音助手如何做到降噪-5.2、硬件声学所需测试内容">5.2、硬件声学所需测试内容</a></li>
<li>6.3<a href="/posts/wiki/%E5%85%B3%E4%BA%8E%E5%A3%B0%E5%AD%A6%E6%A8%A1%E5%9D%97%E6%88%90%E7%86%9F%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%A6%82%E4%BD%95%E5%81%9A%E5%88%B0%E9%99%8D%E5%99%AA/#id-关于声学模块成熟语音助手如何做到降噪-5.3、硬件声学测试项目及指标">5.3、硬件声学测试项目及指标</a>
<ul>
<li>6.3.1<a href="/posts/wiki/%E5%85%B3%E4%BA%8E%E5%A3%B0%E5%AD%A6%E6%A8%A1%E5%9D%97%E6%88%90%E7%86%9F%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%A6%82%E4%BD%95%E5%81%9A%E5%88%B0%E9%99%8D%E5%99%AA/#id-关于声学模块成熟语音助手如何做到降噪-5.3.1、MIC密封性">5.3.1、MIC密封性</a></li>
<li>6.3.2<a href="/posts/wiki/%E5%85%B3%E4%BA%8E%E5%A3%B0%E5%AD%A6%E6%A8%A1%E5%9D%97%E6%88%90%E7%86%9F%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%A6%82%E4%BD%95%E5%81%9A%E5%88%B0%E9%99%8D%E5%99%AA/#id-关于声学模块成熟语音助手如何做到降噪-5.3.2、时延一致性">5.3.2、时延一致性</a></li>
<li>6.3.3<a href="/posts/wiki/%E5%85%B3%E4%BA%8E%E5%A3%B0%E5%AD%A6%E6%A8%A1%E5%9D%97%E6%88%90%E7%86%9F%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%A6%82%E4%BD%95%E5%81%9A%E5%88%B0%E9%99%8D%E5%99%AA/#id-关于声学模块成熟语音助手如何做到降噪-5.3.3、回声消除">5.3.3、回声消除</a></li>
<li>6.3.4<a href="/posts/wiki/%E5%85%B3%E4%BA%8E%E5%A3%B0%E5%AD%A6%E6%A8%A1%E5%9D%97%E6%88%90%E7%86%9F%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%A6%82%E4%BD%95%E5%81%9A%E5%88%B0%E9%99%8D%E5%99%AA/#id-关于声学模块成熟语音助手如何做到降噪-5.3.4、MIC相干一致性">5.3.4、MIC相干一致性</a></li>
<li>6.3.5<a href="/posts/wiki/%E5%85%B3%E4%BA%8E%E5%A3%B0%E5%AD%A6%E6%A8%A1%E5%9D%97%E6%88%90%E7%86%9F%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%A6%82%E4%BD%95%E5%81%9A%E5%88%B0%E9%99%8D%E5%99%AA/#id-关于声学模块成熟语音助手如何做到降噪-5.3.5、声源定位同步性">5.3.5、声源定位同步性</a></li>
<li>6.3.6<a href="/posts/wiki/%E5%85%B3%E4%BA%8E%E5%A3%B0%E5%AD%A6%E6%A8%A1%E5%9D%97%E6%88%90%E7%86%9F%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%A6%82%E4%BD%95%E5%81%9A%E5%88%B0%E9%99%8D%E5%99%AA/#id-关于声学模块成熟语音助手如何做到降噪-5.3.6、信噪比">5.3.6、信噪比</a></li>
</ul>
</li>
</ul>
</li>
<li>7<a href="/posts/wiki/%E5%85%B3%E4%BA%8E%E5%A3%B0%E5%AD%A6%E6%A8%A1%E5%9D%97%E6%88%90%E7%86%9F%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%A6%82%E4%BD%95%E5%81%9A%E5%88%B0%E9%99%8D%E5%99%AA/#id-关于声学模块成熟语音助手如何做到降噪-6、思考与总结">6、思考与总结</a></li>
</ul>
<hr>
<h2 id="1综述">1、综述<a hidden class="anchor" aria-hidden="true" href="#1综述">#</a></h2>
<p>本文主要从软、硬件两个大方面去介绍如何对设备进行降噪，从而达到提升我们的语音唤醒率、识别率，另外也通过查阅参考文献给出了行业类对硬件声学所需要测试的一些指标与行业标准值，可以辅助提升我们对于硬件声学的一个整体的清晰的认知。</p>
<h2 id="2背景">2、背景<a hidden class="anchor" aria-hidden="true" href="#2背景">#</a></h2>
<p>近期在学习关于科大讯飞提供的一些专业的学习文档，其核心内容包括：降噪算法、语音唤醒、语音识别、语音合成这四大模块，其中对于降噪算法这一块的内容很少，基于此，通过学习了解这一块的内容显的尤为必要。</p>
<h2 id="3硬件层面">3、硬件层面<a hidden class="anchor" aria-hidden="true" href="#3硬件层面">#</a></h2>
<h3 id="31拾音端">3.1、拾音端<a hidden class="anchor" aria-hidden="true" href="#31拾音端">#</a></h3>
<p>可以通过调整麦克风的灵敏度降低噪音的收录，典型的就是动圈麦克风，所以动圈麦克风一般用于大型的会议，KTV、音乐厅等场所，因为动圈麦的灵敏度相比电容麦克风低很多，所以动圈麦克风拾取声音的时候，音源需要靠动圈麦克风很近才行，稍微远一点就拾取不到声音。当然有一些场景反而要用收音灵敏度比较高的电容麦克风，譬如要整个环境拾音，或者录制很细微的声音的时候。</p>
<p>显然在拾音端的麦克风选择上，我们万得厨肯定是会选择灵敏度高一点的电容麦克风，但是灵敏度太高会带来噪声干扰更大的现实问题，因此真正做到好的降噪还需要后面各个环节的配合。</p>
<h3 id="32电路层面">3.2、电路层面<a hidden class="anchor" aria-hidden="true" href="#32电路层面">#</a></h3>
<p>（1）通过电路的优化，提高电路抗干扰的能力，以此降低环境电磁辐射的干扰；</p>
<p>（2）同样是优化电路，调整电路静态参数或消除电路自激，降低电路本身产生的杂音；</p>
<p>从硬件电路的层面上看，噪声产生的三个要素，即：噪声源、对噪声敏感的接收电路、耦合痛到。然后基于此，在这三个方面加以解决，简单点说，对于噪声源，采取抑制噪声源产生的噪声；对于噪声敏感的接收电路，应使接收电路对噪声不敏感；对于耦合通道，抑制耦合通道的传输。更细致的方法如下：</p>
<h4 id="1在噪声发源处抑制噪声最为有效">1）在噪声发源处抑制噪声最为有效<a hidden class="anchor" aria-hidden="true" href="#1在噪声发源处抑制噪声最为有效">#</a></h4>
<p>理论上，从噪声发源处采取措施不让噪声传播出来，问题会迎刃而解。因此在遇到干扰的情况时无论情况怎样复杂，首先要查找和研究如何将噪声源的噪声抑制下去。常见噪声源有电源变压器、继电器、集成电路处于开关工作状态、白炽灯.电机运转等，根据不同情况采取适当措施，如电源变压器采取屏蔽措施，继电器用二极管并接到线圈上解决，等等。</p>
<h4 id="2使接收电路对噪声不敏感">2）使接收电路对噪声不敏感<a hidden class="anchor" aria-hidden="true" href="#2使接收电路对噪声不敏感">#</a></h4>
<p>这有两方面含义，一是将易受干扰的元器件其至整个电路屏蔽起来，如对多级放大器中第一级用屏蔽体起来，使外来噪声尽量少进入放大器中去是放大器本身固有噪声尽量小，因此通常选用噪声系数小的元器件、合理布线以设计低噪声前置放大器来实现。</p>
<h4 id="3在噪声传播途径中抑制噪声">3）在噪声传播途径中抑制噪声<a hidden class="anchor" aria-hidden="true" href="#3在噪声传播途径中抑制噪声">#</a></h4>
<p>根据噪声传播途径不同，采用相应手段将传播切断或削弱，从而达到抑制噪声的目的。</p>
<ul>
<li>噪声经导线传导羯合到电路中最常见的是经输入引线和电源引线。抑制噪声可用不同方法: 输入引线通常采用屏蔽方法来抑制噪声，如采用电缆线等，为防止经电源引线引入噪声，通常是在对噪声敏感的某一级或几级或整个电路直流供电线上加入RC去耦电路，另外使引线远离噪声源也是有效方法之一。</li>
<li>抑制公共阻抗有两种: 电源内阻和地线其抑制噪声千扰的方法与抑制自激振荡相同。</li>
<li>抑制电磁场耦合噪声方法。抑制电磁场耦合噪声的常用方法是采用屏蔽技术和接地技术。屏蔽，就是对两个指定空间区域进行金属隔离以抑制电场、磁场和电磁波由一个区域对另一个区域的感应和传播。屏蔽一般有两种:一是静电屏蔽，二是电磁屏蔽。</li>
</ul>
<p>（3）增加钳位电压，转换成电信号的噪音一般电压级也比较低，通过设置电路钳位电压门限，将噪音电流加以隔挡；</p>
<h3 id="33选择正确的麦克风指向">3.3、选择正确的麦克风指向<a hidden class="anchor" aria-hidden="true" href="#33选择正确的麦克风指向">#</a></h3>
<p>什么是麦克风指向性？麦克风的指向性指的是麦克风从不同的方向拾取声音。三种最基本的指向性为：</p>
<ul>
<li>全指向</li>
<li>8字型指向(双向)</li>
<li>心型指向</li>
</ul>
<p><img loading="lazy" src="/download/attachments/97890712/image2023-3-13_11-39-13.png?version=1&amp;modificationDate=1678698173637&amp;api=v2" alt=""  />
</p>
<p><img loading="lazy" src="/download/attachments/97890712/image2023-3-13_11-36-48.png?version=1&amp;modificationDate=1678698173681&amp;api=v2" alt=""  />
</p>
<p>1：全指向 - 对整个红色区域的声音灵敏。</p>
<p>2：8字形 - 对两个蓝色所在的一前一后区域灵敏，而左右两侧可以忽略。</p>
<p>3：心形 - 对前方绿色区域灵敏，两侧灵敏度稍弱，而后方可以忽略。</p>
<h4 id="1全指向麦克风">（1）全指向麦克风<a hidden class="anchor" aria-hidden="true" href="#1全指向麦克风">#</a></h4>
<p>全指向麦克风最早也叫“压强”麦克风，它们的振膜在空间的单一定点测量声音的压强。由于它们不能提供方位信息，所以对各个方向的声音同等灵敏。</p>
<p>全指向式话筒对所有角度都有相同的灵敏度，这意味着它可以从所有方向均衡地拾取声音，因此，话筒不必指向某一方向。</p>
<p><strong>如果我们想做全方位的对小万进行唤醒，那么全指向麦克风必然是首选。</strong></p>
<h4 id="28字形麦克风">（2）<strong>8字形麦克风</strong><a hidden class="anchor" aria-hidden="true" href="#28字形麦克风">#</a></h4>
<p>通常叫“气压梯度”麦克风，它们测量一个开放振膜单元两边的压强变化，对前后区域的声音十分灵敏，而对两侧的声音几乎屏蔽。</p>
<p>8字型也叫双向型，这种拾音模式比较特殊，它分别从话筒前方和后方拾取声音，但不从侧面（90度角）拾音。</p>
<p><strong>如果不考虑全方面唤醒，只从用户最真实的应用场景的话，8字型麦克风是我们虚拟人的首选。</strong></p>
<h4 id="3心形指向">（3）心形指向<a hidden class="anchor" aria-hidden="true" href="#3心形指向">#</a></h4>
<p>心形指向相当于是全指向和8字形指向的结合体。心形麦克风前端灵敏度最强，后端灵敏度最弱。这样可以隔绝多余的环境噪音，且消除回音的效果优于全向麦克风。因此，心形话筒尤其适用于喧闹的场景。</p>
<p><img loading="lazy" src="/download/attachments/97890712/image2023-3-13_13-46-39.png?version=1&amp;modificationDate=1678698173705&amp;api=v2" alt=""  />
</p>
<p>这种指向得名于它的拾音范围很像是一颗心：在话筒的正前方，其对音频信号的灵敏度非常高;而到了话筒的侧面(90度处) ，其灵敏度也不错，但是比正前方要低6个分贝;最后，对于来自话筒后方的声音，它则具有非常好的屏蔽作用。而正是由于这种对话筒后方声音的屏蔽作用，心形指向话筒在多重录音环境中，尤其是需要剔除大量室内环境声的情况下，非常有用。除此之外，在实际中，心形指向话筒也是各类话筒中使用率比较高的一种。</p>
<p><strong>显然，综合所有场景来看，最适合我们虚拟人搭载在炉端的麦克风，应该是心型。</strong></p>
<h3 id="34双麦降噪">3.4、双麦降噪<a hidden class="anchor" aria-hidden="true" href="#34双麦降噪">#</a></h3>
<p>硬件设备搭载两个麦克风，现在在市面上已经应用的很成熟，比如大多数手机都是采用双麦，我们的万得厨也是双麦。</p>
<p>双麦噪音抵消，这个是通过双麦录取声音，A麦克风靠近音源，可以拾取到环境噪音和需要录制的声音，B麦克风置放在环境中拾取环境杂音，通过电路减法，将A麦克风拾取的声音减去B麦克风的声音，从而得到比较干净的录制音。比如手机中的两个麦克风，一个稳定保持清晰通话，另一个麦克风物理主动消除噪音，通过收集外界的声音，进行处理后，发出与噪音相反的声波，利用抵消原理消除噪音。</p>
<p><strong>但是一旦声音达到足够大，双麦降噪就会失去作用，因为声抵消是有一定阈值（范围）的</strong>，一般抵消声音大概在6~35dB（分贝）之间（正常降噪范围的大概参数，实际参数以手机自身设计标准为准），也就是说超过了降噪范围噪声也一样会传到硬件设备里。因此，如何选择麦克风阵列，尤为重要。</p>
<h2 id="4软件层面">4、软件层面<a hidden class="anchor" aria-hidden="true" href="#4软件层面">#</a></h2>
<p>从软件层面上来讲，我们大多通过<strong>软件噪音算法</strong>来实现降噪，软件噪音算法是指通过软件识别的方式捕捉到音频中的噪音，通过一定的<strong>降噪算法</strong>，将音频中的噪音去除，降噪算法也需要针对不同的环境或用途，采用不同的降噪算法，一般是会根据实际情况和经验进行算法设计。下面，我将细讲有关我们语音降噪算法的相关内容。先总结一下噪声分类和5种降噪算法及其适用范围：</p>
<p><img loading="lazy" src="/download/attachments/97890712/image2023-3-13_14-38-30.png?version=1&amp;modificationDate=1678698173731&amp;api=v2" alt=""  />
</p>
<h3 id="41噪声的分类">4.1、噪声的分类<a hidden class="anchor" aria-hidden="true" href="#41噪声的分类">#</a></h3>
<p>从通信系统的角度来说，噪声可以分为<strong>加性噪声</strong>和<strong>乘性噪声</strong>。</p>
<p>加性噪声与信号之间满足加性条件，即<strong>加噪信号是由噪声和源信号相加得到的</strong>，这种情况下信号和噪声是不相关的，我们常见的自然噪声、人造的噪声如电子元器件发出的热噪声等都是这种，比如万得厨在烹饪过程中产生的噪声就属于加性噪声。</p>
<p>乘性噪声则是，<strong>噪声和信号是相关联的</strong>，比如信号的衰减、房间的混响、多普勒效应等。这类噪声往往是以信号乘积的形式出现，而且往往是从信道传输中产生，所以也叫信道噪声。<strong>这里主要讲的是人声与其它不相关的噪声的处理，所以主要是针对加性噪声来讲。</strong></p>
<p>加性噪声的种类如果按照声源，比如风声、汽笛声、键盘敲击声等，种类则成千上万，但从降噪方法的选择角度上来说，可以按照噪声是否平稳，把噪声分为两类：<strong>稳态噪声</strong>和<strong>非稳态噪声</strong>。</p>
<p>稳态噪声：比如手机、电脑之类的设备底噪、电脑散热器的风扇声等等**。它们一直存在且基本上响度、频率分布等声学特性都不随时间变化或者变换缓慢，万得厨在烹饪过程中产生的噪声就属于稳态噪声。**</p>
<p>非稳态噪声：比如开关门的声音、背景的人声、门铃声等等。<strong>这些噪声的统计特性随时间而变化</strong>。就好像在一家餐馆里很多人在说话，还时不时掺杂着吃饭的时候碗碟碰撞的一些声音。<strong>在我们厨房领域，碟碗碰撞的声音会非常多，因此我们需要聚焦非稳态噪声。</strong></p>
<p>非稳态噪声按照是否连续又可以再分为<strong>连续性非稳态噪声</strong>和<strong>瞬态噪声</strong>，比如持续性的背景人声就是连续的噪声，而一些敲击声只会出现极其短暂的时间则为瞬态噪声。稳态噪声和非稳态噪声的时域图和频域图如图 1 所示：</p>
<p><img loading="lazy" src="/download/attachments/97890712/image2023-3-13_15-1-41.png?version=1&amp;modificationDate=1678698173756&amp;api=v2" alt=""  />
</p>
<p>左边的图是稳态噪声示例图，右边的图是非稳态噪声示例图</p>
<p>稳态噪声由于在时间维度上没有变化，很容易通过对之前出现过的噪声进行建模，然后用相同的模型来对以后出现的噪声来进行抑制。而非稳态噪声尤其是瞬态噪声，则需要更多的依靠来区分其和正常语音之间的差异。如果更像是语音，则将其保留，反之则将其抑制。</p>
<p><strong>值得注意的是，这些噪声往往不是单独存在的，比如万得厨的底噪是一直存在的，同时我们又将万得厨放在在人声、碟碗鼎沸的厨房，那这时候稳态和瞬态噪声就都会存在。</strong></p>
<h3 id="42如何降噪">4.2、如何降噪？<a hidden class="anchor" aria-hidden="true" href="#42如何降噪">#</a></h3>
<p>在了解了噪声的分类后，下面基于自己的一些理解和学习，介绍一下现在音频类常用的算法，一些相关的算法公式我不会罗列太多，因为我看不懂，我们只需要清楚他们的降噪原理和方式即可。</p>
<h4 id="421降噪算法第一招线性滤波器">4.2.1、降噪算法第一招：线性滤波器<a hidden class="anchor" aria-hidden="true" href="#421降噪算法第一招线性滤波器">#</a></h4>
<p>在一些音频采集硬件的噪声处理中十分常见，因为硬件厂商知道自己的硬件噪声特性。比如由于电路设计在一些频段会有持续的电流声，这时可以采用一些比如高通滤波器来消除低频噪声、用一些陷波滤波器来消除某些频段的持续噪声。</p>
<p><strong>线性滤波器的处理方法算力要求十分低，但必须事先知道噪声会在哪个频段出现。<strong>所以在实际使用中一般会先做</strong>噪声频段检测</strong>，看看噪声出现在哪个或哪些频段，再设计线性滤波器或滤波器组来消除噪声。</p>
<h4 id="422降噪算法第二招谱减法">4.2.2、降噪算法第二招：谱减法<a hidden class="anchor" aria-hidden="true" href="#422降噪算法第二招谱减法">#</a></h4>
<p>谱减法的核心思想是先取一段非人声段音频，记录下噪声的频谱能量，然后从所有的音频频谱中减去这个噪声频谱能量。这种方法对稳态噪声比较有效果。但如果是非稳态噪声就会导致有的地方频谱减少了噪声有残留，有的地方频谱减多了人声有损伤。所以<strong>谱减法一般用于离线稳态噪声的降噪处理</strong>。离线的时候可以人工对音频进行分片处理，在每一个分片中噪声可以控制成稳态的。而在实时音频处理的时候，噪声状态经常是随时间变化的，很难让噪声一直保持绝对稳态。</p>
<h4 id="423降噪算法第三招基于统计模型的实时降噪算法">4.2.3、降噪算法第三招：基于统计模型的实时降噪算法<a hidden class="anchor" aria-hidden="true" href="#423降噪算法第三招基于统计模型的实时降噪算法">#</a></h4>
<p>这类算法是实时音频降噪时最常用的算法类别。算法的思想就是利用统计的方法估算出音频频谱中每个频点所对应的噪声和语音的分量。基于统计的降噪方法其实都是针对相对平稳的噪声进行去除，且为了方便找出噪声和人声的直观统计区别，一般都需要基于两个假设。</p>
<p><strong>第一个假设：噪声相对于人声一定是在时域和频域上的声学统计特性都更平稳。</strong></p>
<p><strong>第二个假设: 所有的噪声都满足加性条件。</strong></p>
<p>所以基于这两个假设，就可以解释很多平时在使用这些降噪算法时所遇到的现象。比如噪声中的瞬态噪声很难被抑制，比如敲桌子的声音、键盘声之类的。再比如在一些混响比较大的房间，听不出混响，且人声的失真也比较严重。了解了以上特性之后，我们可以看看常见的几种基于统计的降噪。</p>
<p>常用的<strong>分位数噪声估计</strong>和<strong>维纳滤波</strong>。分位数噪声估计和维纳滤波这种方法是 WebRTC 中自带的降噪算法。</p>
<p>维纳滤波是根据最小均方误差 MMSE 准则（滤波器的输出信号与需要信号之差的均方值最小）设计的线性滤波器。这里用到的是实时频域维纳滤波器，目标就是求出当前帧每个频点的能量有多少占比是语音，即语音的先验信噪比（SNR）。把当前帧的含噪信号与噪声的信噪比叫做后验信噪比，而纯净语音信号与噪声的信噪比叫先验信噪比。</p>
<p>因为在实时处理时没有纯净的参考信号，所以先验信噪比通常为后验信噪比结合判决引导的方法来估算。那么根据维纳滤波的原理降噪的步骤也就变成了从动态平滑的噪声模型得到噪声信号，然后根据含噪信号和噪声模型经过维纳滤波器进行降噪。<br>
上面是算法原理，这里总结了一下WebRTC 原生降噪算法的 3 个特点：</p>
<p>1. 由于 speech probability 的判断降噪在有人声的地方基本不会进行噪声模型的更新，从而不会对语音造成损伤也就是说基本不会吃字，但是如果噪声是在说话的时候发生了变化，那么噪声无法被有效消除。</p>
<p>2. 基于 MMSE 的维纳滤波器有一个弊端，那就是对于浊音谐波间的噪声可能会有残留。这也就是为什么如果观测频谱的时候在谐波之间会有噪声的能量残留，这种噪声残留会随语音出现，听上去像是给语音加了伴奏。通常也把这种残留叫做音乐残留。</p>
<p>3. 由于在低信噪比的时候，语音存在概率的判断会失效，那么就会产生比较大的语谱损伤。现在在使用 WebRTC 的时候遇到噪声残留和音乐噪声大致就能判断出原因了。</p>
<h4 id="424降噪算法第四招子空间算法">4.2.4、降噪算法第四招：子空间算法<a hidden class="anchor" aria-hidden="true" href="#424降噪算法第四招子空间算法">#</a></h4>
<p>子空间算法主要是针对一些已知噪声类型，量身定做一个降噪算法。其思想就是把噪声和人声投影到一个高纬度的空间，让本来不容易分离的信号变成在高纬度占据一个可分的子空间，从而可分的信号。这类算法包括非负矩阵分解和字典法建模等。</p>
<p>什么时候会用到这种算法呢？比如只是要去除风噪这一种噪声，可以用非负矩阵分解的方式单独为风噪建模，从而模型会自动消除音频中的风噪。这个在去风噪的场景下效果也是不错的。但这类方法缺点也很明显，每一种噪声都得单独建模，在噪声类型不定的情况下就很难穷尽达到好的效果。这里可以看一下基于非负矩阵分解的降噪。</p>
<h4 id="425降噪算法第五招基于机器学习的降噪">4.2.5、降噪算法第五招：基于机器学习的降噪<a hidden class="anchor" aria-hidden="true" href="#425降噪算法第五招基于机器学习的降噪">#</a></h4>
<p>通过数据训练的方式，训练人工神经网络来进行降噪。特点是噪声鲁棒性好，能兼顾稳态、非稳态甚至是瞬态噪声。比如图 6 中咖啡馆的噪声属于混合类型的噪声，传统降噪算法对语谱的损伤就很大，很多高频信息都丢失了，而使用 AI 算法在保留语谱的同时又起到了比较好的降噪效果。</p>
<p><img loading="lazy" src="/download/attachments/97890712/image2023-3-13_15-29-17.png?version=1&amp;modificationDate=1678698173779&amp;api=v2" alt=""  />
</p>
<p>图的左边是传统的降噪，右边是深度学习的降噪频谱对比，很明显基于深度学习的降噪效果更好。</p>
<p>上面所罗列的算法都是单通道降噪算法。如果<strong>采集的时候可以用多个麦克风或者麦克风阵列，则可以使用波束形成的方法先锁定声源方向来收音</strong>，比如选择说话人的方向来收音。这样采集来的信号，信噪比就比较高了，再通过单通道降噪就可以事半功倍。</p>
<h2 id="5硬件声学性能测试指标及标准">5、硬件声学性能测试指标及标准<a hidden class="anchor" aria-hidden="true" href="#5硬件声学性能测试指标及标准">#</a></h2>
<p>该部分内容主要介绍硬件声学测试的一些性能指标及标准，方便我们对硬件的标准给出具体的量化指标。</p>
<h3 id="51专业名词解释">5.1、专业名词解释<a hidden class="anchor" aria-hidden="true" href="#51专业名词解释">#</a></h3>
<p>1）<strong>声压</strong>：瞬时压强与静压强之差。单位为帕斯卡（Pa）。</p>
<p>2）<strong>声压级</strong>：声压平方与基准声压平方之比，取以10为底的对数的10倍，用分贝（dB）表示。</p>
<p>3）<strong>MIC</strong>：指麦克风，学名为传声器，用拾取和传送声音，可以将声音信号转换为电信号。</p>
<p>4）<strong>灵敏度</strong>：单通道的输出电压与无干扰时校准位置处声压的比值为灵敏度。</p>
<p>5）<strong>频率响应</strong>：单通道灵敏度级随频率的变化关系曲线为频率响应，标识为FR，单位为dB。 灵敏度以10为底的对数乘以20为灵敏度级（Sensitivity Level），标识为S，单位dB。</p>
<p>6）<strong>MIC同步性</strong>：MIC同步性又称MIC一致性，指各个MIC通道间接收到同一信号的时间差的稳定性。</p>
<p>7）<strong>时延</strong>：任意两个通道间接收到同一信号的时间差，单位为采样点数。</p>
<p>8）<strong>参考通道时延稳定性</strong>：参考通道信号和MIC通道信号的时延差随时间变化保持稳定的能力。</p>
<p>9）<strong>总谐波失真</strong>： 输出电信号中谐波余量的有效值与谐波和基频的总的比值为总谐波失真，缩写为THD。</p>
<p>10）<strong>截幅</strong>： 因信号波形的幅度太大，而超出系统的线性范围的现象。</p>
<p>11）<strong>回声消除</strong>： 待测设备在播放声音时，通过声学回路又被自身麦克风采集到的信号，在接收信号中减去该信号称为回声消除，简称AEC。</p>
<h3 id="52硬件声学所需测试内容">5.2、硬件声学所需测试内容<a hidden class="anchor" aria-hidden="true" href="#52硬件声学所需测试内容">#</a></h3>
<p>硬件声学测试包括：AEC性能、时延、噪声级、相干性、谐波失真以及一致性。其中，时延、AEC性能、噪声级为强制指标，其它为参考指标，不作为评判硬件通过的标准，只用来帮助定位硬件问题点。</p>
<h3 id="53硬件声学测试项目及指标">5.3、硬件声学测试项目及指标<a hidden class="anchor" aria-hidden="true" href="#53硬件声学测试项目及指标">#</a></h3>
<p>硬件测试项目包括密封性、时延一致性、回声消除特性、本底噪声级、通道相干性、MIC信号同步性、回采预处理特性、通道频响一致性以及总谐波失真特性。</p>
<h4 id="531mic密封性">5.3.1、MIC密封性<a hidden class="anchor" aria-hidden="true" href="#531mic密封性">#</a></h4>
<p>定义：MIC密封性，指待测设备MIC孔处通过物理密封隔绝外界噪声的能力，通常以物理密封MIC前后录到的音频时段的平均振幅差表征，单位为dB。</p>
<p>目的：MIC密封性会影响MIC接收声信号的传播路径，MIC密封不好会影响声源定位。</p>
<p><strong>行业标准</strong>：</p>
<p>1）Ⅰ级标准：各MIC的密封性数值均在20dB以上为合格。合格结果如下表所示。</p>
<p>2）Ⅱ级标准：各MIC的密封性数值均在15dB以上为合格。</p>
<p>1#MIC</p>
<p>2#MIC</p>
<p>3#MIC</p>
<p>4#MIC</p>
<p>5#MIC</p>
<p>6#MIC</p>
<p>1#MIC</p>
<p>2#MIC</p>
<p>3#MIC</p>
<p>4#MIC</p>
<p>5#MIC</p>
<p>6#MIC</p>
<p>密封性</p>
<p>20dB</p>
<p>20dB</p>
<p>20dB</p>
<p>20dB</p>
<p>20dB</p>
<p>20dB</p>
<h4 id="532时延一致性">5.3.2、时延一致性<a hidden class="anchor" aria-hidden="true" href="#532时延一致性">#</a></h4>
<p>定义：时延，指参考信号和MIC通道的时延差。时延稳定性即参考信号和MIC通道的时延差随时间变化保持稳定的能力。</p>
<p>目的：判断MIC信号和参考信号之间测得信号的时间差是否随时间发生波动。</p>
<p><strong>行业标准：</strong></p>
<p>Ⅰ级标准：chirp count的纵坐标单位为1/16000s，判定标准为chirp count的20个点稳定在同一个值，且该值范围在（0~512），且上下间波动最大不超过1个点认为合格。时延稳定合格如下</p>
<p>图示例。</p>
<p>Ⅱ级标准： chirp count的20个点稳定在同一个值，且该值范围在（0~1000），且上下间波动最大不超过1个点认为合格。</p>
<p><img loading="lazy" src="/download/attachments/97890712/image2023-3-13_15-55-56.png?version=1&amp;modificationDate=1678698173800&amp;api=v2" alt=""  />
</p>
<h4 id="533回声消除">5.3.3、回声消除<a hidden class="anchor" aria-hidden="true" href="#533回声消除">#</a></h4>
<p>定义：回声消除定义：待测设备在播放声音时，通过声学回路又被自身麦克风采集到的信号，在接收信号中减去该信号称为回声消除（Acoustic Echo Cancellation），标识为AEC。</p>
<p>ERLE定义：回声返回损耗增益值（Echo Return Loss Enhancement）简称 ERLE，反映的是原回声信号与剩余回声残差的比值，单位为dB。</p>
<p>目的：测试MIC阵列消除自身设备扬声器输出信号的能力。</p>
<p><strong>行业标准：</strong></p>
<p>Ⅰ级标准：要求100%音量下所有MIC的ERLE数值大于23dB，50%音量下所有MIC的ERLE数值大于20dB为合格。合格结果如下图示例。</p>
<p>Ⅱ级标准：要求100%音量下所有MIC的ERLE数值大于18dB，50%音量下所有MIC的ERLE数值大于16dB。</p>
<p><img loading="lazy" src="/download/attachments/97890712/image2023-3-13_16-11-49.png?version=1&amp;modificationDate=1678698173819&amp;api=v2" alt=""  />
</p>
<h4 id="534mic相干一致性">5.3.4、MIC相干一致性<a hidden class="anchor" aria-hidden="true" href="#534mic相干一致性">#</a></h4>
<p>定义：衡量两个变量之间的相关程度叫做相干性（Coherence）。在该项测试中，相干性衡量的是各MIC通道和REF通道之间的相关程度。</p>
<p>目的：测试MIC信号和REF信号之间的相关程度，相关程度越小，说明MIC信号失真越大，噪音越多，AEC越差。</p>
<p><strong>行业标准：</strong></p>
<p>Ⅰ级标准：200Hz~1000Hz范围内相干性值大于0.3，且各MIC通道间同频率值对应的的相干性差值不大于0.1。相干性测试合格结果如下图示例。</p>
<p>Ⅱ级标准：200Hz~1000Hz范围内各MIC通道间同频率值对应的的相干性差值不大于0.6。</p>
<p><img loading="lazy" src="/download/attachments/97890712/image2023-3-13_16-2-7.png?version=1&amp;modificationDate=1678698173838&amp;api=v2" alt=""  />
</p>
<h4 id="535声源定位同步性">5.3.5、声源定位同步性<a hidden class="anchor" aria-hidden="true" href="#535声源定位同步性">#</a></h4>
<p>定义：声源定位同步性本质即MIC信号间的同步性，指各MIC之间接收信号的时间差随时间变化的稳定性。</p>
<p>目的：测试MIC阵列不同MIC之间接收同一信号的时间差是否稳定。</p>
<p><strong>行业标准：</strong></p>
<p>Ⅰ级标准：环型MIC阵列的定位声源角度（Angle）随时间波动≤±5°，测得两个角度的角度差90°±15°，合格结果如图2示例；线型MIC阵列定位声源角度（Angle）随时间波动≤±5°，测试声源角度和实际声源摆放角度差值小于10°。</p>
<p>Ⅱ级标准：环型MIC阵列的定位声源角度（Angle）随时间波动≤±10°，测得两个角度的角度差90°±20°；线型MIC阵列定位声源角度（Angle）随时间波动≤±10°，测试声源角度和实际声源摆放角度差值小于15°。</p>
<p><img loading="lazy" src="/download/attachments/97890712/image2023-3-13_16-5-44.png?version=1&amp;modificationDate=1678698173855&amp;api=v2" alt=""  />
</p>
<h4 id="536信噪比">5.3.6、信噪比<a hidden class="anchor" aria-hidden="true" href="#536信噪比">#</a></h4>
<p>定义：音源产生最大不失真声音信号强度与同时发出噪音强度之间的比率称为信号噪声比（signal-noise ratio），标识为SNR，单位为dB。</p>
<p>目的：设备的信噪比越高表明它产生的噪声越少。信噪比越大，信号对算法的影响越小。</p>
<p><strong>行业标准：</strong></p>
<p>Ⅰ级标准：各MIC通道信噪比均大于50dB，MIC灵敏度大于-25dBFS。合格结果如下图示例。</p>
<p>Ⅱ级标准：各MIC通道信噪比均大于35dB，MIC灵敏度大于-32dBFS。</p>
<p><img loading="lazy" src="/download/attachments/97890712/image2023-3-13_16-8-45.png?version=1&amp;modificationDate=1678698173875&amp;api=v2" alt=""  />
</p>
<p>该图是合格信噪比测试结果示例</p>
<p><img loading="lazy" src="/download/attachments/97890712/image2023-3-13_16-22-29.png?version=1&amp;modificationDate=1678698173896&amp;api=v2" alt=""  />
</p>
<p>改图是合格底噪和灵敏度测试结果</p>
<p>因此，我们可以通过表格的形式给到我们所需要深圳硬件团队测试的声学指标：</p>
<p>测试项目</p>
<p>定义</p>
<p>测试目的</p>
<p>行业标准值</p>
<p>所期望标准值</p>
<p>备注</p>
<p>测试项目</p>
<p>定义</p>
<p>测试目的</p>
<p>行业标准值</p>
<p>所期望标准值</p>
<p>备注</p>
<p>1</p>
<p>MIC密封性</p>
<p>MIC密封性，指待测设备MIC孔处通过物理密封隔绝外界噪声的能力，通常以物理密封MIC前后录到的音频时段的平均振幅差表征，单位为dB。</p>
<p>MIC密封性会影响MIC接收声信号的传播路径，MIC密封不好会影响声源定位。</p>
<p>Ⅰ级标准：各MIC的密封性数值均在20dB以上为合格。</p>
<p>Ⅱ级标准：各MIC的密封性数值均在15dB以上为合格。</p>
<p>2</p>
<p>时延一致性</p>
<p>时延，指参考信号和MIC通道的时延差。时延稳定性即参考信号和MIC通道的时延差随时间变化保持稳定的能力。</p>
<p>判断MIC信号和参考信号之间测得信号的时间差是否随时间发生波动。</p>
<p>Ⅰ级标准：chirp count的纵坐标单位为1/16000s，判定标准为chirp count的20个点稳定在同一个值，且该值范围在（0~512），且上下间波动最大不超过1个点认为合格。</p>
<p>Ⅱ级标准： chirp count的20个点稳定在同一个值，且该值范围在（0~1000），且上下间波动最大不超过1个点认为合格。</p>
<p>3</p>
<p>回声消除</p>
<p>回声消除定义：待测设备在播放声音时，通过声学回路又被自身麦克风采集到的信号，在接收信号中减去该信号称为回声消除（Acoustic Echo Cancellation），标识为AEC。</p>
<p>ERLE定义：回声返回损耗增益值（Echo Return Loss Enhancement）简称 ERLE，反映的是原回声信号与剩余回声残差的比值，单位为dB。</p>
<p>测试MIC阵列消除自身设备扬声器输出信号的能力。</p>
<p>Ⅰ级标准：要求100%音量下所有MIC的ERLE数值大于23dB，50%音量下所有MIC的ERLE数值大于20dB为合格。</p>
<p>Ⅱ级标准：要求100%音量下所有MIC的ERLE数值大于18dB，50%音量下所有MIC的ERLE数值大于16dB。</p>
<p>4</p>
<p>MIC相干一致性</p>
<p>衡量两个变量之间的相关程度叫做相干性（Coherence）。在该项测试中，相干性衡量的是各MIC通道和REF通道之间的相关程度。</p>
<p>测试MIC信号和REF信号之间的相关程度，相关程度越小，说明MIC信号失真越大，噪音越多，AEC越差。</p>
<p>Ⅰ级标准：200Hz~1000Hz范围内相干性值大于0.3，且各MIC通道间同频率值对应的的相干性差值不大于0.1。</p>
<p>Ⅱ级标准：200Hz~1000Hz范围内各MIC通道间同频率值对应的的相干性差值不大于0.6。</p>
<p>5</p>
<p>声源定位同步性</p>
<p>声源定位同步性本质即MIC信号间的同步性，指各MIC之间接收信号的时间差随时间变化的稳定性。</p>
<p>测试MIC阵列不同MIC之间接收同一信号的时间差是否稳定。</p>
<p>Ⅰ级标准：环型MIC阵列的定位声源角度（Angle）随时间波动≤±5°，测得两个角度的角度差90°±15°，线型MIC阵列定位声源角度（Angle）随时间波动≤±5°，测试声源角度和实际声源摆放角度差值小于10°。</p>
<p>Ⅱ级标准：环型MIC阵列的定位声源角度（Angle）随时间波动≤±10°，测得两个角度的角度差90°±20°；线型MIC阵列定位声源角度（Angle）随时间波动≤±10°，测试声源角度和实际声源摆放角度差值小于15°。</p>
<p>6</p>
<p>信噪比</p>
<p>音源产生最大不失真声音信号强度与同时发出噪音强度之间的比率称为信号噪声比（signal-noise ratio），标识为SNR，单位为dB。</p>
<p>设备的信噪比越高表明它产生的噪声越少。信噪比越大，信号对算法的影响越小。</p>
<p>Ⅰ级标准：各MIC通道信噪比均大于50dB，MIC灵敏度大于-25dBFS。</p>
<p>Ⅱ级标准：各MIC通道信噪比均大于35dB，MIC灵敏度大于-32dBFS。</p>
<h2 id="6思考与总结">6、思考与总结<a hidden class="anchor" aria-hidden="true" href="#6思考与总结">#</a></h2>
<p>虚拟人项目是一个跨多部门合作的一个项目，这里面不仅涉及到国外团队、杭州第三方公司、科大讯飞，也涉及到我们深圳的硬件团队，以及我们影子内部的一些相关的团队，比如万得厨研发团队，因此如果我们想打造一个成熟的、可用的、聪明的小万虚拟人，那么一定需要我们能够高效的完成跨团队合作，环环相扣，紧紧相依。就如本文提到的降噪这一重要模块，想要在这一块有突破性的进展，硬件层面需要做好相应的优化，从根源上减少噪音的干扰，软件想要运行的好，必定需要一个可靠的硬件设备作为支撑。在软件层面，打铁还需自身硬，我们产品需要迅速成长，实时了解行业内相关标准，用最专业的术语、最准确的指标给到第三方公司，从而解决掉一些我们需要依赖到他们的能力的一些优化项。</p>
<p><a href="/">Filter table data</a><a href="/">Create a pivot table</a><a href="/">Create a chart from data series</a></p>
<p><a href="/users/tfac-settings.action">Configure buttons visibility</a></p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/%E4%BA%8C%E4%BA%A7%E5%93%81%E7%90%86%E5%BF%B5%E5%92%8Cprd/">二、产品理念和PRD</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="http://localhost:1313/posts/wiki/2.1%E7%99%BE%E5%BA%A6%E6%99%BA%E8%83%BD%E4%BA%91~~%E6%9C%BA%E5%99%A8%E4%BA%BA%E5%B9%B3%E5%8F%B0abcrobot/">
    <span class="title">« 上一页</span>
    <br>
    <span>2.1、百度智能云~~机器人平台ABCRobot</span>
  </a>
  <a class="next" href="http://localhost:1313/posts/wiki/%E7%A7%91%E5%A4%A7%E8%AE%AF%E9%A3%9Eaiuisdk%E6%8A%80%E6%9C%AF/">
    <span class="title">下一页 »</span>
    <br>
    <span>科大讯飞aiuisdk技术</span>
  </a>
</nav>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 关于声学模块成熟语音助手如何做到降噪 on x"
            href="https://x.com/intent/tweet/?text=%e5%85%b3%e4%ba%8e%e5%a3%b0%e5%ad%a6%e6%a8%a1%e5%9d%97%e6%88%90%e7%86%9f%e8%af%ad%e9%9f%b3%e5%8a%a9%e6%89%8b%e5%a6%82%e4%bd%95%e5%81%9a%e5%88%b0%e9%99%8d%e5%99%aa&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fwiki%2f%25E5%2585%25B3%25E4%25BA%258E%25E5%25A3%25B0%25E5%25AD%25A6%25E6%25A8%25A1%25E5%259D%2597%25E6%2588%2590%25E7%2586%259F%25E8%25AF%25AD%25E9%259F%25B3%25E5%258A%25A9%25E6%2589%258B%25E5%25A6%2582%25E4%25BD%2595%25E5%2581%259A%25E5%2588%25B0%25E9%2599%258D%25E5%2599%25AA%2f&amp;hashtags=%e4%ba%8c%e3%80%81%e4%ba%a7%e5%93%81%e7%90%86%e5%bf%b5%e5%92%8cPRD">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 关于声学模块成熟语音助手如何做到降噪 on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fwiki%2f%25E5%2585%25B3%25E4%25BA%258E%25E5%25A3%25B0%25E5%25AD%25A6%25E6%25A8%25A1%25E5%259D%2597%25E6%2588%2590%25E7%2586%259F%25E8%25AF%25AD%25E9%259F%25B3%25E5%258A%25A9%25E6%2589%258B%25E5%25A6%2582%25E4%25BD%2595%25E5%2581%259A%25E5%2588%25B0%25E9%2599%258D%25E5%2599%25AA%2f&amp;title=%e5%85%b3%e4%ba%8e%e5%a3%b0%e5%ad%a6%e6%a8%a1%e5%9d%97%e6%88%90%e7%86%9f%e8%af%ad%e9%9f%b3%e5%8a%a9%e6%89%8b%e5%a6%82%e4%bd%95%e5%81%9a%e5%88%b0%e9%99%8d%e5%99%aa&amp;summary=%e5%85%b3%e4%ba%8e%e5%a3%b0%e5%ad%a6%e6%a8%a1%e5%9d%97%e6%88%90%e7%86%9f%e8%af%ad%e9%9f%b3%e5%8a%a9%e6%89%8b%e5%a6%82%e4%bd%95%e5%81%9a%e5%88%b0%e9%99%8d%e5%99%aa&amp;source=http%3a%2f%2flocalhost%3a1313%2fposts%2fwiki%2f%25E5%2585%25B3%25E4%25BA%258E%25E5%25A3%25B0%25E5%25AD%25A6%25E6%25A8%25A1%25E5%259D%2597%25E6%2588%2590%25E7%2586%259F%25E8%25AF%25AD%25E9%259F%25B3%25E5%258A%25A9%25E6%2589%258B%25E5%25A6%2582%25E4%25BD%2595%25E5%2581%259A%25E5%2588%25B0%25E9%2599%258D%25E5%2599%25AA%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 关于声学模块成熟语音助手如何做到降噪 on reddit"
            href="https://reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fposts%2fwiki%2f%25E5%2585%25B3%25E4%25BA%258E%25E5%25A3%25B0%25E5%25AD%25A6%25E6%25A8%25A1%25E5%259D%2597%25E6%2588%2590%25E7%2586%259F%25E8%25AF%25AD%25E9%259F%25B3%25E5%258A%25A9%25E6%2589%258B%25E5%25A6%2582%25E4%25BD%2595%25E5%2581%259A%25E5%2588%25B0%25E9%2599%258D%25E5%2599%25AA%2f&title=%e5%85%b3%e4%ba%8e%e5%a3%b0%e5%ad%a6%e6%a8%a1%e5%9d%97%e6%88%90%e7%86%9f%e8%af%ad%e9%9f%b3%e5%8a%a9%e6%89%8b%e5%a6%82%e4%bd%95%e5%81%9a%e5%88%b0%e9%99%8d%e5%99%aa">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 关于声学模块成熟语音助手如何做到降噪 on facebook"
            href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fposts%2fwiki%2f%25E5%2585%25B3%25E4%25BA%258E%25E5%25A3%25B0%25E5%25AD%25A6%25E6%25A8%25A1%25E5%259D%2597%25E6%2588%2590%25E7%2586%259F%25E8%25AF%25AD%25E9%259F%25B3%25E5%258A%25A9%25E6%2589%258B%25E5%25A6%2582%25E4%25BD%2595%25E5%2581%259A%25E5%2588%25B0%25E9%2599%258D%25E5%2599%25AA%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 关于声学模块成熟语音助手如何做到降噪 on whatsapp"
            href="https://api.whatsapp.com/send?text=%e5%85%b3%e4%ba%8e%e5%a3%b0%e5%ad%a6%e6%a8%a1%e5%9d%97%e6%88%90%e7%86%9f%e8%af%ad%e9%9f%b3%e5%8a%a9%e6%89%8b%e5%a6%82%e4%bd%95%e5%81%9a%e5%88%b0%e9%99%8d%e5%99%aa%20-%20http%3a%2f%2flocalhost%3a1313%2fposts%2fwiki%2f%25E5%2585%25B3%25E4%25BA%258E%25E5%25A3%25B0%25E5%25AD%25A6%25E6%25A8%25A1%25E5%259D%2597%25E6%2588%2590%25E7%2586%259F%25E8%25AF%25AD%25E9%259F%25B3%25E5%258A%25A9%25E6%2589%258B%25E5%25A6%2582%25E4%25BD%2595%25E5%2581%259A%25E5%2588%25B0%25E9%2599%258D%25E5%2599%25AA%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 关于声学模块成熟语音助手如何做到降噪 on telegram"
            href="https://telegram.me/share/url?text=%e5%85%b3%e4%ba%8e%e5%a3%b0%e5%ad%a6%e6%a8%a1%e5%9d%97%e6%88%90%e7%86%9f%e8%af%ad%e9%9f%b3%e5%8a%a9%e6%89%8b%e5%a6%82%e4%bd%95%e5%81%9a%e5%88%b0%e9%99%8d%e5%99%aa&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fwiki%2f%25E5%2585%25B3%25E4%25BA%258E%25E5%25A3%25B0%25E5%25AD%25A6%25E6%25A8%25A1%25E5%259D%2597%25E6%2588%2590%25E7%2586%259F%25E8%25AF%25AD%25E9%259F%25B3%25E5%258A%25A9%25E6%2589%258B%25E5%25A6%2582%25E4%25BD%2595%25E5%2581%259A%25E5%2588%25B0%25E9%2599%258D%25E5%2599%25AA%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 关于声学模块成熟语音助手如何做到降噪 on ycombinator"
            href="https://news.ycombinator.com/submitlink?t=%e5%85%b3%e4%ba%8e%e5%a3%b0%e5%ad%a6%e6%a8%a1%e5%9d%97%e6%88%90%e7%86%9f%e8%af%ad%e9%9f%b3%e5%8a%a9%e6%89%8b%e5%a6%82%e4%bd%95%e5%81%9a%e5%88%b0%e9%99%8d%e5%99%aa&u=http%3a%2f%2flocalhost%3a1313%2fposts%2fwiki%2f%25E5%2585%25B3%25E4%25BA%258E%25E5%25A3%25B0%25E5%25AD%25A6%25E6%25A8%25A1%25E5%259D%2597%25E6%2588%2590%25E7%2586%259F%25E8%25AF%25AD%25E9%259F%25B3%25E5%258A%25A9%25E6%2589%258B%25E5%25A6%2582%25E4%25BD%2595%25E5%2581%259A%25E5%2588%25B0%25E9%2599%258D%25E5%2599%25AA%2f">
            <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
                <path
                    d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
            </svg>
        </a>
    </li>
</ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span><a href="https://beian.miit.gov.cn/">粤ICP备2023039897号-1</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = '复制';

        function copyingDone() {
            copybutton.innerHTML = '已复制！';
            setTimeout(() => {
                copybutton.innerHTML = '复制';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
