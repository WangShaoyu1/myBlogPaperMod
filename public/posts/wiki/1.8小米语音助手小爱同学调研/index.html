<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>1.8、小米语音助手小爱同学调研 | PaperMod</title>
<meta name="keywords" content="1、竞品调研">
<meta name="description" content="1、竞品调研">
<meta name="author" content="王宇">
<link rel="canonical" href="http://localhost:1313/posts/wiki/1.8%E5%B0%8F%E7%B1%B3%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%B0%8F%E7%88%B1%E5%90%8C%E5%AD%A6%E8%B0%83%E7%A0%94/">
<meta name="google-site-verification" content="XYZabc">
<link crossorigin="anonymous" href="/assets/css/stylesheet.7b92bf4867c997b58ec50f63451b83777173d5bd5593376852abd85746d09d71.css" integrity="sha256-e5K/SGfJl7WOxQ9jRRuDd3Fz1b1VkzdoUqvYV0bQnXE=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="apple-touch-icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="mask-icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="http://localhost:1313/posts/wiki/1.8%E5%B0%8F%E7%B1%B3%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%B0%8F%E7%88%B1%E5%90%8C%E5%AD%A6%E8%B0%83%E7%A0%94/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><meta property="og:title" content="1.8、小米语音助手小爱同学调研" />
<meta property="og:description" content="1、竞品调研" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/posts/wiki/1.8%E5%B0%8F%E7%B1%B3%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%B0%8F%E7%88%B1%E5%90%8C%E5%AD%A6%E8%B0%83%E7%A0%94/" />
<meta property="og:image" content="http://localhost:1313/images/papermod-cover.png" />
<meta property="article:section" content="posts" />




<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="http://localhost:1313/images/papermod-cover.png" />
<meta name="twitter:title" content="1.8、小米语音助手小爱同学调研"/>
<meta name="twitter:description" content="1、竞品调研"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://localhost:1313/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "1.8、小米语音助手小爱同学调研",
      "item": "http://localhost:1313/posts/wiki/1.8%E5%B0%8F%E7%B1%B3%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%B0%8F%E7%88%B1%E5%90%8C%E5%AD%A6%E8%B0%83%E7%A0%94/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "1.8、小米语音助手小爱同学调研",
  "name": "1.8、小米语音助手小爱同学调研",
  "description": "1、竞品调研",
  "keywords": [
    "1、竞品调研"
  ],
  "articleBody": " 1 一、产品背景 2二、产品架构和生态 3三、产品背后的核心技术 3.13.1 全双工关键技术 3.1.13.1.1 拒识 3.1.1.13.1.1.1 策略拒识 3.1.1.23.1.1.2 语义拒识 3.1.1.33.1.1.3 多模态拒识 3.1.23.1.2 语义判不停 3.1.2.13.1.2.1 规则系统 3.1.2.23.1.2.2 单轮判别模型 3.1.2.33.1.2.3 多轮判不停 4四、产品的硬件整体设计 4.14.1 小米小爱音箱pro拆解细节 4.1.1 4.1.1 外部细节 4.1.24.1.2 内部细节 4.24.2 拆解总结 5五、个人对于小爱同学的思考。 一、产品背景 小米公司推出的智能语音助手小爱同学，是一款基于人工智能技术的智能语音助手。它可以通过语音指令实现音乐播放、智能家居控制、日程提醒等多种功能。本文将对小爱同学进行调研分析，探讨其市场表现、用户评价、产品特点等方面。市场表现小爱同学自推出以来受到了很多用户的关注和追捧。目前，小爱同学已拥有超过1.6亿的用户，覆盖了中国大陆、香港、台湾等地区。在智能语音助手市场中，小爱同学已成为竞争对手无法忽视的一员。据小米公司公布的数据，截至2021年4月，小爱同学每天处理的语音指令超过2亿次，市场份额达到了50%以上。\n二、产品架构和生态 小米的语音助手小爱同学是一款基于人工智能技术的智能助手，可以通过语音指令来帮助用户完成各种操作。小爱同学的产品架构主要包括以下几个部分：\n1. 语音识别：通过语音识别技术将用户的语音指令转化为文本信息。\n语义理解：通过语义理解技术对用户的指令进行分析并提取出关键信息，从而确定用户的意图。 对话管理：通过对话管理技术进行对话交互，帮助用户完成指令。 服务接入：通过接入各种服务，为用户提供各种实用功能 小爱同学的生态接入主要包括以下几个方面：\n小米智能家居：小爱同学可以接入小米智能家居，实现家庭生活的智能化控制，如智能开关灯、智能控制空调等。 第三方应用：小爱同学可以接入各种第三方应用，如订餐、打车、购物等。 互联网服务：小爱同学可以接入各种互联网服务，如查询天气、股票、新闻等。 其他智能设备：小爱同学也可以接入其他智能设备，如智能音箱、智能电视等，实现设备之间的联动控制。 三、产品背后的核心技术 3.1 全双工关键技术 首先是回声消除，由于小爱音箱在说话的时候会把自己的声音也录音，所以需要消除音箱自己的声音。这部分主要是通过前端声学算法解决，而回声消除也是全双工非常必要的部分。\n第二是拒识，小爱音箱会一直开着麦克风，难免录入很多背景噪音，比如周围人的说话声，拒识的功能就是把无效的语音过滤掉。\n第三是多轮对话，连续的对话模式，对基于上下文的意图理解有更高的要求，用户可以在多轮交互中让小爱完成更复杂的任务，并允许任务的切换。\n第四是节奏控制，用户会以更加自然的方式对话小爱音箱，就会存在着停顿、节奏的变化，这时需要通过判不停更加智能地适应用户的说话节奏。当用户连续发出多条指令时，也需要对每一条指令的回复进行优先级控制。\n第五是主动对话，全双工的场景下，不仅是用户问小爱，小爱还可以主动地抛出话题，引导对话。\n最后对服务架构也有比较高的挑战，由于小爱音箱会实时连续不断地把语音传上来，对系统的效率有很高的要求，需要有高效的通信协议，同时能支持多模态的输入和异步的处理。\n总结一下，全双工交互的实现，涉及到的技术链条相对比较长，从声学、语音到NLP，涉及到算法与架构，需要各个模块的配合，才能达到相对比较好的体验。下面我会对中间的两部分内容：拒识和节奏控制中的语义判不停，分享一下我们在这方面做的一些实践、一些思考，希望能对大家有一些启发。\n3.1.1 拒识 拒识功能就是识别出哪些话是同小爱说的，哪些不是同小爱说的。为什么拒识很重要呢？有统计数据表明，在全双工场景下无效人声占比大约在15%~30%之间，这个比例非常高，如果对所有的请求都响应，会对用户产生很大的干扰，导致全双工的可用性非常差。\n无效音拒识，首先是非人声部分，非人声主要指的是一些背景噪音以及周围环境产生的声音，这一部分目前通过VAD已经能比较成熟地解决。另一部分是不清晰的人声，通过ASR可能识别不出文字或者对文字不是太置信，这时候可以通过ASR拒识。另外，还有很多无效人声需要拒识处理。\n拒识具体要解决哪些问题呢？上图给了一些具体的例子：比如周围人的聊天声，需要被拒识；用户在小爱音箱旁，跟周围的人说话，小爱音箱要能识别出来，将其拒识；假设在会议室里其他人在发言，要怎样识别？假设在家里，小孩在朗读课文，怎么识别出来不是同小爱音箱说话？所以这种与小爱没有交互意图的声音需要拒识。还有一类是电子人声，比如在电视旁边放了一个小爱智能音箱，电视里有人说话，小爱音箱如何识别出来？这是我们要解决的问题。\n在拒识方面我们的做法大致可以分为四个阶段：\n第一个阶段是场景拒识，对应场景式全双工。这种方案相对来说比较直接，首先我们定义好场景，确定场景下的意图集合，这是一个有限的集合。然后在意图集合中识别出用户意图，如果不在意图集合内的指令就可以不做响应。这种方式对于场景式全双工来说，基本上能达到可用的效果。\n然后我们需要做全领域的全双工，这时我们直接想到的是采用策略拒识的方法，策略拒识顾名思义是人工设计的一些策略。制定策略要分析需要拒识的声音有什么样的规律，根据我们能用到的特征设计策略，这种方法在系统冷启动的阶段是比较适合的，因为我们拿不到太多的数据。有足够多的数据的时候，就要向端到端数据建模的方式发展，就有了后续的语义拒识和多模态拒识。\n3.1.1.1 策略拒识 关于策略拒识，我们的做法是将策略拒识的架构分为两层，底层是特征提取层，上层是策略层。\n特征提取层通过各种模块提取特征。关于特征，首先是NLU部分，NLU是利用小爱大脑意图识别的能力，给出domain和意图的打分。还有一部分是语言模型，语言模型会给每一个query计算出困惑度，表示一个query合法的程度，然后通过ASR模块，提供一些语音方面的特征，包括用户说话的语速、信噪比，包括音量等，ASR可以对query提供置信度信息，置信度表征的是语音清晰的程度。策略的制定采用启发式，我们人工针对具体的case设计了各种策略，系统里大概有十来种策略，比如根据query是不是无意语义进行拒识、对于超长的query进行拒识、对于一些长尾的闲聊很有可能是周围人在聊天，进行拒识。还会根据用户说话的语速，假设用户在很短的时间内说了很长的话，有可能不是正常地在与小爱对话。\n策略拒识的优点首先是比较适合在系统的冷启动阶段使用，比较易于快速迭代。另外一点是可解释性比较强，能针对具体问题，理解背后原因，而且能制定相应的策略进行修正。策略拒识还存在缺点，由于拒识策略的设计是基于一部分特征，而不是综合利用所有特征，也就无法学习特征的组合。\n当不同特征的策略有冲突的时候，这种办法就很难处理了\n3.1.1.2 语义拒识 我们的解决思路是数据建模的方式，基于当前的query和历史的query，建立二分类的模型，通过模型学习各类特征的最佳组合策略。这个思路有一个前提假设，用户“跟小爱说”和“不是跟小爱说”的query在语义空间上是不同的，用模型把两个空间划分出来，这样两个语义空间交集的部分，决定了这个问题能解决的上限。\n介绍一下我们的做法，数据方面，人工标注大约26K的训练集，采用的特征，首先策略拒识中用到的一些文本特征，针对query提取表示向量，然后加一些统计特征，比如query的频次、统计特征，从一方面也能反映query的合法性和热门程度。我们还用了上下文特征，对上一轮query的domain打分。\n模型采用了BERT二分类，首先通过BERT提取出query和上一轮query的向量表示，通过外部的模块提取出刚才提到的一些可解释的特征，以拼接的方式，接上全连接层和softmax进行分类。\n介绍一下效果，我们使用了1万的测试集，相对于策略拒识，语义拒识的准确率能提升10%，召回率能提升10%。效果是非常明显的，但语义拒识也存在着问题。\n首先语义识别比较依赖于文本，如果ASR有错误的话，会产生比较大的干扰。比如一段无意义的人声如果被识别成有头部意图的query的话，很容易干扰拒识的工作。\n第二个问题是有些时候我们无法单纯从文本确定是不是在和小爱说话，比如用户对着旁边的孩子说给我背一下《弟子规》。其实小爱音箱收到这条指令的时候，也可以执行。这个case说明“跟小爱说”和“不是跟小爱说”，语义空间是有交叉的，这一部分问题单纯通过语义是解决不了的。\n3.1.1.3 多模态拒识 这就引入了我们的下一个方案：多模态的拒识。解决思路是通过DNN从原始的音频信号中提取语音特征的模式，同语义特征联合优化，得到更优的结果。\n这就涉及到语音特征的提取，语音信号如果想在神经网络中处理，需要先进行预处理，输入是一维的声音序列，对应到每个时间点，是信号的强度。通过处理之后，会产生一个二维的M乘N矩阵，M是每一帧能拿到的特征维度，N对应到每一帧是时间维度。\n语音特征的提取有非常通用的流程，很多开源的工具就可以实现这样的操作。通过一系列的处理，可以提取到各类特征，比如常用的fbank、MFCC。\n可以利用这些特征做下一步的处理。关于模型的选择，我们对比了很多类模型，这里列出两种，一种是单语音模型，另一种是语音加语义的模型。单语音模型的输入只有用户的语音，语音加语义模型会把用户的语音和ASR取得的文本以及其他的一些语义特征，都输入到模型中去。最终效果，语音加语义的模型效果是要优于单语音模型的。单语音模型效果比之前的语义模型是更优。\n我们采用的是语音加语义的模型的结构，也就是我们实验中效果最好的模型的结构。这个结构里最初的输入是语音，然后会有两路处理，一路是语音处理，一路是文本处理。语音处理会经过特征提取模块，得到一些二维的特征矩阵，还会经过语音的encoder，语音encoder可以选择适合处理语音的一些模型，比如CNN、CNN+LSTM，这里我们选用的是CNN+LSTM。语音经过ASR处理之后会得到文本，然后经过文本的encoder，文本的encoder也有很多种选择，我们可以选择比较流行的BERT。语音和文本分别得到表示向量一步融合。这一步融合是根据下层的网络设计确定，可以采用attention的机制，也可以通过门控的机制进行融合。\n另外两边是一些高阶特征，包括从声音能提出来的一些比如音量、语速、信噪比，上图右边是通过NLU模块提到的语义的高阶特征，然后把三类特征做拼接，最后综合分类。\n经过30K训练集，10K测试集，语音加语义拒识的模型准确率相对于语义拒识提升22%，召回率能提升10%。以上就是关于拒识部分的一些工作。\n3.1.2 语义判不停 接下来介绍一下语义判不停的部分。\n语义判不停要解决的问题是如何更加准确地对用户说话中存在的一些停顿判断句子是否结束。根据小爱的用户日志统计，我们发现大约5%~10%的query是没有说完的，这说明用户的很多请求还没来得及说完，小爱音箱就提前响应了。判断用户说完通用的方案是采用的VAD判停，这是一种声学方案，根据尾部的静音时长，设置一个固定的阈值，比如300毫秒到500毫秒，如果静音时长超过阈值就认为用户的话说完了，但如果用户的停顿超过这个时长就会出现过早判停的问题。针对这个问题的解决方案是在vad判停之后，再从语义的角度判断用户的query是不是完整。如果没有完整的话，继续延长收音时长，让用户话完请求。\n我们采用的方案，处理流程主要分为三步：第一步是规则系统。如果通过规则系统能给出判断的结果，就不会走下一步了。如果规则系统无法确定，就会进行第二步，单轮判别模型。如果单轮判定模型认为用户没说完的话，假设在多轮的场景下，会进行第三步多轮修正，给出最终的结果。\n3.1.2.1 规则系统 规则系统主要解决三类query，一类是数量较少相对集中的头部的query，，这一类query通过文本精确匹配的方式能很好地解决。第二类是一些有特定模式的query，可以去做正则的匹配。还有一类是短query，短query用模型相对难处理，我们采用了词性序列匹配的方式进行处理。规则扩充一部分是手动补充，还可以基于用户的session挖掘。如果一个query用户没有说完就被打断了，用户往往会重新再说一遍，这样我们可以计算一个query在历史上被重说的概率，从而拿到很多的候选，然后再做进一步的处理。\n3.1.2.2 单轮判别模型 关于模型的部分，模型主要是解决一些中长尾的query，我们先后尝试了两种方法。第一种是基于语言模型的方法，第二种是基于分类模型的方法。\n基于语言模型的方法是根据语言模型估计句子说完的概率，这种想法是非常直观的。因为语言模型比较擅长根据句子的前一个词计算出下一个词在词表上的分布。我们在NLP任务中一般会把句尾也当作一个词，这时候我们计算下一个词是句尾的概率，就可以表示一个句子说完的概率。\n我们采用的是LSTM模型，模型的训练使用了中文的公开的一些数据集，也加入了小爱的一些query。判不停的条件用到三个：第一个条件是EOS的概率，就是句子下一个词是句尾的概率，这个概率越大，说明句子结束的概率越大。第二个条件是句子的混乱度，它表征了一个句子符合语法的程度，如果一个句子的混合度非常高，我们认为它可能是一些无效的query，这时候就不会做判不停。第三个条件是字数。\n相对于规则系统，加LSTM之后，准确率是有所下降的，因为规则系统是人工审核过的一些规则，准确率相对比较高。\n加LSTM之后，在召回上大概有6%的提升，不是太大。这种方法存在一个问题：因为语言模型训练是基于非常大量数据的。如果想优化语言模型，周期相对比较长，经过一版优化之后，对于具体任务可能并没有太明显的效果，而且判别时可以用的参数也比较有限。所以说这种方法，比较难针对具体的任务进行特定的优化。\n所以我们又尝试基于有监督的方式，用到的是BERT的二分类，也是比较容易想到的一种方法。这种方法的优点是利用大规模预训练模型学到的一些知识，针对特定的任务，对模型效果进行优化，所以理论上能达到更好的效果。由于分类模型其实是比较成熟的，对这样一个具体任务的优化，主要还是在数据建设还有数据增强方面。\n然后关于数据集的构建，对于判不停任务，我们把不完整的query看作正样本，正样本的比例在实际的query分布中是很低的，所以我们的重点是如何寻找到更多的正样本。可以利用已有的规则系统，语言模型筛选出一批正样本，但是仅用这些的样本是不够的，如果只用这些样本，只能学到系统已有的一些知识，所以还需要在线上随机抽样一批query进行人工标注，这样能增加样本的多样性。模型效果的继续优化，主要是采用数据增强的方式，针对一些错误的case，寻找出一些类似的表达的query，挖掘出更多错误的样本。\n经过上面的优化，模型的效果已经达到了可用状态。这时候模型需要到线上提供服务，但是BERT模型实际在线服务的延时和QPS，离我们系统的要求是有一些距离的，所以需要继续对性能做优化。\n这时我们尝试采用模型蒸馏的方式，训练一个更小的模型，具体的做法是：首先利用训练集训练了一个大的BERT模型，在BERT模型上效果比较好。然后将这个模型作为teacher模型，最终目标是训练一个更小的ALBERT tiny模型，这是一个层数更少更窄的模型，这个模型如果在线上提供服务，性能会非常高。我们通过大的BERT模型对小的ALBERT tiny蒸馏，蒸馏的方法是在训练小模型时，计算Loss的时候，除了包含真实label产生的Loss，还会根据Teacher模型计算出来的logits和Student的模型计算出来的logits，计算蒸馏损失，最后把两种损失做加权求和，得到总的Loss。通过这种方式，最终得到小的模型可以学到BERT大模型的一些知识，在效果没有太明显下降的情况下，性能可以达到系统的要求。所以最终优化后的ALBERT tiny模型，在三个GPU的条件下，P99能在20毫秒以内，QPS能到250左右。\n上图是分类模型的效果，规则系统加上ALBERT之后，相对于原有的规则系统，准确率是有些下降的，但是召回率增长了14.8个点，比LSTM要好一些。\n3.1.2.3 多轮判不停 接下来介绍一下多轮判不停，这是对于一些单轮判不完整的query。基于多轮的情况下，可以完整地表达用户意图，这时不需要判不停。这里列了一个例子：上一轮用户说下载《王者荣耀》，小爱音箱回答确定要下载吗？用户说下载。如果用户首轮说下载，我们往往会认为接下来是要下载某一款软件，比如下载《王者荣耀》，但是在多轮情况下，就是完整的。针对上面这种case，只是对上一轮单轮判不完整的query才会出现，所以处理的流程是针对单轮模型判不停的query，采用多轮模型对结果修正。\n如何进行建模呢？如何把上一轮或上几轮的信息，用到单轮模型的分类上呢？\n我们是这样思考的。分析这一类case会发现，这种情况的次轮，跟上一轮有一些承接关系，或者是对上一轮小爱音箱反问的回复，或者是在当前轮会省略掉之前的一些槽位。比如用户在上一轮需要定个闹钟，小爱音箱反问定个几点的？用户就说8点的，这时小爱会把上轮意图省略掉。其实这里有着非常明显的承接关系，所以我们可以把这个任务定义成对上下文的承接关系进行建模，就比较自然地想到可以用BERT 句对分类任务去做。我们实际做的时候是把前三轮的query和answer作为上句，当前轮的query作为下句，经过BERT模型做分类。\n这种方法经过实践验证，效果确实不错，能够把刚才的那些case相对比较准确地识别出来，提升了系统3个点的准确率，召回率有微弱下降。\n四、产品的硬件整体设计 4.1 小米小爱音箱pro拆解细节 4.1.1 外部细节 包装盒顶部控制区域特写，最外圈是环形的灯带，向里是六个麦克风拾音孔，中间是控制按键：音量加减按键，静音按键，播放暂停按键。\n音箱底部有一圈防滑胶条，中间有一个小标签：小米小爱音箱Pro，型号LX06，中国制造，输入12V2A，小米通讯技术有限公司，CMIIT ID 2019AP4423，SN23948/A9TP09157。\n音箱背部的接口，上面是AUX IN音频接口，下面是充电接口。\n4.1.2 内部细节 主板上有一块屏蔽罩。\n内部导线特写，有海绵包裹防止共振噪声。\n取下扬声器，扬声器与音腔之间有缓震泡棉。\n较大的倒相孔，能够得到更好的低音效果。\n4.2 拆解总结 小米小爱音箱Pro的外型沿袭了自小米AI音箱以来的经典圆柱形设计，内部主板和扬声器的安置方式也相近；外壳上的小米Logo为金色，彰显Pro的身份。\n硬件配置方面，小米小爱音箱Pro与小米小爱智能音箱相差无几，全频12W的扬声器、 晶晨 A113X 主控芯片、 环形麦克风阵列、双频WiFi、蓝牙网关等都相同。两者目前的差价为30元，我爱音频网认为多花30元购买小米小爱音箱Pro 更划算一些，毕竟它支持红外遥控传统家电，使用起来更方便。\n参考链接: 【小米小爱音箱拆解报告】\n五、个人对于小爱同学的思考。 小米音箱的硬件层面有以下优点：1. 音质好：小米音箱采用了2.75英寸全频单元和双长行程低音单元，能够提供清晰、饱满、富有层次感的音质效果。\n多功能：小米音箱不仅可以播放音乐，还可以接收语音指令、播报天气、新闻、故事等有用信息，还能控制智能家居设备，实现多种功能。 设计美观：小米音箱外观简洁大方，采用网格纹理设计，具有现代感和科技感。 硬件配置高：小米音箱采用了4核1.4GHz处理器、2GB内存、8GB存储空间等高配置，保证了音箱的高效稳定运行。 价格实惠：小米音箱的价格相对较为实惠，是同类产品中性价比较高的一款产品 小米的语音助手小爱同学值得学习的地方有以下几点：1. 技术创新：小爱同学采用了先进的人工智能技术，如语音识别、自然语言处理、语义理解等，能够为用户提供更智能化和便捷的服务。\n生态建设：小爱同学通过与各种智能设备和服务的接入，建立了庞大的智能生态系统，为用户提供了更多的服务和选择。 用户体验：小爱同学通过自然语言交互，提供更友好、更直观的用户体验，能够更好地满足用户的需求。 安全保障：小爱同学注重用户隐私保护和数据安全，采用了多重安全措施，保证了用户的信息安全。 市场营销：小爱同学通过多种渠道和方式进行市场营销，如与小米手机、智能家居等产品的搭配销售，积极参与各种营销活动等，吸引了大量用户并提高了品牌知名度。 Filter table dataCreate a pivot tableCreate a chart from data series\nConfigure buttons visibility\n",
  "wordCount" : "173",
  "inLanguage": "zh",
  "image": "http://localhost:1313/images/papermod-cover.png","datePublished": "0001-01-01T00:00:00Z",
  "dateModified": "0001-01-01T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "王宇"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/posts/wiki/1.8%E5%B0%8F%E7%B1%B3%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%B0%8F%E7%88%B1%E5%90%8C%E5%AD%A6%E8%B0%83%E7%A0%94/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "PaperMod",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/%3Clink%20/%20abs%20url%3E"
    }
  }
}
</script>
</head>

<body class=" dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Home (Alt + H)">
                        
                    <img src="http://localhost:1313/images/msg_hu15231257772499651944.png" alt="" aria-label="logo"
                        height="20">Home</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://github.com/adityatelange/hugo-PaperMod/wiki/" title="WiKi">
                    <span>WiKi</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://localhost:1313/">主页</a>&nbsp;»&nbsp;<a href="http://localhost:1313/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      1.8、小米语音助手小爱同学调研
    </h1>
    <div class="post-description">
      1、竞品调研
    </div>
    <div class="post-meta">1 分钟&nbsp;·&nbsp;王宇&nbsp;|&nbsp;<a href="https://github.com/WangShaoyu1/myBlogPaperMod/tree/master/content/posts/wiki/1.8%e3%80%81%e5%b0%8f%e7%b1%b3%e8%af%ad%e9%9f%b3%e5%8a%a9%e6%89%8b%e5%b0%8f%e7%88%b1%e5%90%8c%e5%ad%a6%e8%b0%83%e7%a0%94.md" rel="noopener noreferrer" target="_blank">Suggest Changes</a>

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">目录</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e4%b8%80%e4%ba%a7%e5%93%81%e8%83%8c%e6%99%af" aria-label="一、产品背景">一、产品背景</a></li>
                <li>
                    <a href="#%e4%ba%8c%e4%ba%a7%e5%93%81%e6%9e%b6%e6%9e%84%e5%92%8c%e7%94%9f%e6%80%81" aria-label="二、产品架构和生态">二、产品架构和生态</a></li>
                <li>
                    <a href="#%e4%b8%89%e4%ba%a7%e5%93%81%e8%83%8c%e5%90%8e%e7%9a%84%e6%a0%b8%e5%bf%83%e6%8a%80%e6%9c%af" aria-label="三、产品背后的核心技术">三、产品背后的核心技术</a><ul>
                        
                <li>
                    <a href="#31-%e5%85%a8%e5%8f%8c%e5%b7%a5%e5%85%b3%e9%94%ae%e6%8a%80%e6%9c%af" aria-label="3.1 全双工关键技术">3.1 全双工关键技术</a><ul>
                        
                <li>
                    <a href="#311-%e6%8b%92%e8%af%86" aria-label="3.1.1 拒识">3.1.1 拒识</a><ul>
                        
                <li>
                    <a href="#3111%e7%ad%96%e7%95%a5%e6%8b%92%e8%af%86" aria-label="3.1.1.1 策略拒识">3.1.1.1 策略拒识</a></li>
                <li>
                    <a href="#3112-%e8%af%ad%e4%b9%89%e6%8b%92%e8%af%86" aria-label="3.1.1.2 语义拒识">3.1.1.2 语义拒识</a></li>
                <li>
                    <a href="#3113-%e5%a4%9a%e6%a8%a1%e6%80%81%e6%8b%92%e8%af%86" aria-label="3.1.1.3 多模态拒识">3.1.1.3 多模态拒识</a></li></ul>
                </li>
                <li>
                    <a href="#312-%e8%af%ad%e4%b9%89%e5%88%a4%e4%b8%8d%e5%81%9c" aria-label="3.1.2 语义判不停">3.1.2 语义判不停</a><ul>
                        
                <li>
                    <a href="#3121-%e8%a7%84%e5%88%99%e7%b3%bb%e7%bb%9f" aria-label="3.1.2.1 规则系统">3.1.2.1 规则系统</a></li>
                <li>
                    <a href="#3122-%e5%8d%95%e8%bd%ae%e5%88%a4%e5%88%ab%e6%a8%a1%e5%9e%8b" aria-label="3.1.2.2 单轮判别模型">3.1.2.2 单轮判别模型</a></li>
                <li>
                    <a href="#3123%e5%a4%9a%e8%bd%ae%e5%88%a4%e4%b8%8d%e5%81%9c" aria-label="3.1.2.3 多轮判不停">3.1.2.3 多轮判不停</a></li></ul>
                </li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#%e5%9b%9b%e4%ba%a7%e5%93%81%e7%9a%84%e7%a1%ac%e4%bb%b6%e6%95%b4%e4%bd%93%e8%ae%be%e8%ae%a1" aria-label="四、产品的硬件整体设计">四、产品的硬件整体设计</a><ul>
                        <ul>
                        
                <li>
                    <a href="#41-%e5%b0%8f%e7%b1%b3%e5%b0%8f%e7%88%b1%e9%9f%b3%e7%ae%b1pro%e6%8b%86%e8%a7%a3%e7%bb%86%e8%8a%82" aria-label="4.1 小米小爱音箱pro拆解细节">4.1 小米小爱音箱pro拆解细节</a><ul>
                        
                <li>
                    <a href="#411-%e5%a4%96%e9%83%a8%e7%bb%86%e8%8a%82" aria-label=" 4.1.1 外部细节"> 4.1.1 外部细节</a></li>
                <li>
                    <a href="#412-%e5%86%85%e9%83%a8%e7%bb%86%e8%8a%82" aria-label="4.1.2 内部细节">4.1.2 内部细节</a></li></ul>
                </li>
                <li>
                    <a href="#42-%e6%8b%86%e8%a7%a3%e6%80%bb%e7%bb%93" aria-label="4.2 拆解总结">4.2 拆解总结</a></li></ul>
                    </ul>
                </li>
                <li>
                    <a href="#%e4%ba%94%e4%b8%aa%e4%ba%ba%e5%af%b9%e4%ba%8e%e5%b0%8f%e7%88%b1%e5%90%8c%e5%ad%a6%e7%9a%84%e6%80%9d%e8%80%83" aria-label="五、个人对于小爱同学的思考。">五、个人对于小爱同学的思考。</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><ul>
<li>1 <a href="/posts/wiki/1.8%E5%B0%8F%E7%B1%B3%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%B0%8F%E7%88%B1%E5%90%8C%E5%AD%A6%E8%B0%83%E7%A0%94/#id-1.8、小米语音助手小爱同学调研-一、产品背景">一、产品背景</a></li>
<li>2<a href="/posts/wiki/1.8%E5%B0%8F%E7%B1%B3%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%B0%8F%E7%88%B1%E5%90%8C%E5%AD%A6%E8%B0%83%E7%A0%94/#id-1.8、小米语音助手小爱同学调研-二、产品架构和生态">二、产品架构和生态</a></li>
<li>3<a href="/posts/wiki/1.8%E5%B0%8F%E7%B1%B3%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%B0%8F%E7%88%B1%E5%90%8C%E5%AD%A6%E8%B0%83%E7%A0%94/#id-1.8、小米语音助手小爱同学调研-三、产品背后的核心技术">三、产品背后的核心技术</a>
<ul>
<li>3.1<a href="/posts/wiki/1.8%E5%B0%8F%E7%B1%B3%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%B0%8F%E7%88%B1%E5%90%8C%E5%AD%A6%E8%B0%83%E7%A0%94/#id-1.8、小米语音助手小爱同学调研-3.1全双工关键技术">3.1 全双工关键技术</a>
<ul>
<li>3.1.1<a href="/posts/wiki/1.8%E5%B0%8F%E7%B1%B3%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%B0%8F%E7%88%B1%E5%90%8C%E5%AD%A6%E8%B0%83%E7%A0%94/#id-1.8、小米语音助手小爱同学调研-3.1.1拒识">3.1.1 拒识</a>
<ul>
<li>3.1.1.1<a href="/posts/wiki/1.8%E5%B0%8F%E7%B1%B3%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%B0%8F%E7%88%B1%E5%90%8C%E5%AD%A6%E8%B0%83%E7%A0%94/#id-1.8、小米语音助手小爱同学调研-3.1.1.1策略拒识">3.1.1.1 策略拒识</a></li>
<li>3.1.1.2<a href="/posts/wiki/1.8%E5%B0%8F%E7%B1%B3%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%B0%8F%E7%88%B1%E5%90%8C%E5%AD%A6%E8%B0%83%E7%A0%94/#id-1.8、小米语音助手小爱同学调研-3.1.1.2语义拒识">3.1.1.2 语义拒识</a></li>
<li>3.1.1.3<a href="/posts/wiki/1.8%E5%B0%8F%E7%B1%B3%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%B0%8F%E7%88%B1%E5%90%8C%E5%AD%A6%E8%B0%83%E7%A0%94/#id-1.8、小米语音助手小爱同学调研-3.1.1.3多模态拒识">3.1.1.3 多模态拒识</a></li>
</ul>
</li>
<li>3.1.2<a href="/posts/wiki/1.8%E5%B0%8F%E7%B1%B3%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%B0%8F%E7%88%B1%E5%90%8C%E5%AD%A6%E8%B0%83%E7%A0%94/#id-1.8、小米语音助手小爱同学调研-3.1.2语义判不停">3.1.2 语义判不停</a>
<ul>
<li>3.1.2.1<a href="/posts/wiki/1.8%E5%B0%8F%E7%B1%B3%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%B0%8F%E7%88%B1%E5%90%8C%E5%AD%A6%E8%B0%83%E7%A0%94/#id-1.8、小米语音助手小爱同学调研-3.1.2.1规则系统">3.1.2.1 规则系统</a></li>
<li>3.1.2.2<a href="/posts/wiki/1.8%E5%B0%8F%E7%B1%B3%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%B0%8F%E7%88%B1%E5%90%8C%E5%AD%A6%E8%B0%83%E7%A0%94/#id-1.8、小米语音助手小爱同学调研-3.1.2.2单轮判别模型">3.1.2.2 单轮判别模型</a></li>
<li>3.1.2.3<a href="/posts/wiki/1.8%E5%B0%8F%E7%B1%B3%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%B0%8F%E7%88%B1%E5%90%8C%E5%AD%A6%E8%B0%83%E7%A0%94/#id-1.8、小米语音助手小爱同学调研-3.1.2.3多轮判不停">3.1.2.3 多轮判不停</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>4<a href="/posts/wiki/1.8%E5%B0%8F%E7%B1%B3%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%B0%8F%E7%88%B1%E5%90%8C%E5%AD%A6%E8%B0%83%E7%A0%94/#id-1.8、小米语音助手小爱同学调研-四、产品的硬件整体设计">四、产品的硬件整体设计</a>
<ul>
<li>4.1<a href="/posts/wiki/1.8%E5%B0%8F%E7%B1%B3%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%B0%8F%E7%88%B1%E5%90%8C%E5%AD%A6%E8%B0%83%E7%A0%94/#id-1.8、小米语音助手小爱同学调研-4.1小米小爱音箱pro拆解细节">4.1 小米小爱音箱pro拆解细节</a>
<ul>
<li>4.1.1 <a href="/posts/wiki/1.8%E5%B0%8F%E7%B1%B3%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%B0%8F%E7%88%B1%E5%90%8C%E5%AD%A6%E8%B0%83%E7%A0%94/#id-1.8、小米语音助手小爱同学调研-4.1.1外部细节">4.1.1 外部细节</a></li>
<li>4.1.2<a href="/posts/wiki/1.8%E5%B0%8F%E7%B1%B3%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%B0%8F%E7%88%B1%E5%90%8C%E5%AD%A6%E8%B0%83%E7%A0%94/#id-1.8、小米语音助手小爱同学调研-4.1.2内部细节">4.1.2 内部细节</a></li>
</ul>
</li>
<li>4.2<a href="/posts/wiki/1.8%E5%B0%8F%E7%B1%B3%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%B0%8F%E7%88%B1%E5%90%8C%E5%AD%A6%E8%B0%83%E7%A0%94/#id-1.8、小米语音助手小爱同学调研-4.2拆解总结">4.2 拆解总结</a></li>
</ul>
</li>
<li>5<a href="/posts/wiki/1.8%E5%B0%8F%E7%B1%B3%E8%AF%AD%E9%9F%B3%E5%8A%A9%E6%89%8B%E5%B0%8F%E7%88%B1%E5%90%8C%E5%AD%A6%E8%B0%83%E7%A0%94/#id-1.8、小米语音助手小爱同学调研-五、个人对于小爱同学的思考。">五、个人对于小爱同学的思考。</a></li>
</ul>
<h2 id="一产品背景">一、产品背景<a hidden class="anchor" aria-hidden="true" href="#一产品背景">#</a></h2>
<p>小米公司推出的智能语音助手小爱同学，是一款基于人工智能技术的智能语音助手。它可以通过语音指令实现音乐播放、智能家居控制、日程提醒等多种功能。本文将对小爱同学进行调研分析，探讨其市场表现、用户评价、产品特点等方面。市场表现小爱同学自推出以来受到了很多用户的关注和追捧。目前，小爱同学已拥有超过1.6亿的用户，覆盖了中国大陆、香港、台湾等地区。在智能语音助手市场中，小爱同学已成为竞争对手无法忽视的一员。据小米公司公布的数据，截至2021年4月，小爱同学每天处理的语音指令超过2亿次，市场份额达到了50%以上。</p>
<h2 id="二产品架构和生态">二、产品架构和生态<a hidden class="anchor" aria-hidden="true" href="#二产品架构和生态">#</a></h2>
<p>小米的语音助手小爱同学是一款基于人工智能技术的智能助手，可以通过语音指令来帮助用户完成各种操作。小爱同学的产品架构主要包括以下几个部分：</p>
<p>       1. 语音识别：通过语音识别技术将用户的语音指令转化为文本信息。</p>
<ol>
<li>语义理解：通过语义理解技术对用户的指令进行分析并提取出关键信息，从而确定用户的意图。</li>
<li>对话管理：通过对话管理技术进行对话交互，帮助用户完成指令。</li>
<li>服务接入：通过接入各种服务，为用户提供各种实用功能</li>
</ol>
<p>小爱同学的生态接入主要包括以下几个方面：</p>
<ol>
<li>小米智能家居：小爱同学可以接入小米智能家居，实现家庭生活的智能化控制，如智能开关灯、智能控制空调等。</li>
<li>第三方应用：小爱同学可以接入各种第三方应用，如订餐、打车、购物等。</li>
<li>互联网服务：小爱同学可以接入各种互联网服务，如查询天气、股票、新闻等。</li>
<li>其他智能设备：小爱同学也可以接入其他智能设备，如智能音箱、智能电视等，实现设备之间的联动控制。</li>
</ol>
<h2 id="三产品背后的核心技术">三、产品背后的核心技术<a hidden class="anchor" aria-hidden="true" href="#三产品背后的核心技术">#</a></h2>
<h3 id="31-全双工关键技术">3.1 全双工关键技术<a hidden class="anchor" aria-hidden="true" href="#31-全双工关键技术">#</a></h3>
<p><img loading="lazy" src="https://pic2.zhimg.com/80/v2-79b0dd39385e10284fe8500a6b621165_720w.webp" alt=""  />
</p>
<p>首先是回声消除，由于小爱音箱在说话的时候会把自己的声音也录音，所以需要消除音箱自己的声音。这部分主要是通过前端声学算法解决，而回声消除也是全双工非常必要的部分。</p>
<p>第二是拒识，小爱音箱会一直开着麦克风，难免录入很多背景噪音，比如周围人的说话声，拒识的功能就是把无效的语音过滤掉。</p>
<p>第三是多轮对话，连续的对话模式，对基于上下文的意图理解有更高的要求，用户可以在多轮交互中让小爱完成更复杂的任务，并允许任务的切换。</p>
<p>第四是节奏控制，用户会以更加自然的方式对话小爱音箱，就会存在着停顿、节奏的变化，这时需要通过判不停更加智能地适应用户的说话节奏。当用户连续发出多条指令时，也需要对每一条指令的回复进行优先级控制。</p>
<p>第五是主动对话，全双工的场景下，不仅是用户问小爱，小爱还可以主动地抛出话题，引导对话。</p>
<p>最后对服务架构也有比较高的挑战，由于小爱音箱会实时连续不断地把语音传上来，对系统的效率有很高的要求，需要有高效的通信协议，同时能支持多模态的输入和异步的处理。</p>
<p>总结一下，全双工交互的实现，涉及到的技术链条相对比较长，从声学、语音到NLP，涉及到算法与架构，需要各个模块的配合，才能达到相对比较好的体验。下面我会对中间的两部分内容：拒识和节奏控制中的语义判不停，分享一下我们在这方面做的一些实践、一些思考，希望能对大家有一些启发。</p>
<h4 id="311-拒识">3.1.1 拒识<a hidden class="anchor" aria-hidden="true" href="#311-拒识">#</a></h4>
<p>拒识功能就是识别出哪些话是同小爱说的，哪些不是同小爱说的。为什么拒识很重要呢？有统计数据表明，在全双工场景下无效人声占比大约在15%~30%之间，这个比例非常高，如果对所有的请求都响应，会对用户产生很大的干扰，导致全双工的可用性非常差。</p>
<p><img loading="lazy" src="https://pic3.zhimg.com/80/v2-b744d467f2e2520d9e82ee26eb995a8e_720w.webp" alt=""  />
</p>
<p>无效音拒识，首先是非人声部分，非人声主要指的是一些背景噪音以及周围环境产生的声音，这一部分目前通过VAD已经能比较成熟地解决。另一部分是不清晰的人声，通过ASR可能识别不出文字或者对文字不是太置信，这时候可以通过ASR拒识。另外，还有很多无效人声需要拒识处理。</p>
<p><img loading="lazy" src="https://pic2.zhimg.com/80/v2-212c505ad4b96c4fe1e3df628e0dee6d_720w.webp" alt=""  />
</p>
<p>拒识具体要解决哪些问题呢？上图给了一些具体的例子：比如周围人的聊天声，需要被拒识；用户在小爱音箱旁，跟周围的人说话，小爱音箱要能识别出来，将其拒识；假设在会议室里其他人在发言，要怎样识别？假设在家里，小孩在朗读课文，怎么识别出来不是同小爱音箱说话？所以这种与小爱没有交互意图的声音需要拒识。还有一类是电子人声，比如在电视旁边放了一个小爱智能音箱，电视里有人说话，小爱音箱如何识别出来？这是我们要解决的问题。</p>
<p><img loading="lazy" src="https://pic3.zhimg.com/80/v2-0ed08479640c5cf2aa99d5b324db7526_720w.webp" alt=""  />
</p>
<p>在拒识方面我们的做法大致可以分为四个阶段：</p>
<p>第一个阶段是场景拒识，对应场景式全双工。这种方案相对来说比较直接，首先我们定义好场景，确定场景下的意图集合，这是一个有限的集合。然后在意图集合中识别出用户意图，如果不在意图集合内的指令就可以不做响应。这种方式对于场景式全双工来说，基本上能达到可用的效果。</p>
<p>然后我们需要做全领域的全双工，这时我们直接想到的是采用策略拒识的方法，策略拒识顾名思义是人工设计的一些策略。制定策略要分析需要拒识的声音有什么样的规律，根据我们能用到的特征设计策略，这种方法在系统冷启动的阶段是比较适合的，因为我们拿不到太多的数据。有足够多的数据的时候，就要向端到端数据建模的方式发展，就有了后续的语义拒识和多模态拒识。</p>
<h5 id="3111策略拒识">3.1.1.1 <strong>策略拒识</strong><a hidden class="anchor" aria-hidden="true" href="#3111策略拒识">#</a></h5>
<p><strong><img loading="lazy" src="https://pic1.zhimg.com/80/v2-5e303a7847c7083a4b6c6206a6b8e898_720w.webp" alt=""  />
</strong></p>
<p>关于策略拒识，我们的做法是将策略拒识的架构分为两层，底层是特征提取层，上层是策略层。</p>
<p><strong><img loading="lazy" src="https://pic3.zhimg.com/80/v2-3374206c546899a5865b7e38bd5bd192_720w.webp" alt=""  />
</strong></p>
<p>特征提取层通过各种模块提取特征。关于特征，首先是NLU部分，NLU是利用小爱大脑意图识别的能力，给出domain和意图的打分。还有一部分是语言模型，语言模型会给每一个query计算出困惑度，表示一个query合法的程度，然后通过ASR模块，提供一些语音方面的特征，包括用户说话的语速、信噪比，包括音量等，ASR可以对query提供置信度信息，置信度表征的是语音清晰的程度。策略的制定采用启发式，我们人工针对具体的case设计了各种策略，系统里大概有十来种策略，比如根据query是不是无意语义进行拒识、对于超长的query进行拒识、对于一些长尾的闲聊很有可能是周围人在聊天，进行拒识。还会根据用户说话的语速，假设用户在很短的时间内说了很长的话，有可能不是正常地在与小爱对话。</p>
<p>策略拒识的优点首先是比较适合在系统的冷启动阶段使用，比较易于快速迭代。另外一点是可解释性比较强，能针对具体问题，理解背后原因，而且能制定相应的策略进行修正。策略拒识还存在缺点，由于拒识策略的设计是基于一部分特征，而不是综合利用所有特征，也就无法学习特征的组合。</p>
<p>当不同特征的策略有冲突的时候，这种办法就很难处理了</p>
<h5 id="3112-语义拒识">3.1.1.2 语义拒识<a hidden class="anchor" aria-hidden="true" href="#3112-语义拒识">#</a></h5>
<p><img loading="lazy" src="https://pic1.zhimg.com/80/v2-2f2aa2d705414fff718b0f82c6e0941c_720w.webp" alt=""  />
</p>
<p>我们的解决思路是数据建模的方式，基于当前的query和历史的query，建立二分类的模型，通过模型学习各类特征的最佳组合策略。这个思路有一个前提假设，用户“跟小爱说”和“不是跟小爱说”的query在语义空间上是不同的，用模型把两个空间划分出来，这样两个语义空间交集的部分，决定了这个问题能解决的上限。</p>
<p><img loading="lazy" src="https://pic4.zhimg.com/v2-b718c60d358c4774a8de4b8e1a284fb7_r.jpg" alt=""  />
</p>
<p>介绍一下我们的做法，数据方面，人工标注大约26K的训练集，采用的特征，首先策略拒识中用到的一些文本特征，针对query提取表示向量，然后加一些统计特征，比如query的频次、统计特征，从一方面也能反映query的合法性和热门程度。我们还用了上下文特征，对上一轮query的domain打分。</p>
<p><img loading="lazy" src="https://pic1.zhimg.com/80/v2-119508dc958b317285a3ffb991f43194_720w.webp" alt=""  />
</p>
<p>模型采用了BERT二分类，首先通过BERT提取出query和上一轮query的向量表示，通过外部的模块提取出刚才提到的一些可解释的特征，以拼接的方式，接上全连接层和softmax进行分类。</p>
<p><img loading="lazy" src="https://pic4.zhimg.com/80/v2-60c485b1aec2883ce12b440ea6661cdb_720w.webp" alt=""  />
</p>
<p>介绍一下效果，我们使用了1万的测试集，相对于策略拒识，语义拒识的准确率能提升10%，召回率能提升10%。效果是非常明显的，但语义拒识也存在着问题。</p>
<p>首先语义识别比较依赖于文本，如果ASR有错误的话，会产生比较大的干扰。比如一段无意义的人声如果被识别成有头部意图的query的话，很容易干扰拒识的工作。</p>
<p>第二个问题是有些时候我们无法单纯从文本确定是不是在和小爱说话，比如用户对着旁边的孩子说给我背一下《弟子规》。其实小爱音箱收到这条指令的时候，也可以执行。这个case说明“跟小爱说”和“不是跟小爱说”，语义空间是有交叉的，这一部分问题单纯通过语义是解决不了的。</p>
<h5 id="3113-多模态拒识">3.1.1.3 多模态拒识<a hidden class="anchor" aria-hidden="true" href="#3113-多模态拒识">#</a></h5>
<p>这就引入了我们的下一个方案：多模态的拒识。解决思路是通过DNN从原始的音频信号中提取语音特征的模式，同语义特征联合优化，得到更优的结果。</p>
<p><img loading="lazy" src="https://pic2.zhimg.com/80/v2-484488dd9a6c311af813c743af5243c5_720w.webp" alt=""  />
</p>
<p>这就涉及到语音特征的提取，语音信号如果想在神经网络中处理，需要先进行预处理，输入是一维的声音序列，对应到每个时间点，是信号的强度。通过处理之后，会产生一个二维的M乘N矩阵，M是每一帧能拿到的特征维度，N对应到每一帧是时间维度。</p>
<p><img loading="lazy" src="https://pic2.zhimg.com/v2-8e7c79786994c3ef81078af3ea7646f1_r.jpg" alt=""  />
</p>
<p>语音特征的提取有非常通用的流程，很多开源的工具就可以实现这样的操作。通过一系列的处理，可以提取到各类特征，比如常用的fbank、MFCC。</p>
<p><img loading="lazy" src="https://pic2.zhimg.com/80/v2-4693074f99f8624fdd617541b4b97e11_720w.webp" alt=""  />
</p>
<p>可以利用这些特征做下一步的处理。关于模型的选择，我们对比了很多类模型，这里列出两种，一种是单语音模型，另一种是语音加语义的模型。单语音模型的输入只有用户的语音，语音加语义模型会把用户的语音和ASR取得的文本以及其他的一些语义特征，都输入到模型中去。最终效果，语音加语义的模型效果是要优于单语音模型的。单语音模型效果比之前的语义模型是更优。</p>
<p><img loading="lazy" src="https://pic3.zhimg.com/v2-7e574b856d4fdb0e69c2b4d99858202a_r.jpg" alt=""  />
</p>
<p>我们采用的是语音加语义的模型的结构，也就是我们实验中效果最好的模型的结构。这个结构里最初的输入是语音，然后会有两路处理，一路是语音处理，一路是文本处理。语音处理会经过特征提取模块，得到一些二维的特征矩阵，还会经过语音的encoder，语音encoder可以选择适合处理语音的一些模型，比如CNN、CNN+LSTM，这里我们选用的是CNN+LSTM。语音经过ASR处理之后会得到文本，然后经过文本的encoder，文本的encoder也有很多种选择，我们可以选择比较流行的BERT。语音和文本分别得到表示向量一步融合。这一步融合是根据下层的网络设计确定，可以采用attention的机制，也可以通过门控的机制进行融合。</p>
<p>另外两边是一些高阶特征，包括从声音能提出来的一些比如音量、语速、信噪比，上图右边是通过NLU模块提到的语义的高阶特征，然后把三类特征做拼接，最后综合分类。</p>
<p>经过30K训练集，10K测试集，语音加语义拒识的模型准确率相对于语义拒识提升22%，召回率能提升10%。以上就是关于拒识部分的一些工作。</p>
<h4 id="312-语义判不停">3.1.2 语义判不停<a hidden class="anchor" aria-hidden="true" href="#312-语义判不停">#</a></h4>
<p>接下来介绍一下语义判不停的部分。</p>
<p><img loading="lazy" src="https://pic1.zhimg.com/80/v2-0a0583b6aebed8e79928912731db8f58_720w.webp" alt=""  />
</p>
<p>语义判不停要解决的问题是如何更加准确地对用户说话中存在的一些停顿判断句子是否结束。根据小爱的用户日志统计，我们发现大约5%~10%的query是没有说完的，这说明用户的很多请求还没来得及说完，小爱音箱就提前响应了。判断用户说完通用的方案是采用的VAD判停，这是一种声学方案，根据尾部的静音时长，设置一个固定的阈值，比如300毫秒到500毫秒，如果静音时长超过阈值就认为用户的话说完了，但如果用户的停顿超过这个时长就会出现过早判停的问题。针对这个问题的解决方案是在vad判停之后，再从语义的角度判断用户的query是不是完整。如果没有完整的话，继续延长收音时长，让用户话完请求。</p>
<p><img loading="lazy" src="https://pic3.zhimg.com/80/v2-e193faddd0ba9cd9340ea99ab375a266_720w.webp" alt=""  />
</p>
<p>我们采用的方案，处理流程主要分为三步：第一步是规则系统。如果通过规则系统能给出判断的结果，就不会走下一步了。如果规则系统无法确定，就会进行第二步，单轮判别模型。如果单轮判定模型认为用户没说完的话，假设在多轮的场景下，会进行第三步多轮修正，给出最终的结果。</p>
<h5 id="3121-规则系统">3.1.2.1 规则系统<a hidden class="anchor" aria-hidden="true" href="#3121-规则系统">#</a></h5>
<p><img loading="lazy" src="https://pic2.zhimg.com/80/v2-b81a7f385a67ac0639a6ceca09b32ce1_720w.webp" alt=""  />
</p>
<p>规则系统主要解决三类query，一类是数量较少相对集中的头部的query，，这一类query通过文本精确匹配的方式能很好地解决。第二类是一些有特定模式的query，可以去做正则的匹配。还有一类是短query，短query用模型相对难处理，我们采用了词性序列匹配的方式进行处理。规则扩充一部分是手动补充，还可以基于用户的session挖掘。如果一个query用户没有说完就被打断了，用户往往会重新再说一遍，这样我们可以计算一个query在历史上被重说的概率，从而拿到很多的候选，然后再做进一步的处理。</p>
<h5 id="3122-单轮判别模型">3.1.2.2 单轮判别模型<a hidden class="anchor" aria-hidden="true" href="#3122-单轮判别模型">#</a></h5>
<p>关于模型的部分，模型主要是解决一些中长尾的query，我们先后尝试了两种方法。第一种是基于语言模型的方法，第二种是基于分类模型的方法。</p>
<p><img loading="lazy" src="https://pic1.zhimg.com/80/v2-620da9c5590618fd929487a277588a4c_720w.webp" alt=""  />
</p>
<p>基于语言模型的方法是根据语言模型估计句子说完的概率，这种想法是非常直观的。因为语言模型比较擅长根据句子的前一个词计算出下一个词在词表上的分布。我们在NLP任务中一般会把句尾也当作一个词，这时候我们计算下一个词是句尾的概率，就可以表示一个句子说完的概率。</p>
<p>我们采用的是LSTM模型，模型的训练使用了中文的公开的一些数据集，也加入了小爱的一些query。判不停的条件用到三个：第一个条件是EOS的概率，就是句子下一个词是句尾的概率，这个概率越大，说明句子结束的概率越大。第二个条件是句子的混乱度，它表征了一个句子符合语法的程度，如果一个句子的混合度非常高，我们认为它可能是一些无效的query，这时候就不会做判不停。第三个条件是字数。</p>
<p><img loading="lazy" src="https://pic3.zhimg.com/80/v2-6c4696341157681e1bfa3817adf43a8a_720w.webp" alt=""  />
</p>
<p>相对于规则系统，加LSTM之后，准确率是有所下降的，因为规则系统是人工审核过的一些规则，准确率相对比较高。</p>
<p>加LSTM之后，在召回上大概有6%的提升，不是太大。这种方法存在一个问题：因为语言模型训练是基于非常大量数据的。如果想优化语言模型，周期相对比较长，经过一版优化之后，对于具体任务可能并没有太明显的效果，而且判别时可以用的参数也比较有限。所以说这种方法，比较难针对具体的任务进行特定的优化。</p>
<p><img loading="lazy" src="https://pic3.zhimg.com/80/v2-cdad80e3ddd19db81d533067a6358992_720w.webp" alt=""  />
</p>
<p>所以我们又尝试基于有监督的方式，用到的是BERT的二分类，也是比较容易想到的一种方法。这种方法的优点是利用大规模预训练模型学到的一些知识，针对特定的任务，对模型效果进行优化，所以理论上能达到更好的效果。由于分类模型其实是比较成熟的，对这样一个具体任务的优化，主要还是在数据建设还有数据增强方面。</p>
<p>然后关于数据集的构建，对于判不停任务，我们把不完整的query看作正样本，正样本的比例在实际的query分布中是很低的，所以我们的重点是如何寻找到更多的正样本。可以利用已有的规则系统，语言模型筛选出一批正样本，但是仅用这些的样本是不够的，如果只用这些样本，只能学到系统已有的一些知识，所以还需要在线上随机抽样一批query进行人工标注，这样能增加样本的多样性。模型效果的继续优化，主要是采用数据增强的方式，针对一些错误的case，寻找出一些类似的表达的query，挖掘出更多错误的样本。</p>
<p><img loading="lazy" src="https://pic2.zhimg.com/80/v2-2abe03ef1b52e8a2c7767af27c39064d_720w.webp" alt=""  />
</p>
<p>经过上面的优化，模型的效果已经达到了可用状态。这时候模型需要到线上提供服务，但是BERT模型实际在线服务的延时和QPS，离我们系统的要求是有一些距离的，所以需要继续对性能做优化。</p>
<p>这时我们尝试采用模型蒸馏的方式，训练一个更小的模型，具体的做法是：首先利用训练集训练了一个大的BERT模型，在BERT模型上效果比较好。然后将这个模型作为teacher模型，最终目标是训练一个更小的ALBERT tiny模型，这是一个层数更少更窄的模型，这个模型如果在线上提供服务，性能会非常高。我们通过大的BERT模型对小的ALBERT tiny蒸馏，蒸馏的方法是在训练小模型时，计算Loss的时候，除了包含真实label产生的Loss，还会根据Teacher模型计算出来的logits和Student的模型计算出来的logits，计算蒸馏损失，最后把两种损失做加权求和，得到总的Loss。通过这种方式，最终得到小的模型可以学到BERT大模型的一些知识，在效果没有太明显下降的情况下，性能可以达到系统的要求。所以最终优化后的ALBERT tiny模型，在三个GPU的条件下，P99能在20毫秒以内，QPS能到250左右。</p>
<p>上图是分类模型的效果，规则系统加上ALBERT之后，相对于原有的规则系统，准确率是有些下降的，但是召回率增长了14.8个点，比LSTM要好一些。</p>
<h5 id="3123多轮判不停">3.1.2.3 <strong>多轮判不停</strong><a hidden class="anchor" aria-hidden="true" href="#3123多轮判不停">#</a></h5>
<p>接下来介绍一下多轮判不停，这是对于一些单轮判不完整的query。基于多轮的情况下，可以完整地表达用户意图，这时不需要判不停。这里列了一个例子：上一轮用户说下载《王者荣耀》，小爱音箱回答确定要下载吗？用户说下载。如果用户首轮说下载，我们往往会认为接下来是要下载某一款软件，比如下载《王者荣耀》，但是在多轮情况下，就是完整的。针对上面这种case，只是对上一轮单轮判不完整的query才会出现，所以处理的流程是针对单轮模型判不停的query，采用多轮模型对结果修正。</p>
<p>如何进行建模呢？如何把上一轮或上几轮的信息，用到单轮模型的分类上呢？</p>
<p>我们是这样思考的。分析这一类case会发现，这种情况的次轮，跟上一轮有一些承接关系，或者是对上一轮小爱音箱反问的回复，或者是在当前轮会省略掉之前的一些槽位。比如用户在上一轮需要定个闹钟，小爱音箱反问定个几点的？用户就说8点的，这时小爱会把上轮意图省略掉。其实这里有着非常明显的承接关系，所以我们可以把这个任务定义成对上下文的承接关系进行建模，就比较自然地想到可以用BERT 句对分类任务去做。我们实际做的时候是把前三轮的query和answer作为上句，当前轮的query作为下句，经过BERT模型做分类。</p>
<p>这种方法经过实践验证，效果确实不错，能够把刚才的那些case相对比较准确地识别出来，提升了系统3个点的准确率，召回率有微弱下降。</p>
<h2 id="四产品的硬件整体设计">四、产品的硬件整体设计<a hidden class="anchor" aria-hidden="true" href="#四产品的硬件整体设计">#</a></h2>
<h4 id="41-小米小爱音箱pro拆解细节">4.1 小米小爱音箱pro拆解细节<a hidden class="anchor" aria-hidden="true" href="#41-小米小爱音箱pro拆解细节">#</a></h4>
<h5 id="411-外部细节"> 4.1.1 外部细节<a hidden class="anchor" aria-hidden="true" href="#411-外部细节">#</a></h5>
<p><img loading="lazy" src="/download/attachments/97893361/image2023-3-22_15-49-53.png?version=1&amp;modificationDate=1679471394182&amp;api=v2" alt=""  />
</p>
<p><img loading="lazy" src="/download/attachments/97893361/image2023-3-22_15-51-54.png?version=1&amp;modificationDate=1679471514289&amp;api=v2" alt=""  />
</p>
<p>包装盒顶部控制区域特写，最外圈是环形的灯带，向里是六个麦克风拾音孔，中间是控制按键：音量加减按键，静音按键，播放暂停按键。</p>
<p><img loading="lazy" src="/download/attachments/97893361/image2023-3-22_15-52-19.png?version=1&amp;modificationDate=1679471539997&amp;api=v2" alt=""  />
</p>
<p>音箱底部有一圈防滑胶条，中间有一个小标签：小米小爱音箱Pro，型号LX06，中国制造，输入12V2A，小米通讯技术有限公司，CMIIT ID 2019AP4423，SN23948/A9TP09157。</p>
<p><img loading="lazy" src="/download/attachments/97893361/image2023-3-22_15-52-50.png?version=1&amp;modificationDate=1679471570452&amp;api=v2" alt=""  />
</p>
<p>音箱背部的接口，上面是AUX IN音频接口，下面是充电接口。</p>
<h5 id="412-内部细节">4.1.2 内部细节<a hidden class="anchor" aria-hidden="true" href="#412-内部细节">#</a></h5>
<p><img loading="lazy" src="/download/attachments/97893361/image2023-3-22_15-55-36.png?version=1&amp;modificationDate=1679471736606&amp;api=v2" alt=""  />
</p>
<p>主板上有一块屏蔽罩。</p>
<p><img loading="lazy" src="/download/attachments/97893361/image2023-3-22_15-55-56.png?version=1&amp;modificationDate=1679471756490&amp;api=v2" alt=""  />
</p>
<p>内部导线特写，有海绵包裹防止共振噪声。</p>
<p><img loading="lazy" src="/download/attachments/97893361/image2023-3-22_15-57-0.png?version=1&amp;modificationDate=1679471820946&amp;api=v2" alt=""  />
</p>
<p>取下扬声器，扬声器与音腔之间有缓震泡棉。</p>
<p><img loading="lazy" src="/download/attachments/97893361/image2023-3-22_15-57-26.png?version=1&amp;modificationDate=1679471846625&amp;api=v2" alt=""  />
</p>
<p>较大的倒相孔，能够得到更好的低音效果。</p>
<h4 id="42-拆解总结">4.2 拆解总结<a hidden class="anchor" aria-hidden="true" href="#42-拆解总结">#</a></h4>
<p>小米小爱音箱Pro的外型沿袭了自小米AI音箱以来的经典圆柱形设计，内部主板和扬声器的安置方式也相近；外壳上的小米Logo为金色，彰显Pro的身份。</p>
<p>硬件配置方面，小米小爱音箱Pro与小米小爱智能音箱相差无几，全频12W的扬声器、 晶晨 A113X 主控芯片、 环形麦克风阵列、双频WiFi、蓝牙网关等都相同。两者目前的差价为30元，我爱音频网认为多花30元购买小米小爱音箱Pro 更划算一些，毕竟它支持红外遥控传统家电，使用起来更方便。</p>
<p>参考链接: <a href="https://baijiahao.baidu.com/s?id=1660194658392175266&wfr=spider&for=pc">【小米小爱音箱拆解报告】</a></p>
<h2 id="五个人对于小爱同学的思考">五、个人对于小爱同学的思考。<a hidden class="anchor" aria-hidden="true" href="#五个人对于小爱同学的思考">#</a></h2>
<p>小米音箱的硬件层面有以下优点：1. 音质好：小米音箱采用了2.75英寸全频单元和双长行程低音单元，能够提供清晰、饱满、富有层次感的音质效果。</p>
<ol>
<li>多功能：小米音箱不仅可以播放音乐，还可以接收语音指令、播报天气、新闻、故事等有用信息，还能控制智能家居设备，实现多种功能。</li>
<li>设计美观：小米音箱外观简洁大方，采用网格纹理设计，具有现代感和科技感。</li>
<li>硬件配置高：小米音箱采用了4核1.4GHz处理器、2GB内存、8GB存储空间等高配置，保证了音箱的高效稳定运行。</li>
<li>价格实惠：小米音箱的价格相对较为实惠，是同类产品中性价比较高的一款产品</li>
</ol>
<p>小米的语音助手小爱同学值得学习的地方有以下几点：1. 技术创新：小爱同学采用了先进的人工智能技术，如语音识别、自然语言处理、语义理解等，能够为用户提供更智能化和便捷的服务。</p>
<ol>
<li>生态建设：小爱同学通过与各种智能设备和服务的接入，建立了庞大的智能生态系统，为用户提供了更多的服务和选择。</li>
<li>用户体验：小爱同学通过自然语言交互，提供更友好、更直观的用户体验，能够更好地满足用户的需求。</li>
<li>安全保障：小爱同学注重用户隐私保护和数据安全，采用了多重安全措施，保证了用户的信息安全。</li>
<li>市场营销：小爱同学通过多种渠道和方式进行市场营销，如与小米手机、智能家居等产品的搭配销售，积极参与各种营销活动等，吸引了大量用户并提高了品牌知名度。</li>
</ol>
<p><a href="/">Filter table data</a><a href="/">Create a pivot table</a><a href="/">Create a chart from data series</a></p>
<p><a href="/users/tfac-settings.action">Configure buttons visibility</a></p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/1%E7%AB%9E%E5%93%81%E8%B0%83%E7%A0%94/">1、竞品调研</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="http://localhost:1313/posts/wiki/1.7%E6%99%BA%E8%83%BD%E8%AF%AD%E9%9F%B3%E8%AF%AD%E8%A8%80%E5%85%AC%E5%8F%B8%E8%B0%83%E7%A0%94%E6%80%9D%E5%BF%85%E9%A9%B0/">
    <span class="title">« 上一页</span>
    <br>
    <span>1.7、智能语音语言公司调研——思必驰</span>
  </a>
  <a class="next" href="http://localhost:1313/posts/juejin/window.ai-%E5%9C%A8%E6%9C%AC%E5%9C%B0%E8%B7%91ai%E5%A4%A7%E6%A8%A1%E5%9E%8B/">
    <span class="title">下一页 »</span>
    <br>
    <span>window.ai-在本地跑AI大模型</span>
  </a>
</nav>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 1.8、小米语音助手小爱同学调研 on x"
            href="https://x.com/intent/tweet/?text=1.8%e3%80%81%e5%b0%8f%e7%b1%b3%e8%af%ad%e9%9f%b3%e5%8a%a9%e6%89%8b%e5%b0%8f%e7%88%b1%e5%90%8c%e5%ad%a6%e8%b0%83%e7%a0%94&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fwiki%2f1.8%25E5%25B0%258F%25E7%25B1%25B3%25E8%25AF%25AD%25E9%259F%25B3%25E5%258A%25A9%25E6%2589%258B%25E5%25B0%258F%25E7%2588%25B1%25E5%2590%258C%25E5%25AD%25A6%25E8%25B0%2583%25E7%25A0%2594%2f&amp;hashtags=1%e3%80%81%e7%ab%9e%e5%93%81%e8%b0%83%e7%a0%94">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 1.8、小米语音助手小爱同学调研 on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fwiki%2f1.8%25E5%25B0%258F%25E7%25B1%25B3%25E8%25AF%25AD%25E9%259F%25B3%25E5%258A%25A9%25E6%2589%258B%25E5%25B0%258F%25E7%2588%25B1%25E5%2590%258C%25E5%25AD%25A6%25E8%25B0%2583%25E7%25A0%2594%2f&amp;title=1.8%e3%80%81%e5%b0%8f%e7%b1%b3%e8%af%ad%e9%9f%b3%e5%8a%a9%e6%89%8b%e5%b0%8f%e7%88%b1%e5%90%8c%e5%ad%a6%e8%b0%83%e7%a0%94&amp;summary=1.8%e3%80%81%e5%b0%8f%e7%b1%b3%e8%af%ad%e9%9f%b3%e5%8a%a9%e6%89%8b%e5%b0%8f%e7%88%b1%e5%90%8c%e5%ad%a6%e8%b0%83%e7%a0%94&amp;source=http%3a%2f%2flocalhost%3a1313%2fposts%2fwiki%2f1.8%25E5%25B0%258F%25E7%25B1%25B3%25E8%25AF%25AD%25E9%259F%25B3%25E5%258A%25A9%25E6%2589%258B%25E5%25B0%258F%25E7%2588%25B1%25E5%2590%258C%25E5%25AD%25A6%25E8%25B0%2583%25E7%25A0%2594%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 1.8、小米语音助手小爱同学调研 on reddit"
            href="https://reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fposts%2fwiki%2f1.8%25E5%25B0%258F%25E7%25B1%25B3%25E8%25AF%25AD%25E9%259F%25B3%25E5%258A%25A9%25E6%2589%258B%25E5%25B0%258F%25E7%2588%25B1%25E5%2590%258C%25E5%25AD%25A6%25E8%25B0%2583%25E7%25A0%2594%2f&title=1.8%e3%80%81%e5%b0%8f%e7%b1%b3%e8%af%ad%e9%9f%b3%e5%8a%a9%e6%89%8b%e5%b0%8f%e7%88%b1%e5%90%8c%e5%ad%a6%e8%b0%83%e7%a0%94">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 1.8、小米语音助手小爱同学调研 on facebook"
            href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fposts%2fwiki%2f1.8%25E5%25B0%258F%25E7%25B1%25B3%25E8%25AF%25AD%25E9%259F%25B3%25E5%258A%25A9%25E6%2589%258B%25E5%25B0%258F%25E7%2588%25B1%25E5%2590%258C%25E5%25AD%25A6%25E8%25B0%2583%25E7%25A0%2594%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 1.8、小米语音助手小爱同学调研 on whatsapp"
            href="https://api.whatsapp.com/send?text=1.8%e3%80%81%e5%b0%8f%e7%b1%b3%e8%af%ad%e9%9f%b3%e5%8a%a9%e6%89%8b%e5%b0%8f%e7%88%b1%e5%90%8c%e5%ad%a6%e8%b0%83%e7%a0%94%20-%20http%3a%2f%2flocalhost%3a1313%2fposts%2fwiki%2f1.8%25E5%25B0%258F%25E7%25B1%25B3%25E8%25AF%25AD%25E9%259F%25B3%25E5%258A%25A9%25E6%2589%258B%25E5%25B0%258F%25E7%2588%25B1%25E5%2590%258C%25E5%25AD%25A6%25E8%25B0%2583%25E7%25A0%2594%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 1.8、小米语音助手小爱同学调研 on telegram"
            href="https://telegram.me/share/url?text=1.8%e3%80%81%e5%b0%8f%e7%b1%b3%e8%af%ad%e9%9f%b3%e5%8a%a9%e6%89%8b%e5%b0%8f%e7%88%b1%e5%90%8c%e5%ad%a6%e8%b0%83%e7%a0%94&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fwiki%2f1.8%25E5%25B0%258F%25E7%25B1%25B3%25E8%25AF%25AD%25E9%259F%25B3%25E5%258A%25A9%25E6%2589%258B%25E5%25B0%258F%25E7%2588%25B1%25E5%2590%258C%25E5%25AD%25A6%25E8%25B0%2583%25E7%25A0%2594%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share 1.8、小米语音助手小爱同学调研 on ycombinator"
            href="https://news.ycombinator.com/submitlink?t=1.8%e3%80%81%e5%b0%8f%e7%b1%b3%e8%af%ad%e9%9f%b3%e5%8a%a9%e6%89%8b%e5%b0%8f%e7%88%b1%e5%90%8c%e5%ad%a6%e8%b0%83%e7%a0%94&u=http%3a%2f%2flocalhost%3a1313%2fposts%2fwiki%2f1.8%25E5%25B0%258F%25E7%25B1%25B3%25E8%25AF%25AD%25E9%259F%25B3%25E5%258A%25A9%25E6%2589%258B%25E5%25B0%258F%25E7%2588%25B1%25E5%2590%258C%25E5%25AD%25A6%25E8%25B0%2583%25E7%25A0%2594%2f">
            <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
                <path
                    d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
            </svg>
        </a>
    </li>
</ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span><a href="https://beian.miit.gov.cn/">粤ICP备2023039897号-1</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = '复制';

        function copyingDone() {
            copybutton.innerHTML = '已复制！';
            setTimeout(() => {
                copybutton.innerHTML = '复制';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
