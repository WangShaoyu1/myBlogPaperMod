{
	"title": "2.2FTT知识库-指令库",
	"author": "王宇",
	"publishTime": "三月22,2023",
	"readTime": "12s",
	"tags": "[\"2、系统学习小结\"]",
	"description": "2、系统学习小结",
	"article": "当前开放权限仅支持对账号已有指令库进行编辑，无法新增指令库，无法进行额外的设置（阈值调整、多条答案配置等）。\n\n### **1、工作流程**\n\n词槽管理：（1）按照表格模板批量导入词槽名称、词槽描述、实体ID、实体标准名、实体别名；（2）逐条新增、删除、编辑词槽名称、实体信息；（3）搜索词槽；\n\n指令编辑：（1）按照表格模板批量导入指令（指令名称、指令标识、指令描述、关联词槽、追问话术、追问失败话术、追问次数、相似问、执行成功话术、执行失败话术）；（2）逐条新增、删除、编辑指令；（3）设置指令启用状态；（4）搜索指令；\n\n指令训练：对已编辑的指令库进行训练，以更新编辑数据；\n\n指令测试：输入测试语句，测试指令识别效果；\n\n指令发布：将已训练的模型发布更新；\n\n  \n\n### 2、功能详述\n\n序号\n\n功能模块\n\n子模块\n\n功能描述\n\n备注\n\n1  \n  \n  \n  \n  \n  \n  \n\n词槽管理  \n  \n  \n  \n  \n  \n  \n\n搜索词槽名称\n\n1、【搜索词槽名称】在词槽名称中进行搜索匹配，返回搜索的词槽，支持关键词搜索\n\n/\n\n实体\n\n1、点击实体列的蓝色数字即可进行实体的新增、删除和修改，编辑后需进行保存，否则编辑无效。\n\n2、【实体】可对实体的信息包含ID、标准名、别名进行编辑\n\n3、【删除实体】删除已有实体，如实体存在关联的指令，则无法删除\n\n4、【新增实体】点击最下方的新增实体，进行实体的添加\n\n5、【保存】对编辑的内容进行保存\n\n6、【返回】进入词槽管理页面，且编辑的内容不会保存\n\n1、实体ID：实体唯一标识，不能包含中文，同一词槽内不可重复；新增实体的ID与已有的实体ID重复，则新增的实体无效，显示保存成功，实际没有保存到；不同词槽内的实体ID可重复，相互不影响\n\n2、实体标准名，同一词槽内不可重复，不超过50字\n\n3、实体别名有多个时用”==“进行连接，如汉语==普通话==中国语\n\n4、词槽内需至少剩一个实体，将词槽中的所有实体删除后无法进行保存，显示参数无效\n\n词槽编辑\n\n1、【编辑】可对词槽名称和词槽描述进行修改\n\n2、【删除】能对整个词槽进行删除，删除后无法找回\n\n1、词槽名称编辑的时候可能会导致重复名称，这个时候可以成功保存，新增重复项则无法完成操作\n\n  \n\n导出词槽\n\n1、【导出词槽】excel表格的形式导出词槽信息，包含词槽名称、词槽描述、实体ID、实体标准名、实体别名\n\n1、导出文件中：“词槽描述”为“词槽藐视”\n\n2、导出文件名为command\\_109\\_xxxxxxxxxx。其中109是指令库名称的business ID\n\n导入词槽\n\n1、【导入词槽】添加大量词槽时，可通过词槽模板进行词槽批量导入\n\n2、下载模板后，按模板的格式和要求填入词槽名称、词槽描述、实体ID、实体标准名、实体别名，完成后上传文件\n\n3、导入格式：\n\n![](/download/attachments/97891062/image2023-3-20_11-24-10.png?version=1&modificationDate=1679282650577&api=v2)\n\n1、词槽名称必填，不可重复，不超过50字，支持汉字\n\n2、导入时对实体ID、实体标准名、实体别名编辑要求同上\n\n3、模板之间的空行会导出空的实体，不影响结果\n\n4、导入失败原因：\n\n*   表格\"Sheet\"未改命名为“词槽”\n*   加密文档无法导入\n*   系统本身原因，可以刷新重试\n\n新增词槽\n\n1、【新增词槽】显示词槽信息，词槽名称必填，词槽描述选填\n\n2、【保存】进行词槽名称保存\n\n3、【返回】进入词槽管理页面，且词槽信息不会保存\n\n1、【新增词槽】出现相同词槽名称会显示数据库添加异常，词槽已存在\n\n词槽列表\n\n1、【词槽列表】可以进行每页展示数量和页数选择\n\n2、页面展示支持10条/页、20条/页、30条/页、40条/页、50条/页、100条/页\n\n3、支持手动切换下一页和输入页数快速切换\n\n/\n\n2  \n  \n  \n  \n  \n  \n  \n\n指令编辑  \n  \n  \n  \n  \n  \n  \n\n搜索指令名称\n\n1、【搜索指令名称】是在指令名称中进行搜索匹配，通过关键词匹配返回搜索的结果\n\n/\n\n相似问\n\n1、点击相似问列的蓝色数字即可进行相似问的添加和删除，编辑后需进行保存，否则编辑无效\n\n2、【引用关联词槽】如果指令关联了词槽，则相似问可引用词槽\n\n3、【添加】用于相似问的新增，在语料需要引用词槽的位置选择要引用的词槽名称，如设置\\[语音\\]\n\n4、【删除勾选项】可勾选想要删除的相似问，进行批量删除\n\n5、【保存】对编辑的内容进行保存\n\n6、【返回】进入指令编辑页面，且编辑内容不会保存\n\n1、如果指令关联的词槽为系统词槽（duration和number），则新增相似问时无法直接引用关联词槽名字，直接输入包括的词槽实体的语料即可，如大火三分钟\n\n2、暂时无法对某一条相似问进行内容的修改，只能直接删除\n\n指令编辑\n\n1、【编辑】可对指令信息进行编辑，包括指令名称、指令标识、指令描述、关联词槽、追问话术、执行成功话术、执行失败话术\n\n2、【删除】可删除整条指令内容，删除后无法找回\n\n1、不关联词槽情况下不会显示是否多轮追问\n\n2、关联词槽状态下不追问，不会显示追问话术和追问失败话术\n\n指令状态\n\n1、【状态】开关即为指令生效开关\n\n2、指令状态为关闭并经过指令训练时，通过指令测试无法匹配到该指令\n\n![](/download/attachments/97891062/image2023-3-20_13-57-1.png?version=1&modificationDate=1679291821893&api=v2)\n\n  \n\n导出指令\n\n1、【导出指令】excel表格的形式导出指令信息，包含指令名称、指令标识、指令描述、关联词槽、追问话术、追问失败话术、追问次数、相似问、执行成功话术、执行失败话术\n\n2、导出表格与导入模板一致\n\n1、目前仅支持全部导出，暂不支持选择性导出和部分导出\n\n  \n\n导入指令\n\n1、【导入指令】当需要添加大量指令时，可通过指令模板将指令信息批量导入\n\n2、根据指令模板的要求和格式填入指令名称、指令标识、指令描述、关联词槽、追问话术、追问失败话术、追问次数、相似问、执行成功话术、执行失败话术，完成后上传文件\n\n3、导入格式：\n\n![](/download/attachments/97891062/image2023-3-20_14-9-24.png?version=1&modificationDate=1679292564988&api=v2)\n\n1、指令名称：\n\n*   指令名称和已有指令名称重复的，该指令导入失败\n*   缺少指令名称的，指令导入无效\n\n2、指令标识：\n\n*   不能包含中文名\n*   系统上不同指令的指令标识可以重复（系统优化需求已提出）\n*   表格中缺少指令标识也可以导入成功\n\n3、词槽：\n\n*   如果导入指令的关联词槽在词槽库中不存在，则会自动在词槽列表添加相应词槽，但无实体\n*   引用词槽名称时用的括号为\\[ \\]，使用其他括号无法引用到词槽\n*   指令关联的词槽为系统词槽（duration和number），则新增相似问时无法直接引用关联词槽名字，直接输入包括的词槽实体的语料即可，如大火三分钟\n\n4、追问次数\n\n*   追问次数未填，则默认为0\n*   可以填写超过3次，能导入成功，同时也可以执行，但直接在系统创建最多只能选择3次追问\n\n5、报错分析：\n\n*   表格页签“sheet”未改名为“指令”\n*   加密文档无法导入\n*   系统本身原因，可以刷新重试\n\n新增指令\n\n1、【新增指令】进行指令的添加。指令名称、指令标识必填。指令描述选填\n\n2、【保存】保存编辑好的指令\n\n1、【新增指令】出现相同指令名称会显示异常\n\n2、新增指令可一次关联多个词槽\n\n3、不关联词槽情况下不会显示是否多轮追问\n\n4、关联词槽状态下不追问，不会显示追问话术和追问失败话术\n\n指令列表\n\n1、【指令列表】展示指令的页面，按创建时间排序新增在前\n\n2、页面展示支持10条/页、20条/页、30条/页、40条/页、50条/页、100条/页；\n\n3、支持手动切换下一页和输入页码快速切换\n\n  \n\n3\n\n指令训练\n\n开始训练\n\n1、【开始训练】编辑的指令要通过训练并成功后，才能够在指令测试中进行期望的反馈\n\n1、缺少追问话术可以训练成功\n\n2、关联词槽中没有实体可以训练成功\n\n3、缺少指令标识可以训练成功\n\n训练记录\n\n1、显示训练的信息，包含最后编辑时间、上次训练时间、上次发布时间三部分\n\n  \n\n4\n\n指令测试\n\n输入测试指令\n\n1、在输入想测试的指令后点击【发送】，可以显示出对话框或者结果。\n\n2、可以通过【清空会话】清空当前测试的所有内容\n\n1、在指令训练过程中输入测试指令会显示“未找到训练成功的导航库”\n\n2、在删除指令后，不进行训练，输入该指令进行测试会显示：服务端进入exception报错，error\n\n识别结果\n\n1、显示answer，score，code，failed\\_answer，succeed\\_answer等内容\n\n*   answer显示对话框给出的回复，如有追问，则显示追问话术；如识别到指令，则显示default；如识别不到指令，则显示null\n*   score表示测试问句与匹配到的指令的匹配分数，如测试问句与指令的相似问完全相同，则score为1\n*   code表示系统匹配到的指令的指令标识\n*   failed\\_answer表示系统匹配到的指令的执行失败话术\n*   succeed\\_answer表示系统匹配到的指令的执行成功话术\n\n2、【copy】可以将指令库识别结果处的代码进行复制\n\n  \n\n5\n\n指令发布\n\n指令发布\n\n1、【发布】用于发布已经训练成功的指令\n\n2、发布之后，指令才能同步到客户端进行语音识别\n\n1、指令训练过程中，指令无法发布\n\n发布记录\n\n1、显示发布的信息，包含最后编辑时间、上次训练时间、上次发布时间三部分\n\n  \n\n  \n\n### 3、注意事项\n\n序号\n\n功能模块\n\n描述\n\n提出人\n\n序号\n\n功能模块\n\n描述\n\n提出人\n\n1\n\n词槽编辑\n\n词槽名称编辑的时候可能会导致重复名称，这个时候系统不会报错。【新增词槽】时出现相同词槽名称会显示数据库添加异常，词槽已存在\n\n周引凤\n\n2\n\n导入词槽\n\n导入文件：不能识别加密文档：可在钉钉文档excel在线编辑内容，下载至桌面，再上传。（仅针对电脑加密情况）\n\n周引凤\n\n3\n\n导入指令\n\n指令的相似问引用的是**系统词槽**时，不能直接写词槽名称，要用具体实体来代替\n\n错误示例：设置大火\\[duration\\]、设置音量为\\[number\\]\n\n正确示例：设置大火五分钟、设置音量为50\n\n马冬颖\n\n4\n\n指令标识\n\n指令标识重复时系统不会提醒和报错，可以正常执行，但由于指令标识是发给客户端的操作代码，需要和执行功能一一对应，因此需要注意指令标识不重复\n\n马冬颖\n\n### 4、系统优化需求\n\n序号\n\n功能模块\n\n子模块\n\n问题描述\n\n需求描述\n\n反馈人\n\n问题分类\n\n备注（图片）\n\n跟进情况\n\n跟进人\n\n序号\n\n功能模块\n\n子模块\n\n问题描述\n\n需求描述\n\n反馈人\n\n问题分类\n\n备注（图片）\n\n跟进情况\n\n跟进人\n\n  \n\n指令编辑\n\n搜索指令名称\n\n搜索后只能点击“搜索图标”返回结果\n\n当光标选中搜索框的情况下，支持通过回车快捷键进行搜索\n\n杨团义\n\n需求\n\n![](/download/attachments/97891062/image2023-3-22_16-1-35.png?version=2&modificationDate=1679473091107&api=v2)\n\n  \n\n  \n\n  \n\n词槽管理\n\n搜索词槽名称\n\n搜索后只能点击“搜索图标”返回结果\n\n当光标选中搜索框的情况下，支持通过回车快捷键进行搜索\n\n杨团义\n\n需求\n\n![](/download/attachments/97891062/image2023-3-22_16-3-15.png?version=1&modificationDate=1679472195864&api=v2)\n\n  \n\n  \n\n  \n\n指令编辑\n\n指令标识\n\n指令标识重复，系统不会报错\n\n设置指令标识不能重复的规则\n\n马冬颖\n\n缺陷\n\n![](/download/attachments/97891062/image2023-3-22_16-33-12.png?version=1&modificationDate=1679473992135&api=v2)\n\n  \n\n  \n\n  \n\n指令编辑\n\n导入指令\n\n指令标识为必填，但是上传表格中指令标识缺失，也可以成功导入该指令\n\n缺少指令标识则导入失败，并显示错误原因\n\n马冬颖\n\n缺陷\n\n![](/download/attachments/97891062/image2023-3-22_17-5-31.png?version=1&modificationDate=1679475931374&api=v2)\n\n  \n\n  \n\n  \n\n词槽管理\n\n词槽编辑\n\n词槽名称编辑的时候可能会导致重复名称，系统不会报错\n\n设置词槽编辑时词槽名称不能重复规则\n\n周引凤\n\n缺陷\n\n![](/download/attachments/97891062/image2023-3-22_16-35-25.png?version=1&modificationDate=1679474125904&api=v2)\n\n  \n\n  \n\n  \n\n词槽管理\n\n导出词槽\n\n导出词槽“词槽描述”导出为“词槽藐视”\n\n将”词槽藐视“改为“词槽描述”\n\n周引凤\n\n缺陷\n\n![](/download/attachments/97891062/image2023-3-22_14-33-24.png?version=1&modificationDate=1679466804895&api=v2)\n\n  \n\n  \n\n  \n\n指令编辑\n\n相似问引用关联词槽\n\n引用系统词槽（duration和number）时，相似问中不能直接用词槽名称来代替，要举实体的例子来代替，比如三分钟\n\n引用系统词槽时，相似问中同样可以用词槽名称来代替\n\n马冬颖\n\n需求\n\n![](/download/attachments/97891062/image2023-3-21_15-55-1.png?version=1&modificationDate=1679385302314&api=v2)\n\n  \n\n  \n\n  \n\n词槽管理\n\n词槽删除\n\n词槽只能一个一个删除\n\n实现选择批量删除词槽的功能\n\n马冬颖\n\n需求\n\n  \n\n  \n\n  \n\n  \n\n指令编辑\n\n指令删除\n\n指令只能一个一个删除\n\n实现选择批量删除指令的功能\n\n马冬颖\n\n需求\n\n  \n\n  \n\n  \n\n  \n\n指令编辑\n\n指令状态\n\n指令状态只能一个一个开启或关闭\n\n实现选择并批量修改指令状态的功能\n\n马冬颖\n\n需求\n\n  \n\n  \n\n  \n\n  \n\n导入指令/导入词槽\n\n文件上传\n\n不知道哪些指令导入成功，哪些导入失败\n\n生成导入结果报告，显示每条指令的导入结果以及失败原因\n\n马冬颖\n\n需求\n\n  \n\n  \n\n  \n\n  \n\n导入指令/导入词槽\n\n文件上传\n\n每次上传文件都需要多次刷新系统才能上传成功\n\n  \n\n马冬颖\n\n缺陷\n\n  \n\n  \n\n  \n\n  \n\n  \n\n指令编辑\n\n追问次数\n\n直接新增指令，追问次数最多只能选三次，但是导入指令时追问话术填四次次也可以成功导入，并能成功执行追问四次\n\n导入指令的功能和新增指令统一，只能填写追问1、2、3次，如果填写超过3次，则默认追问次数为3\n\n马冬颖\n\n缺陷\n\n![](/download/thumbnails/97891062/image2023-3-22_17-2-6.png?version=1&modificationDate=1679475728281&api=v2)\n\n  \n\n  \n\n  \n\n指令训练\n\n  \n\n缺少追问话术可以训练成功\n\n缺少指令标识可以训练成功\n\n出现缺少追问话术和指令标识的情况，训练失败，并显示具体原因\n\n马冬颖\n\n缺陷\n\n![](/download/attachments/97891062/image2023-3-22_16-48-0.png?version=1&modificationDate=1679474880434&api=v2)\n\n  \n\n  \n\n  \n\n词槽管理\n\n  \n\n缺少关于日期和时间的系统词槽\n\n增加系统词槽：\n\n一，日期类系统词槽\n\n*   星期一，星期二\n*   今天，明天，后天\n*   早上，晚上，下午\n*   X月X日，每周六，每个工作日\n\n二，时间类词槽\n\n*   5点，四点半\n\n周引凤\n\n需求\n\n  \n\n  \n\n  \n\n### 5、本模块存在疑问\n\n序号\n\n所属模块\n\n问题描述\n\n图片\n\n提出人\n\n答案\n\n解决人\n\n序号\n\n所属模块\n\n问题描述\n\n图片\n\n提出人\n\n答案\n\n解决人\n\n  \n\n指令测试\n\n在二期指令库内容下，测试“打开电视”指令，会匹配到“跳舞”指令。问题：“打开电视”与跳舞指令中的相似问没有一个汉字是重叠的，为什么会识别到跳舞指令？\n\n![](/download/attachments/97891062/image2023-3-21_9-20-44.png?version=1&modificationDate=1679361644699&api=v2)\n\n![](/download/thumbnails/97891062/image2023-3-21_9-24-9.png?version=1&modificationDate=1679361849348&api=v2)\n\n周引凤\n\n  \n\n  \n\n  \n\n指令测试\n\n匹配分数是如何计算的？\n\n1、相似问是”减小火力“和“减少一档火力”，用“减少火力”来测试，匹配分数很低\n\n2、且用同一句语料进行多次测试，产生的匹配分数也不一样，一次是0.17，一次是0.12\n\n![](/download/attachments/97891062/image2023-3-21_15-42-31.png?version=1&modificationDate=1679384551285&api=v2)![](/download/attachments/97891062/image2023-3-21_19-22-48.png?version=1&modificationDate=1679397768868&api=v2)![](/download/attachments/97891062/image2023-3-21_19-19-51.png?version=1&modificationDate=1679397591113&api=v2)\n\n马冬颖\n\n  \n\n  \n\n  \n\n  \n\n  \n\n[Filter table data](#)[Create a pivot table](#)[Create a chart from data series](#)\n\n[Configure buttons visibility](/users/tfac-settings.action)"
}