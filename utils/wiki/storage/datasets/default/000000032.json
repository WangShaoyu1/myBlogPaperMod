{
	"title": "会话历史记录",
	"author": "王宇",
	"publishTime": "八月14,2024",
	"readTime": "12s",
	"tags": "[\"4、对话管理能力\"]",
	"description": "4、对话管理能力",
	"article": "1.背景\n\n基于目前自研大模型的逐渐成熟以及对话服务改造业务，以及后续大模型训练优化升级数据需求，需要针对目前FTT内容和大模型内容，结合运营和业务需求对用户会话历史记录进行留存，目前针对现有FTT内容和大模型内容进行了第一版梳理，后可沿用至各个对话服务\n\n2.会话历史记录内容\n\n[对话记录保留内容（FTT+LLM） · 钉钉文档 (dingtalk.com)](https://alidocs.dingtalk.com/i/nodes/dQPGYqjpJYgwGOy4cp2rRjR7Wakx1Z5N?iframeQuery=utm_medium%3Dim_card%26utm_source%3Dim&rnd=0.9047095408325281&orderType=SORT_KEY&corpId=ding55f7bd32ccdb264a35c2f4657eb6378f&utm_source=im&sortType=DESC&utm_medium=im_card&utm_scene=person_space&cid=198164879%3A2186468173)\n\n事件编号\n\n属性英文变量名\n\n事件属性显示名\n\n属性值类型\n\n取值\n\n备注\n\nFTT-json\n\n  \n\n事件编号\n\n属性英文变量名\n\n事件属性显示名\n\n属性值类型\n\n取值\n\n备注\n\nFTT-json\n\n  \n\n1\n\n**user\\_id**\n\n用户ID\n\nSTRING\n\n  \n\n  \n\n  \n\n  \n\n2\n\n**device\\_id**\n\n设备唯一标识\n\nSTRING\n\n  \n\n  \n\n  \n\n  \n\n3\n\n**session\\_id**\n\n对话标识\n\nSTRING\n\n  \n\n会话记录入库时由后端生成，格式UUID \n\n  \n\n  \n\n4\n\n**record\\_id**\n\n当前轮次对话标识\n\nSTRING\n\n  \n\n对应目前FTT平台的reqid字段，时间戳\n\n  \n\n  \n\n5\n\n**avatar\\_id**\n\n虚拟人角色id\n\nSTRING\n\n  \n\n  \n\n  \n\n  \n\n6\n\n**app\\_code**\n\n应用id\n\nSTRING\n\n应用渠道 APP code\n\n  \n\n  \n\n  \n\n7\n\n**asr\\_result**\n\n识别文本内容\n\nSTRING\n\n  \n\n即LLM的query\n\n\"query\": \"你几岁了\",\n\n  \n\n8\n\n**instruction\\_asr\\_first\\_time**\n\n识别到第一个字的时间点\n\nDATETIME\n\n  \n\n  \n\n  \n\n  \n\n9\n\n**instruction\\_template\\_type**\n\n知识母版类型\n\nSTRING\n\nInstruction\\_library 指令  \nFAQ\\_Library 问答  \nCOMMAND 大模型指令  \nNORMAL 大模型问答\n\n  \n\n  \n  \n\"llmReplay\": \"COMMAND\",  \n  \n\n  \n\n10\n\n**knowledgeId**\n\n命中知识库（LLM）\n\nSTRING\n\n示例  \ncommand\\_dual-screen-nvidia\\_oven  \nfaq\\_wda\\_oven  \nsql\\_business\\_database\\_recipe  \nhealth\\_assistant\\_general  \nhealth\\_assistant\\_table\n\n  \n\n\"knowledgeId\": \"command\\_dual-screen-nvidia\\_oven\",  \n  \n\n  \n\n11\n\n**Knowledge \\_master\\_id**\n\n命中知识库（FTT）\n\nNUMBER\n\n示例  \n270\n\nFTT平台对应hitBusiness字段\n\n  \n\n  \n\n12\n\n**instruction\\_type**\n\n业务类型(FTT)\n\nSTRING\n\nCOOKING 烹饪类  \nRECIPES 菜谱类  \nCOOKING 烹饪类  \nSTSTEM 系统类  \n蛋宝属性&寒暄  \n微波炉常识  \n...\n\n  \n\n  \n\n  \n\n13\n\n**instruction\\_name**\n\n指令名称\n\nSTRING\n\n  \n\n大模型针对name匹配对应指令名称\n\n  \n\n  \n\n14\n\n**instruction\\_flag**\n\n指令标识\n\nSTRING\n\n大模型对应name\n\n  \n\n\"replyContent\": \"\\[{\\\\\"id\\\\\":\\\\\"call\\_lqUFOO3JyFX3aszUww6bkktM\\\\\",\\\\\"name\\\\\":\\\\\"volume\\_up\\\\\",\\\\\"arguments\\\\\":\\\\\"{\\\\\\\\\\\\\"volume\\_value\\\\\\\\\\\\\":20}\\\\\"}\\]\"\n\n  \n\n15\n\n**parameter**\n\n参数\n\nJSON\n\n  \n\nFTT和大模型同一个参数名称保持一致\n\n  \n\n  \n\n16\n\n**parameter\\_value**\n\n参数值\n\nSTRING\n\n  \n\n  \n\n  \n\n  \n\n17\n\n**tts\\_result\\_source**\n\n回复内容来源\n\nSTRING\n\nlocal 本地播报内容  \nFTT FTT平台返回播报内容  \nLLM 大模型返回播报内容\n\n  \n\n  \n\n  \n\n18\n\n**tts\\_result**\n\n回复内容\n\nSTRING\n\n最终播报给用户内容\n\n  \n\n  \n\n  \n\n19\n\n**tts\\_result\\_time**\n\n回复时间点\n\nDATETIME\n\nTTS开始播报时间\n\n  \n\n  \n\n  \n\n20\n\n**response**\n\n响应时长\n\nNUMBER\n\n\\=TTS开始播报的时间点- 用户说完最后一个字体时间点\n\n  \n\n  \n\n  \n\n[Filter table data](#)[Create a pivot table](#)[Create a chart from data series](#)\n\n[Configure buttons visibility](/users/tfac-settings.action)"
}