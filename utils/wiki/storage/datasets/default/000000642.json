{
	"title": "向量模型GPU支持镜像制作",
	"author": "王宇",
	"publishTime": "八月21,2024",
	"readTime": "12s",
	"tags": "[\"知识插件\"]",
	"description": "知识插件",
	"article": "1、使用基础镜像启动一个容器：[nvcr.io/nvidia/cuda:12.2.0-runtime-ubuntu20.04](http://nvcr.io/nvidia/cuda:12.2.0-runtime-ubuntu20.04)  \n2、更新、安装依赖、选择时区、安装基础包  \napt update  \napt -y upgrade  \napt install build-essential zlib1g-dev libffi-dev libssl-dev libreoffice -y  \napt install ca-certificates apt-transport-https software-properties-common lsb-release -y  \napt-get -y install $(grep -vE \"^\\\\s\\*#\" /tmp/base\\_requirements.txt | tr \"\\\\r\\\\n\" \" \")\n\n[base\\_requirements.txt](/download/attachments/129201167/base_requirements.txt?version=1&modificationDate=1724212768527&api=v2)  \n3、下载 Python 3.11 源代码、配置、编译并安装  \n离线下载python3.11包：[https://www.python.org/ftp/python/3.11.6/Python-3.11.6.tgz](https://www.python.org/ftp/python/3.11.6/Python-3.11.6.tgz)  \ntar -xzvf Python-3.11.6.tgz  \ncd Python-3.11.6  \n\\# 在配置文件时通过--prefix指定安装路径  \n\\# mkdir /usr/local/python3.11  \n\\# ./configure --prefix=/usr/local/python3.11  \n./configure  \n./configure --enable-optimizations # 执行后无序额外配置可直接使用python3调用python编辑器  \nmake && make install  \n4、验证安装、修改软链接  \npython3.11 --version  \npython3 --version  \npip3 --version  \nwhich python3  \n\\# rm -rf /usr/local/bin/python  \nln -s /usr/local/bin/python3.11 /usr/local/bin/python  \n\\# 升级pip版本  \npip3 install --upgrade pip  \n5、清除安装包  \nrm -r Python-3.11.6.tgz  \nrm -r Python-3.11.6  \n6、安装指定版本的pytorch（安装太慢可在对应网址下载后离线安装）  \n\\# pip install torch==2.1.0 --index-url [https://download.pytorch.org/whl/cu121](https://download.pytorch.org/whl/cu121)  \n\\# pip install torch==2.1.0 -f [https://download.pytorch.org/whl/cu121/torch\\_stable.html](https://download.pytorch.org/whl/cu121/torch_stable.html)  \npip install torch-2.1.0+cu121-cp311-cp311-linux\\_x86\\_64.whl  \npip install numpy==1.24.4 -i [https://mirrors.aliyun.com/pypi/simple/](https://mirrors.aliyun.com/pypi/simple/) --trusted-host [mirrors.aliyun.com/pypi](http://mirrors.aliyun.com/pypi)  \n7、验证是否安装成功  \npython3  \nimport torch  \ntorch.cuda.is\\_available() # 成功返回true\n\n[Filter table data](#)[Create a pivot table](#)[Create a chart from data series](#)\n\n[Configure buttons visibility](/users/tfac-settings.action)"
}