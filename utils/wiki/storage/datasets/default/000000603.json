{
	"title": "知识图谱KG-华为",
	"author": "王宇",
	"publishTime": "八月03,2023",
	"readTime": "12s",
	"tags": "[\"6、学习调研\"]",
	"description": "6、学习调研",
	"article": "1\\. 知识图谱简介\n==========\n\n1.1. 什么是知识图谱\n------------\n\n知识图谱本质上是语义网络（Semantic Network）的知识库，可以简单地把知识图谱理解成多关系图（Multi-relation Graph）。用于迅速描述物理世界中的概念及其相互关系。\n\n**![](/download/attachments/101825539/image2023-5-19_14-8-57.png?version=1&modificationDate=1684476538082&api=v2)**\n\n  \n\n1.2. **知识图谱相关概念**\n-----------------\n\n*   **知识图谱**\n\n知识图谱是结构化的语义知识库，用于迅速描述物理世界中的概念及其相互关系。知识图谱的基本单位是实体（Entity）-关系（Relationship）-实体（Entity）”构成的三元组。例如社交网络图谱里，我们既可以有“人”的实体，也可以包含“公司”实体。\n\n*   **概念**\n\n概念是指抽象的、普遍的想法，是充当指明实体、事件或关系的范畴或类的实体。例如本体如图所示，“电影”、“人物”以及两者之间的关系“主演”、“导演”均可称作概念。\n\n*   **本体**\n\n本体是某个领域中抽象概念的集合，能够描述某个范围内一切事物的共有特征以及事物间的关系。例如下图整个可称作一个本体。\n\n![](https://support.huaweicloud.com/productdesc-kg/zh-cn_image_0000001186534840.png)\n\n*   **实体**\n\n实体是知识图谱三元组的元素之一，指某种具体的事物。例如某一具体的电影（人物或关系），如电影“霸王别姬”，可称作实体。\n\n*   **关系**\n\n关系是知识图谱三元组的元素之一，指实体与实体之间的语义关系，比如张三是李四的同事，实体“张三”与实体“李四”的关系是同事关系。\n\n1.3. 知识图谱优势\n-----------\n\n### 1.3.1. 知识图谱、传统数据存储对比\n\n相比传统数据存储和计算方式，知识图谱的优势显现在哪里呢？\n\n*   **关系的表达能力强**\n\n传统数据库通常通过表格、字段等方式进行读取，而关系的层级及表达方式多种多样，且基于图论和概率图模型，可以处理复杂多样的关联分析，满足企业各种角色关系的分析和管理需要。\n\n*   **像人类思考一样去做分析**\n\n基于知识图谱的交互探索式分析，可以模拟人的思考过程去发现、求证、推理，业务人员自己就可以完成全部过程，不需要专业人员的协助。\n\n*   **知识学习**\n\n利用交互式机器学习技术，支持根据推理、纠错、标注等交互动作的学习功能，不断沉淀知识逻辑和模型，提高系统智能性，将知识沉淀在企业内部，降低对经验的依赖。\n\n*   **高速反馈**\n\n图式的数据存储方式，相比传统存储方式，数据调取速度更快，图库可计算超过百万潜在的实体的属性分布，可实现秒级返回结果，真正实现人机互动的实时响应，让用户可以做到即时决策。\n\n### 1.3.2.      知识图谱、传统知识库和数据库对比\n\n知识图谱、传统知识库和数据库它们之间的区别主要在语义层和数据层上包含信息的多少而产生一定的不同。\n\n  \n\n语义层\n\n数据层\n\n  \n\n语义层\n\n数据层\n\n**关系数据库**\n\n没有语义\n\n丰富的数据\n\n**传统知识库**\n\n丰富的语义\n\n少量的实例\n\n**知识图谱**\n\n少量的语义\n\n丰富的实例\n\n可以看到，知识图谱需要完成语义推理等任务，并且还需要提供丰富的实例数据来实现关联检索任务，因此，同时包含语义知识和丰富的实例数据。而关系型数据库主要完成数据检索任务，只含有丰富的数据，传统知识库主要为了实现推理任务，含有丰富的语义知识，也就是概念知识及其之间的关联关系，有时也含有少量的实例数据。这三者之间最主要的区别和联系在于：\n\n*   **知识图谱**是在**传统知识库的基础上发展而来的**，但**更注重其中的实例数据**。\n*   **知识图谱无法替代数据库**，大规模图谱处理**需借助数据库技术**。\n*   **知识图谱**包含语义信息，可进行一定的**推理**，且**形式更灵活，可扩展性更好**。\n\n1.4. 知识图谱应用\n-----------\n\n*   把领域中异构的知识结构化，构建知识间关联。\n\n主要解决领域内数据分散在多个系统，数据多样、复杂，孤岛化，且单一数据价值不高的应用场景。很显然结构化的知识，天然的把领域知识做了显性化沉淀和关联。构建起来了一张图。可以利用原生图的特征，支撑数据的挖掘，分析。\n\n*   **使机器语言认知成为可能**\n\n知识图谱有丰富的语义关系，概念，属性，关系等这些语义关系可以很好的应用到nlp相关任务上，例如分词，短语理解，文本理解等任务上。**通过知识图谱可以让机器能更好的去理解自然语言，进一步的更好的理解用户的意图**，文本的含义。\n\n可以进行的应用：可以实现**基础nlp任务，进行分词，文本理解；**对用户画像数据，对各种标签数据做数据增强；**进行搜索，问答的意图理解，推荐的用户，物品的理解。**特别是问答的意图理解，对于目前的工作能够进行明显提升。\n\n*   提供行业背景知识。做知识引导，解决问题。\n\n垂直领域内的深度应用，比如智能客服系统，智能外呼系统利用知识图谱可以精准的回答用户的问题，可以进行复杂问题的回答。一些垂直行业内常用的传统专家系统，通过赋予他们一定的背景知识，可以很好的提升效果。\n\n*   知识图谱可解释人工智能\n\n可解释，是强人工智能的一个重要特征。当前以深度学习模型为主的人工智能应用，虽然从结果上看效果还不错。但是模型本身就是一个黑盒的不具备可解释性，这就导致在很多需要有解释性的行业，没法使用复杂的深度学习模型。比如在司法领域，医疗诊断领域，金融领域某系场景。可解释性的应用也会很好的提升用户对系统的信任感，提升用户满意度。问答场景下，推荐场景下都可以加入解释功能。\n\n2\\. 华为知识图谱\n==========\n\n2.1. 华为知识图谱构建流程\n---------------\n\n步骤\n\n功能模块\n\n操作内容\n\n备注\n\n步骤\n\n功能模块\n\n操作内容\n\n备注\n\n1\n\n注册华为云账号\n\n注册华为云账号，登陆账号。账号体验知识图谱只有30天时间\n\n注册登录华为云网址：[https://auth.huaweicloud.com/authui/login.html?service=https://console.huaweicloud.com/console/#/login](https://auth.huaweicloud.com/authui/login.html?service=https://console.huaweicloud.com/console/#/login)\n\n2\n\n准备数据\n\n创建图谱之前，需要将用于创建图谱的基础数据上传至OBS桶及文件夹\n\n1、**登录OBS服务控制台**，创建桶和文件夹，用于存放样例数据集，创建名称为“kg-test”的OBS桶，名称为“demo-data”的文件夹。\n\n2、单击数据集下载链接，将数据集下载至本地，并命名为“kg\\_demo.xlsx”。\n\n3、将“kg\\_demo.xlsx”文件上传至OBS路径“kg-test/demo-data”下。\n\n1、保证创建的OBS桶与KG服务在同一区域，桶的**存储类别为“标准存储”**。\n\n2、当前KG服务仅支持在“北京四”区域，建议创建OBS桶时，**选择“北京四”区域**。\n\n3、数据集：[kg\\_demo.xlsx](/download/attachments/101825539/kg_demo.xlsx?version=1&modificationDate=1684479813694&api=v2)。必须是未加密状态，注意有两个页签。\n\n3\n\n创建本体\n\n1、**登录KG服务管理控制台**，在左侧菜单栏中单击“我的图谱资产库 > 我的本体”，进入“我的本体”页面。\n\n2、单击左上角“**创建本体**”，弹出“创建本体”对话框。在对话框中，“**本体名称**”文本框中填写本体名称“person\\_film”，在“**本体描述**”文本框中填写本体描述“包括电影和人物两个概念”，单击“**确定**”。\n\n3、创建两个概念节点“电影”和“人物”\n\n4、创建“电影”与“人物”之间的关系\n\n创建节点：\n\n*   双击界面空白处，新建概念节点。\n*   右键单击概念图标，选择“编辑”或双击概念图标，左侧弹出概念编辑框\n*   在概念编辑框中，编辑“概念名称”、“Icon”和“属性”，单击“保存”。\n\n创建关系：\n\n*   按住键盘a键，同时鼠标单击概念节点“电影”，拖拽出一条线，移动至目标概念“人物”。\n*   右键单击关系曲线，选择“编辑”。\n\n4\n\n选择图谱规格\n\n1、登录KG服务管理控制台，默认进入“我的图谱”页面\n\n2、填写图谱名称\n\n3、选择”体验版 一万边“\n\n4、确认创建\n\n创建时页面提示“知识图谱创建任务提交成功”。单击“返回”，返回至“我的图谱”页面，您会看到新创建的图谱卡片，**“运行状态”为“创建中”**。**等待**十几分钟后，运行状态变为**“初始化”状态**。\n\n5\n\n配置数据源\n\n1、在“我的图谱”页，单击“图谱构建WorkSpace”\n\n2、流水线构建页面，单击“数据源”\n\n3、在数据源配置对话框，填写相关信息\n\n4、填写完信息后，单击“保存”\n\n1、**“选择数据格式”**：例子选择“XLSX”。\n\n2、**“选择数据源文件”**：\n\n*   “OBS桶”：选择数据源文件存放的OBS桶“kg-test”\n*   “存储路径”：选择数据源文件存放在OBS桶的文件路径“demo-data/kg\\_demo.xlsx”\n*   “OBS桶授权”：如果OBS桶未授权，请勾选“确认授权”\n\n6\n\n配置图谱本体\n\n1、流水线构建页面，单击“图谱本体”\n\n2、选择左侧“我的库”页签，在“图谱本体组件”中拖拽到创建的本体“person\\_film”到虚线框中\n\n3、单击“保存”\n\n/\n\n7\n\n配置信息抽取\n\n1、流水线构建页面，单击“信息抽取”\n\n2、“信息抽取”对话框中，“抽取方式”默认为“结构化抽取”，“编辑方式”选择“交互界面”，关闭“默认抽取”开关\n\n3、信息抽取页面填写信息抽取项\n\n4、填写完“信息抽取项”，单击“确定”\n\n主要字段函数：\n\n*   ${职业}\n    \n      \n    \n\n直接引用“职业”字段的值，不做任何操作。\n\n*   regexp\\_replace(${国籍}, '\\\\(\\\\\\[link\\\\\\]@.\\*?:(/film.\\*?)\\\\)', '')\n    \n    将“国籍”字段中符合正则模式的“\\\\(\\\\\\[link\\\\\\]@.\\*?:(/film.\\*?)\\\\)”替换成空字符串，即删除符合这个pattern的字符串。\n    \n\n例如从字段“中国(\\[link\\]@中国:/[film.kg.huawei.com/中国/1122445](http://film.kg.huawei.com/中国/1122445))”抽取出信息“中国”。\n\n*   regexp\\_extract\\_all(${导演}, '\\\\(\\\\\\[link\\\\\\]@.\\*?:(/film.\\*?)\\\\)', 1)\n    \n    抽取出导演字段中，与模式 “\\\\(\\\\\\[link\\\\\\]@.\\*?:(/film.\\*?)\\\\)” 匹配的数据值，返回的类型是一个列表。\n    \n\n例如““导演”:“沈倨(\\[link\\]@沈倨:/[film.kg.huawei.com/沈倨](http://film.kg.huawei.com/沈倨))\"”，抽取信息后为““导演”:“/[film.kg.huawei.com/沈倨](http://film.kg.huawei.com/沈倨)\"”。\n\n  \n\n8\n\n配置知识映射\n\n1、流水线构建页面，单击“知识映射”\n\n2、“知识映射”对话框下方，填写知识映射的相关信息\n\n3、单击“保存”，完成知识映射配置。\n\n/\n\n9\n\n配置知识融合\n\n1、流水线构建页面，单击“知识融合”\n\n2、“知识融合”对话框，打开“知识融合”开关\n\n3、左侧本体预览图中单击实体“电影”图标\n\n4、在实体“电影”对应的“融合标识符”栏单击![](https://support.huaweicloud.com/qs-kg/zh-cn_image_0222555120.png)，选择标识知识融合的本体属性“name”\n\n5、填写实体“电影”的属性配置项信息\n\n6、单击“保存”\n\n/\n\n10\n\n配置图谱质检\n\n1、流水线构建页面，单击“图谱质检”\n\n2、在“图谱质检”对话框，打开“图谱质检”开关，单击“保存”\n\n1、非必选流程，关闭和开启状态均不影响图谱构建。\n\n11\n\n生成图谱\n\n1、图谱流水线页面，单击右上角“生成图谱”，完成图谱的创建\n\n1、当图谱的“状态”由“运行中”变为“可用”后，即可单击“图谱预览”，预览图谱\n\n12\n\n融合验证\n\n1、登录KG服务管理控制台，单击左侧导航栏“我的图谱”，在“我的图谱”页面单击图谱“test”，进入图谱详情页。\n\n2、在“图谱版本”页签，等待图谱运行完成，单击“操作”列的“验证”，进入“随机验证”页面。\n\n3、在随机验证页面，有随机采样的部分融合样例，您如果认可融合的结果，单击![](https://support.huaweicloud.com/qs-kg/zh-cn_image_0200514281.png)，若不认可，单击![](https://support.huaweicloud.com/qs-kg/zh-cn_image_0200514455.png)。\n\n/\n\n华为知识图谱说明文档：[https://support.huaweicloud.com/productdesc-kg/kg\\_02\\_0001.html](https://support.huaweicloud.com/productdesc-kg/kg_02_0001.html)\n\n  \n\n2.2. 具体应用方案\n-----------\n\n### 2.2.1. 项目背景：\n\n1、目前通过FAQ一问一答方式提供知识问答能力，逐条撰写工作繁琐；\n\n2、如通过指令方式执行数据库查询任务（类似目前搜索食谱的指令），逐条指令接入工作量与整理知识图谱工作量相当；\n\n3、查图数据库在响应速度上存在优势，后期知识图谱的可拓展性也较强\n\n### 2.2.2. 应用方案（以烹饪为例）\n\n**schema的定义:**\n\nSchema是对知识图谱中的实体、属性及关系进行明确的界定，对其可行的范畴加以明确。因此部分学者会将知识图谱划分成两层级：模式层和数据层；实际上本体的概念也是如此，因此也有一部分学者将知识图谱划分成本体层和实体层。这两种划分方式本质上是等价的，即定义知识图谱的Schema等价于构建知识图谱的本体。\n\n**构建原则：**\n\n1.  明确性和客观性，即本体应该用自然语言对所定义术语给出明确的、客观的语义定义 。\n2.  完全性，即所给出的定义是完整的, 完全能表达所描述术语的含义 。\n3.  一致性，即由术语得出的推论与术语本身含义是相容的, 不会产生矛盾 。\n4.  最大单调可扩展性，即向本体中添加通用或专用的术语时, 不需要修改其己有的内容 。\n5.  最小承诺，即对待建模对象给出尽可能少的约束 。\n6.  最小编码偏差，本体的建立应尽可能独立于具体的编码语言 。\n7.  兄弟概念间的语义差别应尽可能小 。\n8.  使用多样的概念层次结构实现多继承机制 。\n9.  尽可能使用标准化的术语名称 。\n\n根据和华为那边沟通，本体的构建主要还是我们这边进行构建，因此在构建这个schema的核心需求是什么，到底需要解决用户什么问题。为了满足这些核心需求，我们**需要创造出哪些概念**？\n\n就烹饪方面，用户主要关心什么问题，例如商品、食材等，以下是我使用华为知识图谱构建出的本体（仅供参考，思想不成熟）\n\n![](/download/attachments/101825539/image2023-5-25_15-51-45.png?version=1&modificationDate=1685001105770&api=v2)\n\n**本体创建完成后，确定属性，并确定用户关心哪些关系**？\n\n例如在具体商品下，用户会关心商品描述、商品价格、ID、外观、规格、保质期等\n\n![](/download/thumbnails/101825539/image2023-5-25_15-53-48.png?version=1&modificationDate=1685001228333&api=v2)\n\n之后要进行详细的数据整理\n\n![](/download/attachments/101825539/image2023-5-25_15-56-29.png?version=1&modificationDate=1685001389147&api=v2)\n\n其中一个页签是一个概念，表格第一行表头代表了属性。对于万得厨相关知识，这部分**内容获取**：\n\n1、需从平台导出的数据，整理需求后由数据服务团队提供接口；后期定期导出，更新到图谱数据库；\n\n2、具体食品食材的数据内容，对接食品研发团队了解进度情况，讨论是否有可协同项。\n\n  \n\n根据文献研究，新做本体及关系如下：对于上下级关系可以在属性中进行体现。\n\n![](/download/attachments/101825539/image2023-5-30_17-45-45.png?version=1&modificationDate=1685439945475&api=v2)\n\n  \n\n  \n\n  \n\n  \n\n  \n\n  \n\n  \n\n[Filter table data](#)[Create a pivot table](#)[Create a chart from data series](#)\n\n[Configure buttons visibility](/users/tfac-settings.action)"
}