{
	"title": "算法接口文档",
	"author": "王宇",
	"publishTime": "一月17,2024",
	"readTime": "12s",
	"tags": "[\"烹饪方案预测语音技能\"]",
	"description": "烹饪方案预测语音技能",
	"article": "*   1[1\\. 烹饪方案预测语音技能接口](#id-算法接口文档-烹饪方案预测语音技能接口)\n*   2[2\\. 烹饪方案预测通用接口](#id-算法接口文档-烹饪方案预测通用接口)\n*   3[3\\. 食谱方案审核接口](#id-算法接口文档-食谱方案审核接口)\n\n**应用名：yingzi-algorithm-scheme-compute**\n\n**nacos注册的应用名：yingzi-scheme-compute**\n\n**开发环境： 172.19.101.30**\n\n**测试/预生产/生产环境：k8s**\n\n**算法服务错误码：**\n\n错误码\n\n触发条件\n\n错误信息示例\n\n备注\n\n错误码\n\n触发条件\n\n错误信息示例\n\n备注\n\n100000000\n\n成功返回\n\n  \n\n  \n\n100100201\n\n数据越界\n\n数据越界：食材总重量超出范围-过轻  \n数据越界：食材总重量超出范围-过重  \n数据越界：食材单位暂不支持：{\"黄瓜\"}\n\n  \n\n100100203\n\n输入参数类型/格式错误。\n\n不支持的数据格式：material\\_content\n\n  \n\n100100205\n\n输入字段缺失\n\n输入字段缺失：material\\_content\n\n  \n\n100100206\n\n输入数据缺失\n\n输入数据缺失：material\\_content\n\n  \n\n100100302\n\n访问资源不存在\n\n数据库中对应的食材缺少特征数据：{\"假蒌\"}\n\n  \n\n100600900\n\n算法服务未知错误/服务器内部错误\n\n未知错误，请联系算法管理员\n\n  \n\n1\\. 烹饪方案预测语音技能接口\n================\n\n**请求方式：**POST GET\n\n**算法测试请求路径： [http://](http://172.19.64.94:8081/yingzi_scheme_compute/power_query/virtual_human_query)[\\[host\\]:\\[port\\]](http://172.19.64.94:8081/yingzi_scheme_compute/power_query/virtual_human_query)[/yingzi\\_scheme\\_compute/scheme\\_compute/virtual\\_human\\_query](http://172.19.101.30:8081/yingzi_scheme_compute/scheme_compute/virtual_human_query)**\n\n**测试环境算法ID：**1161692207817199616，**host：**yingzi-algorithm-scheme-compute.test.svc.cluster.local，****port：****8081\n\n**开发环境算法ID：**1140338744496279552，**host：**172.19.101.30，**port：**8081\n\n**预生产环境算法ID：**1161693297412206592，**host：**yingzi-algorithm-scheme-compute.stage-vdh.svc.cluster.local，**port：**8081\n\n**生产环境算法ID：**1162069008403881984，**host：**yingzi-algorithm-scheme-compute.vdh.svc.cluster.local，**port：**8081\n\n  \n**请求字段说明：**\n\n参数字段\n\n类型\n\n必须/可空\n\n说明\n\n备注\n\n参数字段\n\n类型\n\n必须/可空\n\n说明\n\n备注\n\nmaterial\\_content\n\nlist<dict>\n\n必须\n\n食材内容字典列表，包括主要食材的输入名称、标准名称和重量\n\n目前语音只支持识别输入1-2个主要食材，但算法本身不限制。\n\n<material\\_standard\\_name>\n\nstring\n\n必须\n\n食材的标准名称，语音请求传入该字段值可节省计算时间\n\n用于食材数据查询\n\n<material\\_name>\n\nstring\n\n必须\n\n食材的输入名称\n\n用于统计、追踪、记录\n\n<material\\_weight>\n\nfloat\n\n必须\n\n食材的重量（大于0）\n\n算法要求食材总重量：\\[50, 3000\\] g\n\n<material\\_unit>\n\nstring\n\n可空\n\n食材的单位，若未填，则默认为'g'  \n常规重量单位：'g', '克', 'ml', '毫升', '斤', '公斤', '两', '千克', 'kg', 'l', '升'  \n常见食材非常规重量单位：'个', '只', '朵', '张', '片', '块', '根', '颗', '粒', '条', '角', '袋', '包'\n\n常见食材非常规重量单位仅限于梳理的表内食材范围。\n\n**请求示例:**\n\nPOST \n\n{  \n\"material\\_content\": \\[  \n{  \n\"material\\_standard\\_name\": \"黄瓜（鲜）\",  \n\"material\\_name\": \"黄瓜\",  \n\"material\\_weight\": 150  \n},  \n{  \n\"material\\_standard\\_name\": \"鸡蛋（代表值）\",  \n\"material\\_name\": \"鸡蛋\",  \n\"material\\_weight\": 200  \n}  \n\\]  \n}\n\n**响应示例：**  \n{  \n\"code\": 100000000,  \n\"data\": \\[  \n{  \n\"duration\": 170,  \n\"power\": 650,  \n\"stage\": 1  \n},  \n{  \n\"duration\": 480,  \n\"power\": 450,  \n\"stage\": 2  \n}  \n\\],  \n\"m\\_loss\\_ratio\": 0,  \n\"msg\": \"成功返回\"  \n}\n\n**响应字段说明：**\n\n参数字段\n\n类型\n\n说明\n\n参数字段\n\n类型\n\n说明\n\ncode\n\nint\n\n响应编码（参照算法服务错误码），成功返回100000000\n\nmsg\n\nstring\n\n响应信息\n\nm\\_loss\\_ratio\n\nfloat\n\n食材缺失率，大于0返回异常\n\ndata\n\nlist<dict>\n\n响应数据字典列表，包含stage、power和duration\n\n<stage\\>\n\nint\n\n烹饪阶段：1，2\n\n<power>\n\nint\n\n建议功率（单位：W)，50的整数，例如：800\n\n<duration\\>\n\nint\n\n建议时长(单位：s)，10的整数，例如：120\n\n2\\. 烹饪方案预测通用接口\n==============\n\n**请求方式：**POST GET\n\n**算法测试请求路径： [http://](http://172.19.64.94:8081/yingzi_scheme_compute/power_query/virtual_human_query)[\\[host\\]:\\[port\\]](http://172.19.64.94:8081/yingzi_scheme_compute/power_query/virtual_human_query)[/yingzi\\_scheme\\_compute/scheme\\_compute/general\\_](http://172.19.101.30:8081/yingzi_scheme_compute/scheme_compute/general_scheme_query)[scheme](http://172.19.64.94:8081/yingzi_scheme_compute/power_query/virtual_human_query)[\\_query](http://172.19.64.94:8081/yingzi_scheme_compute/power_query/virtual_human_query)**\n\n**测试环境算法ID：**1161692207926251520，**host：**yingzi-algorithm-scheme-compute.test.svc.cluster.local，****port：****8081\n\n**开发环境算法ID：**1156615098585894912，**host：**172.19.101.30，**port：**8081\n\n**预生产环境算法ID：**1161693297491898368，**host：**yingzi-algorithm-scheme-compute.stage-vdh.svc.cluster.local，**port：**8081\n\n**生产环境算法ID：**1162069008672317440，**host：**yingzi-algorithm-scheme-compute.vdh.svc.cluster.local，**port：**8081\n\n  \n**请求字段说明：**\n\n参数字段\n\n类型\n\n必须/可空\n\n说明\n\n备注\n\n参数字段\n\n类型\n\n必须/可空\n\n说明\n\n备注\n\nmaterial\\_content\n\nlist<dict>\n\n必须\n\n食材内容字典列表，包括主要食材的输入名称、重量和重量单位\n\n  \n\n<material\\_name>\n\nstring\n\n必须\n\n食材的输入名称\n\n用于查找食材标准名称、统计食材\n\n<material\\_weight>\n\nfloat\n\n必须\n\n食材的重量或数量（大于0）\n\n算法要求食材总重量：\\[50, 3000\\] g\n\n<material\\_unit>\n\nstring\n\n可空\n\n食材的单位，若未填，则默认为'g'  \n常规重量单位：'g', '克', 'ml', '毫升', '斤', '公斤', '两', '千克', 'kg', 'l', '升'  \n常见食材非常规重量单位：'个', '只', '朵', '张', '片', '块', '根', '颗', '粒', '条', '角', '袋', '包'\n\n常见食材非常规重量单位仅限于梳理的表内食材范围。\n\n**请求示例:**\n\nPOST \n\n{  \n\"material\\_content\": \\[  \n{  \n\"material\\_name\": \"黄瓜\",  \n\"material\\_weight\": 150,  \n\"material\\_unit\": \"g\"  \n},  \n{  \n\"material\\_name\": \"鸡蛋\",  \n\"material\\_weight\": 200,  \n\"material\\_unit\": \"g\"  \n}  \n\\]  \n}\n\n**响应示例：**  \n{  \n\"code\": 100000000,  \n\"data\": {  \n\"m\\_loss\\_ratio\": 0,  \n\"scheme\\_content\": \\[  \n{  \n\"duration\": 170,  \n\"power\": 650,  \n\"stage\": 1  \n},  \n{  \n\"duration\": 480,  \n\"power\": 450,  \n\"stage\": 2  \n}\\]  \n},  \n\"m\\_loss\\_ratio\": 0,  \n\"msg\": \"成功返回\"  \n}\n\n**响应字段说明：**\n\n参数字段\n\n类型\n\n说明\n\n参数字段\n\n类型\n\n说明\n\ncode\n\nint\n\n响应编码（参照算法服务错误码），成功返回100000000\n\nmsg\n\nstring\n\n响应信息\n\ndata\n\ndict<dict>\n\n响应数据字典，包含m\\_loss\\_ratio和scheme\\_content\n\n<m\\_loss\\_ratio>\n\nfloat\n\n食材缺失率，超过0.3返回异常\n\n<scheme\\_content>\n\nlist<dict>\n\n响应数据字典列表，包含stage、power和duration\n\n<<stage\\>>\n\nint\n\n烹饪阶段：1，2\n\n<<power>>\n\nint\n\n建议功率（单位：W)，50的整数，例如：800\n\n<<duration\\>>\n\nint\n\n建议时长(单位：s)，10的整数，例如：120\n\n3\\. 食谱方案审核接口\n============\n\n**请求方式：**POST GET\n\n**算法测试请求路径： [http://](http://172.19.64.94:8081/yingzi_scheme_compute/power_query/virtual_human_query)[\\[host\\]:\\[port\\]/yingzi\\_scheme\\_compute/scheme\\_compute/recipe](http://172.19.101.30:8081/yingzi_scheme_compute/scheme_compute/recipe_scheme_check)\\_[scheme](http://172.19.101.30:8081/yingzi_scheme_compute/scheme_compute/recipe_scheme_check)[\\_check](http://172.19.64.94:8081/yingzi_scheme_compute/power_query/virtual_human_query)**\n\n**测试环境算法ID：**1160633946774999040，**host：**yingzi-algorithm-scheme-compute.test.svc.cluster.local，**port：**8081\n\n**开发环境算法ID：**1156617467939835904，**host：**172.19.101.30，**port：**8081\n\n**预生产环境算法ID：**1161682225800212480，**host：**yingzi-algorithm-scheme-compute.stage-vdh.svc.cluster.local，**port：**8081\n\n**生产环境算法ID：**1162068836311588864，**host：**yingzi-algorithm-scheme-compute.vdh.svc.cluster.local，**port：**8081\n\n  \n**请求字段说明：**\n\n参数字段\n\n类型\n\n必须/可空\n\n说明\n\n备注\n\n参数字段\n\n类型\n\n必须/可空\n\n说明\n\n备注\n\nrecipe\\_id\n\nstring\n\n必须\n\n食谱id\n\n用于追踪、记录\n\nscheme\\_content\n\nlist<dict>\n\n必须\n\n烹饪方案内容字典列表，包括阶段、功率和时长\n\n用于计算方案误差\n\n<stage\\>\n\nstring\n\n必须\n\n烹饪阶段\n\n  \n\n<micro\\_wave>\n\nint\n\n必须\n\n烹饪功率（单位：W，大于0)\n\n  \n\n<heat\\_time>\n\nint\n\n必须\n\n烹饪时长(单位：s，大于0)\n\n  \n\nmaterial\\_content\n\nlist<dict>\n\n必须\n\n食材内容字典列表，包括主要食材的输入名称、重量和重量单位\n\n  \n\n<material\\_name>\n\nstring\n\n必须\n\n食材的输入名称\n\n用于查找食材标准名称、统计食材\n\n<material\\_weight>\n\nfloat\n\n必须\n\n食材的重量或数量（大于0）\n\n算法要求食材总重量：\\[50, 3000\\] g\n\n<material\\_unit>\n\nstring\n\n可空\n\n食材的单位，若未填，则默认为'g'  \n常规重量单位：'g', '克', 'ml', '毫升', '斤', '公斤', '两', '千克', 'kg', 'l', '升'  \n常见食材非常规重量单位：'个', '只', '朵', '张', '片', '块', '根', '颗', '粒', '条', '角', '袋', '包'\n\n常见食材非常规重量单位仅限于梳理的表内食材范围。\n\n**请求示例:**\n\nPOST \n\n{  \n\"recipe\\_id\": \"1080543625756114944\",  \n\"scheme\\_content\": \\[{'heat\\_time': '300', 'micro\\_wave': '600', 'stage': '1'}\\],  \n\"material\\_content\": \\[  \n{  \n\"material\\_name\": \"虾仁\",  \n\"material\\_weight\": 40,  \n\"material\\_unit\": \"g\"  \n},  \n{  \n\"material\\_name\": \"豆腐\",  \n\"material\\_weight\": 100,  \n\"material\\_unit\": \"g\"  \n},  \n{  \n\"material\\_name\": \"花生油\",  \n\"material\\_weight\": 15,  \n\"material\\_unit\": \"g\"  \n},  \n{  \n\"material\\_name\": \"面粉\",  \n\"material\\_weight\": 15,  \n\"material\\_unit\": \"g\"  \n}  \n{  \n\"material\\_name\": \"鸡蛋\",  \n\"material\\_weight\": 1,  \n\"material\\_unit\": \"个\"  \n}  \n\\]  \n}\n\n**响应示例：**  \n{  \n\"check\\_error\": 0.000777242469135671,  \n\"check\\_result\": 基本合格,  \n\"code\": 100000000,  \n\"data\": \\[  \n{  \n\"duration\": 100,  \n\"power\": 650,  \n\"stage\": 1  \n},  \n{  \n\"duration\": 260,  \n\"power\": 450,  \n\"stage\": 2  \n}  \n\\],  \n\"m\\_loss\\_ratio\": 0,  \n\"msg\": \"成功返回\"  \n}\n\n**响应字段说明：**\n\n参数字段\n\n类型\n\n说明\n\n参数字段\n\n类型\n\n说明\n\ncode\n\nint\n\n响应编码（参照算法服务错误码），成功返回100000000\n\nmsg\n\nstring\n\n响应信息\n\nm\\_loss\\_ratio\n\nfloat\n\n食材缺失率，超过0.3返回异常\n\ncheck\\_error\n\nfloat\n\n相对算法的热量误差，（计算热量-算法预测热量）/算法预测热量\n\ncheck\\_result\n\nstring\n\n算法审核结果信息：基本合格、存在不熟风险、不熟风险较高、存在过熟风险、过熟风险较高、存在烧焦风险  \n不同结果对应的热量误差范围暂定如下（由于缺少足够的场景数据支撑，仅供参考，后续可调整）：\n\n*   基本合格：（-0.2，0.2）\n    \n*   存在不熟风险：（-0.5，-0.2\\]\n    \n*   不熟风险较高：小于-0.5\n    \n*   存在过熟风险：\\[0.2，0.5）\n    \n*   过熟风险较高：\\[0.5，1）\n    \n*   存在烧焦风险：大于1\n    \n\ndata\n\nlist<dict>\n\n响应数据（算法推荐烹饪方案）字典列表，包含stage、power和duration\n\n<stage\\>\n\nint\n\n烹饪阶段：1，2\n\n<power>\n\nint\n\n建议功率（单位：W)，50的整数，例如：800\n\n<duration\\>\n\nint\n\n建议时长(单位：s)，10的整数，例如：120\n\n[Filter table data](#)[Create a pivot table](#)[Create a chart from data series](#)\n\n[Configure buttons visibility](/users/tfac-settings.action)"
}