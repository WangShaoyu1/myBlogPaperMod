{
	"title": "讯飞声学demo工程配置",
	"author": "王宇",
	"publishTime": "四月13,2024",
	"readTime": "12s",
	"tags": "[\"黄圆成\"]",
	"description": "黄圆成",
	"article": "*   1[1\\. 参数配置](#id-讯飞声学demo工程配置-参数配置)\n    *   1.1[1.1. 参数配置：](#id-讯飞声学demo工程配置-参数配置：)\n    *   1.2[1.2. 录音设备调试：](#id-讯飞声学demo工程配置-录音设备调试：)\n    *   1.3[1.3. 说话后识别效果与预期有较大差距](#id-讯飞声学demo工程配置-说话后识别效果与预期有较大差距)\n    *   1.4[1.4. 工程编译](#id-讯飞声学demo工程配置-工程编译)\n\n1\\. 参数配置\n========\n\n1.1. 参数配置：\n----------\n\n1.  请在aiui开放平台注册账号，新建应用后更新aiui.cfg文件中的appid、key、api\\_secret参数  \n    以及vtn.ini文件中的appid参数  \n    可参考链接：[https://www.yuque.com/g/iflyaiui/zzoolv/roc0sr/collaborator/join?token=ER24uppdcojlEroH&source=doc\\_collaborator#](https://www.yuque.com/g/iflyaiui/zzoolv/roc0sr/collaborator/join?token=ER24uppdcojlEroH&source=doc_collaborator) 《创建AIUI账号并替换应用appid》\n2.  1069版本之后，aiui\\_sample支持vtn单麦及多麦唤醒  \n    另外需在aiui.cfg中做如下两项配置：  \n    1)、speech->wakeup\\_mode的取值改为“vtn”, 默认情况下该值为“off”;  \n    2)、speech->audio\\_captor的取值改为“portaudio”, 默认情况下该值为“off”;\n3.   默认唤醒词为 “小飞小飞”， 若要更换唤醒词，需在平台资源制作中下载3.17版，将其中的 res.bin 覆盖掉 AIUI/assets/vtn/res.bin\n\n  \n\nAIUI文档中心：[https://aiui-doc.xf-yun.com/project-1/doc-13/](https://aiui-doc.xf-yun.com/project-1/doc-13/)\n\n/\\* AIUI参数配置 \\*/\n\n[?](#)\n\n`{`\n\n    `/* 鉴权参数，请填写aiui官网的appid和key，此处为示例。key下载的时候隐式配置了，如果切换appid需要显式配置 */`\n\n    `\"login\"``:{`\n\n        `\"appid\"``:` `\"e4xxxxa8\"``,`\n\n        `/* app对应的授权key，在AIUI开放平台我的应用信用中查看。一般不用配置，若是appid与下载页面所处应用一致则不用配置 */`\n\n        `\"key\"``:``\"xxxxxx3046f936c3594c4baf7a8f5356\"``,`\n\n        `/* api密钥，在AIUI开放平台我的应用信用中查看。一般不用配置，若是appid与下载页面所处应用一致则不用配置 */`\n\n        `\"api_secret\"``:` `\"xxxxxx\"`\n\n    `},`\n\n    `// 识别（音频输入）参数`\n\n    `\"iat\"``:{`\n\n        `\"sample_rate\"``:``\"16000\"`\n\n    `}`\n\n`}`\n\n  \n\n创建AIUI账号并替换应用appid：[https://www.yuque.com/iflyaiui/zzoolv/roc0sr](https://www.yuque.com/iflyaiui/zzoolv/roc0sr)\n\n更新APPID到sdk的aiui.cfg  \n更新KEY到sdk的aiui.cfg \n\n最新版本 sdk 中 secret 也需要添加进去\n\n  \n\n修改音频设备参数：\n\nAIUI\\\\cfg\\\\aiui.cfg\n\n[?](#)\n\n`{`\n\n    `/* 唤醒参数 */`\n\n    `\"ivw\"``: {`\n\n        `\"mic_type\"``:` `\"line_mic2\"``,`\n\n        `\"res_path\"``:` `\"AIUI/assets/vtn/vtn.ini\"`\n\n    `},`\n\n    `/* 合成参数 */`\n\n    `\"tts\"``: {`\n\n        `\"engine_type\"``:` `\"cloud\"`\n\n    `},`\n\n    `/* 业务流程相关参数 */`\n\n    `/* 语音业务流程 */`\n\n    `\"speech\"``: {`\n\n        `\"data_source\"``:` `\"sdk\"``,`\n\n        `\"wakeup_mode\"``:` `\"vtn\"``,`\n\n        `\"interact_mode\"``:` `\"oneshot\"``,`\n\n        `\"intent_engine_type\"``:` `\"cloud\"``,`\n\n        `\"audio_captor\"``:` `\"portaudio\"`\n\n    `},`\n\n    `/* 音频转换参数 */`\n\n    `\"recorder\"``: {`\n\n        `\"sound_card_name\"``:``\"NVIDIA Jetson Orin NX APE\"``,`\n\n        `\"sample_size\"``: 2,`\n\n        `\"channel_count\"``: 4,`\n\n        `\"channel_filter\"``:` `\"0,1,2,2\"`\n\n    `}`\n\n`}`\n\n  \n\n  \n\n唤醒词资源更换，自定义唤醒词\n\n修改AIUI\\\\assets\\\\vtn\\\\vtn.ini res\\_path为自定义唤醒词资源 \n\n[?](#)\n\n`[ivw]`\n\n`ivw_enable = 1`\n\n`#唤醒资源res`\n\n`res_path=AIUI/assets/vtn/xiaowangxiaowan.bin`\n\n  \n\n1.2. 录音设备调试：\n------------\n\n[?](#)\n\n`arecord -l 查看设备，找到对应的设备card x (x:正确录音设备）,将hw:2,0改为hw:1,0`\n\n`arecord -D hw:1,0 --period-size=1024 --buffer-size=4096 -r 16000 -c 4 -f s16_le` `/tmp/test``.wav`\n\n  \n\n1.3. 说话后识别效果与预期有较大差距\n--------------------\n\n可以拿原始音频测试看看，  \ncreateagent后调用下这个agent->sendMessage(IAIUIMessage::create(AIUIConstant::CMD\\_START\\_SAVE, 0, 0, \"data\\_type=raw\\_audio\", NULL));  \n再开启录音，保存在当前可执行程序的AIUI/audio目录文件夹下 。\n\n  \n\n1.4. 工程编译\n---------\n\n[?](#)\n\n`.``/make``.sh aarch64-3308 aarch64-linux-gnu-g++`\n\n  \n\n  \n\n  \n\n  \n\n  \n\n  \n\n  \n\n[Filter table data](#)[Create a pivot table](#)[Create a chart from data series](#)\n\n[Configure buttons visibility](/users/tfac-settings.action)"
}