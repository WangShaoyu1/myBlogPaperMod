{
	"title": "大模型知识问答测试",
	"author": "王宇",
	"publishTime": "十二月06,2023",
	"readTime": "12s",
	"tags": "[\"大模型+知识文档\"]",
	"description": "大模型+知识文档",
	"article": "*   1[技术原理](#id-大模型知识问答测试-技术原理)\n*   2[技术方案测试](#id-大模型知识问答测试-技术方案测试)\n    *   2.1[判断指标](#id-大模型知识问答测试-判断指标)\n    *   2.2[科大讯飞认知大模型](#id-大模型知识问答测试-科大讯飞认知大模型)\n    *   2.3[科大讯飞交互大模型](#id-大模型知识问答测试-科大讯飞交互大模型)\n    *   2.4[华为盘古](#id-大模型知识问答测试-华为盘古)\n    *   2.5[百度UNIT表格问答技能](#id-大模型知识问答测试-百度UNIT表格问答技能)\n    *   2.6[百度ERNIE文心一言](#id-大模型知识问答测试-百度ERNIE文心一言)\n\n  \n\n**一、万得厨APP 3大用户场景**\n\n1.  找吃什么：用户想吃饭，但是不知道吃什么。打开万得厨APP以找到吃什么。\n\n1.  食谱/食品推荐\n2.  食谱/食品条件检索\n3.  食谱/食品对比\n\n3.  教我烹饪：用户已决定吃某道食谱。开始按照食材清单，按照步骤进行操作。对某些烹饪步骤不清楚的地方会深究细节。\n4.  分享食谱：用户自己煮了一道菜，很好吃。发出来希望有人能夸夸她/他，满足被认可的需求。\n\n**二、结合这些场景，可以对大模型进入如下场景试验**\n\n1.  食谱推荐：结合食谱知识，做随机推荐\n2.  食谱条件检索：从场景、食材、口味等条件，做随机推荐\n3.  食谱对比：2个食谱对比、多个食谱对比\n\n**三、模型选择（条件：国内模型、参数大、方便）：**\n\n1.  科大讯飞认知大模型\n2.  科大讯飞交互大模型\n3.  华为盘古\n4.  文心一言（4或3-turbo）百度千帆平台提供文档和结构化数据问答的预制功能，可以快速搭建基于知识库的大模型应用。\n\n  \n\n*   12月唐玮、冬颖优化测试用例优化，测试。\n*   相关不同格式知识方案补充测试。多知识库测试。提示+知识库测试。\n*   补充阿里表格问答的测试\n*   考虑效率和成本\n\n技术原理\n----\n\n大模型+结构化表格/文档，都是采用相似度匹配知识的方案。文档好理解。结构化表格，相当于把一行数据转成一个切片。\n\n用户提问\n\n识别意图\n\n根据意图查询数据库并返回数据\n\n根据数据回复\n\n用户提问\n\nNLP to SQL\n\n执行查询语句\n\nSQL to NLP\n\n用户提问\n\n实体识别\n\n执行查询语句\n\n模板\n\n1、NLP to SQL（NL2SQL）的通俗理解：以用户问题、表格结构、以及初步识别的sql语句作为输入，预测最终的sql。  \n2、其通过预测的方式得到查询SQL。方法类似于“烹饪功率查询技能”的方法\n\n整体流程\n\n表格问答\n\nKGQA\n\nQuery解析\n\n1、知识图谱的对话流程理解：根据用户提问，抽取出实体和关系词。通过实体和关系词去匹配一个问答模板和图谱数据库的查询模板。  \n2、知识图谱的对话流程更多的基于逻辑式的推理。而这样的推理需要依靠人工去配置。\n\n方案1\n\n方案2\n\n方案3\n\n用户提问\n\n实体识别\n\n完整prompt  \n传给大模型\n\n执行查询语句  \n拼接prompt\n\n大模型生成回复\n\n大模型\n\nQuery解析\n\n1、基于大模型，可以采用知识图谱、相似度、NL2SQL的方案拼接知识，以提供大模型理解回复。  \n2、理论上说，大模型将比表格问答和KBQA具有更好的泛化、能满足表格问答已有场景下，更复杂的多轮场景。  \n3、缺点是准确性可能会比表格问答和KBQA低，特别是涉及计算、排序的场景。\n\n相似度匹配知识\n\nNLP to SQL\n\n![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMjEuOTkgNGMwLTEuMS0uODktMi0xLjk5LTJINGMtMS4xIDAtMiAuOS0yIDJ2MTJjMCAxLjEuOSAyIDIgMmgxNGw0IDQtLjAxLTE4ek0xOCAxNEg2di0yaDEydjJ6bTAtM0g2VjloMTJ2MnptMC0zSDZWNmgxMnYyeiIvPjxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz48L3N2Zz4= \"显示评论\")\n\n//<!\\[CDATA\\[ (function() { $ = AJS.$; var graphContainer = document.getElementById('drawio-macro-content-6edb8997-4704-481e-87da-051d0ba1f534'); DrawioProperties = { contextPath : AJS.contextPath(), buildNumber : 8401 }; var readerOpts = {}; readerOpts.loadUrl = '' + '/rest/drawio/1.0/diagram/crud/%E6%8A%80%E6%9C%AF%E6%B5%81%E7%A8%8B/114662838?revision=1'; readerOpts.imageUrl = '' + '/download/attachments/114662838/技术流程.png' + '?version=1&api=v2'; readerOpts.editUrl = '' + '/plugins/drawio/addDiagram.action?ceoId=114662838&owningPageId=114662838&diagramName=%E6%8A%80%E6%9C%AF%E6%B5%81%E7%A8%8B&revision=1'; readerOpts.editable = true; readerOpts.canComment = true; readerOpts.stylePath = STYLE\\_PATH; readerOpts.stencilPath = STENCIL\\_PATH; readerOpts.imagePath = IMAGE\\_PATH + '/reader'; readerOpts.border = true; readerOpts.width = '600'; readerOpts.simpleViewer = false; readerOpts.tbstyle = 'top'; readerOpts.links = 'auto'; readerOpts.lightbox = true; readerOpts.resourcePath = ATLAS\\_RESOURCE\\_BASE + '/resources/viewer'; readerOpts.disableButtons = false; readerOpts.zoomToFit = true; readerOpts.language = 'zh'; readerOpts.licenseStatus = 'OK'; readerOpts.contextPath = AJS.contextPath(); readerOpts.diagramName = decodeURIComponent('%E6%8A%80%E6%9C%AF%E6%B5%81%E7%A8%8B'); readerOpts.diagramDisplayName = ''; readerOpts.aspect = ''; readerOpts.ceoName = '大模型知识问答测试'; readerOpts.attVer = '1'; readerOpts.attId = '114666203'; readerOpts.lastModifierName = '未知用户 (tangwei)'; readerOpts.lastModified = '2023-11-30 11:37:37.846'; readerOpts.creatorName = '未知用户 (tangwei)'; //Embed macro specific info readerOpts.extSrvIntegType = '$extSrvIntegType'; readerOpts.gClientId = '$gClientId'; readerOpts.oClientId = '$oClientId'; readerOpts.service = '$service'; readerOpts.sFileId = '$sFileId'; readerOpts.odriveId = '$odriveId'; readerOpts.diagramUrl = '$diagramUrl'; readerOpts.csvFileUrl = '$csvFileUrl'; readerOpts.pageId = '$pageId' || Confluence.getContentId(); readerOpts.aspectHash = '$aspectHash'; readerOpts.useExternalImageService = '$useExternalImageService' == 'true'; readerOpts.isTemplate = '$isTemplate' == 'true'; if (readerOpts.width == '') { readerOpts.width = null; } // LATER: Check if delayed loading of resources can be used for image placeholder mode var viewerPromise = createViewer(graphContainer, readerOpts); if(readerOpts.editable) { $(graphContainer).data('viewerConfig', readerOpts); $(graphContainer).on('drawioViewerUpdate', updateDrawioViewer); } viewerPromise.done(function(viewer) { updateCachedDiagram(graphContainer, readerOpts, viewer); }); })(); //\\]\\]>\n\n![](/download/attachments/114662838/image2023-11-30_11-51-1.png?version=1&modificationDate=1701316261116&api=v2)\n\n这种技术方式，印象最终效果的有3个关键环节\n\n*   知识切片。一个切片支持的文字数量\n*   向量检索。通常采用余弦相似度算法\n*   模型的意图识别能力\n\n技术方案测试\n------\n\n[知识问答测试问句讯飞星火认知大模型2.xlsx](/download/attachments/114662838/%E7%9F%A5%E8%AF%86%E9%97%AE%E7%AD%94%E6%B5%8B%E8%AF%95%E9%97%AE%E5%8F%A5%E8%AE%AF%E9%A3%9E%E6%98%9F%E7%81%AB%E8%AE%A4%E7%9F%A5%E5%A4%A7%E6%A8%A1%E5%9E%8B2.xlsx?version=2&modificationDate=1701247952016&api=v2)\n\n### 判断指标\n\n*   识别率：正确识别用户意图的数量与问句总数的比\n*   正确率：正确识别用户意图后，提供正确答案的数量与问句总数的比\n\n![](/download/attachments/114662838/image2023-12-6_18-34-23.png?version=1&modificationDate=1701858863606&api=v2)\n\n![](/download/attachments/114662838/%E5%9B%BE%E7%89%871.png?version=9&modificationDate=1701247904758&api=v2)\n\n![](/download/attachments/114662838/image2023-11-29_16-52-2.png?version=1&modificationDate=1701247922560&api=v2)\n\n**支持格式：**\n\n技术方案\n\n支持格式\n\n技术方案\n\n支持格式\n\n百度UNIT\n\n本地上传：xlsx。单文件不超过2M。\n\n文心一言4（百度千帆）\n\n1、本地上传：纯文本txt，表格xlsx\\\\csv，键值对json。单个⽂件不超过60M。  \n2、百度云数据库上传：数据库table/view。大小未限制。  \n3、分享连接导入：txt、xlsx\\\\csv、json格式的压缩包。文件大小在5G以内。\n\n讯飞交互\n\n本地上传：docx、txt格式。大小不超过10M，数量不超过10篇\n\n讯飞认知\n\n本地上传：txt、pdf。最多上传10个文件，单文件字数不超过20W。\n\n**总结：**\n\n*   大模型在识别率和关键场景的准确率上都比较高，但是在涉及计算的场景准确率很差。这是因为大模型的结构化数据的技术手段，采用的是文档切片+相似度匹配+prompt拼接的方式。大模型由于不可能一次性把所有的数据放入提示词中，所以就基本不可能回复正确涉及计算的问题。如：“万得厨有多少食谱”，“帮我找出评价最高的食谱”\n*   UNIT表格问答在优化后，识别率能达到58%。但是依旧比较低。阿里的表格问答技能在技术手段上比百度UNIT强，主观上估计能够达到80%左右的准确率。但现在比较难去测试。\n*   科大讯飞交互大模型的整体指标都很低。在使用过程中，也常出BUG，常有异常情况。\n\n### 科大讯飞认知大模型\n\n计算范围\n\n识别率\n\n正确率\n\n计算范围\n\n识别率\n\n正确率\n\n所有场景\n\n88.5%\n\n64.7%\n\n关键场景\n\n91.2%\n\n79.6%\n\n不涉及计算的场景\n\n92%\n\n79.2%\n\n涉及计算的场景\n\n79.1%\n\n25.6%\n\n### 科大讯飞交互大模型\n\n计算范围\n\n识别率\n\n正确率\n\n计算范围\n\n识别率\n\n正确率\n\n所有场景\n\n44.2%\n\n18.6%\n\n关键场景\n\n44.0%\n\n12.6%\n\n不涉及计算的场景\n\n48.7%\n\n24.3%\n\n涉及计算的场景\n\n32.6%\n\n3.5%\n\n讯飞交互大模型，整体的指标很低。其中的原因至少包含以下几个方面：\n\n1.  交互大模型可能设置的识别的阈值很高，\n\n### 华为盘古\n\n已申请试用，审核未通过。已和吉小斌沟通，但今天11.24斌哥在外出差没空处理。审核通过后会有15天的试用时间。\n\n### 百度UNIT表格问答技能\n\n表格问答只要能正确识别，就能查询出正确数据，虽回复不一定口语化，但数据是正确的。\n\n计算范围\n\n识别率\n\n正确率\n\n计算范围\n\n识别率\n\n正确率\n\n所有场景\n\n34.9%\n\n34.9%\n\n关键场景\n\n25.8%\n\n25.8%\n\n不涉及计算的场景\n\n32.7%\n\n32.7%\n\n涉及计算的场景\n\n40.7%\n\n40.7%\n\n**\\-- 优化后**\n\n计算范围\n\n识别率\n\n正确率\n\n计算范围\n\n识别率\n\n正确率\n\n所有场景\n\n58.7%\n\n58.7%\n\n关键场景\n\n59.7%\n\n59.7%\n\n不涉及计算的场景\n\n61.5%\n\n61.5%\n\n涉及计算的场景\n\n51.2%\n\n51.2%\n\n### 百度ERNIE文心一言\n\n计算范围\n\n识别率\n\n正确率\n\n计算范围\n\n识别率\n\n正确率\n\n所有场景\n\n98.1%\n\n66.0%\n\n关键场景\n\n100%\n\n85.5%\n\n不涉及计算的场景\n\n100%\n\n84.1%\n\n涉及计算的场景\n\n93%\n\n18.6%\n\n  \n\n  \n\n  \n\n  \n\n  \n\n[Filter table data](#)[Create a pivot table](#)[Create a chart from data series](#)\n\n[Configure buttons visibility](/users/tfac-settings.action)"
}