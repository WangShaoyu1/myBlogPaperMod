{
	"title": "虚拟人创建流程",
	"author": "王宇",
	"publishTime": "三月15,2024",
	"readTime": "12s",
	"tags": "[\"陆元伟\"]",
	"description": "陆元伟",
	"article": "1.  HaiSDK#Init，sdk初始化方法，在回调里面判断是否成功，成功后继续下一步\n    \n2.  通过HaiSDK.GetAuthToken()方法获取token，成功后继续下一步\n    \n3.  获取通过接口虚拟人信息，url=(GPValues.BASE\\_URL + \"/getInstListByAppId\")，添加token到头部信息，addHeader(\"Cookie\",\"user\\_token=$token\")\n    \n4.  检查资源包：HaiSDK.CheckServerAsset，如果不需要更新，则可跳过第5步\n    \n5.  下载资源包方法：HaiSDK.DownloadCheckedServerAsset\n    \n6.  下载PTA实例资源：HaiSDK.DownloadPTA\n    \n7.  创建虚拟人：HaiSDK.CreateInstance\n    \n\n注意点：\n\n初始化函数签名\n\npublic static void Init(boolean useInnerAudio, String defaultPath, Str ing authHost, String appKey, String appID, String appSecret, String usrId, IInitCallback initCallback)\n\ndefaultPath：资源路径，虚拟人下载的资源在这路径下\n\nauthHost：接口baseUrl\n\n下载的资源\n\n![](/download/thumbnails/109725346/image2024-3-15_10-25-48.png?version=1&modificationDate=1710469548448&api=v2)\n\n主要播放方法\n\nHaiSDK.InstancePlayCloudBehavior(  \nAppContextHelper.getInstance().avatarInstID,  \ntext,  \nopenNLP,  \nopenGesture,  \ninLangID,  \noutLangID,  \ntags）\n\n  \n\nopen class DefaultIPlayChat: IPlayChat {\n\n//当前聊天结束\n\noverride fun onChatEnd() {  \n}\n\noverride fun onTextAnswerCallbackEnd(p0: String?) {  \n}\n\n//json字符串—aiui Base64编码\n\noverride fun onTagTextCallbackEnd(p0: String?) {\n\n}\n\noverride fun onRichTextCallbackEnd(p0: String?) {  \n}  \n}\n\n指令类型数据结构：\n\n/\\*\\*  \n\\* 指令bean  \n\\*/  \npublic class InstructBean implements Parcelable {\n\nprivate String code;  \nprivate String continue\\_answer;  \nprivate String continue\\_failed\\_answer;  \nprivate String failed\\_answer;  \nprivate String intent;  \nprivate String isEnd;  \nprivate String isMulti;  \nprivate String succeed\\_answer;  \nprivate String ttsId;\n\nprivate String answer;\n\nprivate String entities;  \nprivate String service;\n\n  \n\n闲聊内容数据结构：\n\ndata class AiuiBean(var aiui:String,  \nvar service:String?,  \nvar nlpId:String?)\n\n  \n\n  \n\n播放A+资源\n\nHaiSDK.InstancePlayAplus(rid, aplusId, true, callback)\n\n播放动画\n\nHaiSDK.InstancePlayLocalClip\n\n  \n\n/\\*\\*  \n\\* 切换到空闲状态（如果当前在播报文本，或者在播动画，都会被打断）  \n\\*/  \nHaiSDK.InstanceDoIdle(）\n\n移动\n\nHaiSDK.InstanceMoveBy\n\n  \n\n  \n\n[Filter table data](#)[Create a pivot table](#)[Create a chart from data series](#)\n\n[Configure buttons visibility](/users/tfac-settings.action)"
}