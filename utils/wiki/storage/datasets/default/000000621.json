{
	"title": "万得厨个人信息查询场景调研",
	"author": "王宇",
	"publishTime": "十二月28,2023",
	"readTime": "12s",
	"tags": "[\"表格/图谱问答\"]",
	"description": "表格/图谱问答",
	"article": "1\\. 场景需求\n========\n\n编号\n\n场景\n\n场景需求\n\n业务库\n\nsql\n\n编号\n\n场景\n\n场景需求\n\n业务库\n\nsql\n\n1\n\n个人万得厨设备数据\n\n用户id 归属家庭 所在房间 设备名称 设备状态 型号 型号编码 UUID MAC 软件版本 系统版本\n\n![](/download/thumbnails/114676018/image2023-12-26_15-24-7.png?version=1&modificationDate=1703575447890&api=v2)\n\nscene\\_mwd\n\nselect  \n[de.id](http://de.id), -- id  \nde.device\\_id, -- 设备id  \nde.device\\_name, -- 设备id  \nde.bind\\_user\\_id, -- 用户id  \nde.bind\\_user\\_device\\_name, -- 用户设置的设备名称  \nde.bind\\_operate\\_time, -- 用户绑定时间  \nds.device\\_online\\_status, -- 设备在线状态  \nde.enable\\_status， -- 启用状态  \nds.cooking\\_status, -- 设备烹饪状态  \nds.last\\_online\\_time, -- 设备最后在线时间  \nde.cooking\\_times, -- 烹饪总次数  \nde.qr\\_code\\_scan\\_times, -- 扫码总次数  \nde.qr\\_code\\_scan\\_start\\_times, -- 扫码启动总次数  \nde.device\\_model\\_name, -- 设备型号  \nde.iot\\_device\\_model\\_code, -- 设备中心设备类型（型号编码）  \nde.mac\\_address, -- mac地址  \nde.unique\\_code, -- 设备唯一识别码UUID  \nde.firmware\\_version, -- 固件版本（硬件版本）  \nde.app\\_version\\_code -- app版本（软件版本）  \nfrom  \nmwd\\_device\\_info de  \nleft join mwd\\_device\\_status ds on de.device\\_id = ds.device\\_id  \nwhere de.client\\_type = 2 and de.device\\_team\\_type = 10\n\n2\n\n个人消息\n\n用户id 发送消息账号名 时间 消息内容（消息、赞和收藏、新增关注、评论和@）\n\n![](/download/thumbnails/114676018/image2023-12-26_15-38-10.png?version=1&modificationDate=1703576290191&api=v2)\n\nES数据库\n\n[http://kibana-prod-bigdata.yingzi.com/login?next=%2F#?\\_g=()](http://kibana-prod-bigdata.yingzi.com/login?next=%2F#?_g=\\(\\))  \n  \nprod\\_bigdata:Lf7xyKou5f2PsJsC\n\n  \n\nGET im\\_message\\_data/\\_search  \n{  \n\"query\": {  \n\"bool\": {  \n\"must\": \\[  \n{  \n\"terms\": {  \n\"from\": \\[\"81ef772a4b0b411da25a2ad2b7492316\",\"6412c3171445483d9bda22e1a74a96fb\",\n\n\"1298df7018724833ae1291d309a5de9c\",\"fd35040cd210452d9a5f8af37f36a1ff\",\n\n\"595f8b31198f43c5b294e8efb51bd4be\"\\]  \n}  \n},{  \n\"match\": {  \n\"messageList.type.keyword\": \"custom\"  \n}  \n},  \n{  \n\"range\": {  \n\"timestamp\": {  \n\"gt\": \"1703520056000\"  \n}  \n}  \n}  \n\\]  \n}  \n}  \n}\n\n3\n\n个人好友\n\n用户id 好友(数据同个人关注)\n\n![](/download/thumbnails/114676018/image2023-12-26_15-38-27.png?version=1&modificationDate=1703576307644&api=v2)\n\nfans\n\nselect  \nf.fan\\_user\\_id,  \nf.blogger\\_user\\_id,  \nfu.create\\_user\\_name  \nfrom  \nfans f  \nleft join fans\\_user\\_basic\\_info fu on f.blogger\\_user\\_id = fu.create\\_user\\_id  \nwhere relation\\_type = 1 and deleted = false\n\n4\n\n个人购物车\n\n用户id 商品名 商家 价格 数量 总价 规格 商品下架信息 营销活动信息\n\n![](/download/thumbnails/114676018/image2023-12-26_15-38-41.png?version=1&modificationDate=1703576321911&api=v2)\n\nbizcenter\\_order、scene\\_trade、渠道中心channel、商品中心item、promotion\n\n  \n\n5\n\n个人钱包\n\n用户id 厨币 E卡 钱包 优惠券\n\n![](/download/thumbnails/114676018/image2023-12-26_15-38-54.png?version=1&modificationDate=1703576334270&api=v2)\n\npromotion\n\nselect  \nbuyer\\_code,  \nactivate\\_status,  \nuse\\_status,  \namount,  \nused\\_amount,  \nresidual\\_amount,  \nlock\\_amount,  \navailable\\_amount  \nfrom  \npmc\\_e\\_card\\_info ci\n\n  \n\n  \n\n6\n\n个人订单\n\n用户id 订单状态（待付款、待发货、待收货/使用、待评价、退款/售后）  商品名称 规格 单价 数量 实付款\n\n![](/download/thumbnails/114676018/image2023-12-26_15-39-6.png?version=1&modificationDate=1703576346432&api=v2)\n\norder\n\nselect  \nid,  \norder\\_no,  \nspu\\_code,  \nsku\\_name,  \nsku\\_price  \ncreate\\_user\\_id,  \noriginal\\_amount,  \npayable\\_amount,  \nfreigth\\_amount,  \nlogistics\\_status,  \ndiscount\\_amount,  \nrebate\\_amount,  \npremium\\_amount,  \nspr\\_amount,  \ndistribution\\_type,  \necard\\_amount,  \nsource\\_store\\_code,  \ncreate\\_time  \nfrom  \nodc\\_order\\_line ool\n\n7\n\n个人食谱\n\n用户id 食谱名称 发布状态 点赞数 收藏数 分享数 查阅数 评论数 评论 发布时间 烹饪工具 食材清单 做法步骤\n\n![](/download/thumbnails/114676018/image2023-12-26_15-39-21.png?version=1&modificationDate=1703576361301&api=v2)\n\nrecipe\n\nselect  \n[ri.id](http://ri.id),  \nri.publisher\\_id, -- 发布人id  \nri.publisher\\_name, -- 发布人姓名  \nri.publisher\\_time, -- 发布时间  \nri.publisher\\_status, -- 发布状态（0：草稿，1：已发布，2:已上架，3：已下架）  \nri.title, -- 食谱标题  \nri.introduce, -- 食谱介绍  \nrs.reading\\_num, -- 阅览次数  \nrs.fabulous\\_num, -- 点赞次数  \nrs.collect\\_num, -- 收藏次数  \nrs.forward\\_num, -- 转发次数  \nrs.comment\\_num, -- 评论次数  \nrs.cooking\\_num, -- 烹饪次数  \nri.cooking\\_utensils -- 选择的器皿\\[beizi,beozo\\]\\]  \nfrom  \nrecipe\\_information ri  \nleft join recipe\\_interactive\\_summary rs on [ri.id](http://ri.id) = rs.recipe\\_id  \nwhere ri.deleted = false and ri.channel = \"UGC\"\n\nselect \\* from recipe\\_cooking\\_step -- 做法步骤\n\nselect \\* from recipe\\_food\\_ingredients -- 食材清单\n\nselect \\* from recipe\\_comment -- 食谱评论\n\n8\n\n个人笔记\n\n用户id 笔记名称 笔记内容 发布时间 点赞数 收藏数 分享数 查阅数 评论数 评论\n\n![](/download/thumbnails/114676018/image2023-12-26_15-39-31.png?version=1&modificationDate=1703576371179&api=v2)\n\nrecipe\n\nselect  \n[ri.id](http://ri.id),  \nri.publisher\\_id, -- 发布人id  \nri.publisher\\_name, -- 发布人姓名  \nri.publisher\\_time, -- 发布时间  \nri.publisher\\_status, -- 发布状态（0：草稿，1：已发布，2:已上架，3：已下架）  \nri.title, -- 笔记标题  \nri.introduce, -- 笔记内容  \nrs.reading\\_num, -- 阅览次数  \nrs.fabulous\\_num, -- 点赞次数  \nrs.collect\\_num, -- 收藏次数  \nrs.forward\\_num, -- 转发次数  \nrs.comment\\_num, -- 评论次数  \nfrom  \nrecipe\\_information ri  \nleft join recipe\\_interactive\\_summary rs on [ri.id](http://ri.id) = rs.recipe\\_id  \nwhere ri.deleted = false and ri.channel = \"NOTE\"\n\n9\n\n个人收藏\n\n用户id 食谱名称/笔记名称/商品名称/店铺名称 收藏时间 发布人\n\n![](/download/thumbnails/114676018/image2023-12-26_15-39-49.png?version=1&modificationDate=1703576389889&api=v2)\n\nrecipe\\\\review\n\nselect  \n[rc.id](http://rc.id),  \nrc.account\\_id,  \nrc.recipe\\_id,  \nri.title,  \nri.publisher\\_name,  \nrc.create\\_time  \nfrom recipe\\_collect rc  \nleft join recipe\\_information ri on rc.recipe\\_id = [ri.id](http://ri.id)\n\n10\n\n个人点赞\n\n用户id 食谱名称/笔记名称 点赞时间 发布人\n\n![](/download/thumbnails/114676018/image2023-12-26_15-40-12.png?version=1&modificationDate=1703576412374&api=v2)\n\nrecipe\n\nselect  \n[rimr.id](http://rimr.id),  \ncreate\\_user\\_id,  \nri.title  \nfrom  \nrecipe\\_interactive\\_msg\\_record rimr  \nleft join recipe\\_information ri on  \nrimr.target\\_id = [ri.id](http://ri.id)  \nwhere  \nrimr.operator\\_id = 1\n\n11\n\n个人足迹\n\n用户id 食谱名称/笔记名称 查阅时间 发布人\n\n![](/download/thumbnails/114676018/image2023-12-26_15-40-23.png?version=1&modificationDate=1703576424170&api=v2)\n\nrecipe\n\nselect  \n[rb.id](http://rb.id),  \nrb.account\\_id,  \nrb.create\\_time,  \nrb.recipe,  \nri.title,  \nri.publisher\\_name  \nfrom  \nrecipe\\_browse rb  \nleft join recipe\\_information ri on  \nrb.recipe\\_id = [ri.id](http://ri.id)  \nlimit 20\n\n12\n\n个人关注\n\n用户id 关注人名称 简介\n\n![](/download/thumbnails/114676018/image2023-12-26_15-40-35.png?version=1&modificationDate=1703576435101&api=v2)\n\nfans\n\nselect  \nf.fan\\_user\\_id,  \nf.blogger\\_user\\_id,  \nfu.create\\_user\\_name  \nfrom  \nfans f  \nleft join fans\\_user\\_basic\\_info fu on f.blogger\\_user\\_id = fu.create\\_user\\_id  \nwhere relation\\_type = 1 and deleted = false\n\n13\n\n个人粉丝\n\n用户id 粉丝名称 简介\n\n![](/download/thumbnails/114676018/image2023-12-26_15-41-11.png?version=1&modificationDate=1703576472011&api=v2)\n\nfans\n\nselect  \nf.blogger\\_user\\_id,  \nf.fan\\_user\\_id,  \nfu.create\\_user\\_name  \nfrom  \nfans f  \nleft join fans\\_user\\_basic\\_info fu on f.fan\\_user\\_id = fu.create\\_user\\_id  \nwhere relation\\_type = 1 and deleted = false\n\n14\n\n个人获赞与收藏\n\n用户id 当前发布内容数 当前获得点赞数 当前获得收藏数\n\n![](/download/thumbnails/114676018/image2023-12-26_15-41-21.png?version=1&modificationDate=1703576481505&api=v2)\n\nrecipe\n\nselect  \nri.publisher\\_id,  \n\\-- 发布人id  \ncount(ri.publisher\\_id) as all\\_publish\\_num,  \n\\-- 发布内容个数  \ncount(rs.fabulous\\_num) as all\\_fabulous\\_num,  \n\\-- 点赞次数  \ncount(rs.collect\\_num) as all\\_collect\\_num,  \n\\-- 收藏次数  \ncount(rs.forward\\_num) as all\\_forward\\_num,  \n\\-- 转发次数  \nfrom  \nrecipe\\_information ri  \nleft join recipe\\_interactive\\_summary rs on  \n[ri.id](http://ri.id) = rs.recipe\\_id  \nwhere  \nri.deleted = false  \nand ri.channel in (\"NOTE\", \"UGC\")  \nand ri.publisher\\_status in (1, 2, 3)  \ngroup by  \nri.publisher\\_id\n\n15\n\n个人账户信息\n\n  \n\nfans\n\nselect  \nfubi .id,  \nfubi .create\\_user\\_name ,  \nfubi .account\\_id ,  \nfubi .native\\_place ,  \nfubi .height ,  \nfubi .weight ,  \nfubi .nation ,  \nfubi .religion ,  \nfubi .allergen  \nfrom  \nfans\\_user\\_basic\\_info fubi\n\n[Filter table data](#)[Create a pivot table](#)[Create a chart from data series](#)\n\n[Configure buttons visibility](/users/tfac-settings.action)"
}