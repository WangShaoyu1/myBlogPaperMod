{
	"title": "烹饪方案预测语音技能",
	"author": "王宇",
	"publishTime": "十月18,2023",
	"readTime": "12s",
	"tags": "[\"（五）算法\"]",
	"description": "（五）算法",
	"article": "*   1[1\\. 用户语音交互时序图](#id-烹饪方案预测语音技能-用户语音交互时序图)\n*   2[2\\. 升温阶段计算原理](#id-烹饪方案预测语音技能-升温阶段计算原理)\n*   3[3\\. 前提条件](#id-烹饪方案预测语音技能-前提条件)\n*   4[4\\. 数据需求](#id-烹饪方案预测语音技能-数据需求)\n    *   4.1[4.1. 食谱和商品数据需求](#id-烹饪方案预测语音技能-食谱和商品数据需求)\n        *   4.1.1[4.1.1. PGC食谱数据训练](#id-烹饪方案预测语音技能-PGC食谱数据训练)\n        *   4.1.2[4.1.2. UGC食谱数据验算](#id-烹饪方案预测语音技能-UGC食谱数据验算)\n        *   4.1.3[4.1.3. 已验证UGC食谱数据训练](#id-烹饪方案预测语音技能-已验证UGC食谱数据训练)\n    *   4.2[4.2. 比热容和营养成分数据需求](#id-烹饪方案预测语音技能-比热容和营养成分数据需求)\n    *   4.3[4.3. 常见食材非常规重量换算](#id-烹饪方案预测语音技能-常见食材非常规重量换算)\n*   5[5\\. 计算思路](#id-烹饪方案预测语音技能-计算思路)\n    *   5.1[5.1. 基础参数计算](#id-烹饪方案预测语音技能-基础参数计算)\n    *   5.2[5.2. 解析食材重量](#id-烹饪方案预测语音技能-解析食材重量)\n    *   5.3[5.3. 食材比热容计算](#id-烹饪方案预测语音技能-食材比热容计算)\n    *   5.4[5.4. 解析烹饪方案（训练过程）](#id-烹饪方案预测语音技能-解析烹饪方案（训练过程）)\n    *   5.5[5.5. 食材所需热量估算](#id-烹饪方案预测语音技能-食材所需热量估算)\n    *   5.6[5.6. 烹饪功率选择](#id-烹饪方案预测语音技能-烹饪功率选择)\n        *   5.6.1[5.6.1. 升温阶段功率选择](#id-烹饪方案预测语音技能-升温阶段功率选择)\n        *   5.6.2[5.6.2. 熟化阶段功率选择](#id-烹饪方案预测语音技能-熟化阶段功率选择)\n    *   5.7[5.7. 烹饪时长计算](#id-烹饪方案预测语音技能-烹饪时长计算)\n*   6[6\\. 测试记录](#id-烹饪方案预测语音技能-测试记录)\n    *   6.1[6.1. 总热量预测算法调优记录（初版）](#id-烹饪方案预测语音技能-总热量预测算法调优记录（初版）)\n    *   6.2[6.2. 熟化热量预测算法调优记录（第二版）](#id-烹饪方案预测语音技能-熟化热量预测算法调优记录（第二版）)\n    *   6.3[6.3. 前两版模型泛化能力对比](#id-烹饪方案预测语音技能-前两版模型泛化能力对比)\n        *   6.3.1[6.3.1. 重量泛化能力测试记录（单一食材）](#id-烹饪方案预测语音技能-重量泛化能力测试记录（单一食材）)\n        *   6.3.2[6.3.2. 重量泛化能力测试记录（两种食材）](#id-烹饪方案预测语音技能-重量泛化能力测试记录（两种食材）)\n        *   6.3.3[6.3.3. 烹饪方式泛化能力测试记录](#id-烹饪方案预测语音技能-烹饪方式泛化能力测试记录)\n        *   6.3.4[6.3.4. 食材泛化能力测试记录](#id-烹饪方案预测语音技能-食材泛化能力测试记录)\n    *   6.4[6.4. 熟化热量预测算法调优记录（第三版）](#id-烹饪方案预测语音技能-熟化热量预测算法调优记录（第三版）)\n    *   6.5[6.5. 模型泛化能力对比](#id-烹饪方案预测语音技能-模型泛化能力对比)\n        *   6.5.1[6.5.1. 重量泛化能力测试记录（单一食材）](#id-烹饪方案预测语音技能-重量泛化能力测试记录（单一食材）.1)\n        *   6.5.2[6.5.2. 重量泛化能力测试记录（两种食材）](#id-烹饪方案预测语音技能-重量泛化能力测试记录（两种食材）.1)\n        *   6.5.3[6.5.3. 重量泛化能力测试记录（汤类）](#id-烹饪方案预测语音技能-重量泛化能力测试记录（汤类）)\n        *   6.5.4[6.5.4. 烹饪方式泛化能力测试记录](#id-烹饪方案预测语音技能-烹饪方式泛化能力测试记录.1)\n        *   6.5.5[6.5.5. 食材泛化能力测试记录](#id-烹饪方案预测语音技能-食材泛化能力测试记录.1)\n*   7[7\\. 风险和提示](#id-烹饪方案预测语音技能-风险和提示)\n    *   7.1[7.1. 风险](#id-烹饪方案预测语音技能-风险)\n    *   7.2[7.2. 提示](#id-烹饪方案预测语音技能-提示)\n\n1\\. 用户语音交互时序图\n=============\n\n![](/download/attachments/105264707/image2023-8-24_10-43-3.png?version=1&modificationDate=1692844983557&api=v2)\n\n2\\. 升温阶段计算原理\n============\n\nQ（理论输出热量） = P\\*t  \nQ（升温所需热量） = C\\*M\\*(T1-T0)   \n热转化率 η = （Q（升温所需热量）+ Q（熟化所需热量））/ Q（理论输出热量）\n\n**解释：**\n\n*   Q——热量，J或W\\*s\n*   P——功率，W\n*   t——时长，s\n*   C——比热容，KJ /（千克 × ℃）或 J/(g × ℃)\n*   M——食材总质量，g\n*   T——温度，℃\n\n3\\. 前提条件\n========\n\n1.  **升温范围：**20—100 ℃\n2.  **功率范围：**1.5版本万得厨：\\[200，900 \\] W，以50为增量\n3.  **时长范围：**1.5版本万得厨：\\[10，1550\\] s，以10为增量（发现个别食谱时长超出范围，例如：排骨莲藕汤-2400 s，算法按实际计算值返回）\n4.  **重量范围**：1.5版本万得厨：\\[50，3000\\] g，考虑热效率和模型泛化能力\n5.  **主料重量占比：**不少于烹饪总重量的70%\n\n4\\. 数据需求\n========\n\n4.1. [食谱和商品数据需求](https://alidocs.dingtalk.com/i/nodes/NZQYprEoWoe7dXL3IgZX6w22J1waOeDk?iframeQuery=sheet_range%3Dst-68e0af25-98263_0_0_1_2)\n-------------------------------------------------------------------------------------------------------------------------------------------\n\n### 4.1.1. PGC食谱数据训练\n\n采用生产环境pgc食谱数据训练模型，数据筛选过程如下：\n\n*   数据库初步筛选出667条：原始数据（705条食谱），去除已删除的（29条，deleted is true），再去除未关联烹饪方案的（scheme\\_code is null）和完全未关联食材的食谱。\n*   代码初步筛选出615条：去除烹饪过程异常的（52条）。\n*   代码最终筛选出593条：去除主料估算比热容所用重量占比小于0.7的（6条，辅料太多或主料中缺少比热容数据），再去除熟化阶段热量计算值为负数的（总共有16条，其中负值占比小于2%的可按0估算处理）。\n\n### 4.1.2. UGC食谱数据验算\n\n采用训练好的算法模型验算生产环境ugc食谱数据，数据筛选过程如下：\n\n*   数据库初步筛选出3442条：原始数据（5051条食谱），去除已删除的和未审核通过的（1477条，deleted is true and review\\_status != 1），再去除未关联烹饪方案的（scheme\\_code is null）和完全未关联食材的食谱。\n*   代码初步筛选出2861条：替换部分非纯数值型食材含量的值后，去除主料食材含量为非数值型的食谱（64条）。进行食材常规重量（'斤', '公斤', '两', '千克', 'kg', 'l', '升'）换算，基于表4.3的数据完成食材非常规重量换算（以下15条食谱对应主料的食材单位异常，无法按照正常逻辑换算，暂且按照'g'处理）后，去除主料食材单位不在换算范围内的食谱（517条）。\n\n![](/download/attachments/105264707/image2023-8-23_10-17-0.png?version=1&modificationDate=1692757020608&api=v2)\n\n*   代码再次筛选出2842条：去除非1.5版本烹饪方案的食谱（3条），再去除完全没有比热容（6条）和总重量小于50或大于3000 g的食谱（12条）。\n*   代码最终筛选出2191条：去除主料估算比热容所用重量占比小于0.7的（649条，食材中缺少比热容数据）。\n\n用当前最佳rf模型预测这2191条ugc食谱的热量，基于热量误差范围的统计结果如下：\n\n![](/download/attachments/105264707/image2023-8-23_17-54-5.png?version=1&modificationDate=1692784445858&api=v2)\n\n其中热量误差最高的（比算法预测所需热量少137.62%）是处于不熟等级2的一道菜（如下图所示）。\n\n![](/download/attachments/105264707/image2023-8-23_18-0-21.png?version=1&modificationDate=1692784821782&api=v2)\n\n用模型预测183条ugc已验证食谱的热量，基于热量误差范围的统计结果如下：\n\n![](/download/attachments/105264707/image2023-8-23_19-20-37.png?version=1&modificationDate=1692789637998&api=v2)\n\n其中不熟等级2的食谱数据如下：\n\n![](/download/attachments/105264707/image2023-8-23_19-24-29.png?version=1&modificationDate=1692789869730&api=v2)\n\n存在用户文本描述方案与实际绑定方案不匹配的情况，希望拿到pgc优化后的方案。\n\n### 4.1.3. 已验证UGC食谱数据训练\n\n引入人工已验证的ugc食谱数据训练模型，数据筛选过程如下：\n\n*   初步筛选出已验证的674条：程序处理得到食谱的食材内容（名称、重量、单位），关联新的烹饪方案（去除无烹饪方案的4条）。\n*   代码初步筛选出662条：去除烹饪过程异常的（12条）。\n*   代码最终筛选出560条：去除主料估算比热容所用重量占比小于0.7的（57条，辅料太多或主料中缺少比热容数据），再去除熟化阶段热量计算值为负数的（总共有5条，其中负值占比小于2%的可按0估算处理）。\n\n4.2. 比热容和营养成分数据需求\n-----------------\n\n字段名称\n\n字段类型\n\n是否必须\n\n字段含义\n\n数据来源\n\n备注\n\n字段名称\n\n字段类型\n\n是否必须\n\n字段含义\n\n数据来源\n\n备注\n\nmaterial\\_standard\\_name\n\nstring\n\n是\n\n食物标准名，食材惟一名称\n\n  \n\n  \n\nmaterial\\_alias\n\nstring\n\n是\n\n食物别名，食材其他名称\n\n  \n\n  \n\nbig\\_category\n\nstring\n\n否\n\n大类，，包含：蛋类及制品\n\n  \n\n  \n\nsmall\\_category\n\nstring\n\n否\n\n小类，包含：水，鸡蛋\n\n  \n\n  \n\nspecific\\_heat\\_capacity\n\nfloat\n\n是\n\n比热容\n\n模型预测或实验测定，两者误差不超过5%\n\n  \n\nwater\\_content\n\nfloat\n\n是\n\n水分含量\n\n  \n\n  \n\nprotein\\_content\n\nfloat\n\n是\n\n蛋白质含量\n\n  \n\n  \n\nfat\\_content\n\nfloat\n\n是\n\n脂肪含量\n\n  \n\n  \n\ncarb\\_content\n\nfloat\n\n是\n\n碳水化合物含量\n\n  \n\n  \n\n4.3. 常见食材非常规重量换算\n----------------\n\n序号\n\n食材名称\n\n换算前规格数量\n\n可换算单位\n\n换算后重量（g）\n\n备注\n\n1\n\n鸡蛋、鲜鸡蛋、鸡蛋液\n\n1\n\n个，只，颗\n\n50\n\n  \n\n2\n\n熟鸡蛋、煎蛋\n\n1\n\n个，只，颗\n\n50\n\n  \n\n3\n\n鸡蛋黄、蛋黄\n\n1\n\n个\n\n25\n\n  \n\n4\n\n咸蛋黄\n\n1\n\n个\n\n30\n\n  \n\n5\n\n鸭蛋、皮蛋、咸鸭蛋、咸海鸭蛋\n\n1\n\n个\n\n60\n\n  \n\n6\n\n鹌鹑蛋\n\n1\n\n个，颗\n\n9\n\n  \n\n7\n\n鹌鹑\n\n1\n\n只\n\n100\n\n  \n\n8\n\n生蚝（带壳）\n\n1\n\n个，只\n\n50\n\n  \n\n9\n\n生蚝\n\n1\n\n个，只\n\n20\n\n通常不算壳的重量（考虑给出提示）\n\n10\n\n鲍鱼\n\n1\n\n个，只\n\n50\n\n  \n\n11\n\n十八头鲍鱼\n\n1\n\n个，只\n\n28\n\n  \n\n12\n\n冬菇、香菇\n\n1\n\n个，朵\n\n15\n\n湿\n\n13\n\n干荷叶\n\n1\n\n张，个\n\n20\n\n  \n\n14\n\n披萨饼皮\n\n6英寸\n\n个，片，块，张\n\n200\n\n默认6英寸\n\n15\n\n8英寸\n\n个，片，块，张\n\n400\n\n  \n\n16\n\n9英寸\n\n个，片，块，张\n\n450\n\n  \n\n17\n\n紫菜饼\n\n1\n\n个，片，张\n\n100\n\n  \n\n18\n\n手抓饼\n\n1\n\n个，片，张\n\n110\n\n  \n\n19\n\n面饼\n\n1\n\n块\n\n80\n\n方便面饼\n\n20\n\n土豆、马铃薯\n\n1\n\n个\n\n150\n\n中号\n\n21\n\n火龙果\n\n1\n\n个\n\n350\n\n  \n\n22\n\n苹果\n\n1\n\n个\n\n200\n\n  \n\n23\n\n枇杷\n\n1\n\n个\n\n30\n\n  \n\n24\n\n柠檬\n\n1\n\n个\n\n80\n\n  \n\n25\n\n红枣、红枣（鲜）\n\n1\n\n颗，粒，个\n\n12\n\n默认鲜\n\n26\n\n红枣（干）\n\n1\n\n颗，粒，个\n\n8\n\n  \n\n27\n\n香蕉\n\n1\n\n根\n\n150\n\n  \n\n28\n\n马蹄、荸荠\n\n1\n\n粒，个\n\n16\n\n  \n\n29\n\n贝贝南瓜\n\n小\n\n个\n\n250\n\n  \n\n30\n\n中\n\n个\n\n400\n\n默认中\n\n31\n\n大\n\n个\n\n900\n\n  \n\n32\n\n南瓜\n\n1\n\n个\n\n1000\n\n  \n\n33\n\n酸木瓜、木瓜\n\n1\n\n个\n\n1000\n\n  \n\n34\n\n茄子\n\n1\n\n个，根\n\n180\n\n  \n\n35\n\n鲮鱼、罗非鱼、豆豉鲮鱼\n\n1\n\n条\n\n700\n\n  \n\n36\n\n鳜鱼、黄花鱼、石斑鱼\n\n1\n\n条\n\n500\n\n  \n\n37\n\n小鸡腿\n\n1\n\n个\n\n140\n\n  \n\n38\n\n鸡腿肉\n\n1\n\n个\n\n100\n\n  \n\n39\n\n鸡中翅\n\n1\n\n个\n\n60\n\n  \n\n40\n\n卤鸭脚\n\n1\n\n个\n\n45\n\n  \n\n41\n\n汉堡面包\n\n1\n\n个\n\n20\n\n  \n\n42\n\n鸽子\n\n1\n\n只\n\n300\n\n  \n\n43\n\n大碗面\n\n1\n\n块\n\n60\n\n  \n\n44\n\n生菜\n\n1\n\n张，片\n\n25\n\n  \n\n45\n\n奶酪片\n\n1\n\n片，角\n\n18\n\n  \n\n46\n\n吐司\n\n1\n\n片\n\n50\n\n  \n\n47\n\n猪腰\n\n1\n\n个\n\n200\n\n  \n\n48\n\n猪脑\n\n1\n\n个\n\n60\n\n  \n\n49\n\n无花果\n\n1\n\n个，颗\n\n60\n\n  \n\n50\n\n肉肠\n\n1\n\n根\n\n50\n\n  \n\n51\n\n青椒\n\n1\n\n个，条\n\n70\n\n  \n\n52\n\n火鸡面\n\n1\n\n袋、包\n\n140\n\n  \n\n53\n\n方便面\n\n1\n\n袋、包\n\n90\n\n  \n\n54\n\n蛋挞皮\n\n1\n\n个\n\n20\n\n  \n\n5\\. 计算思路\n========\n\n5.1. 基础参数计算\n-----------\n\n*   1.5版本万得厨热转化率：η = 0.99（因为算法预测的是功率和时长，即理论输出热量，故此参数无需考虑。）\n*   辅料（除酒水饮料类）重量范围：0-70 g，默认重量低于烹饪总重30%的食材为辅料。训练时将重量大于等于70 g（参数可调）或用户认为是主料的食材作为主料。\n*   比热容取值范围：0.5-4.5 J/(g × ℃)，根据现有食材统计。\n\n5.2. 解析食材重量\n-----------\n\n计算出每道菜的总重量（M）和主料重量（m\\_main）。\n\n记录每道菜的主料中蛋类重量占比egg\\_ratio和水的重量占比water\\_ratio，可用于功率选择。\n\n5.3. 食材比热容计算\n------------\n\n利用食材比热容c，计算每道菜的平均比热容：\n\n*   **精准计算方案：**C = SUM(c\\*m)/M（m为所有食材重量）\n*   **主料估算方案：**C\\_main = 主料比热容 = SUM(c\\*m)/m\\_main（m为所有主料重量），估算误差 C\\_main\\_error = |1-C\\_main /C|（C为精准计算比热容）\n\n记录每道菜的精准计算所用重量占比C\\_m\\_ratio（存在无比热容数据的食材）、主料估算所用重量占比C\\_main\\_ratio（可用于数据筛选）、有效主料数n\\_c\\_main和主料估算比热容误差C\\_main\\_error。\n\n5.4. 解析烹饪方案（训练过程）\n-----------------\n\n1.  计算出每道菜理论输出热量：Q（理论输出热量）= SUM(P\\*t)；\n2.  记录每道菜的阶段数n\\_stage、最大功率W\\_max和最小功率W\\_min（后续功率选择分析用）。\n\n5.5. 食材所需热量估算\n-------------\n\n根据现有食谱的Q（理论输出热量），利用食谱中的主料质量、水分含量、蛋白质含量、脂肪含量、碳水化合物含量，进行特征处理，得到食谱整体成分特征和主料估算比热容，建模分析相关规律，估算所需熟化热量，从而能够合理的预测其他不同食材所需的热量。\n\n*   **估算升温阶段所需热量：**Q（升温热量）= （T1-T0）\\*C\\_main\\*m\\_main J\n*   **估算所需总热量：**Q（估算总热量）= Q（预测熟化热量）+ Q（升温热量）\n\n5.6. 烹饪功率选择\n-----------\n\n### 5.6.1. 升温阶段功率选择\n\n根据现有pgc食谱中升温功率的分布情况，升温功率可按照以下三档调节：\n\n*   较低功率（400—550W），中值500 W\n*   较高功率（550—700W），中值650 W\n*   高功率（700—900W），中值800 W\n\n**注意：大部分食材的升温功率均取高功率（800 W）**，但对于以蛋类（鸡蛋、鸭蛋等）为主料的小炒（如：秋葵鸡蛋、青椒鸡蛋、土豆鸡蛋、苦瓜鸡蛋、韭黄鸡蛋、蒜苗鸡蛋、虾仁蒸蛋、西兰花蒸蛋等），最好降低功率特殊处理。目前根据主料中水的占比来判断是否为小炒，并结合主料中蛋类的占比来调节功率：\n\n*   水的占比小于0.3且蛋类占比大于等于0.7：较低功率（500 W）\n*   水的占比小于0.4且蛋类占比大于等于0.2：较高功率（650 W）\n\n对于其他食材或烹饪方式，均按高功率（800 W）计算。\n\n### 5.6.2. 熟化阶段功率选择\n\n根据现有pgc食谱中熟化功率的分布情况，熟化功率在满足不大于升温功率的前提下，可按照以下四档调节：\n\n*   低功率（200—350W），中值300 W\n*   较低功率（400—500W），中值450 W\n*   较高功率（550—650W），中值600 W\n*   高功率（700—900W），中值800 W\n\n**注意：大部分食材的熟化功率均取高功率（800 W）**，但对于以蛋类（鸡蛋、鸭蛋等）为主料的小炒、粥类和汤类，最好降低功率特殊处理。目前根据主料中水的占比来判断是否为小炒、汤类或粥类，再结合主料中蛋类的占比来调节功率：\n\n*   水的占比大于等于0.7或水的占比小于0.3且蛋类占比大于等于0.7：低功率（300 W）\n*   水的占比大于等于0.5或水的占比小于0.4且蛋类占比大于等于0.2：较低功率（450 W）\n*   水的占比小于0.5且大于等于0.3：较高功率（600 W）\n\n对于其他食材或烹饪方式，均按高功率（800 W）计算。\n\n5.7. 烹饪时长计算\n-----------\n\n一般情况下，升温时长 = Q（升温热量）/ W（升温功率），熟化时长 = Q（熟化热量）/ W（熟化功率），但需考虑以下特殊情况：\n\n*   **计算的升温热量不大于20000：**删除升温阶段，同时将升温时长并入熟化时长。\n*   **升温阶段与熟化阶段功率一致**：删除熟化阶段，同时将熟化时长并入升温时长。\n*   **估算的熟化热量不大于****20000：**删除熟化阶段，同时将熟化时长并入升温时长。\n\n**注意：**基于当前1.5版本万得厨的时长设置限制，计算出来的时长，需要四舍五入，取10的整数值。\n\n6\\. 测试记录\n========\n\n6.1. 总热量预测算法调优记录（初版）\n--------------------\n\n*   所用模型：rf-随机森林、xgb-xgboost。\n*   所用特征：归一化处理。主料重量m\\_main、主料比热容C\\_main\\*m\\_main、主料水分含量water\\_main\\*m\\_main、蛋白质含量protein\\_main\\*m\\_main、脂肪含量fat\\_main\\*m\\_main、碳水化合物含量carb\\_main\\*m\\_main。\n*   数据筛选：烹饪方式为'焖', '烤', '煎', '炒', '蒸'，熟化热量不为负数，主料比热容（完全匹配、近似匹配）不缺失，主料（不少于70 g)重量占比70%以上。\n\n  \n模型\n\n  \n\n数据筛选\n\n所用特征\n\n测试结果\n\n  \n\n备注\n\n主料重量\n\n水分含量\n\n蛋白质含量\n\n脂肪含量\n\n碳水化合物含量\n\n主料比热容\n\n平均绝对误差(MAE)\n\n均方根误差(RMSE)\n\nR2值\n\n总热量误差20%内\n\n500 W 时长偏差2 min 内\n\nrf\n\n总数267，比热容完全匹配，主料占比至少50%\n\n√\n\n√\n\n√\n\n√\n\n√\n\n√\n\n0.031\n\n0.046\n\n0.906\n\n72%\n\n80%\n\n  \n\n总数193，比热容完全匹配，主料占比至少70%\n\n√\n\n√\n\n√\n\n√\n\n√\n\n×\n\n0.030\n\n0.041\n\n0.926\n\n76%\n\n85%\n\n  \n\n总数236，比热容近似匹配，主料占比至少70%\n\n√\n\n√\n\n√\n\n√\n\n√\n\n√\n\n0.034\n\n0.057\n\n0.887\n\n82.63%\n\n88.14%\n\n  \n\nxgb  \n  \n\n总数267，比热容完全匹配，主料占比至少50%\n\n√\n\n√\n\n√\n\n√\n\n√\n\n√\n\n0.022\n\n0.032\n\n0.953\n\n75%\n\n85%\n\n  \n\n总数193，比热容完全匹配，主料占比至少70%\n\n√\n\n√\n\n√\n\n√\n\n√\n\n√\n\n0.008\n\n0.017\n\n0.99\n\n84.46%\n\n88.08%\n\n  \n\n总数236，比热容近似匹配，主料占比至少70%\n\n√\n\n√\n\n√\n\n√\n\n√\n\n√\n\n0.019\n\n0.032\n\n0.963\n\n91.53%\n\n95.76%\n\nbest，最大时长误差5 min左右，热量误差133%。\n\n总数193，比热容完全匹配，主料占比至少70%\n\n√\n\n√\n\n√\n\n√\n\n√\n\n×\n\n0.023\n\n0.034\n\n0.942\n\n75%\n\n83%\n\n  \n\n6.2. 熟化热量预测算法调优记录（第二版）\n----------------------\n\n*   所用模型：rf-随机森林、xgb-xgboost。\n*   所用特征：未归一化处理。主料重量m\\_main、主料比热容C\\_main、主料水分含量water\\_main\\*m\\_main、蛋白质含量protein\\_main\\*m\\_main、脂肪含量fat\\_main\\*m\\_main、碳水化合物含量carb\\_main\\*m\\_main、升温热量C\\_main\\*m\\_main\\*（T1-T0）、烹饪方式。\n*   数据筛选（562条）：烹饪方式为'焖', '烤', '煎', '炒', '蒸','粥', '汤', '炖', '煮'，熟化热量负值占比小于2%，比热容完全匹配+近似匹配，主料（不少于70 g或用户自定义）有效重量（比热容不缺失）占比70%以上。\n\n  \n\n模型\n\n所用特征\n\n测试结果\n\n  \n\n备注\n\n主料重量\n\n水分含量\n\n蛋白质含量\n\n脂肪含量\n\n碳水化合物含量\n\n主料比热容\n\n升温热量\n\n烹饪方式\n\nR2值\n\n总热量误差20%内\n\n500 W 时长偏差2 min 内\n\nrf  \n  \n\n√\n\n√\n\n√\n\n√\n\n√\n\n√\n\n×\n\n×\n\n0.912\n\n79.18%\n\n81.14%\n\n  \n\n√\n\n√\n\n√\n\n√\n\n√\n\n×\n\n√\n\n×\n\n 0.916\n\n86.12%\n\n84.16%\n\nbest，最大热量误差79%，时长误差8 min左右。\n\n√\n\n√\n\n√\n\n√\n\n√\n\n×\n\n√\n\n√\n\n0.903\n\n84.52%\n\n83.27%\n\n  \n\nxgb  \n  \n\n√\n\n√\n\n√\n\n√\n\n√\n\n√\n\n×\n\n×\n\n0.896\n\n73.84%\n\n75.09%\n\n  \n\n√\n\n√\n\n√\n\n√\n\n√\n\n×\n\n√\n\n×\n\n0.889\n\n82.74%\n\n81.67%\n\n  \n\n√\n\n√\n\n√\n\n√\n\n√\n\n×\n\n√\n\n√\n\n0.897\n\n87.01%\n\n83.10%\n\n  \n\n6.3. 前两版模型泛化能力对比\n----------------\n\n### 6.3.1. 重量泛化能力测试记录（单一食材）\n\n食材\n\n重量(g)\n\n食材总重量(g)\n\n预测功率(w)\n\n总热量预测模型计算时长(s)\n\n熟化热量预测模型计算时长(s)\n\n备注\n\n鸡翅  \n  \n  \n  \n  \n  \n  \n  \n  \n\n3000\n\n3000\n\n800  \n  \n  \n  \n  \n  \n  \n  \n  \n\n890\n\n2040\n\n  \n\n2500\n\n2500\n\n880\n\n1880\n\n  \n\n2000\n\n2000\n\n880\n\n1740\n\n  \n\n1500\n\n1500\n\n890\n\n1460\n\n  \n\n1000\n\n1000\n\n840\n\n950\n\n  \n\n500\n\n500\n\n440\n\n610\n\n  \n\n200\n\n200\n\n190\n\n250\n\n  \n\n100\n\n100\n\n200\n\n150\n\n  \n\n50\n\n50\n\n140\n\n120\n\n  \n\n10\n\n10\n\n300\n\n130\n\n  \n\n### 6.3.2. 重量泛化能力测试记录（两种食材）\n\n食材1\n\n重量1(g)\n\n食材2\n\n重量2(g)\n\n食材总重量(g)\n\n预测功率(w)\n\n总热量预测模型计算时长(s)\n\n熟化热量预测模型计算时长(s)\n\n备注\n\n豆角  \n  \n  \n  \n  \n  \n  \n  \n  \n\n1500\n\n猪肉（瘦）  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n\n1500\n\n3000\n\n800  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n\n850\n\n2150\n\n  \n\n1000\n\n1500\n\n2500\n\n850\n\n1940\n\n  \n\n1500\n\n1000\n\n2500\n\n810\n\n1800\n\n  \n\n1000\n\n1000\n\n2000\n\n810\n\n1600\n\n  \n\n500\n\n1000\n\n1500\n\n810\n\n1420\n\n  \n\n800\n\n500\n\n1300\n\n480\n\n1110\n\n  \n\n500\n\n500\n\n1000\n\n480\n\n770\n\n  \n\n200\n\n200\n\n400\n\n330\n\n320\n\n  \n\n100\n\n100\n\n200\n\n160\n\n170\n\n  \n\n50\n\n50\n\n100\n\n140\n\n150\n\n  \n\n25\n\n25\n\n50\n\n150\n\n120\n\n  \n\n10\n\n10\n\n20\n\n210\n\n130\n\n  \n\n5\n\n5\n\n10\n\n310\n\n220\n\n  \n\n由此可见：第一版模型对于总重1000 g以上的食材，预测值变化不大；第二版模型则变化较为明显，对较大重量的泛化能力有较大提升。但两者对于总重量50 g以下的食材均不能很好的处理，考虑限制总重量下限值。\n\n### 6.3.3. 烹饪方式泛化能力测试记录\n\n食材1\n\n重量1(g)\n\n食材2\n\n重量2(g)\n\n食材总重量(g)\n\n烹饪方式\n\n总热量预测模型计算结果\n\n熟化热量预测模型计算结果\n\n新旧模型热量偏差\n\n备注\n\n稻米（代表值）\n\n100\n\n水\n\n600\n\n700\n\n粥\n\n阶段1：800 W，270 s\n\n阶段2：600 W，220 s\n\n阶段1：800 W，270 s\n\n阶段2：450 W，820 s\n\n237082.52883\n\n属于人为验证不熟的粥，当时补充了800 W，480 s，建议复验新模型（复验合格）。\n\n绿豆\n\n100\n\n水\n\n600\n\n700\n\n汤\n\n阶段1：800 W，270 s\n\n阶段2：600 W，180 s\n\n阶段1：800 W，270 s\n\n阶段2：450 W，710 s\n\n211981.64478\n\n属于人为验证不熟的绿豆汤（泡发后熟而不化），当时补充了800 W，480 s，上一版本的训练食材中无绿豆，新版本有，建议复验新模型（复验合格，算法预测值接近训练数据）。\n\n由此可见：第二版模型引入'粥', '汤', '炖', '煮'烹饪方式后，对于粥类、汤类的泛化能力有较大提升。\n\n### 6.3.4. 食材泛化能力测试记录\n\n食材1\n\n重量1(g)\n\n食材2\n\n重量2(g)\n\n食材总重量(g)\n\n总热量预测模型计算结果\n\n熟化热量预测模型计算结果\n\n备注\n\n玉米（鲜）\n\n483\n\n  \n\n  \n\n483\n\n阶段1：800 W，300 s\n\n  \n\n阶段1：800 W，410 s\n\n  \n\n属于人为验证熟的烹玉米，新模型烹饪更久一些。\n\n猪肉（代表值，fat30g）\n\n76\n\n马铃薯\n\n200\n\n276\n\n阶段1：800 W，310 s\n\n  \n\n阶段1：800 W，240 s\n\n  \n\n属于人为验证熟的土豆丝炒瘦肉，新模型烹饪更短一些。\n\n豆腐（代表值）\n\n245\n\n  \n\n  \n\n245\n\n阶段1：800 W，200 s\n\n  \n\n阶段1：800 W，190 s\n\n  \n\n属于人为验证熟的煎豆腐，前后差别不大。\n\n千张\n\n260\n\n  \n\n  \n\n260\n\n阶段1：800 W，390 s\n\n  \n\n阶段1：800 W，400 s\n\n  \n\n属于人为验证过熟的素炒千张，前后差别不大。训练食材中无千张。\n\n猪肉（代表值，fat30g）\n\n80\n\n胡萝卜\n\n144\n\n224\n\n阶段1：800 W，190 s\n\n  \n\n阶段1：800 W，240 s\n\n  \n\n属于人为验证熟的胡萝卜肉丝（胡萝卜脆），新模型烹饪更久一些，胡萝卜能变软一些。\n\n猪肉（奶脯）\n\n206\n\n  \n\n  \n\n206\n\n阶段1：800 W，450 s\n\n  \n\n阶段1：800 W，290 s\n\n  \n\n属于人为验证烤焦的烤五花肉，新模型烹饪时长短很多，预计不会焦，建议复验（复验合格）。\n\n鸡肫\n\n280\n\n  \n\n  \n\n280\n\n阶段1：800 W，330 s\n\n  \n\n阶段1：800 W，280 s\n\n  \n\n属于人为验证熟的小炒鸡肾，前后差别不大。训练食材中无鸡肾（鸡肫）。\n\n鲈鱼\n\n760\n\n  \n\n  \n\n760\n\n阶段1：800 W，460 s\n\n  \n\n阶段1：800 W，620 s\n\n预测比热容更正后：\n\n阶段1：800 W，580 s\n\n  \n\n属于人为验证过熟（爆炸）的清蒸鲈鱼，新模型烹饪时长久很多，有烧焦风险，建议复验（可能是盖盖子烹饪导致的爆炸，此次不盖盖复验合格）。\n\n经核查：训练数据中有”清蒸鲈鱼“这道菜（800 W 480 s + 700 W 60 s），其预测热量误差仅为7.9%（800 W 570 s），而当前预测值则异常偏高。因其他特征值一样，大概是训练（3.4447）和预测（3.6725）所用的鲈鱼比热容不一样导致，考虑更正预测所用比热容。\n\n河蟹\n\n295\n\n  \n\n  \n\n295\n\n阶段1：800 W，370 s\n\n  \n\n阶段1：800 W，280 s\n\n  \n\n属于人为验证熟的清蒸河蟹，新模型烹饪时长短很多，训练食材中无河蟹。有不熟风险，建议复验（复验合格）。\n\n章鱼\n\n250\n\n  \n\n  \n\n250\n\n阶段1：800 W，170 s\n\n  \n\n阶段1：800 W，240 s\n\n  \n\n属于人为验证不熟的八爪鱼，当时补充了800 W，100 s，新模型烹饪时长久很多，训练食材中无八爪鱼（章鱼），仍有不熟风险，建议复验（复验合格）。\n\n猪肉（肋条肉）\n\n300\n\n  \n\n  \n\n300\n\n阶段1：800 W，490 s\n\n  \n\n阶段1：800 W，440 s\n\n  \n\n属于人为验证过熟的豉汁排骨，新模型烹饪时长短一些，预计不会过熟。\n\n莴笋（鲜）\n\n250\n\n  \n\n  \n\n250\n\n阶段1：800 W，130 s\n\n  \n\n阶段1：800 W，140 s\n\n  \n\n属于人为验证熟的清烹莴笋（脆），新模型烹饪时长久一些，莴笋能变软一些。\n\n鸡蛋（代表值）\n\n135\n\n苦瓜（鲜）\n\n80\n\n215\n\n阶段1：650 W，100 s\n\n阶段2：450 W，180 s\n\n阶段1：650 W，100 s\n\n阶段2：450 W，170 s\n\n属于人为验证过熟的苦瓜鸡蛋，新模型烹饪时长短一些，差别不大。\n\n鸡蛋（代表值）\n\n180\n\n大葱\n\n50\n\n230\n\n阶段1：500 W，140 s\n\n阶段2：300 W，560 s\n\n阶段1：500 W，140 s\n\n阶段2：300 W，360 s\n\n属于人为验证过熟的酱卧鸡蛋，新模型烹饪时长短很多，预计不会过熟。\n\n由此可见：第二版模型对不同食材的泛化能力更好。\n\n6.4. 熟化热量预测算法调优记录（第三版）\n----------------------\n\n*   所用模型：rf-随机森林。\n*   所用特征：未归一化处理。主料（不包含水类）重量m\\_main、主料水分含量water\\_main（\\*m\\_main）、蛋白质含量protein\\_main（\\*m\\_main）、脂肪含量fat\\_main（\\*m\\_main）、碳水化合物含量carb\\_main（\\*m\\_main）、升温热量（包含或不包含水类）、水类平均重量water\\_weight\\_mean、水的总含量（主料水分含量+水类平均重量）。\n*   数据筛选（PGC+UGC）：烹饪方式为'粥', '汤', '焖炖', '煮', '粥，淖水', '汤，淖水', '焖炖，淖水', '煮，淖水', '粥，煮', '汤，煮'，熟化热量负值占比小于2%，比热容完全匹配+近似匹配，主料（不少于最大辅料重量或用户自定义）有效重量（比热容不缺失）占比70%以上。\n\n  \n\n数据筛选\n\n所用特征\n\n测试结果\n\n  \n\n备注\n\n主料重量\n\n水分含量\n\n蛋白质含量\n\n脂肪含量\n\n碳水化合物含量\n\n升温热量\n\n水类平均重量\n\nR2值\n\n总热量误差20%内\n\n500 W 时长偏差2 min 内\n\n总热量误差\\[-30%，50%\\]\n\n总数1153，最大辅料重量10 g\n\n√\n\n绝对含量\n\n绝对含量\n\n绝对含量\n\n绝对含量\n\n×\n\n√\n\n 0.899\n\n80.05%\n\n76.84%\n\n97.40%\n\n  \n\n总数1145，最大辅料重量20 g\n\n√\n\n绝对含量\n\n绝对含量\n\n绝对含量\n\n绝对含量\n\n除水\n\n√\n\n0.909\n\n80.0%\n\n75.12%\n\n97.03%\n\n模型4，最大热量误差157.6%，时长误差19 min左右。\n\n总数1145，最大辅料重量20 g\n\n√\n\n绝对含量\n\n绝对含量\n\n绝对含量\n\n绝对含量\n\n√\n\n√\n\n0.910\n\n80.0%\n\n76.07%\n\n97.38%\n\n模型5，最大热量误差100.4%，时长误差15.5 min左右。\n\n总数1145，最大辅料重量20 g\n\n含水\n\n绝对含量\n\n绝对含量\n\n绝对含量\n\n绝对含量\n\n除水\n\n×\n\n  \n\n  \n\n  \n\n  \n\n  \n\n总数1145，最大辅料重量20 g\n\n√\n\n总含量\n\n绝对含量\n\n绝对含量\n\n绝对含量\n\n√\n\n总含量\n\n0.902\n\n79.12%\n\n75.98%\n\n97.47%\n\n模型6，最大热量误差90.2%，时长误差20.5 min左右。\n\n总数1145，最大辅料重量20 g\n\n√\n\n总含量\n\n绝对含量\n\n绝对含量\n\n绝对含量\n\n除水\n\n总含量\n\n0.909\n\n79.65%\n\n76.06%\n\n97.47%\n\n模型1，最大热量误差127.6%，时长误差17 min左右。\n\n总数1153，最大辅料重量10 g\n\n√\n\n百分含量\n\n百分含量\n\n百分含量\n\n百分含量\n\n×\n\n√\n\n0.898\n\n79.01%\n\n76.14%\n\n97.48%\n\n  \n\n总数1145，最大辅料重量20 g\n\n√\n\n百分含量\n\n百分含量\n\n百分含量\n\n百分含量\n\n×\n\n√\n\n0.912\n\n81.66%\n\n78.61%\n\n97.82%\n\n最大热量误差115%，时长误差17 min左右。\n\n总数1145，最大辅料重量20 g\n\n√\n\n百分含量\n\n百分含量\n\n百分含量\n\n百分含量\n\n√\n\n√\n\n0.890\n\n78.08%\n\n74.59%\n\n96.59%\n\n  \n\n总数1145，最大辅料重量20 g\n\n含水\n\n百分含量\n\n百分含量\n\n百分含量\n\n百分含量\n\n除水\n\n×\n\n  \n\n  \n\n  \n\n  \n\n  \n\n总数1145，最大辅料重量20 g\n\n√\n\n总含量\n\n百分含量\n\n百分含量\n\n百分含量\n\n√\n\n总含量\n\n0.904\n\n80.96%\n\n 76.33%\n\n97.38%\n\n模型2，最大热量误差87.8%，时长误差16 min左右。\n\n总数1145，最大辅料重量20 g\n\n√\n\n总含量\n\n百分含量\n\n百分含量\n\n百分含量\n\n除水\n\n总含量\n\n0.907\n\n80.09%\n\n76.94%\n\n97.38%\n\n模型3，最大热量误差106.2%，时长误差18.5 min左右。\n\n总数1107，最大辅料重量20 g，主料有效重量占比80%以上。\n\n√\n\n百分含量\n\n百分含量\n\n百分含量\n\n百分含量\n\n×\n\n√\n\n0.910\n\n80.67%\n\n78.86%\n\n97.56%\n\n  \n\n总数1134，最大辅料重量50 g\n\n√\n\n百分含量\n\n百分含量\n\n百分含量\n\n百分含量\n\n×\n\n√\n\n0.910\n\n80.49%\n\n77.14%\n\n97.79%\n\n  \n\n总数1129，最大辅料重量60 g\n\n√\n\n百分含量\n\n百分含量\n\n百分含量\n\n百分含量\n\n×\n\n√\n\n0.911\n\n80.34%\n\n77.24%\n\n97.34%\n\n  \n\n6.5. 模型泛化能力对比\n-------------\n\n### 6.5.1. 重量泛化能力测试记录（单一食材）\n\n食材\n\n重量(g)\n\n食材总重量(g)\n\n预测功率(w)\n\n总热量预测模型计算时长(s)\n\n熟化热量预测模型计算时长(s)\n\n熟化热量预测模型1计算时长(s)\n\n熟化热量预测模型2计算时长(s)\n\n熟化热量预测模型3计算时长(s)\n\n熟化热量预测模型4计算时长(s)\n\n熟化热量预测模型5计算时长(s)\n\n熟化热量预测模型6计算时长(s)\n\n备注\n\n鸡翅  \n  \n  \n  \n  \n  \n  \n  \n  \n\n3000\n\n3000\n\n800  \n  \n  \n  \n  \n  \n  \n  \n  \n\n890\n\n2040\n\n2140\n\n2170\n\n2020\n\n1860\n\n1940\n\n2580\n\n  \n\n2500\n\n2500\n\n880\n\n1880\n\n1970\n\n2000\n\n1860\n\n1690\n\n1770\n\n2420\n\n  \n\n2000\n\n2000\n\n880\n\n1740\n\n1790\n\n1430\n\n1660\n\n1520\n\n1270\n\n1800\n\n  \n\n1500\n\n1500\n\n890\n\n1460\n\n1600\n\n1200\n\n1460\n\n1390\n\n1070\n\n1540\n\n  \n\n1000\n\n1000\n\n840\n\n950\n\n1450\n\n840\n\n740\n\n990\n\n800\n\n1040\n\n  \n\n500\n\n500\n\n440\n\n610\n\n670\n\n610\n\n620\n\n650\n\n590\n\n580\n\n  \n\n200\n\n200\n\n190\n\n250\n\n260\n\n290\n\n330\n\n220\n\n240\n\n280\n\n  \n\n100\n\n100\n\n200\n\n150\n\n190\n\n240\n\n260\n\n190\n\n210\n\n210\n\n  \n\n50\n\n50\n\n140\n\n120\n\n190\n\n200\n\n220\n\n240\n\n210\n\n210\n\n  \n\n### 6.5.2. 重量泛化能力测试记录（两种食材）\n\n食材1\n\n重量1(g)\n\n食材2\n\n重量2(g)\n\n食材总重量(g)\n\n预测功率(w)\n\n总热量预测模型计算时长(s)\n\n熟化热量预测模型计算时长(s)\n\n模型1计算时长(s)\n\n模型2计算时长(s)\n\n模型3计算时长(s)\n\n模型4计算时长(s)\n\n模型5计算时长(s)\n\n模型6计算时长(s)\n\n备注\n\n豆角  \n  \n  \n  \n  \n  \n  \n  \n  \n\n1500\n\n猪肉（瘦）  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n\n1500\n\n3000\n\n800  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n\n850\n\n2150\n\n2210\n\n2560\n\n2420\n\n1940\n\n2010\n\n2650\n\n  \n\n1000\n\n1500\n\n2500\n\n850\n\n1940\n\n2200\n\n2570\n\n2290\n\n1800\n\n1830\n\n2490\n\n  \n\n1500\n\n1000\n\n2500\n\n810\n\n1800\n\n2050\n\n2020\n\n1800\n\n1780\n\n1860\n\n2500\n\n  \n\n1000\n\n1000\n\n2000\n\n810\n\n1600\n\n2090\n\n1850\n\n2100\n\n1650\n\n1470\n\n2030\n\n  \n\n500\n\n1000\n\n1500\n\n810\n\n1420\n\n1840\n\n1490\n\n1860\n\n1450\n\n1180\n\n1610\n\n  \n\n800\n\n500\n\n1300\n\n480\n\n1110\n\n1830\n\n890\n\n1240\n\n1430\n\n1150\n\n1420\n\n  \n\n500\n\n500\n\n1000\n\n480\n\n770\n\n1520\n\n1070\n\n1450\n\n1320\n\n1020\n\n1140\n\n  \n\n200\n\n200\n\n400\n\n330\n\n320\n\n390\n\n430\n\n430\n\n380\n\n390\n\n410\n\n  \n\n100\n\n100\n\n200\n\n160\n\n170\n\n180\n\n240\n\n240\n\n180\n\n190\n\n200\n\n  \n\n50\n\n50\n\n100\n\n140\n\n150\n\n180\n\n240\n\n210\n\n230\n\n200\n\n230\n\n  \n\n25\n\n25\n\n50\n\n150\n\n120\n\n220\n\n220\n\n220\n\n270\n\n230\n\n240\n\n  \n\n由此可见：熟化热量预测模型对重量的泛化能力差不多，但第三版本的模型对小重量（200 g以内）的泛化能力更差。\n\n### 6.5.3. 重量泛化能力测试记录（汤类）\n\n食材1\n\n重量1(g)\n\n食材2\n\n重量2(g)\n\n食材总重量(g)\n\n第二版模型预测热量\n\n模型1预测熟化热量\n\n模型2预测熟化热量\n\n模型3预测熟化热量\n\n模型4预测熟化热量\n\n模型5预测熟化热量\n\n模型6预测熟化热量\n\n备注\n\n鲈鱼  \n  \n  \n  \n  \n  \n  \n  \n\n1500\n\n水  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n\n1500\n\n3000\n\n570129.35728\n\n935254.579758\n\n913127.682667\n\n864640.82083\n\n814737.179724\n\n997313.126667\n\n1138398\n\n  \n\n1000\n\n1500\n\n2500\n\n575399.22064\n\n1023125\n\n913127.682667\n\n741142.055547\n\n860904.833517\n\n1012024\n\n1184347\n\n  \n\n1500\n\n1000\n\n2500\n\n749364.0\n\n935254.579758\n\n913127.682667\n\n864640.82083\n\n814737.179724\n\n997313.126667\n\n1138398\n\n  \n\n1000\n\n1000\n\n2000\n\n575399.22064\n\n1023125\n\n700203.460923\n\n741142.055547\n\n860904.833517\n\n797921.872444\n\n915067.655489\n\n  \n\n500\n\n1000\n\n1500\n\n579720.59264\n\n686618.593091\n\n637558.680821\n\n633378.877585\n\n644021.639172\n\n663479.134444\n\n700048.041191\n\n  \n\n800\n\n500\n\n1300\n\n519324.96992\n\n528851.865697\n\n478077.66359\n\n486713.573585\n\n567807.627862\n\n461476.269778\n\n449802.066723\n\n  \n\n500\n\n500\n\n1000\n\n331433.948\n\n552117.264727\n\n570990.104821\n\n497652.865811\n\n603167.746069\n\n552492.895111\n\n577595.569532\n\n  \n\n100\n\n500\n\n600\n\n162682.22976\n\n291359.229455\n\n435953.633641\n\n461473.241811\n\n365375.326483\n\n271640.344889\n\n370863.634553\n\n  \n\n500\n\n100\n\n600\n\n292893.176\n\n456842.378788\n\n364529.162667\n\n359228.369811\n\n478408.406621\n\n362848.646667\n\n407746.649035\n\n  \n\n100\n\n200\n\n300\n\n112181.78672\n\n198642.665939\n\n247663.209026\n\n256396.415094\n\n232644.569793\n\n265105.051333\n\n169759.211518\n\n  \n\n200\n\n100\n\n300\n\n144647.836114\n\n258880.506788\n\n270305.161436\n\n299379.117585\n\n440087.617517\n\n519448.786222\n\n316115.531574\n\n  \n\n100\n\n100\n\n200\n\n99254.41648\n\n186565.499273\n\n240799.874872\n\n253353.100377\n\n220579.405103\n\n245268.202222\n\n202054.321135\n\n  \n\n50\n\n50\n\n100\n\n92046.40144\n\n192998.111152\n\n130717.940923\n\n160720.049962\n\n183819.092028\n\n218723.033778\n\n218912.013844\n\n  \n\n25\n\n25\n\n50\n\n78902.11808\n\n159765.855879\n\n116815.959385\n\n147805.253736\n\n185486.261379\n\n211218.207156\n\n132547.725277\n\n  \n\n由此可见：当重量较大时，水的影响较小，在其他食材重量不变的情况下，随着水量的减少，预测热量减小。同时，预测热量与水的占比有关，但无明显规律。后续可探索降低水的影响。\n\n### 6.5.4. 烹饪方式泛化能力测试记录\n\n食材1\n\n重量1(g)\n\n食材2\n\n重量2(g)\n\n食材总重量(g)\n\n烹饪方式\n\n熟化热量预测模型计算结果（模型3）\n\n熟化热量预测模型计算结果\n\n新旧模型热量偏差\n\n备注\n\n稻米（代表值）\n\n100\n\n水\n\n600\n\n700\n\n粥\n\n阶段1：800 W，270 s\n\n阶段2：300 W，1690 s\n\n阶段1：800 W，270 s\n\n阶段2：450 W，820 s\n\n136410.660\n\n属于人为复验熟的粥，模型3预测热量更多，粥能更加软烂。\n\n绿豆\n\n100\n\n水\n\n600\n\n700\n\n汤\n\n阶段1：800 W，270 s\n\n阶段2：300 W，1590 s\n\n阶段1：800 W，270 s\n\n阶段2：450 W，710 s\n\n154920.422\n\n属于复验熟（不烂）的绿豆汤，模型3预测热量更多，绿豆能更加软烂。\n\n由此可见：模型3对于粥类、汤类的泛化能力有较大提升。\n\n### 6.5.5. 食材泛化能力测试记录\n\n食材1\n\n重量1(g)\n\n食材2\n\n重量2(g)\n\n食材总重量(g)\n\n熟化热量预测模型计算结果（模型3）\n\n熟化热量预测模型计算结果\n\n备注\n\n玉米（鲜）\n\n483\n\n  \n\n  \n\n483\n\n阶段1：800 W，360 s\n\n  \n\n阶段1：800 W，410 s\n\n  \n\n属于初次验证熟的烹玉米，前后差别不大。\n\n猪肉（代表值，fat30g）\n\n76\n\n马铃薯\n\n200\n\n276\n\n阶段1：800 W，290 s\n\n  \n\n阶段1：800 W，240 s\n\n  \n\n属于初次验证熟的土豆丝炒瘦肉，前后差别不大。\n\n豆腐（代表值）\n\n245\n\n  \n\n  \n\n245\n\n阶段1：800 W，380 s\n\n  \n\n阶段1：800 W，190 s\n\n  \n\n属于初次验证熟的煎豆腐，新模型烹饪时间较长，能煎得更入味。\n\n千张\n\n260\n\n  \n\n  \n\n260\n\n阶段1：800 W，360 s\n\n  \n\n阶段1：800 W，400 s\n\n  \n\n属于初次验证过熟的素炒千张，前后差别不大。\n\n猪肉（代表值，fat30g）\n\n80\n\n胡萝卜\n\n144\n\n224\n\n阶段1：800 W，220 s\n\n  \n\n阶段1：800 W，240 s\n\n  \n\n属于初次验证熟的胡萝卜肉丝（胡萝卜脆），前后差别不大。\n\n猪肉（奶脯）\n\n206\n\n  \n\n  \n\n206\n\n阶段1：800 W，490 s\n\n  \n\n阶段1：800 W，290 s\n\n  \n\n属于初次验证烤焦的烤五花肉，模型3烹饪时间更久一些，预计仍会烤焦。\n\n鸡肫\n\n280\n\n  \n\n  \n\n280\n\n阶段1：800 W，340 s\n\n  \n\n阶段1：800 W，280 s\n\n  \n\n属于初次验证熟的小炒鸡肾，前后差别不大。\n\n鲈鱼\n\n760\n\n  \n\n  \n\n760\n\n阶段1：800 W，770 s\n\n  \n\n阶段1：800 W，580 s\n\n  \n\n属于初次验证熟的清蒸鲈鱼，新模型烹饪时长久一些。\n\n河蟹\n\n295\n\n  \n\n  \n\n295\n\n阶段1：800 W，350 s\n\n  \n\n阶段1：800 W，280 s\n\n  \n\n属于初次验证熟的清蒸河蟹，前后差别不大。\n\n章鱼\n\n250\n\n  \n\n  \n\n250\n\n阶段1：800 W，310 s\n\n  \n\n阶段1：800 W，240 s\n\n  \n\n属于复验合格的八爪鱼，前后差别不大。\n\n猪肉（肋条肉）\n\n300\n\n  \n\n  \n\n300\n\n阶段1：800 W，330 s\n\n  \n\n阶段1：800 W，440 s\n\n  \n\n属于初次验证过熟的豉汁排骨，新模型烹饪时长短一些，预计不会过熟。\n\n莴笋（鲜）\n\n250\n\n  \n\n  \n\n250\n\n阶段1：800 W，130 s\n\n  \n\n阶段1：800 W，140 s\n\n  \n\n属于初次验证熟的清烹莴笋（脆），新模型无变化。\n\n鸡蛋（代表值）\n\n135\n\n苦瓜（鲜）\n\n80\n\n215\n\n阶段1：650 W，100 s\n\n阶段2：450 W，230 s\n\n阶段1：650 W，100 s\n\n阶段2：450 W，170 s\n\n属于人为验证过熟的苦瓜鸡蛋，新模型烹饪时长久一些，预计仍然会过熟。\n\n鸡蛋（代表值）\n\n180\n\n大葱\n\n50\n\n230\n\n阶段1：500 W，140 s\n\n阶段2：300 W，240 s\n\n阶段1：500 W，140 s\n\n阶段2：300 W，360 s\n\n属于人为验证过熟的酱卧鸡蛋，新模型烹饪时长短很多，预计不会过熟。\n\n鸡蛋（代表值）\n\n50\n\n  \n\n  \n\n50\n\n阶段1：300 W，600 s\n\n  \n\n阶段1：500 W，30 s\n\n阶段2：300 W，230 s\n\n属于复验焦的荷包蛋，模型3烹饪所需热量更多，预计仍会焦。\n\n红薯叶\n\n80\n\n  \n\n  \n\n80\n\n阶段1：800 W，230 s\n\n  \n\n阶段1：800 W，130 s\n\n  \n\n属于复验过熟的清烹红薯叶，模型3烹饪所需热量更多，预计仍会过熟。\n\n面条\n\n85\n\n水\n\n858\n\n943\n\n阶段1：800 W，380 s\n\n阶段2：300 W，2140 s\n\n阶段1：800 W，380 s\n\n阶段2：450 W，1090 s\n\n属于人为验证焦的煮面条，新模型烹饪时长久很多，预计仍会焦。\n\n板栗\n\n325\n\n  \n\n  \n\n325\n\n阶段1：800 W，280 s\n\n  \n\n阶段1：800 W，380 s\n\n  \n\n属于人为验证不熟的烤板栗，新模型烹饪时长短一些，预计仍会不熟。\n\n鸡爪\n\n400\n\n水\n\n100\n\n500\n\n阶段1：800 W，630 s\n\n  \n\n阶段1：800 W，670 s\n\n  \n\n属于人为验证过熟的红烧鸡爪，新模型烹饪时长短一点，预计不会过熟。\n\n鸡毛菜\n\n200\n\n  \n\n  \n\n200\n\n阶段1：800 W，240 s\n\n  \n\n阶段1：800 W，190 s\n\n  \n\n属于人为验证过熟的蒜蓉鸡毛菜，新模型烹饪时长久一些，预计仍会过熟。\n\n火腿肠\n\n250\n\n  \n\n  \n\n250\n\n阶段1：800 W，290 s\n\n  \n\n阶段1：800 W，310 s\n\n  \n\n属于人为验证过熟的烤火腿肠，新模型烹饪时长短一点，预计仍不会过熟。\n\n由此可见：模型3的食材泛化能力与上个版本的模型差不多，对于面类、板栗、五花肉、荷包蛋等食材的烹饪仍然无法有效处理。\n\n7\\. 风险和提示\n=========\n\n7.1. 风险\n-------\n\n1.  **比热容数据不准确：**用户较难准确告知食材名称；用户所用食材与平台记录的食材不一致；平台收集的比热容数据来源不一致；比热容受温度影响较大；比热容无法直接获取。\n2.  用户无法准确告知主要食材和重量：用户很难准确告知食材重量；用户告知的主料占总食材比重少于70%；当水的占比很大时理应作为主料输入，但用户容易遗漏；迫于当前虚拟人对话系统的能力，用户只能输入1-2个主料食材。\n3.  **食材所需热量估算不准确：**当前建模特征较少（缺少食材总重、烹饪方式、食材大小、口感等关键特征）；食材烹饪所需热量具有主观性，无法精准衡量；烹饪过程中食材加入的先后顺序不确定，且部分食材可能单独加热处理或不加热。\n4.  虚拟人话术设计较困难：指令不支持出现多个同类词槽；食材重量单位无法灵活设置；很多关键提示类的信息容易遗漏；结合万得厨界面设计较麻烦。\n5.  其他：食材初始温度不准确；此方案基于常温下常规由生到熟的烹饪方式（粥、汤、炖、烤、炒、焖、煎、蒸等）提出，暂时不适用于冷冻、熟食、面粉类、凉拌和加热等场景（考虑给出提示）。\n\n7.2. 提示\n-------\n\n1.  **计算误差提示：**烹饪的主料重量占比需70%以上（包括水），否则计算误差可能较大。\n2.  **技能使用场景提示：**常温到沸腾且由生到全熟；暂时不适用于冷冻、熟食和普通加热等场景。\n3.  **通用提示：**食物的烹饪时长受到多个因素的影响，包括食物的总重、大小、烹饪方法等，请结合经验适当调节烹饪功率和时长。烹饪过程可多次搅拌，以防受热不均。\n4.  **针对特殊食材的提示：**建议维护食材提示清单。（生蚝（带壳50 g，含20 g生蚝肉）：按照生蚝肉的重量算；鲈鱼：非汤类鲈鱼不要盖盖子烹饪，以防爆炸；鸡蛋：烹饪前请在蛋黄和蛋白上扎几个洞，以防爆炸；绿豆：需要提前泡发再烹饪。）\n\n食材名称\n\n提示内容\n\n备注\n\n食材名称\n\n提示内容\n\n备注\n\n生蚝\n\n按照生蚝肉的重量算\n\n带壳50 g，含20 g生蚝肉\n\n鲈鱼\n\n非汤类鲈鱼不要盖盖子烹饪，以防爆炸\n\n鱼类\n\n鸡蛋\n\n烹饪前请在蛋黄和蛋白上扎几个洞，以防爆炸\n\n  \n\n绿豆、香菇、茶树菇、鹿茸菇、猴头菇、虫草花、羊肚菌、粉条、海带、菜干、发菜、粉丝、干米粉、霸王花、虾干、笋干、干莲子、干百合、干海星、海参、红薯粉、黄花菜、木耳、银耳、干云耳、雪燕、茯苓、葛根、薏米、紫米、赤小豆、鹰嘴豆、干鱿鱼、三牙鱼、干贝\n\n需要提前泡发再烹饪\n\n  \n\n瑶柱、干腐竹、黄豆、石斛、蚝豉、花生、眉豆、面藕、灵芝、海蜇皮\n\n需提前泡水\n\n  \n\n  \n\n  \n\n  \n\n[Filter table data](#)[Create a pivot table](#)[Create a chart from data series](#)\n\n[Configure buttons visibility](/users/tfac-settings.action)"
}