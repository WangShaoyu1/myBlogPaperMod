{
	"title": "AutoGPT进化了，再看一次",
	"author": "王宇",
	"publishTime": "七月08,2024",
	"readTime": "12s",
	"tags": "[\"GPT相关\"]",
	"description": "GPT相关",
	"article": "*   1[1\\. 前言](#AutoGPT进化了，再看一次-前言)             \n*   2[2\\. 运行项目](#AutoGPT进化了，再看一次-运行项目)\n    *   2.1[2.1. 目录](#AutoGPT进化了，再看一次-目录)\n    *   2.2[2.2. 运行](#AutoGPT进化了，再看一次-运行)\n    *   2.3[2.3. 启动项目中遇到的问题](#AutoGPT进化了，再看一次-启动项目中遇到的问题)\n*   3[3\\. 分析项目](#AutoGPT进化了，再看一次-分析项目)\n    *   3.1[3.1.  调用关系分析](#AutoGPT进化了，再看一次-调用关系分析)\n    *   3.2[3.2. 核心部分](#AutoGPT进化了，再看一次-核心部分)\n        *   3.2.1[3.2.1. 大模型与提示词](#AutoGPT进化了，再看一次-大模型与提示词)\n            *   3.2.1.1[3.2.1.1. prompt示例](#AutoGPT进化了，再看一次-prompt示例)\n            *   3.2.1.2[3.2.1.2. 响应示例](#AutoGPT进化了，再看一次-响应示例)\n        *   3.2.2[3.2.2. 提示词分析](#AutoGPT进化了，再看一次-提示词分析)\n        *   3.2.3[3.2.3. 响应内容分析](#AutoGPT进化了，再看一次-响应内容分析)\n*   4[4\\. 运行思维启动AutoGPT](#AutoGPT进化了，再看一次-运行思维启动AutoGPT)\n*   5[5\\. 拓展及经典代码分析](#AutoGPT进化了，再看一次-拓展及经典代码分析)\n    *   5.1[5.1. action/ability注册](#AutoGPT进化了，再看一次-action/ability注册)\n    *   5.2[5.2. 增加一个自定义action](#AutoGPT进化了，再看一次-增加一个自定义action)\n    *   5.3[5.3. agent.py最简化代码](#AutoGPT进化了，再看一次-agent.py最简化代码)\n    *   5.4[5.4. 提示词组装方法](#AutoGPT进化了，再看一次-提示词组装方法)\n*   6[6\\. 过程中用到的经典库](#AutoGPT进化了，再看一次-过程中用到的经典库)\n*   7[7\\. 大模型使用指令测试](#AutoGPT进化了，再看一次-大模型使用指令测试)\n    *   7.1[7.1. 提示词](#AutoGPT进化了，再看一次-提示词)\n\n1\\. 前言             \n===================\n\n         在去年研究Hungging GPT项目的时候，顺手也下载了autogpt的初代版本代码，对比起来看，那时候的结论是：两者之间没有太大的区别，都是期望着一个大模型作为中控，理解需求后，划分为不同的任务，然后让不同的小模型或者算法去执行不同的任务，最后中控大模型结合提示词与小模型或者算法返回的结果，做最终的归纳总结，返回给用户。\n\n         彼时开创了一种新的大模型应用方向，即初代的Agent，实践后，发现其方向性高于实用性。因为有不少环节，都是默认选项，比如：\n\n*   如何去选择一个小模型或者算法，依据是huggingface.co上面的对应分类的开源模型上面的用户点赞数（下载数），这其实有一些主观\n*   对于每个能够被调用的小模型或者算法而言，其描述文件没有太多统一的规范，这也是整个生态的问题\n*   对于每个小模型或者算法，如何和其他模型或者算法，没有统一的协议（请求入参格式、响应出参格式）\n\n         前段时间，开始关注AI Agent，重新关注了AutoGPT这个项目（官网地址为：[https://news.agpt.co/](https://news.agpt.co/)）。star数从不到1K，增长为163K；从之前的小作坊，现在变成了一个小生态，其愿景为：“AutoGPT 的愿景是让每个人都能轻松使用和构建 AI。我们的使命是提供工具，让您专注于重要的事情”。有如下变化：\n\n1.  明确AutoGPT项目长期发展目标\n2.  生态化，号召按照agent protocol来开发agent\n3.  项目包含Forge模块，提供了大量的agent模板\n4.  项目包含Benchmark模块，为评价agent提供了标准\n5.  项目中前后端代码分离\n\n2\\. 运行项目\n========\n\n2.1. 目录\n-------\n\n         项目核心目录为：\n\n目录\n\n详情\n\n备注\n\n目录\n\n详情\n\n备注\n\nassets\n\n资源\n\n  \n\nautogpt\n\nautogpt核心目录，支持GPT Groq Anthropic\n\n1、使用了很多的python项目，新的特性，安装包灯方法\n\n注意GPT api key的使用方法，很容易被封，推荐购买key\n\nbenchmark\n\n衡量agent能力的各项指标、标准\n\n需要遵守agent protocol\n\ndocs\n\n文档合集\n\n  \n\nforge\n\nagent模板，提供教程，用户可以据此作为参考做自己的agent\n\n基于LLM的agent模板\n\nfrontend\n\n前端界面，使用flutter框架开发web，也可以开发window应用\n\n用到谷歌登录等第三方库\n\nrnd/autogpt\\_server\n\n探索性项目，下一代agent，agent代理服务器\n\n  \n\n2.2. 运行\n-------\n\n         分别运行autogpt、frontend这两个文件夹：\n\n[?](#)\n\n1\n\n2\n\n`python -m autogpt serve`\n\n`flutter run -d chrome`\n\n       运行界面为：\n\n2.3. 启动项目中遇到的问题\n---------------\n\n序号\n\n问题\n\n方案\n\n备注\n\n  \n\n  \n\n1\n\nfrontend文件夹中，flutter启动web服务器，报错连不上：“SocketException: Failed to create server socket”\n\n**方案1：**在启动文件上加上参数：\\--web-port=8080 --web-hostname=127.0.0.1，特别是hostname的设置，但这样会出现谷歌账号认证失败的情况（其默认的地址为localhost）；\n\n方案2一劳永逸\n\n**方案2：**在电脑配置“网络与Internet---高级网络设置”，“本地连接—更多适配器选项”，“网络”配置中，将“Internet 协议版本6（TCP/IPv6）”配置为不选中状态；\n\n  \n\n2\n\n前端、后端之间存在跨域问题\n\n方案1：将后端的可允许的域（+**端口**）配置在允许的源中，并与前端的默认**端口**保持一致（配置在编辑器的启动配置Configurations中，Additional run args选项中，配置内容为：--web-port=**端口**），两者保持一致能解决跨域问题\n\n方案二：配置后端跨域配置CORSMiddleware中的allow\\_origins=\\[\"\\*\"\\]\n\n方案二一劳永逸\n\n3\n\nflutter for web前端界面中文显示乱码，数据库、接口、参数入参，内部各个环节都显示中文显示正常。什么原因\n\n定位为渲染问题，配置flutter字体，本地、云端都尝试过，都显示为中文乱码。但直接写在页面上的中文显示正常；\n\n定位为字符格式问题，检查请求入参（viewmodel、提交到server端）、出参（apifox测试接口，console控制台接口返回）、数据库对应中文字段，都没有问题；但是控制台打印的话，是乱码。\n\n定位为页面编码问题，统一调整IDE文件格式为utf-8，没有效果。\n\n最终经过尝试，定位为，接口响应头Content-Type没有加上charset=UTF-8，只有application/json。加上即解决问题\n\napifox接口在线调试、console控制台，响应response不加响应头charset=UTF-8，内部机制默认转化了，导致接口显示正常。但其实返回给页面前端的内容中中文并不是utf-8格式\n\n4\n\n运start命令时，出现Unlock Keyring，Authentication required\n\n执行命令：rm -f ~/.gnome2/keyrings/login.keyring\n\n如果记得密码也行，一般是Ubuntu 开机密码\n\n5\n\n通过poetry来管理依赖\n\n1、一些常用命令poetry install、poetry update，后面都可以带具体的包名\n\n  \n\n6\n\n执行read\\_page页面，提示chrome not found\n\n1、在Linux环境下安装google-chrome-stable版本\n\n  \n\n7\n\n添加装饰器时，报错TypeError: 'module' object is not callable\n\n1、引用模块的时候，直接执行模块了，而不是执行模块里的具体f\n\n  \n\n3\\. 分析项目\n========\n\n3.1.  调用关系分析\n------------\n\n前端（futter for web）、后端接口之间调用关系链，参考如下：\n\n**autogpt**\n\nautogpt\n\n\\_\\_main\\_\\_.py\n\ncli.py  \n\nrun\\_auto\\_gpt\\_server\n\napp.main.py\n\nagent\\_protocol\\_server.py  \n\nAgentProtocolServer  \n\nnew AgentProtocolServer()\n\n.start  \n\nstart\n\ncreate\\_task\n\nget\\_task\n\nlist\\_task\n\ncreate\\_step\n\nget\\_step\n\nexecute\\_step\n\ncreate\\_artifacts\n\nlist\\_artifacts\n\nget\\_artifacts\n\n\\_on\\_agent\\_write\\_file\n\nautogpt\n\n\\_\\_main\\_\\_.py\n\ncli.py  \n\nrun\\_auto\\_gpt\\_server\n\nautogpt\n\n\\_\\_main\\_\\_.py\n\ncli.py  \n\nrun\\_auto\\_gpt\\_server\n\nforge\n\nbase\\_router\n\nrequest method  \nrequest path  \n\nrequest process  \n\nagent\n\ncreate\\_task  \nlist\\_tasks  \nget\\_task  \nlist\\_steps  \nexecute\\_step  \nget\\_step  \nlist\\_artifacts  \ncreate\\_artifacts  \nget\\_artifacts  \n\neg：create\\_task\n\n(AgentDB).create\\_task\n\nnew AgentProtocolServer()\n\n.start  \n\nforge\n\nbase\\_router\n\nagent\n\ncreate\\_task  \nlist\\_tasks  \nget\\_task  \nlist\\_steps  \nexecute\\_step  \nget\\_step  \nlist\\_artifacts  \ncreate\\_artifacts  \nget\\_artifacts  \n\nrequest method  \nrequest path  \n\nrequest process  \n\neg：create\\_task\n\n**forge**\n\nbase\\_router\n\nagent\n\ncreate\\_task  \nlist\\_tasks  \nget\\_task  \nlist\\_steps  \nexecute\\_step  \nget\\_step  \nlist\\_artifacts  \ncreate\\_artifacts  \nget\\_artifacts  \n\nrequest method  \nrequest path  \n\nrequest process  \n\neg：create\\_task\n\n**frontend**\n\nType a message\n\nNULL\n\n非NULL\n\ncurrentTaskId\n\ncreateTask\n\nviewmodel  \nservice\n\nfetchAndCombineData\n\nfetchTasks\n\nfetchTasksSuites\n\nnewTaskId\n\nexecuteStep\n\nstepId\n\nstepResponse\n\ncreateTask\n\n**autogpt  \nserver  \n**\n\nPost  /agent/tasks  \nfroge  api\\_router.py  \nfroge agent.py  \nforge db.py  \n\ncreateStep\n\nPost   /agent/tasks/{task\\_id}/steps  \nfroge  api\\_router.py  \nautogpt agent\\_protocol\\_server.py  \nautogpt db.py  \n\nagent\\_protocol\\_server.py  \nagent.propose\\_action  \n\nChatPrompt:build\\_prompt  \n\ncomplete\\_and\\_parse(prompt)\n\nagent.propose\\_action\n\n**result**\n\n![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMjEuOTkgNGMwLTEuMS0uODktMi0xLjk5LTJINGMtMS4xIDAtMiAuOS0yIDJ2MTJjMCAxLjEuOSAyIDIgMmgxNGw0IDQtLjAxLTE4ek0xOCAxNEg2di0yaDEydjJ6bTAtM0g2VjloMTJ2MnptMC0zSDZWNmgxMnYyeiIvPjxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz48L3N2Zz4= \"显示评论\")\n\n//<!\\[CDATA\\[ (function() { $ = AJS.$; var graphContainer = document.getElementById('drawio-macro-content-785cc076-1c5a-4a50-83a4-85154db5e9e4'); DrawioProperties = { contextPath : AJS.contextPath(), buildNumber : 8401 }; var readerOpts = {}; readerOpts.loadUrl = '' + '/rest/drawio/1.0/diagram/crud/%E6%9C%AA%E5%91%BD%E5%90%8D%E7%BB%98%E5%9B%BE%71%73/123663221?revision=11'; readerOpts.imageUrl = '' + '/download/attachments/123663221/未命名绘图qs.png' + '?version=11&api=v2'; readerOpts.editUrl = '' + '/plugins/drawio/addDiagram.action?ceoId=123663221&owningPageId=123663221&diagramName=%E6%9C%AA%E5%91%BD%E5%90%8D%E7%BB%98%E5%9B%BE%71%73&revision=11'; readerOpts.editable = true; readerOpts.canComment = true; readerOpts.stylePath = STYLE\\_PATH; readerOpts.stencilPath = STENCIL\\_PATH; readerOpts.imagePath = IMAGE\\_PATH + '/reader'; readerOpts.border = true; readerOpts.width = '1200'; readerOpts.simpleViewer = false; readerOpts.tbstyle = 'top'; readerOpts.links = 'auto'; readerOpts.lightbox = true; readerOpts.resourcePath = ATLAS\\_RESOURCE\\_BASE + '/resources/viewer'; readerOpts.disableButtons = false; readerOpts.zoomToFit = true; readerOpts.language = 'zh'; readerOpts.licenseStatus = 'OK'; readerOpts.contextPath = AJS.contextPath(); readerOpts.diagramName = decodeURIComponent('%E6%9C%AA%E5%91%BD%E5%90%8D%E7%BB%98%E5%9B%BE%71%73'); readerOpts.diagramDisplayName = ''; readerOpts.aspect = ''; readerOpts.ceoName = 'AutoGPT进化了，再看一次'; readerOpts.attVer = '11'; readerOpts.attId = '123663736'; readerOpts.lastModifierName = '王宇'; readerOpts.lastModified = '2024-06-10 22:38:57.893'; readerOpts.creatorName = '王宇'; //Embed macro specific info readerOpts.extSrvIntegType = '$extSrvIntegType'; readerOpts.gClientId = '$gClientId'; readerOpts.oClientId = '$oClientId'; readerOpts.service = '$service'; readerOpts.sFileId = '$sFileId'; readerOpts.odriveId = '$odriveId'; readerOpts.diagramUrl = '$diagramUrl'; readerOpts.csvFileUrl = '$csvFileUrl'; readerOpts.pageId = '$pageId' || Confluence.getContentId(); readerOpts.aspectHash = '$aspectHash'; readerOpts.useExternalImageService = '$useExternalImageService' == 'true'; readerOpts.isTemplate = '$isTemplate' == 'true'; if (readerOpts.width == '') { readerOpts.width = null; } // LATER: Check if delayed loading of resources can be used for image placeholder mode var viewerPromise = createViewer(graphContainer, readerOpts); if(readerOpts.editable) { $(graphContainer).data('viewerConfig', readerOpts); $(graphContainer).on('drawioViewerUpdate', updateDrawioViewer); } viewerPromise.done(function(viewer) { updateCachedDiagram(graphContainer, readerOpts, viewer); }); })(); //\\]\\]>\n\n3.2. 核心部分\n---------\n\n### 3.2.1. 大模型与提示词\n\n#### 3.2.1.1. prompt示例\n\n**prompt示例**\n\n[?](#)\n\n1\n\n2\n\n3\n\n4\n\n5\n\n6\n\n7\n\n8\n\n9\n\n10\n\n11\n\n12\n\n13\n\n14\n\n15\n\n16\n\n17\n\n18\n\n19\n\n20\n\n21\n\n22\n\n23\n\n24\n\n25\n\n26\n\n27\n\n28\n\n29\n\n30\n\n31\n\n32\n\n33\n\n34\n\n35\n\n36\n\n37\n\n38\n\n39\n\n40\n\n41\n\n42\n\n43\n\n44\n\n45\n\n46\n\n47\n\n48\n\n49\n\n50\n\n51\n\n52\n\n53\n\n54\n\n55\n\n56\n\n57\n\n58\n\n59\n\n60\n\n61\n\n62\n\n63\n\n64\n\n65\n\n66\n\n67\n\n68\n\n69\n\n70\n\n71\n\n72\n\n`SYSTEM: You are AutoGPT, a seasoned digital assistant: capable, intelligent, considerate and assertive. You have extensive research and development skills, and you don't shy away from writing some code to solve a problem. You are pragmatic and make the most out of the tools available to you.`\n\n`Your decisions must always be made independently without seeking user assistance. Play to your strengths` `as` `an LLM and pursue simple strategies with no legal complications.`      \n\n`The OS you are running on is: Ubuntu` `22.04``.``3` `LTS`\n\n`## Constraints`\n\n`You operate within the following constraints:`\n\n`1``. Exclusively` `use` `the commands listed below.`\n\n`2``. You can only act proactively, and are unable to start background jobs or set up webhooks for yourself. Take this into account when planning your actions.`\n\n`3``. You are unable to interact with physical objects. If this is absolutely necessary to fulfill a task or objective or to complete a` `step``, you must ask the user to` `do` `it for you. If the user refuses this, and there is no other way to achieve your goals, you must terminate to avoid wasting time and energy.`\n\n`## Resources`\n\n`You can leverage access to the following resources:`\n\n`1``. The ability to read and` `write` `files.`\n\n`2``. You are a Large Language Model, trained on millions of pages of text, including a lot of factual knowledge. Make` `use` `of this factual knowledge to avoid unnecessary gathering of information.`\n\n`3``. Internet access for searches and information gathering.`\n\n`4``. Ability to read websites.`\n\n`## Commands`\n\n`These are the ONLY commands you can` `use``. Any action you perform must be possible through one of these commands:`\n\n`1``. open_file: Opens a file for editing or continued viewing; creates it` `if` `it does not exist yet. Note: If you only need to read or` `write` `a file once,` `use` `` `write_to_file` instead.. Params: (file_path: string) ``\n\n`2``. open_folder: Open a folder to keep track of its content. Params: (path: string)`\n\n`3``. execute_shell: Execute a Shell Command, non-interactive commands only. Params: (command_line: string)`\n\n`4``. execute_shell_popen: Execute a Shell Command, non-interactive commands only. Params: (command_line: string)`\n\n`5``. read_file: Read a file and` `return` `the contents. Params: (filename: string)`\n\n`6``. write_file: Write a file, creating it` `if` `necessary. If the file exists, it is overwritten.. Params: (filename: string, contents: string)`\n\n`7``. list_folder: Lists files` `in` `a folder recursively. Params: (folder: string)`\n\n`8``. finish: Use this to shut down once you have completed your task, or when there are insurmountable problems that make it impossible for you to finish your task.. Params: (reason: string)`\n\n`9``. ask_user: If you need more details or information regarding the given goals, you can ask the user for input.. Params: (question: string)`\n\n`10``. web_search: Searches the web. Params: (query: string, num_results?: number)`\n\n`11``. read_webpage: Read a webpage, and extract specific information from it. You must specify either topics_of_interest, a question, or get_raw_content.. Params: (url: string, topics_of_interest?: Array<string>, question?: string, get_raw_content?:` `boolean``)`\n\n`## Best practices`\n\n`1``. Continuously review and analyze your actions to ensure you are performing to the best of your abilities.`\n\n`2``. Constructively self-criticize your big-picture behavior constantly.`\n\n`3``. Reflect on past decisions and strategies to refine your approach.`\n\n`4``. Every command has a cost, so be smart and efficient. Aim to complete tasks` `in` `the least number of steps.`\n\n`5``. Only make` `use` `of your information gathering abilities to` `find` `information that you don't yet have knowledge of.`\n\n`## Your Task`\n\n`The user will specify a task for you to execute,` `in` `triple quotes,` `in` `the next message. Your job is to complete the task` `while` `following your directives` `as` `given above, and terminate when your task is done.`\n\n`## RESPONSE FORMAT`\n\n`YOU MUST ALWAYS RESPOND WITH A JSON OBJECT OF THE FOLLOWING TYPE:`\n\n`interface` `AssistantResponse {`\n\n`thoughts: {`\n\n`// Relevant observations from your last action (if any)`\n\n`observations: string;`\n\n`// Thoughts`\n\n`text: string;`\n\n`// Reasoning behind the thoughts`\n\n`reasoning: string;`\n\n`// Constructive self-criticism`\n\n`self_criticism: string;`\n\n`// Short list that conveys the long-term plan`\n\n`plan: Array<string>;`\n\n`// Summary of thoughts, to say to user`\n\n`speak: string;`\n\n`};`\n\n`use_tool: {`\n\n`name: string;`\n\n`arguments: Record<string, any>;`\n\n`};`\n\n`}`\n\n`------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------`\n\n`USER:` `\"\"\"告诉我英国的面积\"\"\"`\n\n`SYSTEM: ## Clock`\n\n`The current time and date is Mon Jun` `10` `13``:``01``:``31` `2024`\n\n`USER: Determine exactly one command to` `use` `next based on the given goals and the progress you have made so far, and respond using the JSON schema specified previously:`\n\n#### 3.2.1.2. 响应示例\n\n**Step Response示例**\n\n[?](#)\n\n1\n\n2\n\n3\n\n4\n\n5\n\n6\n\n7\n\n`thoughts=AssistantThoughts(observations=``''``,`\n\n`text=``'I will perform a web search to find the current world population.'``,`\n\n`reasoning=``'Searching the web is the most efficient way to obtain up-to-date information on the current world population.'``,`\n\n`self_criticism=``''``,`\n\n`plan=[``'Perform a web search to find th e current world population.'``],`\n\n`speak=``'I will search the web to find the current world population.'``)`\n\n`use_tool=AssistantFunctionCall(name=``'web_search'``, arguments={``'query'``:` `'current world population'``})`\n\n### 3.2.2. 提示词分析\n\n        提示词共分为7个部分：\n\n1.  System。系统相关，角色、时间等\n2.  Constraints。约束条件\n3.  Resources。可利用资源\n4.  Commands。能使用的命令\n5.  Best practices。最佳实践\n6.  Your Task。任务概述 \n    \n7.  Response format。响应格式\n\n这7个部分在项目中，分散到不同的文件、模块中，通过各种工程逻辑，最终合并在一起，作为prompt输入到大模型中（GPT-4或者GPT-3.5-turbe或者其他）。\n\nSystem：设置AutoGPT的角色—“你是一个经验丰富的数字助理，能力强、聪明、考虑周到、坚定自信。你具有丰富的研究和开发技能，同时不介意通过写一些代买来解决问题。你是务实的并且能充分利用好可用的工具“\n\nConstraints：您需在以下限制内进行操作：\n\n*   只能使用 下面conmands列出的命令；\n*   只能主动采取行动，无法开启后台任务或者设置网络钩子、回调，在计划你的行动的时候，充分考虑这一点；\n*   你不能和物理物体交互，如果对于完成一个任务、目标、步骤来讲非常有必要，你必须要求用户来执行操作，如果用户拒绝，另外没有其他的方案来完成目标，你必须终止以免浪费时间精力；\n\nReources：您可以利用对以下资源的访问：\n\n*   1、读写文件的能力。\n*   你是一个大型语言模型，经过数百万页文本的训练，包括大量事实知识。 利用这些事实知识来避免不必要的信息收集。\n*    用于搜索和信息收集的互联网接入。\n*    具备阅读网站的能力。\n\nCommands：\n\n这些是您可以使用的唯一命令。 您执行的任何操作都必须可以通过以下11个命令之一来实现：\n\n*   open\\_file：打开文件进行编辑或继续查看；如果文件尚不存在，则创建它。注意：如果您只需要读取或写入文件一次，请改用\\`write\\_to\\_file\\`。参数：（file\\_path：字符串）\n*   open\\_folder：打开文件夹以跟踪其内容。参数：（path：字符串）\n*   execute\\_shell：执行 Shell 命令，仅限非交互式命令。参数：（command\\_line：字符串）\n*    execute\\_shell\\_popen：执行 Shell 命令，仅限非交互式命令。参数：（command\\_line：字符串）\n*    read\\_file：读取文件并返回内容。参数：（filename：字符串）\n*   write\\_file：写入文件，必要时创建它。如果文件存在，则将其覆盖。参数：（filename：字符串，contents：字符串）\n*   list\\_folder：以递归方式列出文件夹中的文件。参数：（文件夹：字符串）\n*    finish：完成任务后，或者遇到无法解决的问题导致无法完成任务时，使用此参数关闭。参数：（原因：字符串）\n*    ask\\_user：如果您需要有关给定目标的更多详细信息或信息，您可以要求用户输入。参数：（问题：字符串）\n*   web\\_search：搜索网络。参数：（查询：字符串，num\\_results？：数字）\n*   read\\_webpage：阅读网页，并从中提取特定信息。您必须指定topics\\_of\\_interest、问题、get\\_raw\\_content。参数：（url：字符串，topics\\_of\\_interest？：Array<string>，问题？：字符串，get\\_raw\\_content？：布尔值）\n\nBest practices：\n\n*   不断审查和分析你的行为，以确保您发挥出最佳能力。\n*   不断地建设性地自我批评你的大局行为。\n*   反思过去的决策和策略以完善您的方法。\n*   每个命令都有成本，所以要聪明、高效。 旨在以最少的步骤完成任务。\n*   只利用你的信息收集能力来寻找你还不了解的信息。\n\nYour Task：\n\n用户将在下一条消息中指定你要执行的任务，您的工作是按照上述指示完成任务，并在任务完成后终止。\n\nResponse format：\n\n您必须始终使用以下类型的 JSON 对象进行响应：\n\n[?](#)\n\n1\n\n2\n\n3\n\n4\n\n5\n\n6\n\n7\n\n8\n\n9\n\n10\n\n11\n\n12\n\n13\n\n14\n\n15\n\n16\n\n17\n\n18\n\n19\n\n20\n\n`interface` `AssistantResponse {`\n\n   `thoughts: {`\n\n      `// Relevant observations from your last action (if any)`\n\n      `observations: string;`\n\n      `// Thoughts`\n\n      `text: string;`\n\n      `// Reasoning behind the thoughts`\n\n      `reasoning: string;`\n\n      `// Constructive self-criticism`\n\n      `self_criticism: string;`\n\n      `// Short list that conveys the long-term plan`\n\n      `plan: Array<string>;`\n\n      `// Summary of thoughts, to say to user`\n\n      `speak: string;`\n\n      `};`\n\n   `use_tool: {`\n\n   `name: string;`\n\n   `arguments: Record<string, any>;`\n\n   `};`\n\n`}`\n\n  \n\n### 3.2.3. 响应内容分析\n\n[?](#)\n\n1\n\n2\n\n3\n\n4\n\n5\n\n6\n\n7\n\n8\n\n9\n\n10\n\n11\n\n12\n\n13\n\n14\n\n15\n\n16\n\n17\n\n18\n\n19\n\n20\n\n21\n\n22\n\n23\n\n24\n\n25\n\n26\n\n27\n\n28\n\n29\n\n30\n\n31\n\n32\n\n33\n\n`{`\n\n    `\"name\"``:` `\"现在广州什么天气\"``,`\n\n    `\"input\"``:` `\"现在广州什么天气\"``,`\n\n    `\"additional_input\"``: {},`\n\n    `\"created_at\"``:` `\"2024-06-11T04:48:32.654656\"``,`\n\n    `\"modified_at\"``:` `\"2024-06-11T04:48:43.905814\"``,`\n\n    `\"task_id\"``:` `\"6ba54e05-870e-402e-8235-880a759ecc7f\"``,`\n\n    `\"step_id\"``:` `\"9d2944c2-29eb-4f6d-a8b6-aa5022a3cbb6\"``,`\n\n    `\"status\"``:` `\"completed\"``,`\n\n    `\"output\"``:` `\"Finding the current weather in Guangzhou.\\n\\nNext Command: web_search(query='current weather Guangzhou')\"``,`\n\n    `\"additional_output\"``: {`\n\n        `\"thoughts\"``: {`\n\n            `\"observations\"``:` `\"The user requested the current weather in Guangzhou.\"``,`\n\n            `\"text\"``:` `\"I will use a web search to gather the most current and accurate information regarding the weather in Guangzhou.\"``,`\n\n            `\"reasoning\"``:` `\"Accessing a reliable source such as a local weather reporting service via a web search will provide up-to-date information.\"``,`\n\n            `\"self_criticism\"``:` `\"An alternative method could have been using a specific API call if available and integrated, which might have provided more detailed and reliable data more efficiently.\"``,`\n\n            `\"plan\"``: [`\n\n                `\"Perform a web search to determine the current weather in Guangzhou.\"``,`\n\n                `\"Display the results to the user.\"`\n\n            `],`\n\n            `\"speak\"``:` `\"Finding the current weather in Guangzhou.\"`\n\n        `},`\n\n        `\"use_tool\"``: {`\n\n            `\"name\"``:` `\"web_search\"``,`\n\n            `\"arguments\"``: {`\n\n                `\"query\"``:` `\"current weather Guangzhou\"`\n\n            `}`\n\n        `},`\n\n        `\"task_cumulative_cost\"``:` `0.0161`\n\n    `},`\n\n    `\"artifacts\"``: [],`\n\n    `\"is_last\"``: false`\n\n`}`\n\n4\\. 运行思维启动AutoGPT\n=================\n\n        上述分析是用技术思维来分析AutoGPT整个项目，看其各个模块的调用关系，以及如何使用大模型的调度和分析的能力。那如何使用AutoGPT来打造个人的AutoGPT呢，针对大家而言应该更重要。这个官方有更简单的操作步骤，具体如下：\n\n  \n\n步骤\n\n  \n\n备注\n\n  \n\n  \n\n  \n\n  \n\nbuild your own AI Agents using the AutoGPT Forge\n\n步骤一\n\nclone项目[AutoGPT](https://github.com/Significant-Gravitas/AutoGPT)，cd进入项目，允许命令：./run setup\n\n（用tag autogpt-v0.5.1）\n\n可能会遇到允许报错，比如setup文件找不到、./run文件找不到，bin/bash^M: bad interpreter: No such file or directory，或者其他错误。这个错误通常是因为 `setup.sh` 文件中包含了 Windows 风格的换行符（CRLF），而不是 Unix 风格的换行符（LF）。这种情况会导致 Bash 在解析脚本时出现问题。需要将文件中的所有 CRLF 转换为 LF。\n\n解决方案：系统安装dos2unix，然后执行：dos2unit   /绝对地址/setup.sh，极了解决问题。然后允许./run setup\n\n步骤二\n\n创建个人agent\n\n运行命令：./run agent create YOUR\\_AGENT\\_NAME\n\n之后就创建了你的个人agent，文件路径在：agents/YOUR\\_AGENT\\_NAME\n\n不用主动添加conda虚拟环境，程序中会自动处理，否则报错\n\n  \n\n步骤三\n\n运行个人agent\n\n运行命令：./run agent start YOUR\\_AGENT\\_NAME\\`\n\n出现界面：\n\n![](/download/thumbnails/123663221/image2024-6-12_15-5-37.png?version=1&modificationDate=1718175938239&api=v2)\n\n  \n\nEnhancing Your Agent\n\n  \n\nProfile\n\nMemory\n\nPlanning\n\nAction\n\n\\-------------------------------\n\nagent protocol：The Linguistics of AI Communication：[agent protocol](https://agentprotocol.ai/)\n\nLLM-Based AI Agents：\n\n![](https://miro.medium.com/v2/resize:fit:1050/1*9fDToDTOEc3tzMSDIJ-Tng.png)\n\n  \n\n  \n\n  \n\nInteracting with your Agent throught UI\n\n  \n\n使用 AutoGPT Forge UI 创建任务\n\n页面操作 :如果点击按钮![](/download/thumbnails/123663221/image2024-6-19_13-0-59.png?version=1&modificationDate=1718773260118&api=v2)，则可以循环执行步骤，直到任务完成，不过token消耗比较快，（$1分分钟就消耗完，哈哈）\n\n![](https://wiki.yingzi.com/download/thumbnails/123663221/image2024-6-12_15-5-37.png?version=1&modificationDate=1718175938239&api=v2)\n\n  \n\n基准测试\n\n  \n\n  \n\n提交自己的agent到Leaderboard，也就是AutoGPT的AI生态里\n\n  \n\n  \n\n  \n\n  \n\n  \n\n  \n\n  \n\n  \n\n  \n\n  \n\n  \n\n  \n\n  \n\n  \n\n5\\. 拓展及经典代码分析\n=============\n\n5.1. action/ability注册\n---------------------\n\n 展开源码\n\n[expand source](#)[?](#)\n\n1\n\n2\n\n3\n\n4\n\n5\n\n6\n\n7\n\n8\n\n9\n\n10\n\n11\n\n12\n\n13\n\n14\n\n15\n\n16\n\n17\n\n18\n\n19\n\n20\n\n21\n\n22\n\n23\n\n24\n\n25\n\n26\n\n27\n\n28\n\n29\n\n30\n\n31\n\n32\n\n33\n\n34\n\n35\n\n36\n\n37\n\n38\n\n`def` `register_abilities(``self``)` `-``>` `None``:`\n\n    `# 遍历当前目录及其子目录下的所有 Python 文件（递归方式）`\n\n    `for` `action_path` `in` `glob.glob(`\n\n        `os.path.join(os.path.dirname(__file__),` `\"**/*.py\"``), recursive``=``True`\n\n    `):`\n\n        `# 排除文件名为 \"__init__.py\" 和 \"registry.py\" 的文件`\n\n        `if` `not` `os.path.basename(action_path)` `in` `[`\n\n            `\"__init__.py\"``,`\n\n            `\"registry.py\"``,`\n\n        `]:`\n\n            `# 获取相对于当前文件目录的相对路径，并将路径中的斜杠替换为点号`\n\n            `action` `=` `os.path.relpath(`\n\n                `action_path, os.path.dirname(__file__)`\n\n            `).replace(``\"/\"``,` `\".\"``)`\n\n            `try``:`\n\n                `# 动态导入相应的模块`\n\n                `module` `=` `importlib.import_module(`\n\n                    `f``\".{action[:-3]}\"``, package``=``\"forge.actions\"`\n\n                `)`\n\n                `# 遍历模块中的所有属性`\n\n                `for` `attr` `in` `dir``(module):`\n\n                    `func` `=` `getattr``(module, attr)`\n\n                    `# 检查属性是否具有 'action' 属性`\n\n                    `if` `hasattr``(func,` `\"action\"``):`\n\n                        `ab` `=` `func.action`\n\n                        `# 设置 action 的类别`\n\n                        `ab.category` `=` `(`\n\n                            `action.split(``\".\"``)[``0``].lower().replace(``\"_\"``,` `\" \"``)`\n\n                            `if` `len``(action.split(``\".\"``)) >` `1`\n\n                            `else` `\"general\"`\n\n                        `)`\n\n                        `# 将 action 注册到 self.abilities 字典中`\n\n                        `self``.abilities[func.action.name]` `=` `func.action`\n\n            `except` `Exception as e:`\n\n                `# 如果出现异常，打印错误信息`\n\n                `print``(f``\"Error occurred while registering abilities: {str(e)}\"``)`\n\n5.2. 增加一个自定义action\n------------------\n\n        在action文件夹下，添加文件，有一点要求：\n\n1.  通过@action前缀进行定义，描述好action函数入参、action 描述（重要）\n\n举例，增加一个web请求的action：\n\n 展开源码\n\n[expand source](#)[?](#)\n\n1\n\n2\n\n3\n\n4\n\n5\n\n6\n\n7\n\n8\n\n9\n\n10\n\n11\n\n12\n\n13\n\n14\n\n15\n\n16\n\n17\n\n18\n\n19\n\n20\n\n21\n\n22\n\n23\n\n24\n\n25\n\n26\n\n27\n\n28\n\n29\n\n30\n\n31\n\n32\n\n33\n\n34\n\n35\n\n36\n\n37\n\n38\n\n39\n\n40\n\n41\n\n42\n\n43\n\n44\n\n45\n\n46\n\n47\n\n48\n\n49\n\n50\n\n51\n\n52\n\n53\n\n54\n\n`from` `__future__` `import` `annotations`\n\n`import` `json`\n\n`import` `time`\n\n`from` `duckduckgo_search` `import` `DDGS`\n\n`from` `..registry` `import` `action`\n\n`DUCKDUCKGO_MAX_ATTEMPTS` `=` `1`\n\n`@action``(`\n\n    `name``=``\"web_search\"``,`\n\n    `description``=``\"Searches the web\"``,`\n\n    `parameters``=``[`\n\n        `{`\n\n            `\"name\"``:` `\"query\"``,`\n\n            `\"description\"``:` `\"The search query\"``,`\n\n            `\"type\"``:` `\"string\"``,`\n\n            `\"required\"``:` `True``,`\n\n        `}`\n\n    `],`\n\n    `output_type``=``\"list[str]\"``,`\n\n`)`\n\n`async` `def` `web_search(agent, task_id:` `str``, query:` `str``)` `-``>` `str``:`\n\n    `\"\"\"Return the results of a Google search`\n\n    `Args:`\n\n        `query (str): The search query.`\n\n        `num_results (int): The number of results to return.`\n\n    `Returns:`\n\n        `str: The results of the search.`\n\n    `\"\"\"`\n\n    `search_results` `=` `[]`\n\n    `attempts` `=` `0`\n\n    `num_results` `=` `8`\n\n    `while` `attempts < DUCKDUCKGO_MAX_ATTEMPTS:`\n\n        `if` `not` `query:`\n\n            `return` `json.dumps(search_results)`\n\n        `search_results` `=` `DDGS().text(query, max_results``=``num_results)`\n\n        `if` `search_results:`\n\n            `break`\n\n        `time.sleep(``1``)`\n\n        `attempts` `+``=` `1`\n\n    `results` `=` `json.dumps(search_results, ensure_ascii``=``False``, indent``=``4``)`\n\n    `print``(f``\"result:{results}\"``)`\n\n    `return` `results`\n\n5.3. agent.py最简化代码\n------------------\n\n 展开源码\n\n[expand source](#)[?](#)\n\n1\n\n2\n\n3\n\n4\n\n5\n\n6\n\n7\n\n8\n\n9\n\n10\n\n11\n\n12\n\n13\n\n14\n\n15\n\n16\n\n17\n\n18\n\n19\n\n20\n\n21\n\n22\n\n23\n\n24\n\n25\n\n26\n\n27\n\n28\n\n29\n\n30\n\n31\n\n32\n\n33\n\n34\n\n35\n\n36\n\n37\n\n38\n\n39\n\n40\n\n41\n\n42\n\n43\n\n44\n\n45\n\n46\n\n47\n\n48\n\n49\n\n50\n\n51\n\n52\n\n53\n\n54\n\n55\n\n56\n\n57\n\n58\n\n59\n\n60\n\n61\n\n62\n\n63\n\n64\n\n65\n\n66\n\n67\n\n68\n\n69\n\n70\n\n71\n\n72\n\n73\n\n74\n\n75\n\n76\n\n77\n\n78\n\n79\n\n80\n\n81\n\n82\n\n83\n\n84\n\n85\n\n86\n\n87\n\n88\n\n89\n\n90\n\n91\n\n92\n\n93\n\n94\n\n95\n\n96\n\n97\n\n98\n\n99\n\n100\n\n101\n\n102\n\n103\n\n104\n\n105\n\n106\n\n107\n\n108\n\n109\n\n110\n\n`import` `json`\n\n`from` `forge.actions` `import` `ActionRegister`\n\n`from` `forge.sdk` `import` `(`\n\n    `Agent,`\n\n    `AgentDB,`\n\n    `ForgeLogger,`\n\n    `Step,`\n\n    `StepRequestBody,`\n\n    `Task,`\n\n    `TaskRequestBody,`\n\n    `Workspace,`\n\n`)`\n\n`LOG` `=` `ForgeLogger(__name__)`\n\n`from` `.sdk` `import` `PromptEngine, chat_completion_request`\n\n`class` `ForgeAgent(Agent):`\n\n    `def` `__init__(``self``, database: AgentDB, workspace: Workspace):`\n\n        `\"\"\"`\n\n        `The database is used to store tasks, steps and artifact metadata. The workspace is used to`\n\n        `store artifacts. The workspace is a directory on the file system.`\n\n        `Feel free to create subclasses of the database and workspace to implement your own storage`\n\n        `\"\"\"`\n\n        `super``().__init__(database, workspace)`\n\n        `self``.abilities` `=` `ActionRegister(``self``)`\n\n    `async` `def` `create_task(``self``, task_request: TaskRequestBody)` `-``> Task:`\n\n        `task` `=` `await` `super``().create_task(task_request)`\n\n        `LOG.info(`\n\n            `f``\"📦 Task created: {task.task_id} input: {task.input[:40]}{'...' if len(task.input) > 40 else ''}\"`\n\n        `)`\n\n        `return` `task`\n\n    `async` `def` `execute_step(``self``, task_id:` `str``, step_request: StepRequestBody)` `-``> Step:`\n\n        `# something additon`\n\n        `# Firstly we get the task this step is for so we can access the task input`\n\n        `task` `=` `await` `self``.db.get_task(task_id)`\n\n        `#  Create a new step in the database`\n\n        `step` `=` `await` `self``.db.create_step(`\n\n            `task_id``=``task_id,` `input``=``step_request, is_last``=``True`\n\n        `)`\n\n        `# Log the message`\n\n        `LOG.info(f``\"\\t✅ Final Step completed: {step.step_id} input: {step.input[:19]}\"``)`\n\n        `# Initialize the PromptEngine with the \"gpt-3.5-turbo\" model`\n\n        `prompt_engine` `=` `PromptEngine(``\"gpt-3.5-turbo\"``)`\n\n        `# Load the system and task prompts`\n\n        `system_prompt` `=` `prompt_engine.load_prompt(``\"system-format\"``)`\n\n        `# Define the task parameters`\n\n        `task_kwargs` `=` `{`\n\n            `\"task\"``: task.``input``,`\n\n            `\"abilities\"``:` `self``.abilities.list_abilities_for_prompt(),`\n\n        `}`\n\n        `# Load the task prompt with the defined task parameters`\n\n        `task_prompt` `=` `prompt_engine.load_prompt(``\"task-step\"``,` `*``*``task_kwargs)`\n\n        `# Initialize the messages list with the system prompt`\n\n        `messages` `=` `[`\n\n            `{``\"role\"``:` `\"system\"``,` `\"content\"``: system_prompt},`\n\n            `{``\"role\"``:` `\"user\"``,` `\"content\"``: task_prompt}`\n\n        `]`\n\n        `try``:`\n\n            `# Define the parameters for the chat completion request`\n\n            `chat_completion_kwargs` `=` `{`\n\n                `\"messages\"``: messages,`\n\n                `\"model\"``:` `\"gpt-3.5-turbo\"``,`\n\n            `}`\n\n            `# Make the chat completion request and parse the response`\n\n            `chat_response` `=` `await chat_completion_request(``*``*``chat_completion_kwargs)`\n\n            `answer` `=` `json.loads(chat_response[``\"choices\"``][``0``][``\"message\"``][``\"content\"``])`\n\n            `# Log the answer for debugging purposes`\n\n            `# LOG.info(pprint.pformat(answer))`\n\n            `print``(f``\"answer is:{answer}\"``)`\n\n        `except` `json.JSONDecodeError as e:`\n\n            `# Handle JSON decoding errors`\n\n            `LOG.error(f``\"Unable to decode chat response: {chat_response}\"``)`\n\n        `except` `Exception as e:`\n\n            `# Handle other exceptions`\n\n            `LOG.error(f``\"Unable to generate chat response: {e}\"``)`\n\n        `# Extract the ability from the answer`\n\n        `ability` `=` `answer[``\"ability\"``]`\n\n        `print``(f``\"ability:{ability}\"``)`\n\n        `# Run the ability and get the output`\n\n        `# We don't actually use the output in this example`\n\n        ``# Some action don`t need action,here you can do many thing``\n\n        `if` `ability[``\"name\"``]` `not` `in` `self``.abilities.list_abilities().keys():`\n\n            `step.output` `=` `answer[``\"thoughts\"``][``\"text\"``]`\n\n        `else``:`\n\n            `output` `=` `await` `self``.abilities.run_action(`\n\n                `task_id, ability[``\"name\"``],` `*``*``ability[``\"args\"``]`\n\n            `)`\n\n            `# Set the step output to the \"speak\" part of the answer`\n\n            `step.output` `=` `answer[``\"thoughts\"``][``\"speak\"``]`\n\n        `# Return the completed step`\n\n        `return` `step`\n\n打造一个agent的步骤：\n\n1.  创建一个任务，获取task\\_id，\n2.  根据上述的task\\_id，执行接下来的步骤\n3.  初始化提示工程，选择用什么模型\n4.  使用和创建action\n5.  加载系统提示词模板、自定义提示词模板\n6.  运行大模型\n7.  运行一个能力\n8.  返回用户反馈，文本、图片、或者其他与系统的交互操作\n\n5.4. 提示词组装方法\n------------\n\n 展开源码\n\n[expand source](#)[?](#)\n\n1\n\n2\n\n3\n\n4\n\n5\n\n6\n\n7\n\n8\n\n9\n\n10\n\n11\n\n12\n\n13\n\n14\n\n15\n\n16\n\n17\n\n18\n\n19\n\n20\n\n21\n\n22\n\n23\n\n24\n\n25\n\n26\n\n27\n\n28\n\n29\n\n30\n\n31\n\n32\n\n33\n\n34\n\n35\n\n36\n\n37\n\n38\n\n39\n\n40\n\n41\n\n42\n\n43\n\n44\n\n45\n\n46\n\n47\n\n48\n\n`{% extends \"techniques/expert.j2\" %}`\n\n`{% block expert %}Planner{% endblock %}`\n\n`{% block prompt %}`\n\n`Your task is:`\n\n`{{ task }}`\n\n`Answer in the provided format.`\n\n`Your decisions must always be made independently without seeking user assistance. Play to your strengths as an LLM and`\n\n`pursue simple strategies with no legal complications.`\n\n`{% if constraints %}`\n\n`## Constraints`\n\n`You operate within the following constraints:`\n\n`{% for constraint in constraints %}`\n\n`- {{ constraint }}`\n\n`{% endfor %}`\n\n`{% endif %}`\n\n`{% if resources %}`\n\n`## Resources`\n\n`You can leverage access to the following resources:`\n\n`{% for resource in resources %}`\n\n`- {{ resource }}`\n\n`{% endfor %}`\n\n`{% endif %}`\n\n`{% if abilities %}`\n\n`## Abilities`\n\n`You have access to the following abilities you can call:`\n\n`{% for ability in abilities %}`\n\n`- {{ ability }}`\n\n`{% endfor %}`\n\n`{% endif %}`\n\n`{% if best_practices %}`\n\n`## Best practices`\n\n`{% for best_practice in best_practices %}`\n\n`- {{ best_practice }}`\n\n`{% endfor %}`\n\n`{% endif %}`\n\n`{% if previous_actions %}`\n\n`## History of Abilities Used`\n\n`{% for action in previous_actions %}`\n\n`- {{ action }}`\n\n`{% endfor %}`\n\n`{% endif %}`\n\n`{% endblock %}`\n\n这是一个jinja2模板文件，有双括号{{}}的地方就是变量，在初始化的时候需要填充进去；\n\n对应3.2.1.1中所叙的内容，具体如下：\n\n*   先定义角色，使用了一个叫做expert.js的模板。定义一个块block，名字为”expert“；\n*   用户输入的内容填充在 {{task}}中；\n*   如果存在约束constraints，则列出每一条约束条件\n*   如果存在资源resources，则列出每一条资源\n*   如果存在能力abilities，则列出每一条能力\n*   如果存在最佳实践best\\_practices，则列出每一条最佳实践\n*   如果存在上一步操作previous\\_actions，则列出每一条action\n\n至于判断是否存在constraints、resources、abilities、best\\_practices、previous\\_actions，有一套。举个例子，在prompt上增加abilities，实现函数如下：\n\n[?](#)\n\n1\n\n2\n\n3\n\n4\n\n5\n\n6\n\n7\n\n8\n\n9\n\n10\n\n11\n\n`# Initialize the PromptEngine with the \"gpt-3.5-turbo\" model or other model`\n\n`prompt_engine` `=` `PromptEngine(model``=``\"gpt-3.5-turbo\"``, debug_enabled``=``True``)`\n\n`# Define the task parameters`\n\n`task_kwargs` `=` `{`\n\n    `\"task\"``: task.``input``,`\n\n    `\"abilities\"``:` `self``.abilties.list_abilities_for_prompt(),`\n\n`}`\n\n`# Load the task prompt with the defined task parameters`\n\n`task_prompt` `=` `prompt_engine.load_prompt(``\"task-step\"``,` `*``*``task_kwargs)`\n\n画图表示为：\n\nPrompt\n\nJinja2模板引擎\n\ntask\n\nconstraints\n\nresources\n\nabilities\n\nbest\\_practices\n\nprevious\\_actions\n\nActionRegister\n\n按照所有符合action\n\n格式要求的.py文件\n\n1、注册action格式  \n2、依据产品需求、领域、活动类型自定义action  \n3、可以拓展：互联网查询、对接RAG、\n\n用户输入input\n\n依据不同的场景设置不同的约束条件\n\n可以使用的资源(**?**)\n\n怎么更好地完成任务\n\n上一个action\n\n可大量拓展action\n\n![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMjEuOTkgNGMwLTEuMS0uODktMi0xLjk5LTJINGMtMS4xIDAtMiAuOS0yIDJ2MTJjMCAxLjEuOSAyIDIgMmgxNGw0IDQtLjAxLTE4ek0xOCAxNEg2di0yaDEydjJ6bTAtM0g2VjloMTJ2MnptMC0zSDZWNmgxMnYyeiIvPjxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz48L3N2Zz4= \"显示评论\")\n\n//<!\\[CDATA\\[ (function() { $ = AJS.$; var graphContainer = document.getElementById('drawio-macro-content-5cc93905-d9fc-4a93-858a-381edf36b6fd'); DrawioProperties = { contextPath : AJS.contextPath(), buildNumber : 8401 }; var readerOpts = {}; readerOpts.loadUrl = '' + '/rest/drawio/1.0/diagram/crud/%31%31%32/123663221?revision=4'; readerOpts.imageUrl = '' + '/download/attachments/123663221/112.png' + '?version=4&api=v2'; readerOpts.editUrl = '' + '/plugins/drawio/addDiagram.action?ceoId=123663221&owningPageId=123663221&diagramName=%31%31%32&revision=4'; readerOpts.editable = true; readerOpts.canComment = true; readerOpts.stylePath = STYLE\\_PATH; readerOpts.stencilPath = STENCIL\\_PATH; readerOpts.imagePath = IMAGE\\_PATH + '/reader'; readerOpts.border = true; readerOpts.width = '1000'; readerOpts.simpleViewer = false; readerOpts.tbstyle = 'top'; readerOpts.links = 'auto'; readerOpts.lightbox = true; readerOpts.resourcePath = ATLAS\\_RESOURCE\\_BASE + '/resources/viewer'; readerOpts.disableButtons = false; readerOpts.zoomToFit = true; readerOpts.language = 'zh'; readerOpts.licenseStatus = 'OK'; readerOpts.contextPath = AJS.contextPath(); readerOpts.diagramName = decodeURIComponent('%31%31%32'); readerOpts.diagramDisplayName = ''; readerOpts.aspect = ''; readerOpts.ceoName = 'AutoGPT进化了，再看一次'; readerOpts.attVer = '4'; readerOpts.attId = '129173463'; readerOpts.lastModifierName = '王宇'; readerOpts.lastModified = '2024-06-23 12:12:27.398'; readerOpts.creatorName = '王宇'; //Embed macro specific info readerOpts.extSrvIntegType = '$extSrvIntegType'; readerOpts.gClientId = '$gClientId'; readerOpts.oClientId = '$oClientId'; readerOpts.service = '$service'; readerOpts.sFileId = '$sFileId'; readerOpts.odriveId = '$odriveId'; readerOpts.diagramUrl = '$diagramUrl'; readerOpts.csvFileUrl = '$csvFileUrl'; readerOpts.pageId = '$pageId' || Confluence.getContentId(); readerOpts.aspectHash = '$aspectHash'; readerOpts.useExternalImageService = '$useExternalImageService' == 'true'; readerOpts.isTemplate = '$isTemplate' == 'true'; if (readerOpts.width == '') { readerOpts.width = null; } // LATER: Check if delayed loading of resources can be used for image placeholder mode var viewerPromise = createViewer(graphContainer, readerOpts); if(readerOpts.editable) { $(graphContainer).data('viewerConfig', readerOpts); $(graphContainer).on('drawioViewerUpdate', updateDrawioViewer); } viewerPromise.done(function(viewer) { updateCachedDiagram(graphContainer, readerOpts, viewer); }); })(); //\\]\\]>\n\n  \n\n  \n\n6\\. 过程中用到的经典库\n=============\n\n库名称\n\n详细\n\n备注\n\n库名称\n\n详细\n\n备注\n\nlitellm\n\n使用 OpenAI 格式调用所有 LLM API \\[Bedrock、Huggingface、VertexAI、TogetherAI、Azure、OpenAI 等\\]\n\n在.env文件中使用\n\n  \n\n  \n\n  \n\n  \n\n  \n\n  \n\n7\\. 大模型使用指令测试\n=============\n\n7.1. 提示词\n--------\n\n提示词详情为：\n\n[?](#)\n\n1\n\n  \n\n  \n\n  \n\n  \n\n  \n\n  \n\n  \n\n  \n\n  \n\n  \n\n  \n\n  \n\n  \n\n  \n\n  \n\n  \n\n  \n\n  \n\n  \n\n  \n\n  \n\n  \n\n  \n\n  \n\n  \n\n  \n\n  \n\n  \n\n  \n\n  \n\n[Filter table data](#)[Create a pivot table](#)[Create a chart from data series](#)\n\n[Configure buttons visibility](/users/tfac-settings.action)"
}