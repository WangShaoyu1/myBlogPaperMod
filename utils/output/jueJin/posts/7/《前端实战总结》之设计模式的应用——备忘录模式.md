---
author: "徐小夕"
title: "《前端实战总结》之设计模式的应用——备忘录模式"
date: 2019-11-13
description: "备忘录模式简单的说就是在不破坏已有逻辑的前提下，将日后需要获取的数据在第一次保存下来以免造成重复且低效的操作。该设计模式最主要的任务就是对现有数据或者状态做缓存，为将来某个时刻使用或者恢复做准备。 首先在javascript编程中，我们的应用往往是通过浏览器端向服务器发送请求来…"
tags: ["JavaScript","设计模式中文技术社区","前端开发社区","前端技术交流","前端框架教程","JavaScript 学习资源","CSS 技巧与最佳实践","HTML5 最新动态","前端工程师职业发展","开源前端项目","前端技术趋势"]
ShowReadingTime: "阅读4分钟"
weight: 1
selfDefined:"likes:30,comments:0,collects:43,views:4380,"
---
![](/images/jueJin/16e60513fb8ea9c.png)

### 概念介绍

**备忘录模式**简单的说就是在不破坏已有逻辑的前提下，将日后需要获取的数据在第一次保存下来以免造成重复且低效的操作。该设计模式最主要的任务就是对现有数据或者状态做缓存，为将来某个时刻使用或者恢复做准备。

### 应用场景

首先在javascript编程中，我们的应用往往是通过浏览器端向服务器发送请求来获取数据的，而请求的过程中往往会消耗一定的**时间**和**流量**，对重复性数据反复请求不仅增加了服务端的压力，还会造成浏览器端对数据请求的等待进而影响用户体验。因此作为一个有逼格的程序员，有比较对这块性能做出优化。接下来举一些常见的应用场景。

#### 1\. 分页时的数据缓存

比如我们请求一个长列表，需要做分页，那么我们每次切换分页都会重新请求一次，为了优化我们可以将第一次的分页请求数据缓存，当下次再切换到这一页的时候我们会先判断缓存对象中是否有该数据，如果有就直接走缓存，没有就发起请求，并将当前的数据存入对应页数的缓存中。

#### 2\. 内容懒加载时的缓存

为了提高页面首屏渲染时间，我们往往会使用懒加载的方式，比如图片懒加载，内容数据懒加载，其原理和分页很像，比如在用户下拉时显示更多数据等，当用户切换页面后又切换回来时，我们可以将之前请求的数据缓存，这样就不用再次请求一次了，除非用户手动刷新。

#### 3\. 网站换肤

网站换肤也是目前比较常用的功能之一，比如可视化的网站，各种建站网站，目前都在走所见即所得的路子，这样可以更近一步的提高用户体验，需要平凡的改动用户的界面风格和样式，还需要提供用户撤销的功能，那么利用备忘录模式就更好不过了，他可以在用户保存之后可以不请求后端接口的情况下拿到上一步的配置参数，对于高频操作来说，这无疑大大提高了用户体验和网站性能。

#### 4\. 其他

比如系统的公共配置，用户浏览记录的缓存，路由的缓存等等，都可以用备忘录模式来提高性能，最常用的就是vue-router，我们可以使用keep-alive来缓存路由，其实原理也是类似的，如此种种，了解了备忘录模式，你的网站就有了更近一步的优化空间。

### 基本实现

综合以上的场景分析和讨论，我们可以抽象出一个公共的缓存方法来处理不同情景下的数据缓存。代码如下：

```
    const baseOperateController = function() {
    // 缓存对象
    const cache = {};
    // 基础函数
        return function(params, fn, cb) {
        // 判断是否在缓存下
            if(cache[params]) {
            // 从缓存中读取并传递给业务函数
            fn(cache[params])
                }else {
                // 没有缓存则将控制权转移给外部回调函数，并传递相应参数
                    cb && cb(params).then((res => {
                    cache[params] = res.data;
                    })).catch(err => console.log(err))
                }
            }
            }()
            
            // 使用
            baseOperateController(params, showView, asyncFn)
```

### 最后

如果想了解更多webpack，node，gulp，css3，javascript，nodeJS，canvas等前端知识和实战，欢迎在公众号《趣谈前端》加入我们一起学习讨论，共同探索前端的边界。

![](/images/jueJin/16ba43b87c51361.png)

### 更多推荐

*   [《前端实战总结》之使用postMessage实现可插拔的跨域聊天机器人](https://juejin.cn/post/6844903989843066887 "https://juejin.cn/post/6844903989843066887")
*   [《前端实战总结》之变量提升，函数声明提升及变量作用域详解](https://juejin.cn/post/6844903985695080455 "https://juejin.cn/post/6844903985695080455")
*   [《前端实战总结》如何在不刷新页面的情况下改变URL](https://juejin.cn/post/6844903984222699527 "https://juejin.cn/post/6844903984222699527")
*   [一张图教你快速玩转vue-cli3](https://juejin.cn/post/6844903877133729799 "https://juejin.cn/post/6844903877133729799")
*   [vue高级进阶系列——用typescript玩转vue和vuex](https://juejin.cn/post/6844903831956897806 "https://juejin.cn/post/6844903831956897806")
*   [基于nodeJS从0到1实现一个CMS全栈项目（上）](https://juejin.cn/post/6844903952761225230 "https://juejin.cn/post/6844903952761225230")
*   [基于nodeJS从0到1实现一个CMS全栈项目（中）](https://juejin.im/editor/posts/5d8c7b66518825761b4c1e04 "https://juejin.im/editor/posts/5d8c7b66518825761b4c1e04")
*   [基于nodeJS从0到1实现一个CMS全栈项目（下）](https://juejin.cn/post/6844903955797901319 "https://juejin.cn/post/6844903955797901319")
*   [《javascript高级程序设计》核心知识总结](https://juejin.cn/post/6844903953671389191 "https://juejin.cn/post/6844903953671389191")
*   [用css3实现惊艳面试官的背景即背景动画（高级附源码）](https://juejin.cn/post/6844903950123188237 "https://juejin.cn/post/6844903950123188237")
*   [教你用200行代码写一个爱豆拼拼乐H5小游戏（附源码）](https://juejin.cn/post/6844903893961293831 "https://juejin.cn/post/6844903893961293831")
*   [5分钟教你用nodeJS手写一个mock数据服务器](https://juejin.cn/post/6844903937330380814 "https://juejin.cn/post/6844903937330380814")