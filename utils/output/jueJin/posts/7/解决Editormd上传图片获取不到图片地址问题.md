---
author: "Gaby"
title: "è§£å†³Editormdä¸Šä¼ å›¾ç‰‡è·å–ä¸åˆ°å›¾ç‰‡åœ°å€é—®é¢˜"
date: 2022-06-16
description: "Editormdå›¾ç‰‡ä¸Šä¼ è·å–ä¸åˆ°å›¾ç‰‡åœ°å€ï¼ŒEditormdå›¾ç‰‡ä¸Šä¼ iframeå­˜åœ¨è·¨åŸŸæƒ…å†µï¼Œå‡ ç»è°ƒè¯•éƒ½ä¸å¥½ç”¨ï¼Œæœ€åé‡‡å–æ›¿ä»£æ–¹æ¡ˆ"
tags: ["JavaScript","Markdown","æ¶æ„ä¸­æ–‡æŠ€æœ¯ç¤¾åŒº","å‰ç«¯å¼€å‘ç¤¾åŒº","å‰ç«¯æŠ€æœ¯äº¤æµ","å‰ç«¯æ¡†æ¶æ•™ç¨‹","JavaScript å­¦ä¹ èµ„æº","CSS æŠ€å·§ä¸æœ€ä½³å®è·µ","HTML5 æœ€æ–°åŠ¨æ€","å‰ç«¯å·¥ç¨‹å¸ˆèŒä¸šå‘å±•","å¼€æºå‰ç«¯é¡¹ç›®","å‰ç«¯æŠ€æœ¯è¶‹åŠ¿"]
ShowReadingTime: "é˜…è¯»4åˆ†é’Ÿ"
weight: 1
selfDefined:"likes:9,comments:0,collects:2,views:2652,"
---
æŒç»­åˆ›ä½œï¼ŒåŠ é€Ÿæˆé•¿ï¼è¿™æ˜¯æˆ‘å‚ä¸ã€Œæ˜é‡‘æ—¥æ–°è®¡åˆ’ Â· 6 æœˆæ›´æ–‡æŒ‘æˆ˜ã€çš„ç¬¬17å¤©ï¼Œ[ç‚¹å‡»æŸ¥çœ‹æ´»åŠ¨è¯¦æƒ…](https://juejin.cn/post/7099702781094674468 "https://juejin.cn/post/7099702781094674468")

åºŸè¯åªè¯´ä¸€å¥ï¼šç å­—ä¸æ˜“æ±‚ä¸ªğŸ‘ï¼Œæ”¶è— === å­¦ä¼š,å¿«è¡ŒåŠ¨èµ·æ¥å§ï¼ğŸ™‡â€ğŸ™‡â€ğŸ™‡â€ã€‚

Editor.mdå›¾ç‰‡ä¸Šä¼ è·å–ä¸åˆ°å›¾ç‰‡åœ°å€ï¼ŒEditor.mdå›¾ç‰‡ä¸Šä¼ iframeå­˜åœ¨è·¨åŸŸæƒ…å†µï¼Œå‡ ç»è°ƒè¯•éƒ½ä¸å¥½ç”¨ï¼Œæœ€åé‡‡å–æ›¿ä»£æ–¹æ¡ˆï¼Œè¿˜ä¸å­˜åœ¨è·¨åŸŸæƒ…å†µã€‚

æœ€è¿‘é¡¹ç›®ä¸­è¦æ”¯æŒmarkdown ç¼–è¾‘å™¨ï¼Œç°åœ¨åŸºæœ¬åšæŠ€æœ¯çš„æ²¡æœ‰ä¸çŸ¥é“Markdown çš„ï¼Œå› ä¸ºå®åœ¨æ˜¯å¤ªå¼ºå¤§äº†ï¼Œåªéœ€è¦äº†è§£å¾ˆç®€å•çš„å‡ ä¸ªæ“ä½œï¼Œå³å¯ç¼–è¾‘éå¸¸ä¼˜ç¾çš„æ–‡ç« ï¼ŒåŒ…æ‹¬TeXç§‘å­¦å…¬å¼ï¼ˆåŸºäºKaTeXï¼‰ã€æµç¨‹å›¾ Flowchart å’Œ æ—¶åºå›¾ ï¼Œä¸åœ¨è®©ä½ æµªè´¹æ—¶é—´åœ¨æ ¼å¼çš„è°ƒæ•´ã€‚

### èƒŒæ™¯

æ˜¯åœ¨PCç«¯ä½¿ç”¨ï¼Œç›´æ¥å¼•å…¥JQueryå’ŒMarkdown.mdæ’ä»¶è¿›è¡Œä½¿ç”¨

### èµ„æºï¼š

[Editor.md](https://link.juejin.cn?target=https%3A%2F%2Fpandao.github.io%2Feditor.md%2F "https://pandao.github.io/editor.md/")

[editor.mdçš„github](https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpandao%2Feditor.md%2F "https://github.com/pandao/editor.md/")

[editor.md.zipåŒ…ä¸‹è½½åœ°å€](https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpandao%2Feditor.md%2Farchive%2Fmaster.zip "https://github.com/pandao/editor.md/archive/master.zip")

[jquery-3.6.0.min.js](https://link.juejin.cn?target=https%3A%2F%2Fcode.jquery.com%2Fjquery-3.6.0.min.js "https://code.jquery.com/jquery-3.6.0.min.js")

[jquery-form github](https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fjquery-form%2Fform "https://github.com/jquery-form/form")

è¿™ä¸ªæ’ä»¶å°±ä¸å¤šè¯´äº†ï¼Œä»¥ä¸ºå®˜ç½‘å·²ç»è¯´çš„å¾ˆå¤šäº†ï¼Œè™½ç„¶åœ¨ä½¿ç”¨ä¸Šæœ‰ç‚¹å°ç‘•ç–µï¼Œä½†æ˜¯å¤§ä½“ä¸Šè¿˜æ˜¯å¾ˆä¸é”™çš„ï¼Œå³æ’å³ç”¨ã€‚

### editor.mdç›®å½•ä»‹ç»

è¿™è¾¹éœ€è¦è¯´æ˜ä¸€ä¸‹ editor.mdç›®å½•ï¼Œæœ¬æ–‡ä»‹ç»çš„ç‰ˆæœ¬ä¸ºv1.5.0ï¼Œåœ¨é¦–é¡µä¸‹è½½å®Œæˆï¼Œè§£å‹editor.md-master.zipæ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹å›¾çš„ç›®å½•ç»“æ„ï¼š ![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](/images/jueJin/edbddbb1ade348f.png)

å›¾ä¸­çº¢è‰²æ¡†å†…æ˜¯æˆ‘ä»¬è¦å¼•ç”¨åˆ°é¡¹ç›®çš„æ–‡ä»¶å’Œç›®å½•ã€‚

*   cssç›®å½•ä¸­å¯é€‰æ‹©editormd.min.cssæ”¾åœ¨å¯¹åº”çš„é¡¹ç›®cssç›®å½•ä¸­ï¼›
*   jså¯é€‰æ‹©editormd.min.jsæ”¾ç½®åœ¨å¯¹åº”é¡¹ç›®çš„jsç›®å½•ä¸­ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯åŒæ—¶éœ€è¦å¼•å…¥jQueryï¼Œè¿™é‡Œä½¿ç”¨jquery.min.jsï¼›
*   examplesæ–‡ä»¶å¤¹ä¸­æ˜¯ä¸€éƒ¨åˆ†æ ¸å¿ƒåŠŸèƒ½çš„demoï¼Œåœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ç”¨åˆ°å¯¹åº”çš„ç»„ä»¶æˆ–åŠŸèƒ½å¯æ‰“å¼€å‚è€ƒï¼›
*   fontsæ˜¯éœ€è¦ç”¨åˆ°å­—ä½“ï¼Œå¯ä¸€å¹¶å¼•å…¥é¡¹ç›®ï¼›
*   imagesæ˜¯ä¸€äº›åŠ è½½ç±»çš„å›¾ç‰‡ï¼›
*   libæ˜¯editor.mdä¾èµ–çš„ç¬¬ä¸‰æ–¹jsèµ„æºï¼Œæ¯”å¦‚æµç¨‹å›¾çš„jsèµ„æºï¼›
*   pluginsä¸»è¦æ˜¯ç¼–è¾‘å™¨ä¸Šé¢çš„æ“ä½œåŠŸèƒ½æ’ä»¶ï¼Œæ¯”å¦‚å›¾ç‰‡ä¸Šä¼ ç­‰ï¼Œå¯é€‰æ‹©ä½¿ç”¨çš„è¿›è¡ŒåŠ è½½ï¼›

å¯¼å…¥åˆ°web é¡¹ç›®ä¸­çš„ç›®å½•å¦‚ä¸‹ï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](/images/jueJin/fd690651484348f.png)

é¡µé¢ä¸­éœ€è¦å¼•å…¥çš„æ–‡ä»¶ï¼Œå…¶ä»–æ’ä»¶æ ¹æ®éœ€è¦å†å¢åŠ 

```html
<!-- é¡µé¢ä¸­æ·»åŠ css -->
<link rel="stylesheet" href="./css/style.css" />
<link rel="stylesheet" href="./css/editormd.css" />
<!-- é¡µé¢ä¸­æ·»åŠ div -->
<div id="editormd">
<textarea style="display:none;">### Hello Editor.md !</textarea>
</div>
<!-- é¡µé¢ä¸­æ·»åŠ js -->
<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/jqueryform@4.3.0.min.js"></script>
<script type="text/javascript" src="js/editormd.min.js"></script>
<script type="text/javascript" src="js/showdown@1.9.1.min.js"></script>
<script>
    var testEditor = editormd("editormd", {
    width: "90%",
    height: 'calc(100vh - 85px)',
    path : './lib/',
    // theme : "dark",
    // previewTheme : "dark",
    // editorTheme : "pastel-on-dark",
    // markdown : content?content:'![](https://img1.446677.xyz/2021/07/04/81903e6c0536ef3a87783a6e7afc3093.jpg) ![](https://img1.446677.xyz/2021/07/08/889db52a8e84a58e9bf63970f3a01e92.jpg)',
    markdown : content,
    codeFold : true,
    //syncScrolling : false,
    saveHTMLToTextarea : true,    // ä¿å­˜ HTML åˆ° Textarea
    searchReplace : true,
    //watch : false,                // å…³é—­å®æ—¶é¢„è§ˆ
    htmlDecode : "style,script,iframe|on*",            // å¼€å¯ HTML æ ‡ç­¾è§£æï¼Œä¸ºäº†å®‰å…¨æ€§ï¼Œé»˜è®¤ä¸å¼€å¯
    //toolbar  : false,             //å…³é—­å·¥å…·æ 
    //previewCodeHighlight : false, // å…³é—­é¢„è§ˆ HTML çš„ä»£ç å—é«˜äº®ï¼Œé»˜è®¤å¼€å¯
    emoji : true,
    taskList : true,
tocm            : true,         // Using [TOCM]
tex : true,                   // å¼€å¯ç§‘å­¦å…¬å¼TeXè¯­è¨€æ”¯æŒï¼Œé»˜è®¤å…³é—­
flowChart : true,             // å¼€å¯æµç¨‹å›¾æ”¯æŒï¼Œé»˜è®¤å…³é—­
sequenceDiagram : true,       // å¼€å¯æ—¶åº/åºåˆ—å›¾æ”¯æŒï¼Œé»˜è®¤å…³é—­,
//dialogLockScreen : false,   // è®¾ç½®å¼¹å‡ºå±‚å¯¹è¯æ¡†ä¸é”å±ï¼Œå…¨å±€é€šç”¨ï¼Œé»˜è®¤ä¸ºtrue
//dialogShowMask : false,     // è®¾ç½®å¼¹å‡ºå±‚å¯¹è¯æ¡†æ˜¾ç¤ºé€æ˜é®ç½©å±‚ï¼Œå…¨å±€é€šç”¨ï¼Œé»˜è®¤ä¸ºtrue
//dialogDraggable : false,    // è®¾ç½®å¼¹å‡ºå±‚å¯¹è¯æ¡†ä¸å¯æ‹–åŠ¨ï¼Œå…¨å±€é€šç”¨ï¼Œé»˜è®¤ä¸ºtrue
//dialogMaskOpacity : 0.4,    // è®¾ç½®é€æ˜é®ç½©å±‚çš„é€æ˜åº¦ï¼Œå…¨å±€é€šç”¨ï¼Œé»˜è®¤å€¼ä¸º0.1
//dialogMaskBgColor : "#000", // è®¾ç½®é€æ˜é®ç½©å±‚çš„èƒŒæ™¯é¢œè‰²ï¼Œå…¨å±€é€šç”¨ï¼Œé»˜è®¤ä¸º#fff
imageUpload : true,
imageFormats : ["jpg", "jpeg", "gif", "png", "bmp", "webp"],
imageUploadURL : "https://api.xxxx.com/api/v1/editorMdImgUpload",
    onload : function() {
    /*ä¸Šä¼ å›¾ç‰‡æˆåŠŸåå¯ä»¥åšä¸€äº›è‡ªå·±çš„å¤„ç†*/
    console.log('onload', this);
    //this.fullscreen();
    //this.unwatch();
    //this.watch().fullscreen();
    
    //this.setMarkdown("#PHP");
    //this.width("100%");
    //this.height(480);
    //this.resize("100%", 640);
}
});
</script>
```

idä¸ºeditormdï¼Œåé¢çš„jsä»£ç ä¸­éœ€è¦ç”¨åˆ°ã€‚è€Œä¸”æºç å†…éƒ¨ä¹Ÿæ˜¯é€šè¿‡è¿™ä¸ªä½œä¸ºå‰ç¼€çš„ã€‚

é€šè¿‡formè¡¨å•æäº¤æ—¶åå°å¯é€šè¿‡content-editormd-markdown-docè·å–åˆ°å¯¹åº”çš„markdownæ–‡æ¡£å†…å®¹ã€‚æ¯”å¦‚Javaä¸­å¯é€šè¿‡request.getParameter(â€œcontent-editormd-markdown-docâ€) æ³¨æ„ï¼šæ­¤å¤„éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ— è®ºéœ€è¦htmlæ ¼å¼çš„å†…å®¹è¿˜æ˜¯markdownæ ¼å¼çš„å†…å®¹ï¼Œéƒ½åªéœ€è¦å†™ä¸€ä¸ªtextareaã€‚æ­¤å¤„æœ‰ä¸€ä¸ªå¾ˆå¤§çš„å‘ã€‚ä¸å°‘å…¶ä»–æ•™ç¨‹ä¸­è¯´éœ€è¦ä¸¤ä¸ªtextareaï¼Œé‚£ä¹ˆä¼šå¯¼è‡´åä¸€ä¸ªtextareaåå°è·å¾—çš„æ•°æ®æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè€Œä¸æ˜¯å•çº¯çš„HTMLå†…å®¹ã€‚

ç¼–è¾‘å™¨ä¸­çš„ç¼–è¾‘é…ç½®ï¼š `path`è·¯å¾„éœ€è¦æŒ‡å®šåˆ°é¡¹ç›®ä¸­å¯¹åº”çš„`lib`çš„è·¯å¾„ã€‚å¦‚æœè®¾ç½®ä¸å¯¹markdown æ— æ³•æ¸²æŸ“å‡ºæ¥ã€‚

saveHTMLToTextareaè®¾ç½®ä¸ºtrueè¡¨ç¤ºï¼Œè½¬åŒ–ä¸ºhtmlæ ¼å¼çš„å†…å®¹ä¹ŸåŒæ ·æäº¤åˆ°åå°ã€‚

å¥½ï¼Œåˆ°è¿™è¾¹ä½ å°±å¯ä»¥çœ‹åˆ°é¡µé¢æ•ˆæœäº†ã€‚å¦‚ä¸‹ï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](/images/jueJin/7b11f17683c546d.png)

### ä¸Šä¼ å›¾ç‰‡

editor.mdçš„ä¸Šä¼ å›¾ç‰‡åŠŸèƒ½å®ç°èµ·æ¥æ¯”è¾ƒç®€å•ï¼Œåªéœ€è¦åœ¨ä¸Šæ®µä»£ç ä¸­å†æ·»åŠ ä¸€äº›é…ç½®å³å¯ã€‚ä½†æ˜¯ä¸Šä¼ è·å–è¿”å›å€¼å¤„éœ€è¦æ”¹åŠ¨ï¼Œå¦åˆ™ä½¿ç”¨æºç çš„æ–¹æ³•ä¼šå­˜åœ¨è·¨åŸŸé—®é¢˜è€Œå¯¼è‡´è·å–ä¸Šä¼ è¿”å›æ•°æ®å¤±è´¥ã€‚

```js
//ä¸å›¾ç‰‡ä¸Šä¼ æœ‰å…³çš„é…ç½®
    var testEditor = editormd("editormd", {
    imageUpload : true,
    imageFormats : ["jpg", "jpeg", "gif", "png", "bmp", "webp"],
    imageUploadURL : "https://api.ycsnews.com/api/v1/article/editorMdImgUpload",
        onload : function() {
        /*ä¸Šä¼ å›¾ç‰‡æˆåŠŸåå¯ä»¥åšä¸€äº›è‡ªå·±çš„å¤„ç†*/
        // console.log('onload', this);
        //this.fullscreen();
        //this.unwatch();
        //this.watch().fullscreen();
        
        //this.setMarkdown("#PHP");
        //this.width("100%");
        //this.height(480);
        //this.resize("100%", 640);
    }
    });
```

*   imageUploadè®¾ç½®ä¸ºtrueè¡¨ç¤ºæ”¯æŒä¸Šä¼ ï¼Œæ­¤æ—¶éœ€è¦pluginsä¸­çš„image-dialog.jsæ’ä»¶ï¼ˆé»˜è®¤è°ƒç”¨ï¼Œæ”¾åœ¨æŒ‡å®šè·¯å¾„å³å¯ï¼‰ã€‚
*   imageFormatsä¸ºæ”¯æŒä¸Šä¼ çš„å›¾ç‰‡ç±»å‹ã€‚
*   imageUploadURLè¦ä¸Šä¼ å›¾ç‰‡çš„åå°æœåŠ¡å™¨è·¯å¾„

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](/images/jueJin/14a8ba91eef645e.png)

ä½†æ˜¯ï¼Œå½“ä½ ç‚¹å‡»â€œæœ¬åœ°ä¸Šä¼ â€ åï¼Œå‘ç°æ²¡æœ‰ä»»ä½•åæ˜ ã€‚å›¾ç‰‡åœ°å€ä¹Ÿæ²¡æœ‰å›å¡«ï¼›æˆ‘ç¬¬ä¸€ååº”æ˜¯æ˜¯ä¸æ˜¯æˆ‘å‚æ•°è®¾ç½®æœ‰é—®é¢˜å•Šï¼Œä½†æ˜¯ï¼Œç»è¿‡æˆ‘çœ‹demo åŒ…æ‹¬ï¼Œä¸Šgit è®¨è®ºåŒºæŸ¥çœ‹æ­¤ç±»é—®é¢˜çš„æ—¶å€™ï¼Œå¹¶æ²¡æœ‰ï¼Œå°±åªéœ€è¦è®¾ç½®imageUploadï¼ŒimageFormatsï¼ŒimageUploadURL ä¸‰ä¸ªå‚æ•°å³å¯ï¼Œé™¤éè·¨åŸŸäº†ï¼›ä½†æ˜¯æˆ‘çš„æƒ…å†µå¹¶æ²¡æœ‰è·¨åŸŸå•Šï¼Œæ‰€ä»¥æˆ‘æ‰“å¼€æŸ¥çœ‹é¡µé¢çš„è°ƒè¯•æ¨¡å¼ï¼Œçœ‹åˆ°äº†ä¸€ä¸ªæŠ¥é”™ï¼›å¦‚å›¾ï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](/images/jueJin/635678b37e9b450.png)

ç‰¹åœ°è¯´æ˜ä¸€ä¸‹ï¼šåç«¯è¿”å›çš„æŠ¥æ–‡å¿…é¡»json æ ¼å¼ï¼š

```js
//ä¸Šä¼ å›¾ç‰‡è¿”å›æ•°æ®æ ¼å¼ success çš„æ•°æ®éœ€è¦æ˜¯Numberç±»å‹ å›ºå®šè¿”å›æ ¼å¼ï¼Œå¿…è¦è¿”å›æ•°æ®ï¼Œå…¶ä»–å¯ä»¥æ ¹æ®éœ€è¦æ·»åŠ æ›´å¤šçš„å‚æ•°
    {
    url: "https://api.xxx.com/uploads/20210717/16264838053d0d89.jpg",
    message: "ä¸Šä¼ æˆåŠŸ",
    success: 1 //æ•°å€¼ å¤±è´¥ 0 æˆ– æˆåŠŸ 1
}
```

åç«¯æ¥æ”¶æ•°æ®ä½¿ç”¨çš„æ˜¯ file\=file = file\=\_FILES\[â€˜editormd-image-fileâ€™\]; å›ºå®šçš„æ ¼å¼ï¼Œ 0,1 å¿…é¡»æ˜¯æ•°å­—ï¼›

url :å°±æ˜¯ä½ å›¾ç‰‡å­˜åœ¨çš„åœ°å€ï¼Œè¿™ä¸ªå°±æ˜¯è¿”å›åˆ°å¼¹æ¡†ä¸­çš„å›¾ç‰‡åœ°å€ã€‚

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](/images/jueJin/704ae6efe5a4405.png)

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](/images/jueJin/604d253d27b0468.png)

```javascript
    var submitHandler = function() {
        $("#image-form").ajaxSubmit(function (data) {
        loading(false);
        var json = data;
        json = (typeof JSON.parse !== "undefined") ? JSON.parse(json) : eval("(" + json + ")");
        if(!settings.crossDomainUpload)
            {
            if (json.success === 1)
                {
                // å¡«å……å›¾ç‰‡åœ°å€åˆ°è¾“å…¥æ¡†
                dialog.find("[data-url]").val(json.url);
                // å¡«å……å›¾ç‰‡åŸåç§°ä¸ºå›¾ç‰‡æè¿° sourFileName è¿™ä¸ªå­—æ®µæ˜¯å¤šä¼ è¿›æ¥çš„
                dialog.find("[data-alt]").val(json.sourFileName);
            }
            else
                {
                alert(json.message);
            }
        }
        
        return false;
        });
    }
```

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](/images/jueJin/11379cfa36e9491.png)

ç‚¹å‡»ç¡®å®šä¹‹åï¼Œå›¾ç‰‡åœ°å€åˆ™è¢«æ’å…¥åˆ°æ–‡æ¡£ä¸­äº†

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](/images/jueJin/ad7801703e684d5.png)

è‡³æ­¤ ä¸Šä¼ å®Œæˆã€‚å¦‚å…³äºä¸Šä¼ æœ‰ç–‘é—®ï¼Œå¯ä»¥ç›´æ¥ç•™è¨€ã€‚