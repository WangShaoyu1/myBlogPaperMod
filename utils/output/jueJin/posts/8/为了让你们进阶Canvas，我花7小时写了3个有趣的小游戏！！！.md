---
author: "Sunshine_Lin"
title: "ä¸ºäº†è®©ä½ ä»¬è¿›é˜¶Canvasï¼Œæˆ‘èŠ±7å°æ—¶å†™äº†3ä¸ªæœ‰è¶£çš„å°æ¸¸æˆï¼ï¼ï¼"
date: 2021-07-26
description: "å‰è¨€ å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯æ—ä¸‰å¿ƒï¼Œç›¸ä¿¡å¤§å®¶çœ‹äº†æˆ‘å‰ä¸€ç¯‡canvaså…¥é—¨æ–‡ç« ä¸ºäº†è®©å¥¹10åˆ†é’Ÿå…¥é—¨canvasï¼Œæˆ‘ç†¬å¤œå†™äº†3ä¸ªå°é¡¹ç›®å’Œè¿™ç¯‡æ–‡ç« ï¼Œå¯¹canvaså·²ç»æœ‰äº†å…¥é—¨çº§çš„äº†è§£ã€‚ä»Šå¤©ï¼Œæˆ‘åˆç”¨canvaså†™äº†ä¸‰ä¸ª"
tags: ["å‰ç«¯","JavaScriptä¸­æ–‡æŠ€æœ¯ç¤¾åŒº","å‰ç«¯å¼€å‘ç¤¾åŒº","å‰ç«¯æŠ€æœ¯äº¤æµ","å‰ç«¯æ¡†æ¶æ•™ç¨‹","JavaScript å­¦ä¹ èµ„æº","CSS æŠ€å·§ä¸æœ€ä½³å®è·µ","HTML5 æœ€æ–°åŠ¨æ€","å‰ç«¯å·¥ç¨‹å¸ˆèŒä¸šå‘å±•","å¼€æºå‰ç«¯é¡¹ç›®","å‰ç«¯æŠ€æœ¯è¶‹åŠ¿"]
ShowReadingTime: "é˜…è¯»7åˆ†é’Ÿ"
weight: 1
selfDefined:"likes:567,comments:0,collects:732,views:18195,"
---
ã€Œæœ¬æ–‡å·²å‚ä¸å¥½æ–‡å¬é›†ä»¤æ´»åŠ¨ï¼Œç‚¹å‡»æŸ¥çœ‹ï¼š[åç«¯ã€å¤§å‰ç«¯åŒèµ›é“æŠ•ç¨¿ï¼Œ2ä¸‡å…ƒå¥–æ± ç­‰ä½ æŒ‘æˆ˜ï¼](https://juejin.cn/post/6978685539985653767 "https://juejin.cn/post/6978685539985653767")ã€

å‰è¨€
--

å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯æ—ä¸‰å¿ƒï¼Œç›¸ä¿¡å¤§å®¶çœ‹äº†æˆ‘å‰ä¸€ç¯‡canvaså…¥é—¨æ–‡ç« [ä¸ºäº†è®©å¥¹10åˆ†é’Ÿå…¥é—¨canvasï¼Œæˆ‘ç†¬å¤œå†™äº†3ä¸ªå°é¡¹ç›®å’Œè¿™ç¯‡æ–‡ç« ](https://juejin.cn/post/6986785259966857247 "https://juejin.cn/post/6986785259966857247")ï¼Œå¯¹canvaså·²ç»æœ‰äº†å…¥é—¨çº§çš„äº†è§£ã€‚ä»Šå¤©ï¼Œæˆ‘åˆç”¨canvaså†™äº†ä¸‰ä¸ªæœ‰è¶£çš„å°æ¸¸æˆï¼Œæ¥å“„ä½ ä»¬å¼€å¿ƒï¼Œæ²¡é”™ï¼Œæˆ‘çš„å¿ƒé‡Œåªæœ‰ä½ ä»¬ï¼Œæ²¡æœ‰å¥¹ã€‚

![image.png](/images/jueJin/1638d63f2e754ef.png)

![æˆªå±2021-07-25 ä¸Šåˆ12.15.24.png](/images/jueJin/7eabe684f6a949d.png)

ç°åœ¨æ˜¯å‡Œæ™¨0ç‚¹15åˆ†ï¼Œå’±ä»¬å¼€æğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸï¼Œä¸€è¾¹è°ƒè¯•ä¸€è¾¹æŠŠè¿™ç¯‡æ–‡ç« å†™äº†ï¼ï¼ï¼

è´ªåƒè›‡ğŸ
-----

æœ€ç»ˆæ•ˆæœå¦‚ä¸‹ï¼š ![è´ªåƒè›‡.gif](/images/jueJin/c9a17c2d38af4b7.png) å®ç°æ­¥éª¤åˆ†ä¸ºä»¥ä¸‹å‡ æ­¥ï¼š

*   1ã€æŠŠè›‡ç”»å‡ºæ¥
*   2ã€è®©è›‡åŠ¨èµ·æ¥
*   3ã€éšæœºæŠ•æ”¾é£Ÿç‰©
*   4ã€è›‡åƒé£Ÿç‰©
*   5ã€è¾¹ç¼˜æ£€æµ‹ä¸æ’è‡ªå·±æ£€æµ‹

### 1\. æŠŠè›‡ç”»å‡ºæ¥

å…¶å®ç”»è›‡å¾ˆç®€å•ï¼Œè›‡å°±æ˜¯ç”±`è›‡å¤´å’Œè›‡èº«`ç»„æˆï¼Œè€Œå…¶å®éƒ½å¯ä»¥ç”¨`æ­£æ–¹æ ¼`æ¥è¡¨ç¤ºï¼Œ`è›‡å¤´`å°±æ˜¯ä¸€ä¸ªæ–¹æ ¼ï¼Œè€Œ`è›‡èº«`å¯ä»¥æ˜¯å¾ˆå¤šä¸ªæ–¹æ ¼

ç”»æ–¹æ ¼å¯ä»¥ç”¨`ctx.fillRect`æ¥ç”»ï¼Œè›‡å¤´ä½¿ç”¨`head`è¡¨ç¤ºï¼Œè€Œè›‡èº«ä½¿ç”¨`æ•°ç»„body`æ¥è¡¨ç¤º ![æˆªå±2021-07-24 ä¸‹åˆ10.43.46.png](/images/jueJin/1041ce7bd584457.png)

```js
// html
<canvas id="canvas" width="800" height="800"></canvas>

// js


draw()

    function draw() {
    const canvas = document.getElementById('canvas')
    
    const ctx = canvas.getContext('2d')
    
    // å°æ–¹æ ¼çš„æ„é€ å‡½æ•°
        function Rect(x, y, width, height, color) {
        this.x = x
        this.y = y
        this.width = width
        this.height = height
        this.color = color
    }
    
        Rect.prototype.draw = function () {
        ctx.beginPath()
        ctx.fillStyle = this.color
        ctx.fillRect(this.x, this.y, this.width, this.height)
        ctx.strokeRect(this.x, this.y, this.width, this.height)
    }
    
    // è›‡çš„æ„é€ å‡½æ•°
        function Snake(length = 0) {
        
        this.length = length
        // è›‡å¤´
        this.head = new Rect(canvas.width / 2, canvas.height / 2, 40, 40, 'red')
        
        // è›‡èº«
    this.body = []
    
    let x = this.head.x - 40
    let y = this.head.y
    
        for (let i = 0; i < this.length; i++) {
        const rect = new Rect(x, y, 40, 40, 'yellow')
        this.body.push(rect)
        x -= 40
    }
}

    Snake.prototype.drawSnake = function () {
    // ç»˜åˆ¶è›‡å¤´
    this.head.draw()
    // ç»˜åˆ¶è›‡èº«
        for (let i = 0; i < this.body.length; i++) {
        this.body[i].draw()
    }
}

const snake = new Snake(3)
snake.drawSnake()
}
```

### 2\. è®©è›‡åŠ¨èµ·æ¥

è›‡åŠ¨èµ·æ¥æœ‰ä¸¤ç§æƒ…å†µï¼š

*   1ã€è›‡ä¸€å¼€å§‹å°±ä¼šé»˜è®¤å‘å³ç§»åŠ¨
*   2ã€é€šè¿‡æ–¹å‘é”®æ§åˆ¶ï¼Œå¾€ä¸åŒæ–¹å‘ç§»åŠ¨ è¿™ä¸¤ç§æƒ…å†µæ¯ç§’éƒ½æ˜¯ç§»åŠ¨`ä¸€ä¸ªæ–¹æ ¼çš„ä½ç½®`

è®©è›‡åŠ¨èµ·æ¥ï¼Œå…¶å®åŸç†å¾ˆç®€å•ï¼Œæˆ‘å°±ä»¥è›‡å‘å³ç§»åŠ¨æ¥ä¸¾ä¾‹å­å§ï¼š ![æˆªå±2021-07-24 ä¸‹åˆ10.57.06.png](/images/jueJin/1c84595acd37485.png)

*   1ã€è›‡å¤´å…ˆå³ç§»ä¸€ä¸ªæ–¹æ ¼è·ç¦»ï¼Œè›‡èº«ä¸åŠ¨
*   2ã€è›‡èº«`é¦–éƒ¨`åŠ ä¸€ä¸ªæ–¹æ ¼
*   3ã€è›‡èº«`å°¾éƒ¨`çš„æ–¹æ ¼å»é™¤
*   4ã€åˆ©ç”¨å®šæ—¶å™¨ï¼Œé€ æˆè›‡ä¸æ–­å‘å³ç§»åŠ¨çš„è§†è§‰

```js
    Snake.prototype.moveSnake = function () {
    // å°†è›‡å¤´ä¸Šä¸€æ¬¡çŠ¶æ€ï¼Œæ‹¼åˆ°è›‡èº«é¦–éƒ¨
    const rect = new Rect(this.head.x, this.head.y, this.head.width, this.head.height, 'yellow')
    this.body.unshift(rect)
    
    this.body.pop()
    
    // æ ¹æ®æ–¹å‘ï¼Œæ§åˆ¶è›‡å¤´çš„åæ ‡
        switch (this.direction) {
        case 0:
        this.head.x -= this.head.width
        break
        case 1:
        this.head.y -= this.head.height
        break
        case 2:
        this.head.x += this.head.width
        break
        case 3:
        this.head.y += this.head.height
        break
    }
}

    document.onkeydown = function (e) {
    // é”®ç›˜äº‹ä»¶
    e = e || window.event
    // å·¦37  ä¸Š38  å³39  ä¸‹40
        switch (e.keyCode) {
        case 37:
        console.log(37)
        // ä¸‰å…ƒè¡¨è¾¾å¼ï¼Œé˜²æ­¢å³ç§»åŠ¨æ—¶æŒ‰å·¦ï¼Œä¸‹é¢åŒç†(è´ªåƒè›‡å¯ä¸èƒ½ç›´æ¥æ‰å¤´)
        snake.direction = snake.direction === 2 ? 2 : 0
        snake.moveSnake()
        break
        case 38:
        console.log(38)
        snake.direction = snake.direction === 3 ? 3 : 1
        break
        case 39:
        console.log(39)
        snake.direction = snake.direction === 0 ? 0 : 2
        break
        case 40:
        console.log(40)
        snake.direction = snake.direction === 1 ? 1 : 3
        break
        
    }
}

const snake = new Snake(3)
// é»˜è®¤directionä¸º2ï¼Œä¹Ÿå°±æ˜¯å³
snake.direction = 2
snake.drawSnake()

    function animate() {
    // å…ˆæ¸…ç©º
    ctx.clearRect(0, 0, canvas.width, canvas.height)
    // ç§»åŠ¨
    snake.moveSnake()
    // å†ç”»
    snake.drawSnake()
}

    var timer = setInterval(() => {
    animate()
    }, 100)
}
```

å®ç°æ•ˆæœå¦‚ä¸‹ï¼š

![è›‡åŠ¨èµ·æ¥.gif](/images/jueJin/1f45bd60bb9545f.png)

### 3\. éšæœºæŠ•æ”¾é£Ÿç‰©

éšæœºæŠ•æ”¾é£Ÿç‰©ï¼Œä¹Ÿå°±æ˜¯åœ¨ç”»å¸ƒä¸­éšæœºç”»ä¸€ä¸ªæ–¹æ ¼ï¼Œè¦æ³¨æ„ä»¥ä¸‹ä¸¤ç‚¹ï¼š

*   1ã€åæ ‡è¦åœ¨ç”»å¸ƒ`èŒƒå›´å†…`
*   2ã€é£Ÿç‰©`ä¸èƒ½æŠ•åˆ°è›‡èº«æˆ–è€…è›‡å¤´ä¸Š`(è¿™æ ·ä¼šæŠŠè›‡ç ¸æ™•çš„å˜¿å˜¿)

```js
    function randomFood(snake) {
    let isInSnake = true
    let rect
        while (isInSnake) {
        const x = Math.round(Math.random() * (canvas.width - 40) / 40) * 40
        const y = Math.round(Math.random() * (canvas.height - 40) / 40) * 40
        console.log(x, y)
        // ä¿è¯æ˜¯40çš„å€æ•°å•Š
        rect = new Rect(x, y, 40, 40, 'blue')
        // åˆ¤æ–­é£Ÿç‰©æ˜¯å¦ä¸è›‡å¤´è›‡èº«é‡å 
            if ((snake.head.x === x && snake.head.y === y) || snake.body.find(item => item.x === x && item.y === y)) {
            isInSnake = true
            continue
                } else {
                isInSnake = false
            }
        }
        return rect
    }
    
    const snake = new Snake(3)
    // é»˜è®¤directionä¸º2ï¼Œä¹Ÿå°±æ˜¯å³
    snake.direction = 2
    snake.drawSnake()
    // åˆ›å»ºéšæœºé£Ÿç‰©å®ä¾‹
    var food = randomFood(snake)
    // ç”»å‡ºé£Ÿç‰©
    food.draw()
    
        function animate() {
        // å…ˆæ¸…ç©º
        ctx.clearRect(0, 0, canvas.width, canvas.height)
        // ç§»åŠ¨
        snake.moveSnake()
        // å†ç”»
        snake.drawSnake()
        food.draw()
    }
```

æ•ˆæœå¦‚ä¸‹ï¼Œéšæœºé£Ÿç‰©ç”»å‡ºæ¥äº†ï¼š ![æˆªå±2021-07-24 ä¸‹åˆ11.17.03.png](/images/jueJin/8c1197ee84ed413.png)

### 4\. è›‡åƒé£Ÿç‰©

å…¶å®è›‡åƒé£Ÿç‰©ï¼Œå¾ˆç®€å•ç†è§£ï¼Œä¹Ÿå°±æ˜¯è›‡å¤´ç§»åŠ¨åˆ°è·Ÿé£Ÿç‰©çš„`åæ ‡é‡å `æ—¶ï¼Œå°±ç®—æ˜¯åƒåˆ°é£Ÿç‰©äº†ï¼Œæ³¨æ„ä¸¤ç‚¹ï¼š

*   1ã€åƒåˆ°é£Ÿç‰©åï¼Œè›‡èº«è¦`å»¶é•¿ä¸€ä¸ªç©ºæ ¼`
*   2ã€åƒåˆ°é£Ÿç‰©åï¼Œéšæœºé£Ÿç‰©è¦`å˜æ¢ä½ç½®`

```js
const canvas = document.getElementById('canvas')

const ctx = canvas.getContext('2d')

// å®šä¹‰ä¸€ä¸ªå…¨å±€çš„æ˜¯å¦åƒåˆ°é£Ÿç‰©çš„ä¸€ä¸ªå˜é‡
let isEatFood = false


    Snake.prototype.moveSnake = function () {
    // å°†è›‡å¤´ä¸Šä¸€æ¬¡çŠ¶æ€ï¼Œæ‹¼åˆ°è›‡èº«é¦–éƒ¨
    const rect = new Rect(this.head.x, this.head.y, this.head.width, this.head.height, 'yellow')
    this.body.unshift(rect)
    
    // åˆ¤æ–­è›‡å¤´æ˜¯å¦ä¸é£Ÿç‰©é‡å ï¼Œé‡å å°±æ˜¯åƒåˆ°äº†ï¼Œæ²¡é‡å å°±æ˜¯æ²¡åƒåˆ°
    isEatFood = food && this.head.x === food.x && this.head.y === food.y
    
    // å’±ä»¬ä¸Šé¢åœ¨è›‡èº«é¦–éƒ¨æ’å…¥æ–¹æ ¼
        if (!isEatFood) {
        // æ²¡åƒåˆ°å°±è¦å»å°¾ï¼Œç›¸å½“äºæ•´æ¡è›‡æ²¡å˜é•¿
        this.body.pop()
            } else {
            // åƒåˆ°äº†å°±ä¸å»å°¾ï¼Œç›¸å½“äºæ•´æ¡è›‡å»¶é•¿ä¸€ä¸ªæ–¹æ ¼
            
            // å¹¶ä¸”åƒåˆ°äº†ï¼Œå°±è¦é‡æ–°ç”Ÿæˆä¸€ä¸ªéšæœºé£Ÿç‰©
            food = randomFood(this)
            food.draw()
            isEatFood = false
        }
        
        // æ ¹æ®æ–¹å‘ï¼Œæ§åˆ¶è›‡å¤´çš„åæ ‡
            switch (this.direction) {
            case 0:
            this.head.x -= this.head.width
            break
            case 1:
            this.head.y -= this.head.height
            break
            case 2:
            this.head.x += this.head.width
            break
            case 3:
            this.head.y += this.head.height
            break
        }
    }
```

### 5\. ç¢°è¾¹ç•Œä¸ç¢°è‡ªå·±

ä¼—æ‰€å‘¨çŸ¥ï¼Œè›‡å¤´ç¢°åˆ°è¾¹ç•Œï¼Œæˆ–è€…ç¢°åˆ°è›‡èº«ï¼Œéƒ½ä¼šç»ˆæ­¢æ¸¸æˆ

```js
    Snake.prototype.drawSnake = function () {
    // å¦‚æœç¢°åˆ°äº†
        if (isHit(this)) {
        // æ¸…é™¤å®šæ—¶å™¨
        clearInterval(timer)
        const con = confirm(`æ€»å…±åƒäº†${this.body.length - this.length}ä¸ªé£Ÿç‰©ï¼Œé‡æ–°å¼€å§‹å—`)
        // æ˜¯å¦é‡å¼€
            if (con) {
            draw()
        }
        return
    }
    // ç»˜åˆ¶è›‡å¤´
    this.head.draw()
    // ç»˜åˆ¶è›‡èº«
        for (let i = 0; i < this.body.length; i++) {
        this.body[i].draw()
    }
}


    function isHit(snake) {
    const head = snake.head
    // æ˜¯å¦ç¢°åˆ°å·¦å³è¾¹ç•Œ
    const xLimit = head.x < 0 || head.x >= canvas.width
    // æ˜¯å¦ç¢°åˆ°ä¸Šä¸‹è¾¹ç•Œ
    const yLimit = head.y < 0 || head.y >= canvas.height
    // æ˜¯å¦æ’åˆ°è›‡èº«
    const hitSelf = snake.body.find(({ x, y }) => head.x === x && head.y === y)
    // ä¸‰è€…å…¶ä¸­ä¸€ä¸ªä¸ºtrueåˆ™æ¸¸æˆç»“æŸ
    return xLimit || yLimit || hitSelf
}
```

è‡ªæ­¤ï¼Œè´ªåƒè›‡ğŸå°æ¸¸æˆå®Œæˆå–½ï¼š ![è´ªåƒè›‡.gif](/images/jueJin/c9a17c2d38af4b7.png)

### 6\. å…¨éƒ¨ä»£ç ï¼š

```js

draw()

    function draw() {
    const canvas = document.getElementById('canvas')
    
    const ctx = canvas.getContext('2d')
    
    // å®šä¹‰ä¸€ä¸ªå…¨å±€çš„æ˜¯å¦åƒåˆ°é£Ÿç‰©çš„ä¸€ä¸ªå˜é‡
    let isEatFood = false
    
    // å°æ–¹æ ¼çš„æ„é€ å‡½æ•°
        function Rect(x, y, width, height, color) {
        this.x = x
        this.y = y
        this.width = width
        this.height = height
        this.color = color
    }
    
        Rect.prototype.draw = function () {
        ctx.beginPath()
        ctx.fillStyle = this.color
        ctx.fillRect(this.x, this.y, this.width, this.height)
        ctx.strokeRect(this.x, this.y, this.width, this.height)
    }
    
    // è›‡çš„æ„é€ å‡½æ•°
        function Snake(length = 0) {
        
        this.length = length
        // è›‡å¤´
        this.head = new Rect(canvas.width / 2, canvas.height / 2, 40, 40, 'red')
        
        // è›‡èº«
    this.body = []
    
    let x = this.head.x - 40
    let y = this.head.y
    
        for (let i = 0; i < this.length; i++) {
        const rect = new Rect(x, y, 40, 40, 'yellow')
        this.body.push(rect)
        x -= 40
    }
}

    Snake.prototype.drawSnake = function () {
    // å¦‚æœç¢°åˆ°äº†
        if (isHit(this)) {
        // æ¸…é™¤å®šæ—¶å™¨
        clearInterval(timer)
        const con = confirm(`æ€»å…±åƒäº†${this.body.length - this.length}ä¸ªé£Ÿç‰©ï¼Œé‡æ–°å¼€å§‹å—`)
        // æ˜¯å¦é‡å¼€
            if (con) {
            draw()
        }
        return
    }
    // ç»˜åˆ¶è›‡å¤´
    this.head.draw()
    // ç»˜åˆ¶è›‡èº«
        for (let i = 0; i < this.body.length; i++) {
        this.body[i].draw()
    }
}

    Snake.prototype.moveSnake = function () {
    // å°†è›‡å¤´ä¸Šä¸€æ¬¡çŠ¶æ€ï¼Œæ‹¼åˆ°è›‡èº«é¦–éƒ¨
    const rect = new Rect(this.head.x, this.head.y, this.head.width, this.head.height, 'yellow')
    this.body.unshift(rect)
    
    // åˆ¤æ–­è›‡å¤´æ˜¯å¦ä¸é£Ÿç‰©é‡å ï¼Œé‡å å°±æ˜¯åƒåˆ°äº†ï¼Œæ²¡é‡å å°±æ˜¯æ²¡åƒåˆ°
    isEatFood = food && this.head.x === food.x && this.head.y === food.y
    
    // å’±ä»¬ä¸Šé¢åœ¨è›‡èº«é¦–éƒ¨æ’å…¥æ–¹æ ¼
        if (!isEatFood) {
        // æ²¡åƒåˆ°å°±è¦å»å°¾ï¼Œç›¸å½“äºæ•´æ¡è›‡æ²¡å˜é•¿
        this.body.pop()
            } else {
            // åƒåˆ°äº†å°±ä¸å»å°¾ï¼Œç›¸å½“äºæ•´æ¡è›‡å»¶é•¿ä¸€ä¸ªæ–¹æ ¼
            
            // å¹¶ä¸”åƒåˆ°äº†ï¼Œå°±è¦é‡æ–°ç”Ÿæˆä¸€ä¸ªéšæœºé£Ÿç‰©
            food = randomFood(this)
            food.draw()
            isEatFood = false
        }
        
        // æ ¹æ®æ–¹å‘ï¼Œæ§åˆ¶è›‡å¤´çš„åæ ‡
            switch (this.direction) {
            case 0:
            this.head.x -= this.head.width
            break
            case 1:
            this.head.y -= this.head.height
            break
            case 2:
            this.head.x += this.head.width
            break
            case 3:
            this.head.y += this.head.height
            break
        }
    }
    
        document.onkeydown = function (e) {
        // é”®ç›˜äº‹ä»¶
        e = e || window.event
        // å·¦37  ä¸Š38  å³39  ä¸‹40
            switch (e.keyCode) {
            case 37:
            console.log(37)
            // ä¸‰å…ƒè¡¨è¾¾å¼ï¼Œé˜²æ­¢å³ç§»åŠ¨æ—¶æŒ‰å·¦ï¼Œä¸‹é¢åŒç†(è´ªåƒè›‡å¯ä¸èƒ½ç›´æ¥æ‰å¤´)
            snake.direction = snake.direction === 2 ? 2 : 0
            snake.moveSnake()
            break
            case 38:
            console.log(38)
            snake.direction = snake.direction === 3 ? 3 : 1
            break
            case 39:
            console.log(39)
            snake.direction = snake.direction === 0 ? 0 : 2
            break
            case 40:
            console.log(40)
            snake.direction = snake.direction === 1 ? 1 : 3
            break
            
        }
    }
    
        function randomFood(snake) {
        let isInSnake = true
        let rect
            while (isInSnake) {
            const x = Math.round(Math.random() * (canvas.width - 40) / 40) * 40
            const y = Math.round(Math.random() * (canvas.height - 40) / 40) * 40
            console.log(x, y)
            // ä¿è¯æ˜¯40çš„å€æ•°å•Š
            rect = new Rect(x, y, 40, 40, 'blue')
            // åˆ¤æ–­é£Ÿç‰©æ˜¯å¦ä¸è›‡å¤´è›‡èº«é‡å 
                if ((snake.head.x === x && snake.head.y === y) || snake.body.find(item => item.x === x && item.y === y)) {
                isInSnake = true
                continue
                    } else {
                    isInSnake = false
                }
            }
            return rect
        }
        
            function isHit(snake) {
            const head = snake.head
            // æ˜¯å¦ç¢°åˆ°å·¦å³è¾¹ç•Œ
            const xLimit = head.x < 0 || head.x >= canvas.width
            // æ˜¯å¦ç¢°åˆ°ä¸Šä¸‹è¾¹ç•Œ
            const yLimit = head.y < 0 || head.y >= canvas.height
            // æ˜¯å¦æ’åˆ°è›‡èº«
            const hitSelf = snake.body.find(({ x, y }) => head.x === x && head.y === y)
            // ä¸‰è€…å…¶ä¸­ä¸€ä¸ªä¸ºtrueåˆ™æ¸¸æˆç»“æŸ
            return xLimit || yLimit || hitSelf
        }
        
        const snake = new Snake(3)
        // é»˜è®¤directionä¸º2ï¼Œä¹Ÿå°±æ˜¯å³
        snake.direction = 2
        snake.drawSnake()
        // åˆ›å»ºéšæœºé£Ÿç‰©å®ä¾‹
        var food = randomFood(snake)
        // ç”»å‡ºé£Ÿç‰©
        food.draw()
        
            function animate() {
            // å…ˆæ¸…ç©º
            ctx.clearRect(0, 0, canvas.width, canvas.height)
            // ç§»åŠ¨
            snake.moveSnake()
            // å†ç”»
            snake.drawSnake()
            food.draw()
        }
        
            var timer = setInterval(() => {
            animate()
            }, 100)
        }
```

æ˜Ÿæ˜Ÿè¿çº¿
----

æ•ˆæœå¦‚ä¸‹ï¼Œæ˜¯ä¸æ˜¯å¾ˆé…·ç‚«å‘¢ï¼Œå…„å¼Ÿä»¬ï¼ˆ[èƒŒæ™¯å›¾ç‰‡](https://link.juejin.cn?target=https%3A%2F%2Fimage.baidu.com%2Fsearch%2Fdetail%3Fct%3D503316480%26z%3D9%26ipn%3Dd%26word%3D%25E5%2585%2589%25E8%2583%25BD%25E4%25BD%25BF%25E8%2580%2585%26step_word%3D%26hs%3D0%26pn%3D0%26spn%3D0%26di%3D1980%26pi%3D0%26rn%3D1%26tn%3Dbaiduimagedetail%26is%3D0%252C0%26istype%3D0%26ie%3Dutf-8%26oe%3Dutf-8%26in%3D%26cl%3D2%26lm%3D-1%26st%3Dundefined%26cs%3D2835075056%252C3833573215%26os%3D3464699116%252C4100809266%26simid%3D5214747%252C605858583%26adpicid%3D0%26lpn%3D0%26ln%3D1560%26fr%3D%26fmq%3D1627141100748_R%26fm%3D%26ic%3Dundefined%26s%3Dundefined%26hd%3Dundefined%26latest%3Dundefined%26copyright%3Dundefined%26se%3D%26sme%3D%26tab%3D0%26width%3D0%26height%3D0%26face%3Dundefined%26ist%3D%26jit%3D%26cg%3D%26bdtype%3D0%26oriquery%3D%26objurl%3Dhttps%253A%252F%252Fgimg2.baidu.com%252Fimage_search%252Fsrc%253Dhttp%253A%252F%252Fimg.zcool.cn%252Fcommunity%252F0128ac5d2a0338a80120b5ab29051f.jpg%25402o.jpg%2526refer%253Dhttp%253A%252F%252Fimg.zcool.cn%2526app%253D2002%2526size%253Df9999%252C10000%2526q%253Da80%2526n%253D0%2526g%253D0n%2526fmt%253Djpeg%253Fsec%253D1629733107%2526t%253D83a732b85359a8b4063775fedcd6141a%26fromurl%3Dippr_z2C%2524qAzdH3FAzdH3Fooo_z%2526e3Bzv55s_z%2526e3Bv54_z%2526e3BvgAzdH3Fo56hAzdH3FZMzv8MzQdNzY%253DAzdH3F8_z%2526e3Bip4s%26gsm%3D1%26rpstart%3D0%26rpnum%3D0%26islist%3D%26querylist%3D%26nojc%3Dundefined "https://image.baidu.com/search/detail?ct=503316480&z=9&ipn=d&word=%E5%85%89%E8%83%BD%E4%BD%BF%E8%80%85&step_word=&hs=0&pn=0&spn=0&di=1980&pi=0&rn=1&tn=baiduimagedetail&is=0%2C0&istype=0&ie=utf-8&oe=utf-8&in=&cl=2&lm=-1&st=undefined&cs=2835075056%2C3833573215&os=3464699116%2C4100809266&simid=5214747%2C605858583&adpicid=0&lpn=0&ln=1560&fr=&fmq=1627141100748_R&fm=&ic=undefined&s=undefined&hd=undefined&latest=undefined&copyright=undefined&se=&sme=&tab=0&width=0&height=0&face=undefined&ist=&jit=&cg=&bdtype=0&oriquery=&objurl=https%3A%2F%2Fgimg2.baidu.com%2Fimage_search%2Fsrc%3Dhttp%3A%2F%2Fimg.zcool.cn%2Fcommunity%2F0128ac5d2a0338a80120b5ab29051f.jpg%402o.jpg%26refer%3Dhttp%3A%2F%2Fimg.zcool.cn%26app%3D2002%26size%3Df9999%2C10000%26q%3Da80%26n%3D0%26g%3D0n%26fmt%3Djpeg%3Fsec%3D1629733107%26t%3D83a732b85359a8b4063775fedcd6141a&fromurl=ippr_z2C%24qAzdH3FAzdH3Fooo_z%26e3Bzv55s_z%26e3Bv54_z%26e3BvgAzdH3Fo56hAzdH3FZMzv8MzQdNzY%3DAzdH3F8_z%26e3Bip4s&gsm=1&rpstart=0&rpnum=0&islist=&querylist=&nojc=undefined") å¯ä»¥è‡ªå·±å»ä¸‹è½½ä¸€ä¸‹ï¼‰ï¼š

![æ˜Ÿæ˜Ÿè¿çº¿.gif](/images/jueJin/9887034ec4e6410.png)

è¿™ä¸ªå°æ¸¸æˆå¯åˆ†ä¸ºä»¥ä¸‹å‡ æ­¥ï¼š

*   1ã€ç”»å‡ºå•ä¸ªå°æ˜Ÿæ˜Ÿå¹¶ä½¿ä»–`ç§»åŠ¨`
*   2ã€é€ å‡º`ä¸€ç™¾ä¸ª`å°æ˜Ÿæ˜Ÿ
*   3ã€æ˜Ÿæ˜Ÿä¹‹é—´é è¿‘æ—¶ï¼Œè¿›è¡Œ`è¿çº¿`
*   4ã€é¼ æ ‡`ç§»åŠ¨ç”Ÿæˆ`å°æ˜Ÿæ˜Ÿ
*   5ã€é¼ æ ‡ç‚¹å‡»äº§ç”Ÿ`5ä¸ªå°æ˜Ÿæ˜Ÿ`

### 1\. ç”»å‡ºå•ä¸ªå°æ˜Ÿæ˜Ÿï¼Œå¹¶ä½¿ä»–ç§»åŠ¨

å…¶å®ç§»åŠ¨æ˜Ÿæ˜Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯æ¸…é™¤åé‡æ–°ç»˜åˆ¶æ˜Ÿæ˜Ÿï¼Œå¹¶åˆ©ç”¨å®šæ—¶å™¨ï¼Œå°±ä¼šæœ‰ç§»åŠ¨çš„è§†è§‰äº†ã€‚æ³¨æ„ç‚¹åœ¨äºï¼š`ç¢°åˆ°è¾¹ç•Œè¦åå¼¹`ã€‚

```js
// html
<style>
    #canvas {
    background: url(./å…‰èƒ½ä½¿è€….jpg) 0 0/cover no-repeat;
}
</style>
<canvas id="canvas"></canvas>

// js

const canvas = document.getElementById('canvas')

const ctx = canvas.getContext('2d')

// è·å–å½“å‰è§†å›¾çš„å®½åº¦å’Œé«˜åº¦
let aw = document.documentElement.clientWidth || document.body.clientWidth
let ah = document.documentElement.clientHeight || document.body.clientHeight
// èµ‹å€¼ç»™canvas
canvas.width = aw
canvas.height = ah

// å±å¹•å˜åŠ¨æ—¶ä¹Ÿè¦ç›‘å¬å®æ—¶å®½é«˜
    window.onresize = function () {
    aw = document.documentElement.clientWidth || document.body.clientWidth
    ah = document.documentElement.clientHeight || document.body.clientHeight
    // èµ‹å€¼ç»™canvas
    canvas.width = aw
    canvas.height = ah
}

// æœ¬æ¸¸æˆæ— è®ºæ˜¯å®å¿ƒï¼Œè¿˜æ˜¯çº¿æ¡ï¼Œè‰²è°ƒéƒ½æ˜¯ç™½è‰²
ctx.fillStyle = 'white'
ctx.strokeStyle = 'white'

    function Star(x, y, r) {
    // xï¼Œyæ˜¯åæ ‡ï¼Œræ˜¯åŠå¾„
    this.x = x
    this.y = y
    this.r = r
    // speedå‚æ•°ï¼Œåœ¨  -3 ~ 3 ä¹‹é—´å–å€¼
    this.speedX = (Math.random() * 3) * Math.pow(-1, Math.round(Math.random()))
    this.speedY = (Math.random() * 3) * Math.pow(-1, Math.round(Math.random()))
}

    Star.prototype.draw = function () {
    ctx.beginPath()
    ctx.arc(this.x, this.y, this.r, 0, Math.PI * 2)
    ctx.fill()
    ctx.closePath()
}

    Star.prototype.move = function () {
    this.x -= this.speedX
    this.y -= this.speedY
    // ç¢°åˆ°è¾¹ç•Œæ—¶ï¼Œåå¼¹ï¼Œåªéœ€è¦æŠŠspeedå–åå°±è¡Œ
    if (this.x < 0 || this.x > aw) this.speedX *= -1
    if (this.y < 0 || this.y > ah) this.speedY *= -1
}

// éšæœºåœ¨canvasèŒƒå›´å†…æ‰¾ä¸€ä¸ªåæ ‡ç”»æ˜Ÿæ˜Ÿ
const star = new Star(Math.random() * aw, Math.random() * ah, 3)
star

// æ˜Ÿæ˜Ÿçš„ç§»åŠ¨
    setInterval(() => {
    ctx.clearRect(0, 0, aw, ah)
    star.move()
    star.draw()
    }, 50)
```

è¾¾åˆ°ä»¥ä¸‹`ç§»åŠ¨ä»¥åŠåå¼¹`çš„æ•ˆæœï¼š

![æ˜Ÿæ˜Ÿåå¼¹.gif](/images/jueJin/fb768cbe366f42c.png)

### 2ã€ç”»100ä¸ªå°æ˜Ÿæ˜Ÿ

åˆ›å»ºä¸€ä¸ª`æ•°ç»„stars`æ¥å­˜å‚¨è¿™äº›æ˜Ÿæ˜Ÿ

```js
const stars = []
    for (let i = 0; i < 100; i++) {
    // éšæœºåœ¨canvasèŒƒå›´å†…æ‰¾ä¸€ä¸ªåæ ‡ç”»æ˜Ÿæ˜Ÿ
    stars.push(new Star(Math.random() * aw, Math.random() * ah, 3))
}

// æ˜Ÿæ˜Ÿçš„ç§»åŠ¨
    setInterval(() => {
    ctx.clearRect(0, 0, aw, ah)
    // éå†ç§»åŠ¨æ¸²æŸ“
        stars.forEach(star => {
        star.move()
        star.draw()
        })
        }, 50)
```

æ•ˆæœå¦‚ä¸‹ï¼š

![100ä¸ªæ˜Ÿæ˜Ÿ.gif](/images/jueJin/397260469b8e434.png)

### 3\. æ˜Ÿæ˜Ÿä¹‹é—´é è¿‘æ—¶ï¼Œè¿›è¡Œè¿çº¿

å½“ä¸¤ä¸ªæ˜Ÿæ˜Ÿçš„xå’Œyç›¸å·®éƒ½å°äº50æ—¶ï¼Œå°±è¿›è¡Œè¿çº¿ï¼Œè¿çº¿åªéœ€è¦ä½¿ç”¨`ctx.moveToå’Œctx.lineTo`å°±å¯ä»¥äº†

```js
    function drawLine(startX, startY, endX, endY) {
    ctx.beginPath()
    ctx.moveTo(startX, startY)
    ctx.lineTo(endX, endY)
    ctx.stroke()
    ctx.closePath()
}

// æ˜Ÿæ˜Ÿçš„ç§»åŠ¨
    setInterval(() => {
    ctx.clearRect(0, 0, aw, ah)
    // éå†ç§»åŠ¨æ¸²æŸ“
        stars.forEach(star => {
        star.move()
        star.draw()
        })
            stars.forEach((star, index) => {
            // ç±»ä¼¼äºå†’æ³¡æ’åºé‚£æ ·ï¼Œå»æ¯”è¾ƒï¼Œç¡®ä¿æ‰€æœ‰æ˜Ÿæ˜Ÿä¸¤ä¸¤ä¹‹é—´éƒ½æ¯”è¾ƒåˆ°
                for (let i = index + 1; i < stars.length; i++) {
                    if (Math.abs(star.x - stars[i].x) < 50 && Math.abs(star.y - stars[i].y) < 50) {
                    drawLine(star.x, star.y, stars[i].x, stars[i].y)
                }
            }
            })
            }, 50)
```

å¤§å®¶å¯ä»¥æƒ³ä¸€æƒ³ï¼Œä¸ºä»€ä¹ˆ`ä¸¤ä¸ªforEach`ä¸èƒ½ä½•åœ¨ä¸€èµ·å»æ‰§è¡Œã€‚è¿™æ˜¯ä¸ªå€¼å¾—æ€è€ƒçš„é—®é¢˜ï¼Œæˆ–è€…å¤§å®¶å¯ä»¥åˆå¹¶åœ¨ä¸€èµ·æ‰§è¡Œï¼Œè¯•è¯•æ•ˆæœï¼Œè·å–å°±æ‡‚äº†ã€‚ç®—æ˜¯ç»™å¤§å®¶ç•™çš„ä¸€ä¸ªä½œä¸šå“ˆï¼

æ•ˆæœå¦‚ä¸‹ï¼š

![è¿çº¿æ˜Ÿæ˜Ÿ.gif](/images/jueJin/847a6208155642b.png)

### 4.é¼ æ ‡ç§»åŠ¨æ—¶å¸¦ç€å°æ˜Ÿæ˜Ÿ

ä¹Ÿå°±æ˜¯é¼ æ ‡åˆ°å“ªï¼Œé‚£ä¸ªå°æ˜Ÿæ˜Ÿå°±åˆ°å“ªï¼Œå¹¶ä¸”è¿™ä¸ªå°æ˜Ÿæ˜Ÿèµ°åˆ°å“ªéƒ½ä¼šè·Ÿè·ç¦»è¿‘çš„å°æ˜Ÿæ˜Ÿ`è¿çº¿`

```js
const mouseStar = new Star(0, 0, 3)

    canvas.onmousemove = function (e) {
    mouseStar.x = e.clientX
    mouseStar.y = e.clientY
}

// æ˜Ÿæ˜Ÿçš„ç§»åŠ¨
    setInterval(() => {
    ctx.clearRect(0, 0, aw, ah)
    // é¼ æ ‡æ˜Ÿæ˜Ÿæ¸²æŸ“
    mouseStar.draw()
    // éå†ç§»åŠ¨æ¸²æŸ“
        stars.forEach(star => {
        star.move()
        star.draw()
        })
            stars.forEach((star, index) => {
            // ç±»ä¼¼äºå†’æ³¡æ’åºé‚£æ ·ï¼Œå»æ¯”è¾ƒï¼Œç¡®ä¿æ‰€æœ‰æ˜Ÿæ˜Ÿä¸¤ä¸¤ä¹‹é—´éƒ½æ¯”è¾ƒåˆ°
                for (let i = index + 1; i < stars.length; i++) {
                    if (Math.abs(star.x - stars[i].x) < 50 && Math.abs(star.y - stars[i].y) < 50) {
                    drawLine(star.x, star.y, stars[i].x, stars[i].y)
                }
            }
            // åˆ¤æ–­é¼ æ ‡æ˜Ÿæ˜Ÿè¿çº¿
                if (Math.abs(mouseStar.x - star.x) < 50 && Math.abs(mouseStar.y - star.y) < 50) {
                drawLine(mouseStar.x, mouseStar.y, star.x, star.y)
            }
            })
            }, 50)
```

æ•ˆæœå¦‚ä¸‹ï¼š

![é¼ æ ‡æ˜Ÿæ˜Ÿ.gif](/images/jueJin/c8c1e1bd6fba449.png)

### 5\. é¼ æ ‡ç‚¹å‡»ç”Ÿæˆäº”ä¸ªå°æ˜Ÿæ˜Ÿ

æ€è·¯å°±æ˜¯ï¼Œé¼ æ ‡ç‚¹å‡»ï¼Œç”Ÿæˆ5ä¸ªå°æ˜Ÿæ˜Ÿï¼Œå¹¶åŠ åˆ°`æ•°ç»„stars`ä¸­

```js
    window.onclick = function (e) {
        for (let i = 0; i < 5; i++) {
        stars.push(new Star(e.clientX, e.clientY, 3))
    }
}
```

æ•ˆæœå¦‚ä¸‹ï¼š

![ç‚¹å‡»ç”Ÿæˆæ˜Ÿæ˜Ÿ.gif](/images/jueJin/fbfd32bdb2a84f7.png)

æœ€ç»ˆæ•ˆæœï¼š ![æ˜Ÿæ˜Ÿè¿çº¿.gif](/images/jueJin/9887034ec4e6410.png)

### 6\. å…¨éƒ¨ä»£ç 

```js
const canvas = document.getElementById('canvas')

const ctx = canvas.getContext('2d')

// è·å–å½“å‰è§†å›¾çš„å®½åº¦å’Œé«˜åº¦
let aw = document.documentElement.clientWidth || document.body.clientWidth
let ah = document.documentElement.clientHeight || document.body.clientHeight
// èµ‹å€¼ç»™canvas
canvas.width = aw
canvas.height = ah

// å±å¹•å˜åŠ¨æ—¶ä¹Ÿè¦ç›‘å¬å®æ—¶å®½é«˜
    window.onresize = function () {
    aw = document.documentElement.clientWidth || document.body.clientWidth
    ah = document.documentElement.clientHeight || document.body.clientHeight
    // èµ‹å€¼ç»™canvas
    canvas.width = aw
    canvas.height = ah
}

// æœ¬æ¸¸æˆæ— è®ºæ˜¯å®å¿ƒï¼Œè¿˜æ˜¯çº¿æ¡ï¼Œè‰²è°ƒéƒ½æ˜¯ç™½è‰²
ctx.fillStyle = 'white'
ctx.strokeStyle = 'white'

    function Star(x, y, r) {
    // xï¼Œyæ˜¯åæ ‡ï¼Œræ˜¯åŠå¾„
    this.x = x
    this.y = y
    this.r = r
    // speedå‚æ•°ï¼Œåœ¨  -3 ~ 3 ä¹‹é—´å–å€¼
    this.speedX = (Math.random() * 3) * Math.pow(-1, Math.round(Math.random()))
    this.speedY = (Math.random() * 3) * Math.pow(-1, Math.round(Math.random()))
}

    Star.prototype.draw = function () {
    ctx.beginPath()
    ctx.arc(this.x, this.y, this.r, 0, Math.PI * 2)
    ctx.fill()
    ctx.closePath()
}

    Star.prototype.move = function () {
    this.x -= this.speedX
    this.y -= this.speedY
    // ç¢°åˆ°è¾¹ç•Œæ—¶ï¼Œåå¼¹ï¼Œåªéœ€è¦æŠŠspeedå–åå°±è¡Œ
    if (this.x < 0 || this.x > aw) this.speedX *= -1
    if (this.y < 0 || this.y > ah) this.speedY *= -1
}

    function drawLine(startX, startY, endX, endY) {
    ctx.beginPath()
    ctx.moveTo(startX, startY)
    ctx.lineTo(endX, endY)
    ctx.stroke()
    ctx.closePath()
}

const stars = []
    for (let i = 0; i < 100; i++) {
    // éšæœºåœ¨canvasèŒƒå›´å†…æ‰¾ä¸€ä¸ªåæ ‡ç”»æ˜Ÿæ˜Ÿ
    stars.push(new Star(Math.random() * aw, Math.random() * ah, 3))
}

const mouseStar = new Star(0, 0, 3)

    canvas.onmousemove = function (e) {
    mouseStar.x = e.clientX
    mouseStar.y = e.clientY
}
    window.onclick = function (e) {
        for (let i = 0; i < 5; i++) {
        stars.push(new Star(e.clientX, e.clientY, 3))
    }
}

// æ˜Ÿæ˜Ÿçš„ç§»åŠ¨
    setInterval(() => {
    ctx.clearRect(0, 0, aw, ah)
    // é¼ æ ‡æ˜Ÿæ˜Ÿæ¸²æŸ“
    mouseStar.draw()
    // éå†ç§»åŠ¨æ¸²æŸ“
        stars.forEach(star => {
        star.move()
        star.draw()
        })
            stars.forEach((star, index) => {
            // ç±»ä¼¼äºå†’æ³¡æ’åºé‚£æ ·ï¼Œå»æ¯”è¾ƒï¼Œç¡®ä¿æ‰€æœ‰æ˜Ÿæ˜Ÿä¸¤ä¸¤ä¹‹é—´éƒ½æ¯”è¾ƒåˆ°
                for (let i = index + 1; i < stars.length; i++) {
                    if (Math.abs(star.x - stars[i].x) < 50 && Math.abs(star.y - stars[i].y) < 50) {
                    drawLine(star.x, star.y, stars[i].x, stars[i].y)
                }
            }
            
                if (Math.abs(mouseStar.x - star.x) < 50 && Math.abs(mouseStar.y - star.y) < 50) {
                drawLine(mouseStar.x, mouseStar.y, star.x, star.y)
            }
            })
            }, 50)
```

3\. äº”å­æ£‹
-------

çœ‹çœ‹å°†å®ç°çš„æ•ˆæœï¼š

![æˆªå±2021-07-25 ä¸‹åˆ12.21.39.png](/images/jueJin/b9e5dafca2064e4.png) äº”å­æ£‹åˆ†ä¸ºä»¥ä¸‹æ­¥éª¤ï¼š

*   1ã€ç”»å‡ºæ£‹ç›˜
*   2ã€é»‘ç™½æ£‹åˆ‡æ¢ç€ä¸‹ï¼Œ`ä¸èƒ½è¦†ç›–å·²ä¸‹çš„å‘ä½`
*   3ã€åˆ¤æ–­æ˜¯å¦`äº”è¿å­`ï¼Œæ˜¯çš„è¯å°±èµ¢äº†
*   4ã€å½©è›‹ï¼šè·Ÿ`AIä¸‹æ£‹`ï¼ˆå®ç°å•äººç©æ¸¸æˆï¼‰

### 1\. ç”»å‡ºæ£‹ç›˜

å…¶å®å¾ˆç®€å•ï¼Œåˆ©ç”¨`ctx.moveToå’Œctx.lineTo`ï¼Œæ¨ªç€ç”»15æ¡çº¿ï¼Œç«–ç€ç”»15æ¡çº¿ï¼Œå°±OKäº†ã€‚

```js
// html
    #canvas {
    background: #e3cdb0;
}
<canvas id="canvas" width="600" height="600"></canvas>


// js
play()

    function play() {
    const canvas = document.getElementById('canvas')
    
    const ctx = canvas.getContext('2d')
    
    // ç»˜åˆ¶æ£‹ç›˜
    
    // æ°´å¹³ï¼Œæ€»å…±15æ¡çº¿
        for (let i = 0; i < 15; i++) {
        ctx.beginPath()
        ctx.moveTo(20, 20 + i * 40)
        ctx.lineTo(580, 20 + i * 40)
        ctx.stroke()
        ctx.closePath()
    }
    
    // å‚ç›´ï¼Œæ€»å…±15æ¡çº¿
        for (let i = 0; i < 15; i++) {
        ctx.beginPath()
        ctx.moveTo(20 + i * 40, 20)
        ctx.lineTo(20 + i * 40, 580)
        ctx.stroke()
        ctx.closePath()
    }
}
```

è¿™æ ·å°±ç”»å‡ºäº†æ£‹ç›˜ï¼š

![æˆªå±2021-07-25 ä¸‹åˆ12.25.09.png](/images/jueJin/269ed72ba34f474.png)

### 2\. é»‘ç™½æ£‹åˆ‡æ¢ç€ä¸‹

*   1ã€é¼ æ ‡ç‚¹å‡»äº‹ä»¶ï¼Œè·å–åæ ‡ï¼Œå°†æ£‹ç”»å‡ºæ¥ï¼ˆ`ctx.arc`ï¼‰
*   2ã€ç¡®ä¿å·²ä¸‹çš„æ£‹ä½ä¸èƒ½é‡å¤ä¸‹

ç¬¬ä¸€æ­¥ï¼Œè·å–é¼ æ ‡åæ ‡ï¼Œä½†æ˜¯æˆ‘ä»¬è¦æ³¨æ„ä¸€ä»¶äº‹ï¼Œæ£‹å­åªèƒ½ä¸‹åœ¨çº¿çš„`äº¤å‰å¤„`ï¼Œæ‰€ä»¥æ‹¿åˆ°é¼ æ ‡åæ ‡åï¼Œè¦åšä¸€ä¸‹å¤„ç†ï¼Œå››èˆäº”å…¥ï¼Œä»¥`æœ€è¿‘`çš„ä¸€ä¸ª`çº¿äº¤å‰ç‚¹`ä¸ºåœ†çš„`åœ†å¿ƒ`

ç¬¬äºŒæ­¥ï¼Œå¦‚ä½•ç¡®ä¿æ£‹ä½ä¸é‡å¤ä¸‹å‘¢ï¼Ÿå’±ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ª`äºŒç»´æ•°ç»„`æ¥è®°å½•ï¼Œåˆå§‹æ˜¯0ï¼Œä¸‹è¿‡é»‘æ£‹å°±å˜ä¸º1ï¼Œä¸‹è¿‡ç™½æ£‹å°±å˜ä¸º2ï¼Œä½†æ˜¯è¿™é‡Œè¦æ³¨æ„ä¸€ç‚¹ï¼Œ`æ•°ç»„ç´¢å¼•çš„xï¼Œyè·Ÿç”»å¸ƒåæ ‡çš„xï¼Œyæ˜¯ç›¸åçš„`ï¼Œæ‰€ä»¥åé¢ä»£ç é‡Œåæ ‡åè¿‡æ¥ï¼Œå¸Œæœ›å¤§å®¶èƒ½æ€è€ƒä¸€ä¸‹ä¸ºå•¥ã€‚

![æˆªå±2021-07-25 ä¸‹åˆ12.33.29.png](/images/jueJin/46fcf06e840141e.png)

```js
// æ˜¯å¦ä¸‹é»‘æ£‹
// é»‘æ£‹å…ˆèµ°
let isBlack = true


// æ£‹ç›˜äºŒç»´æ•°ç»„
let cheeks = []

    for (let i = 0; i < 15; i++) {
    cheeks[i] = new Array(15).fill(0)
}

    canvas.onclick = function (e) {
    const clientX = e.clientX
    const clientY = e.clientY
    // å¯¹40è¿›è¡Œå–æ•´ï¼Œç¡®ä¿æ£‹å­è½åœ¨äº¤å‰å¤„
    const x = Math.round((clientX - 20) / 40) * 40 + 20
    const y = Math.round((clientY - 20) / 40) * 40 + 20
    // cheeksäºŒç»´æ•°ç»„çš„ç´¢å¼•
    // è¿™ä¹ˆå†™æœ‰ç‚¹å†—ä½™ï¼Œè¿™ä¹ˆå†™ä½ ä»¬å¥½ç†è§£ä¸€ç‚¹
    const cheeksX = (x - 20) / 40
    const cheeksY = (y - 20) / 40
    // å¯¹åº”å…ƒç´ ä¸ä¸º0è¯´æ˜æ­¤åœ°æ–¹å·²æœ‰æ£‹ï¼Œè¿”å›
    if (cheeks[cheeksY][cheeksX]) return
    // é»‘æ£‹ä¸º1ï¼Œç™½æ£‹ä¸º2
    cheeks[cheeksY][cheeksX] = isBlack ? 1 : 2
    ctx.beginPath()
    // ç”»åœ†
    ctx.arc(x, y, 20, 0, 2 * Math.PI)
    // åˆ¤æ–­èµ°é»‘è¿˜æ˜¯ç™½
    ctx.fillStyle = isBlack ? 'black' : 'white'
    ctx.fill()
    ctx.closePath()
    // åˆ‡æ¢é»‘ç™½
    isBlack = !isBlack
}
```

![ä¸‹æ£‹.gif](/images/jueJin/aa99f1659e7946c.png) æ•ˆæœå¦‚ä¸‹ï¼š

### 3\. åˆ¤æ–­æ˜¯å¦äº”è¿å­

å¦‚ä½•åˆ¤æ–­å‘¢ï¼Ÿæœ‰å››ç§æƒ…å†µï¼š`ä¸Šä¸‹äº”è¿å­ï¼Œå·¦å³å´è¿å­ï¼Œå·¦ä¸Šå³ä¸‹äº”è¿å­ï¼Œå³ä¸Šå·¦ä¸‹äº”è¿å­`ï¼Œåªè¦å’±ä»¬æ¯æ¬¡è½å­çš„æ—¶å€™å…¨éƒ¨åˆ¤æ–­ä¸€æ¬¡å°±å¥½äº†ã€‚

![æˆªå±2021-07-25 ä¸‹åˆ12.55.53.png](/images/jueJin/54f1f02a38b54ec.png)

é¡ºä¾¿é™„ä¸Šæ‰€æœ‰ä»£ç 

```js
play()

    function play() {
    const canvas = document.getElementById('canvas')
    
    const ctx = canvas.getContext('2d')
    
    // ç»˜åˆ¶æ£‹ç›˜
    
    // æ°´å¹³ï¼Œæ€»å…±15æ¡çº¿
        for (let i = 0; i < 15; i++) {
        ctx.beginPath()
        ctx.moveTo(20, 20 + i * 40)
        ctx.lineTo(580, 20 + i * 40)
        ctx.stroke()
        ctx.closePath()
    }
    
    // å‚ç›´ï¼Œæ€»å…±15æ¡çº¿
        for (let i = 0; i < 15; i++) {
        ctx.beginPath()
        ctx.moveTo(20 + i * 40, 20)
        ctx.lineTo(20 + i * 40, 580)
        ctx.stroke()
        ctx.closePath()
    }
    
    // æ˜¯å¦ä¸‹é»‘æ£‹
    // é»‘æ£‹å…ˆèµ°
    let isBlack = true
    
    
    // æ£‹ç›˜äºŒç»´æ•°ç»„
let cheeks = []

    for (let i = 0; i < 15; i++) {
    cheeks[i] = new Array(15).fill(0)
}

    canvas.onclick = function (e) {
    const clientX = e.clientX
    const clientY = e.clientY
    // å¯¹40è¿›è¡Œå–æ•´ï¼Œç¡®ä¿æ£‹å­è½åœ¨äº¤å‰å¤„
    const x = Math.round((clientX - 20) / 40) * 40 + 20
    const y = Math.round((clientY - 20) / 40) * 40 + 20
    // cheeksäºŒç»´æ•°ç»„çš„ç´¢å¼•
    // è¿™ä¹ˆå†™æœ‰ç‚¹å†—ä½™ï¼Œè¿™ä¹ˆå†™ä½ ä»¬å¥½ç†è§£ä¸€ç‚¹
    const cheeksX = (x - 20) / 40
    const cheeksY = (y - 20) / 40
    // å¯¹åº”å…ƒç´ ä¸ä¸º0è¯´æ˜æ­¤åœ°æ–¹å·²æœ‰æ£‹ï¼Œè¿”å›
    if (cheeks[cheeksY][cheeksX]) return
    // é»‘æ£‹ä¸º1ï¼Œç™½æ£‹ä¸º2
    cheeks[cheeksY][cheeksX] = isBlack ? 1 : 2
    ctx.beginPath()
    // ç”»åœ†
    ctx.arc(x, y, 20, 0, 2 * Math.PI)
    // åˆ¤æ–­èµ°é»‘è¿˜æ˜¯ç™½
    ctx.fillStyle = isBlack ? 'black' : 'white'
    ctx.fill()
    ctx.closePath()
    
    // canvasç”»å›¾æ˜¯å¼‚æ­¥çš„ï¼Œä¿è¯ç”»å‡ºæ¥å†å»æ£€æµ‹è¾“èµ¢
        setTimeout(() => {
            if (isWin(cheeksX, cheeksY)) {
            const con = confirm(`${isBlack ? 'é»‘æ£‹' : 'ç™½æ£‹'}èµ¢äº†ï¼æ˜¯å¦é‡æ–°å¼€å±€ï¼Ÿ`)
            // é‡æ–°å¼€å±€
            ctx.clearRect(0, 0, 600, 600)
            con && play()
        }
        // åˆ‡æ¢é»‘ç™½
        isBlack = !isBlack
        }, 0)
    }
    // åˆ¤æ–­æ˜¯å¦äº”è¿å­
        function isWin(x, y) {
        const flag = isBlack ? 1 : 2
        // ä¸Šå’Œä¸‹
            if (up_down(x, y, flag)) {
            return true
        }
        
        // å·¦å’Œå³
            if (left_right(x, y, flag)) {
            return true
        }
        // å·¦ä¸Šå’Œå³ä¸‹
            if (lu_rd(x, y, flag)) {
            return true
        }
        
        // å³ä¸Šå’Œå·¦ä¸‹
            if (ru_ld(x, y, flag)) {
            return true
        }
        
        return false
    }
    
        function up_down(x, y, flag) {
        let num = 1
        // å‘ä¸Šæ‰¾
            for (let i = 1; i < 5; i++) {
            let tempY = y - i
            console.log(x, tempY)
            if (tempY < 0 || cheeks[tempY][x] !== flag) break
            if (cheeks[tempY][x] === flag) num += 1
        }
        // å‘ä¸‹æ‰¾
            for (let i = 1; i < 5; i++) {
            let tempY = y + i
            console.log(x, tempY)
            if (tempY > 14 || cheeks[tempY][x] !== flag) break
            if (cheeks[tempY][x] === flag) num += 1
        }
        return num >= 5
    }
    
        function left_right(x, y, flag) {
        let num = 1
        // å‘å·¦æ‰¾
            for (let i = 1; i < 5; i++) {
            let tempX = x - i
            if (tempX < 0 || cheeks[y][tempX] !== flag) break
            if (cheeks[y][tempX] === flag) num += 1
        }
        // å‘å³æ‰¾
            for (let i = 1; i < 5; i++) {
            let tempX = x + i
            if (tempX > 14 || cheeks[y][tempX] !== flag) break
            if (cheeks[y][tempX] === flag) num += 1
        }
        return num >= 5
        
    }
    
        function lu_rd(x, y, flag) {
        let num = 1
        // å‘å·¦ä¸Šæ‰¾
            for (let i = 1; i < 5; i++) {
            let tempX = x - i
            let tempY = y - i
            if (tempX < 0 || tempY < 0 || cheeks[tempY][tempX] !== flag) break
            if (cheeks[tempY][tempX] === flag) num += 1
        }
        // å‘å³ä¸‹æ‰¾
            for (let i = 1; i < 5; i++) {
            let tempX = x + i
            let tempY = y + i
            if (tempX > 14 || tempY > 14 || cheeks[tempY][tempX] !== flag) break
            if (cheeks[tempY][tempX] === flag) num += 1
        }
        
        return num >= 5
    }
    
        function ru_ld(x, y, flag) {
        let num = 1
        // å‘å³ä¸Šæ‰¾
            for (let i = 1; i < 5; i++) {
            let tempX = x - i
            let tempY = y + i
            if (tempX < 0 || tempY > 14 || cheeks[tempY][tempX] !== flag) break
            if (cheeks[tempY][tempX] === flag) num += 1
        }
        // å‘å·¦ä¸‹æ‰¾
            for (let i = 1; i < 5; i++) {
            let tempX = x + i
            let tempY = y - i
            if (tempX > 14 || tempY < 0 || cheeks[tempY][tempX] !== flag) break
            if (cheeks[tempY][tempX] === flag) num += 1
        }
        
        return num >= 5
    }
    
}

```

### 4\. å½©è›‹ï¼šä¸AIä¸‹æ£‹

å…¶å®å¾ˆç®€å•ï¼Œæ¯æ¬¡ä¸‹å®Œæ£‹ï¼Œè®¾ç½®ä¸€ä¸ªå‡½æ•°ï¼šéšæœºæ‰¾ä½ç½®ä¸‹æ£‹ã€‚è¿™æ ·å°±å®ç°äº†å’Œç”µè„‘ä¸‹æ£‹ï¼Œå•äººæ¸¸æˆçš„åŠŸèƒ½äº†ï¼Œè¿™ä¸ªåŠŸèƒ½æˆ‘å·²ç»å®ç°ï¼Œä½†æ˜¯æˆ‘å°±ä¸å†™å‡ºæ¥äº†ï¼Œäº¤ç»™å¤§å®¶å§ï¼Œå½“åšæ˜¯å¤§å®¶å·©å›ºè¿™ç¯‡æ–‡ç« çš„ä½œä¸šã€‚å“ˆå“ˆå“ˆå“ˆ

ç»“è¯­
--

ç¡äº†ç¡äº†ï¼Œè¿™ç¯‡æ–‡ç« è¿ç»­å†™äº†æˆ‘7ä¸ªå°æ—¶ï¼Œå…¶å®è¿™ä¸‰ä¸ªå°æ¸¸æˆè¿˜æœ‰å¾ˆå¤šå¯ä»¥ä¼˜åŒ–çš„åœ°æ–¹ï¼Œå¤§å®¶å¯ä»¥æå‡ºæ¥ï¼Œäº’ç›¸å­¦ä¹ ã€‚å–œæ¬¢çš„å…„å¼Ÿå§å¦¹ç‚¹ç‚¹èµå“ˆï¼Œè°¢è°¢å¤§å®¶ï¼ï¼

> å¦‚æœä½ è§‰å¾—æ­¤æ–‡å¯¹ä½ æœ‰ä¸€ä¸ç‚¹å¸®åŠ©ï¼Œç‚¹ä¸ªèµï¼Œé¼“åŠ±ä¸€ä¸‹æ—ä¸‰å¿ƒå“ˆå“ˆã€‚æˆ–è€…åŠ å…¥æˆ‘çš„ç¾¤å“ˆå“ˆï¼Œå’±ä»¬ä¸€èµ·æ‘¸é±¼ä¸€èµ·å­¦ä¹  : meron857287645