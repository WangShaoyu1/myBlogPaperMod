---
author: "王宇"
title: "8.、指令功能需求整理"
date: 八月03,2023
description: "指令库"
tags: ["指令库"]
ShowReadingTime: "12s"
weight: 657
---
一、通配符
-----

### 1、其他产品

#### 1.1 百度

[通配词槽使用demo (baidu.com)](https://ai.baidu.com/forum/topic/show/957131)  

[UNIT2.0模板标注详细说明 (baidu.com)](https://ai.baidu.com/forum/topic/show/940955)  

（1）通配符：可以匹配指定长度的任意字符串；可表示为"\[W:0-10\]"标识，表示可匹配总字节数在 0 到10之间的任意字符串。  

（2）通配词槽必须被限定，根据实际情况下通配词槽识别的内容在句子中的位置，去进行前限定或者后限定，或者前后都进行限定  

（3）因为特征词配置了“发短信”“发短信说”，这种属于有交叠的词典值内容，在通配词槽的识别边界中难以区分，所以不要配置这种重叠形式的特征词  

（4）注意：尽量不要在模板片段中只写一个通配符，否则有可能会影响模板的识别效果  

（5）使用场景：一般不需要使用通配符，除非两个词槽或者特征词必须放在一个模板片段中，且中间需要识别不确定的内容，可以在中间用通配符  
  
![](/download/attachments/105265857/image2023-7-19_21-56-27.png?version=1&modificationDate=1689774987900&api=v2)![](/download/attachments/105265857/image2023-7-19_21-56-36.png?version=1&modificationDate=1689774996917&api=v2)

#### 1.2 讯飞

（1）通配词：匹配任意1-20个字符（Wildcard）  

（2）训练数据为“打开\[通配词\]的菜谱”，如果测试问句为“打开xx菜谱”（缺少“的”），则会无法识别  

（3）对于超过5个字的通配符，无法识别，如“打开奥尔良烤鸡翅的菜谱”

![](/download/attachments/105265857/image2023-7-19_21-57-9.png?version=1&modificationDate=1689775029887&api=v2)

#### 1.3 功能评价  

##### 优点  

（1）可以匹配任意文字，针对数据量很大的词槽（如食谱、食材），无需穷举，减少维护的工作量  

（2）对于搜索的指令，可以取用户的真实实体去进行搜索，执行的结果会更贴合用户的想法  

（3）支持需要个性化词槽的指令，如提醒事项，用户需要提醒的事情千人千面，无法通过词槽来穷举，此时可以使用通配词槽  

##### 缺点  

（1）需要使用比较固定的句式，容易造成误识别，如针对于“搜索\[通配符\]”这一话术，如果用户说”搜索食谱“，会将”食谱“两个字匹配为通配符的内容  

（2）需要尽可能穷举指令话术，且话术之间又不能有重叠形式的词，如“做法”和“的做法”，无法满足用户的多种话术  

（3）话术无法泛化，对话术要求严格，训练数据为“打开\[通配词\]的菜谱”，如果测试问句为“打开xx菜谱”（缺少“的”字），则会无法识别  

##### 总结  

（1）针对“搜索食谱”的指令，用通配词的功能可以减少词槽维护的工作量，但是对指令的使用话术会有限制，用户需要严格按照撰写的话术，对于找菜谱，用户会用的话术多种多样，从而会产生指令无法识别的情况  

（2）针对“提醒事项”的指令，话术格式比较统一，一般为“提醒我xx时间做xx事情”，通配词功能比较适用

### 2、FTT相关需求  

##### 功能

*   提供“通配符”系统词槽，支持自定义设置匹配的字符长度

##### 使用场景  

*   用于“提醒事项”指令，如：\[duration\]后提醒我\[通配符\]

二、指令分库
------

### 1、百度、讯飞、FTT技能对比  
![](/download/attachments/105265857/image2023-7-19_21-57-34.png?version=1&modificationDate=1689775054882&api=v2)

系统

阈值

技能优先级

百度

以技能为单位

以技能为单位自定义

讯飞

以技能为单位

系统默认顺序：自定义技能最高

FTT

以技能类型为单位（指令、问答等）

以技能类型为单位（指令、问答等）

讯飞技能优先级：自定义技能>自定义语句问答>设备人设> 商店技能>自定义关键词问答  

### 2、FTT当前能力  

（1）一个应用只能配置一个指令库，多个问答库  

（2）只能以技能类型（指令、问答等）为单位设置阈值  

（3）只能以技能类型（指令、问答等）为单位设置回复优先级  

### 3、FTT相关需求  

##### 功能  

（1）支持一个应用配置多个指令库和多个问答库  

（2）支持以库为单位自定义设置阈值  

（3）支持以库为单位自定义设置回复优先级  

##### 使用场景  

*   对同一个应用的指令进行分库处理，将硬件操控类的指令和数据查询的指令分成两个指令库，避免因为数据量不均衡导致的训练模型的偏差

三、同义词（特征词）  

-------------

### 1、其他产品  

#### 1.1 百度  

（1）特征词定义：由口语化词、辅助表述词、标点符号等对用户输入的文本内容真实理解无影响的词组成，支持多个，用户可自定义且解析结果中不展示。  

（2）特征词功能定位：通过对模版的标注实现对用户输入文本内容进行解析的能力，可以根据用户标注实现一定的泛化能力，可以提高对话模板的精度和覆盖度。如对于“查天气”意图，用户可能会说“查一下天气”、“查询天气”，那么对应的模板中，可以设置表示“查询”的特征词：“查一下”、“查询”等等。特征词不需要作为词槽被提取出来提供给业务，仅用于约束模板的匹配。  

（3）特征词词表需要用户自己上传或添加，不提供系统的特征词  

#### 1.2 讯飞  

（1）辅助词：副词、介词、连词、助词、叹词和拟声词。  

（2）提供26个官方辅助词，包括查询、我想要、帮我、语气词等

![](/download/attachments/105265857/image2023-7-19_21-58-11.png?version=1&modificationDate=1689775091745&api=v2)  

#### 1.3 云小蜜  

（1）全局名词：通过配置全局名词和同义词，批量解决对话过程中对于同义不同词的快速支持  

（2）全局名词将随FAQ一同发布，无需单独发布。同时将环境分为测试环境和正式环境，默认为测试环境，可以进行编辑和删除操作，切换为正式环境时则只能查看名词。

![](/download/thumbnails/105265857/image2023-7-19_21-58-31.png?version=1&modificationDate=1689775111211&api=v2)  

### 2、FTT当前能力  

（1）asr容易识别成同音字的词语、意思一样但是表述不同的词语都需要通过添加相似问的形式来提高识别率  

（2）对于同音字、同义词，在指令库内的其中一个指令添加后，无法泛化到其他的指令  

### 3、FTT相关需求  

##### 功能

（1）提供同义词（特征词）功能，将意思相近但对用户输入的内容理解无影响的词归为一个特征词  

##### 使用场景  

（1）用于asr容易识别成同义词的与业务相关的业务名词，如：万得厨（万得出、万德福）、微波（微博）、息屏（熄屏）  

（2）用于意思相同但表述不同的词语，如食谱（菜谱、做法、的食谱、的菜谱、的做法）、搜索（打开、查找、查看、浏览、找一下）  

四、重量、体积的词槽  

-------------

### 1、其他产品  

#### 1.1 百度  

（1）百度提供“数字+单位”的系统词槽

![](/download/attachments/105265857/image2023-7-19_21-59-4.png?version=1&modificationDate=1689775144140&api=v2)  

（2）能识别到的单位：两、斤、公斤、克、千克、毫升、升、份、碗、桶、打  

（3）单位后面的关于重量的字识别不到，如“一斤半”；组合的重量（如：3斤300克）会识别成两个词槽  
![](/download/attachments/105265857/image2023-7-19_21-59-12.png?version=1&modificationDate=1689775152113&api=v2)  

（4）该词槽的作用是识别“数字+单位”，所以对于所有的单位都可以识别，无法限制在“分量”相关的单位  

#### 1.2 讯飞  

*   讯飞不提供“重量”和“体积”的系统词槽

### 2、FTT现有能力  

（1）没有“重量”和“体积”相关的系统词槽  

（2）提供duration系统词槽，支持时、分、秒三种单位，支持三种单位的组合，时长范围无限制  

（3）可以自动将整个时间段换算成最后一个单位并返回“单位”，如：设置1小时20分钟，会换算成80分钟；设置1小时20分钟30秒，会换算成4380秒  
![](/download/attachments/105265857/image2023-7-19_21-59-32.png?version=1&modificationDate=1689775172143&api=v2)  

### 3、FTT相关需求  

##### 功能  

（1）提供“规格”单位的词槽，包含两、斤、公斤、克、千克、毫升、升7个单位  

（2）支持进行单位换算，将重量的单位都换算成克，将体积单位换算成毫升  

##### 使用场景  

（1）功率推荐的指令，需要识别到用户要烹饪的食物的分量，但是食物分量的单位有多种，包括重量和体积，单位不一致的情况下无法仅通过number词槽来判断食材的真实分量  

五、词槽非必填  

----------

### 1、其他产品  

#### 1.1 百度  

*   百度支持以词槽为单位设置是否必填

#### ![](/download/attachments/105265857/image2023-7-19_21-59-45.png?version=1&modificationDate=1689775186151&api=v2)  
1.2 讯飞  

*   讯飞支持以词槽为单位设置是否必填

#### ![](/download/attachments/105265857/image2023-7-19_22-0-4.png?version=1&modificationDate=1689775204517&api=v2)  
2、FTT现有能力  

*   提供词槽非必填功能，但以指令为单位而不是以词槽为单位，即如果一个指令引用了两个词槽，只支持两个词槽同时必填或同时非必填

### 3、FTT相关需求  

##### 功能  

（1）支持以词槽为单位的非必填功能  

##### 使用场景  

（1）食谱搜索推荐的指令，支持用户用多个关键词来搜索食谱，如“牛肉有什么辣味的食谱推荐”，此时可以设置其中一个词槽非必填  

六、批量测试  

---------

### 1、其他产品  

#### 1.1 百度  

*   百度提供技能内批量测试的能力，以txt格式导入测试问句，返回问题、答复、意图、词槽原始值四个字段

#### ![](/download/attachments/105265857/image2023-7-19_22-0-23.png?version=1&modificationDate=1689775223483&api=v2)  
2.1 讯飞  

*   讯飞不提供批量测试的功能  
    

### 2、FTT现有能力  

*   FAQ提供批量测试和逐条测试能力，指令和应用只能逐条测试  
    

### 3、FTT相关需求  

##### 功能  

（1）提供指令批量测试的功能，返回测试问句、answer、score、intent、similar\_standard五个字段结果  

（2）应用上提供批量测试的功能，返回测试问句、answer、service、intent（非指令则空着）四个字段结果  

##### 使用场景  

（1）随着指令数量的增加且黑名单功能的使用，需要进行大量测试，包括指令间的冲突及FAQ误触指令的排查，逐条测试效率低，工作量大

七、对话日志标注
--------

### 1、其他产品

#### 1.1 百度

（1）在对话日志模块，百度支持将用户的对话语料转化为对话样本，转化为对话样本的语料会收录到待优化样本集，可以进一步对语料进行意图标注并转化为指令训练数据

![](/download/attachments/105265857/image2023-7-21_15-7-48.png?version=1&modificationDate=1689923269109&api=v2)

（2）在技能测试模块，针对每一条测试问句，百度支持对测试结果进行调试，可以选择先添加进对话样本集统一标注，也可以直接标注正确的意图

![](/download/thumbnails/105265857/image2023-7-21_15-16-32.png?version=1&modificationDate=1689923793030&api=v2)![](/download/attachments/105265857/image2023-7-21_15-34-13.png?version=1&modificationDate=1689924853792&api=v2)

#### 1.2 讯飞

*   讯飞未提供对话日志的功能

### 2、FTT现有能力

（1）只支持对话日志查看功能，无法直观展示用户的问题，只能以终端为单位展示该终端的所有对话记录

（2）无法根据日期筛选准确定位到相应日期的对话记录

### 3、FTT相关需求

##### 功能

（1）直观展示用户所有的对话日志，且支持根据日期、指令、回复进行筛选

（2）提供对话日志标注的功能，支持对用户的对话语料进行意图和词槽的标注，直接添加进指令相似问和词槽实体

##### 使用场景

*   根据用户的真实对话数据直接进行话术的优化

  

[Filter table data](#)[Create a pivot table](#)[Create a chart from data series](#)

[Configure buttons visibility](/users/tfac-settings.action)