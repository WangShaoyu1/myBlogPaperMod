---
author: "王宇"
title: "算法优化及烹饪业务调研"
date: 十月27,2023
description: "烹饪方案预测语音技能"
tags: ["烹饪方案预测语音技能"]
ShowReadingTime: "12s"
weight: 730
---
结合高老师的意见、食品运营同事的经验和当前业务现状，总结1.5烹饪方案预测算法应用现状及目前遇到的问题。

1\. 烹饪方案预测算法应用现状
================

算法基于普通用户DIY烹饪需求提出，通过给出烹饪功率和时长的建议值，让用户能轻松烹熟常见菜品，从而降低微波烹饪的门槛。目前算法已用于协助ugc食谱审核和生鲜食品赋码及算法验证。

1.1. ugc食谱审核
------------

基于用户输入的食材清单（食材名称、重量和单位），算法初步预测出该菜品烹熟需要的热量，并与食谱绑定的烹饪方案计算得到的热量值进行比较，最终根据两者的热量偏差，给出不同等级的审核结论。

因算法是基于烹熟的目标来预测所需热量，预测热量实际上是在一定范围内波动，并不一定是最佳口感的热量值。因此食谱审核场景下，将算法预测热量值作为基准，来评估烹饪方案的合理性，存在一定的误差。且审核结论分级的标准难以明确，目前没有足够的数据，能够确定实际烹饪所需热量与算法预测热量之间合理的偏差范围。现在的偏差范围是根据1100多条已验证食谱数据推算出来的，有一定的参考性。

对于ugc食谱审核而言，算法只是辅助给出食谱审核标记，至于是否需要进一步审核，及最终给出什么样的审核结论均由专人处理，因此并不要求算法百分百精准，能有一些参考性就行。

1.2. 生鲜食品赋码及算法验证
----------------

目前生鲜食品赋码，需要专业的食品研发人员根据自身经验设置烹饪功率和时长，并根据品鉴结果，不断调整烹饪方案。

算法协助给出新菜谱的建议烹饪功率和时长，在一定程度上可减少烹饪次数和失败率，但对于经验丰富的人来说增益不大。但是，采用算法建议功率和时长的烹饪结果，对于算法的持续验证及优化是很有必要的，该场景的交互流程图如下。

虽然食品研发人员增加了与算法交互的流程（输入食材清单，用算法建议的方案烹饪，记录烹饪结果），但有望利用验证数据进一步优化算法模型，或许后续能针对不同规格和口感的食品给出精准的烹饪参数。

![](/download/attachments/109725552/image2023-10-18_16-46-30.png?version=1&modificationDate=1697618790398&api=v2)

2\. 烹饪方案预测算法验证总结
================

内部对算法开展了两次验证工作，第一次算法验证以常见菜品烹熟率为目标（详见：[烹饪功率算法测试方案](/pages/viewpage.action?pageId=105275432)），挑选了覆盖多种类别的常见食材和算法预测误差较大的食谱，组合出40道菜进行验证，成功率90%。发现算法在不同的烹饪方式下泛化能力不足，无法适配“粥”、“汤”这种长时间低功率烹饪的情况。

基于第一版算法测试结果，在增加了“粥”、“汤”等烹饪方式的数据，扩充了食材范围，且调整了训练策略后，增强了重量、烹饪方式和食材的泛化能力。因此，第二次算法验证以泛化能力为主要目标（详见：[烹饪功率算法第二次测试](/pages/viewpage.action?pageId=109250095)），重点复验了与第一版算法测试结果差异较大的菜，总共选出22道菜，成功率90.91%。因第一次验证失败的“绿豆汤”，“粥”，“烤八爪鱼”和“烤五花肉”均复验合格，故综合两次算法验证成功率超过90%。

3\. 烹饪方案预测算法优化瓶颈
================

当前算法在小重量（小于100 g）和大重量（大于2000 g）食材中的泛化能力仍然欠佳，对于加水较多的烹饪方式也容易出现较大偏差，无法给出更优口感的下的推荐方案。算法优化的前提是数据足够多且足够准确，目前存在以下瓶颈：

3.1. 数据瓶颈
---------

### 3.1.1. 训练数据较少

目前满足训练要求的数据总共有1100多条，覆盖的食材范围（只有200多个食材）和重量范围（100 g以下或2000 g以上的菜只有3道）均不够。数据较少，信息量不足，算法学习到的内容自然不够。

### 3.1.2. 缺少必要的特征

微波烹饪需要考虑热效率，而热效率与水的参与情况和烹饪方式有关，但当前菜谱并未标注出每个菜谱的烹饪方式。经人工标注后，采用烹饪方式调优的算法模型，相比原有算法模型有较大效果提升（至少新增10%的数据热量误差在20%以内）。故认为引入烹饪方式特征用于算法训练和推理是很有必要的。

事实上一道菜的烹饪方案还受到食材大小、形状、口感等因素的影响，而这些特征都难以获取和处理，且因为口感具有主观性，难以建立统一标准。

### 3.1.3. 数据准确性不够

目前食材的基础营养成分数据来源于不同网站，数据标准并不统一，误差也难以评估。对于同一食材，本身就会因为种植环境、生长状况、存储条件等原因存在差异，算法又高度依赖于食材基础营养成分数据，不可避免的也会有较大误差。

3.2. 建模瓶颈
---------

### 3.2.1. 菜品建模粗糙

当前只根据菜谱中主食材的营养成分（水分、蛋白质、脂肪、碳水化合物）计算得到的整体营养成分含量来建模菜品，建模方法非常粗糙，且所用数据存在误差，无法给出精细化的结果。

### 3.2.2. 烹饪建模死板

当前默认所有食谱的烹饪过程均一致（由常温20度升温到100度，并经历一段完全熟化的过程），事实上温度受到不同时间、地点和食材处理方式的影响，并非一成不变，但真实的温度数据难以获取。

### 3.2.3. 未考虑炉的差异性

当前默认1.5版本万得厨功率转化和热效率均一样，实际上炉的结构和电压均会影响实际的功率转化，且热效率受多种因素影响，难以评估其误差。

4\. 烹饪方案预测算法应用瓶颈
================

除了算法优化遇到了一些问题，在算法应用上也存在诸多挑战，难以形成闭环。

4.1. 用户使用存在门槛
-------------

用户使用算法预测烹饪方案时，难以准确的输入食材清单内容，可能会觉得麻烦，直接简单粗糙的给出不够准确的食材内容。食材名称随意输入导致匹配不上现有食材库，从而无法给出推荐结果；食材重量和单位随意输入，输入食材遗漏或输入未烹熟的食材，导致给出的推荐结果存在较大误差。且算法要求部分特殊食材输入特定的重量，比如：生蚝只需输入生蚝肉的重量，这不止需要收集特殊食材数据，还要能让用户方便的按照算法要求给出对应的重量，这是较为困难的。

4.2. 算法应用场景有限
-------------

当前，算法不支持冷冻烹饪、熟食烹饪和未完全烹熟的场景。部分食材需要提前处理（比如：绿豆需要提前泡发），才能适用算法给出的烹饪方案，这要求收集相关食材处理数据并能提示用户。此外，真实烹饪过程中，存在食材加入顺序不一致的问题或部分食材单独烹饪，甚至用户开始并不确定每个食材需要多少料，中途再根据烹饪情况酌情加料的情况，算法难以精准处理这些情况。对于需要提前烫洗、淖水的食材，也未有合适的处理方案。

  

[Filter table data](#)[Create a pivot table](#)[Create a chart from data series](#)

[Configure buttons visibility](/users/tfac-settings.action)