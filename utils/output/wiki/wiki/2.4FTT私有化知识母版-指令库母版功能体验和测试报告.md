---
author: "王宇"
title: "2.4FTT私有化知识母版-指令库母版功能体验和测试报告"
date: 六月02,2023
description: "2、系统学习小结"
tags: ["2、系统学习小结"]
ShowReadingTime: "12s"
weight: 637
---
### 1、指令库工作流程

创建母版：指令库由管理员创建

定义词槽：（1）按照表格模板批量导入词槽名称、词槽描述、实体ID、实体标准名、实体别名；（2）逐条新增、删除、编辑词槽名称、实体信息；（3）搜索词槽

编辑母版：（1）按照表格模板批量导入指令（分类、指令名称、指令标识、指令描述、关联词槽、追问话术、追问失败话术、追问次数、相似问、执行成功话术、执行失败话术）；（2）逐条新增、删除、编辑指令，添加相似问，设置指令启用状态；（3）批量删除、启用、关闭指令；（4）搜索指令

训练母版：对已编辑的指令库进行训练，以更新编辑数据

测试母版：逐条输入测试语句，测试指令识别效果

发布母版：将已训练的模型发布更新

### 2、功能详述

序号

功能模块

子模块

功能描述

备注

1  
  
  
  
  
  
  

定义词槽  
  
  
  
  
  
  

搜索词槽名称

1、【搜索词槽名称】在词槽名称中进行搜索匹配，返回搜索的词槽，支持关键词搜索

/

实体

1、点击实体列的蓝色数字即可进行实体的新增、删除和修改，编辑后需进行保存，否则编辑无效。

2、【编辑实体】可对实体的信息包含ID、标准名、别名进行编辑

3、【新增实体】点击最下方的新增实体，进行实体的添加

4、【删除】可逐个删除词槽内的实体

5、【保存】对编辑的内容进行保存

6、【返回】进入词槽管理页面，且编辑的内容不会保存

1、实体ID：实体唯一标识，不能包含中文，同一词槽内不可重复；新增实体的ID与已有的实体ID重复，无法新增，显示“已存在”；不同词槽内的实体ID可重复，相互不影响

2、实体标准名，同一词槽内不可重复，不超过50字

3、实体别名有多个时用”==“进行连接，如汉语==普通话==中国语

4、词槽内需至少剩一个实体，将词槽中的所有实体删除后无法进行保存，显示“参数无效”

词槽编辑

1、【编辑】可对词槽名称和词槽描述进行修改

2、【删除】能对整个词槽进行删除，删除后无法找回，如词槽存在关联的指令，则无法删除

1、词槽名称编辑的时候可能会导致重复名称，这个时候可以成功保存，新增重复项则无法完成操作

  

导出词槽

1、【导出词槽】excel表格的形式导出词槽信息，包含词槽名称、词槽描述、实体ID、实体标准名、实体别名

1、导出文件名为command\_109\_xxxxxxxxxx。其中109是指令库名称的business ID

导入词槽

1、【导入词槽】添加大量词槽时，可通过词槽模板进行词槽批量导入

2、下载模板后，按模板的格式和要求填入词槽名称、词槽描述、实体ID、实体标准名、实体别名，完成后上传文件

3、导入格式：

![](/download/attachments/101837505/image2023-3-20_11-24-10.png?version=1&modificationDate=1685620741856&api=v2)

1、词槽名称必填，不可重复，不超过50字，支持汉字

2、导入时对实体ID、实体标准名同样要求不可重复

3、导入失败原因：

*   表格"Sheet"未改命名为“词槽”
*   加密文档无法导入
*   系统本身原因，可以刷新重试

导入失败报告

1、【下载校验结果】导入报告的表格和导入表格格式一致，导入失败的词槽名称单元格会用红色填充

![](/download/attachments/101837505/image2023-6-1_20-56-1.png?version=1&modificationDate=1685624161585&api=v2)

  

新增词槽

1、【新增词槽】显示词槽信息，词槽名称必填，词槽描述选填

2、【保存】进行词槽名称保存

3、【返回】进入词槽管理页面，且词槽信息不会保存

1、【新增词槽】出现相同词槽名称会显示数据库添加异常，词槽已存在

词槽列表

1、【词槽列表】可以进行每页展示数量和页数选择

2、页面展示支持10条/页、20条/页、30条/页、40条/页、50条/页、100条/页

3、支持手动切换下一页和输入页数快速切换

/

2  
  
  
  
  
  
  

编辑母版  
  
  
  
  
  
  

搜索指令名称

1、【搜索指令名称】是在指令名称中进行搜索匹配，通过关键词匹配返回搜索的结果

/

新增分类

1、【新增分类】填写分类名称

2、【完成】进行新增分类的保存

3、【取消】取消保存

/

编辑分类

1、【编辑】对分类名称进行修改

2、【完成】进行编辑内容的保存

3、【取消】取消保存

/

删除分类

1、【删除】删除对应的分类，分类里面的指令会转移到”未分类”中

1、“未分类”不可编辑和删除

指令编辑

1、【编辑】可对指令信息进行编辑，包括分类、指令名称、指令标识、指令描述、关联词槽、追问话术、执行成功话术、执行失败话术

2、【删除】可删除整条指令内容，删除后无法找回

1、不关联词槽情况下不会显示是否多轮追问

2、关联词槽状态下不追问，不会显示追问话术和追问失败话术

3、指令名称和指令标识编辑的时候出现与已有指令的名称和标识重复，这个时候可以成功保存，新增重复项则无法完成保存

4、若添加关联词槽且追问次数大于0，则追问话术和追问失败话术必填

5、正向反馈话术和负向反馈话术可以添加多个，系统随机回复

  

相似问

1、点击相似问列的蓝色数字即可进行相似问的添加和删除，编辑后需进行保存，否则编辑无效

2、【引用关联词槽】如果指令关联了词槽，则相似问可引用关联词槽

3、【添加】用于相似问的新增，在语料需要引用词槽的位置选择要引用的词槽名称，如设置\[语言\]

4、【删除勾选项】可勾选想要删除的相似问，进行批量删除

5、【保存】对编辑的内容进行保存

6、【返回】进入指令编辑页面，且编辑内容不会保存

1、如果指令关联的词槽为系统词槽（duration和number），则新增相似问时无法直接引用关联词槽名字，直接输入包括的词槽实体的语料即可，如大火三分钟

2、无法对某一条相似问进行内容的修改，只能直接删除

指令状态

1、【状态】开关即为指令生效开关

2、指令状态为关闭并经过指令训练时，通过指令测试无法匹配到该指令

![](/download/attachments/101837505/image2023-3-20_13-57-1.png?version=1&modificationDate=1685620741948&api=v2)

  

批量操作

1、【批量设置】多选指令后，可对勾选的指令进行批量操作

2、【批量删除】将勾选的所有指令删除

3、【批量启用】将勾选的所有指令的启用状态打开

4、【批量关闭】将勾选的所有指令的启用状态关闭

![](/download/attachments/101837505/image2023-6-1_21-5-16.png?version=1&modificationDate=1685624716854&api=v2)

  

导出指令

1、【导出指令】excel表格的形式导出指令信息，包含分类、指令名称、指令标识、指令描述、关联词槽、追问话术、追问失败话术、追问次数、相似问、执行成功话术、执行失败话术

2、导出表格与导入模板格式一致

1、目前仅支持全部导出，暂不支持选择性导出和按分类导出

  

导入指令

1、【导入指令】当需要添加大量指令时，可通过指令模板将指令信息批量导入

2、根据指令模板的要求和格式填入分类、指令名称、指令标识、指令描述、关联词槽、追问话术、追问失败话术、追问次数、相似问、执行成功话术、执行失败话术，完成后上传文件

3、导入格式：

![](/download/attachments/101837505/image2023-6-1_20-31-19.png?version=1&modificationDate=1685622680052&api=v2)

1、指令名称：

*   指令名称和已有指令名称重复的，该指令导入失败
*   缺少指令名称的，指令导入无效

2、指令标识：

*   不能包含中文名
*   系统上不同指令的指令标识可以重复（系统优化需求已提出）
*   表格中缺少指令标识也可以导入成功

3、词槽：

*   如果导入指令的关联词槽在词槽库中不存在，则会自动在词槽列表添加相应词槽，但无实体
*   引用词槽名称时用的括号为\[ \]，使用其他括号无法引用到词槽
*   指令关联的词槽为系统词槽（duration和number），则新增相似问时无法直接引用关联词槽名字，直接输入包括的词槽实体的语料即可，如大火三分钟

4、追问次数

*   追问次数未填，则默认为0
*   追问次数如果填写超过3次，则导入默认为1次

5、报错分析：

*   表格页签“sheet”未改名为“指令”
*   加密文档无法导入
*   系统本身原因，可以刷新重试

导入失败报告

1、【下载校验结果】导入报告的表格和导入表格格式一致，导入失败的指令名称和指令标识单元格会用红色填充

![](/download/attachments/101837505/image2023-6-1_20-33-59.png?version=1&modificationDate=1685622839606&api=v2)

  

新增指令

1、【新增指令】进行指令的添加。指令名称、指令标识必填，指令描述选填，选择关联词槽，添加追问话术、反馈话术等

2、【保存】保存编辑好的指令

1、【新增指令】出现相同指令名称会显示异常

2、新增指令可一次关联多个词槽

3、不关联词槽情况下不会显示是否多轮追问

4、关联词槽状态下不追问，不会显示追问话术和追问失败话术

指令列表

1、【指令列表】展示指令的页面，按创建时间排序新增在前

2、页面展示支持10条/页、20条/页、30条/页、40条/页、50条/页、100条/页；

3、支持手动切换下一页和输入页码快速切换

  

3

训练母版

开始训练

1、【开始训练】编辑的指令要通过训练并成功后，才能够在指令测试中进行期望的反馈

1、缺少追问话术可以训练成功

2、关联词槽中没有实体可以训练成功

3、缺少指令标识可以训练成功

训练记录

1、显示训练的信息，包含最后编辑时间、上次训练时间、上次发布时间三部分

  

4

测试母版

输入测试指令

1、在输入想测试的指令后点击【发送】，可以显示出对话框或者结果。

2、可以通过【清空窗口】清空当前测试的所有内容

1、在指令训练过程中输入测试指令会显示“未找到训练成功的导航库”

2、在删除指令后，不进行训练，输入该指令进行测试会显示：服务端进入exception报错，error

识别结果

1、显示answer，score，code，failed\_answer，succeed\_answer等内容

*   answer显示对话框给出的回复，如有追问，则显示追问话术；如识别到指令，则显示default；如识别不到指令，则显示null
*   score表示测试问句与匹配到的指令的匹配分数，如测试问句与指令的相似问完全相同，则score为1
*   code表示系统匹配到的指令的指令标识
*   failed\_answer表示系统匹配到的指令的执行失败话术
*   succeed\_answer表示系统匹配到的指令的执行成功话术
*   similar value表示识别到的系统中已有的词槽实体

2、【copy】可以将指令库识别结果处的代码进行复制

  

5

发布母版

指令发布

1、【发布】用于发布已经训练成功的指令

2、发布之后，指令才能同步到客户端进行语音识别

1、指令训练过程中，指令无法发布

发布记录

1、显示发布的信息，包含最后编辑时间、上次训练时间、上次发布时间三部分

  

### 3、系统优化需求

序号

功能模块

子模块

问题描述

需求描述

反馈人

问题分类

备注（图片）

跟进情况

跟进人

序号

功能模块

子模块

问题描述

需求描述

反馈人

问题分类

备注（图片）

跟进情况

跟进人

1

定义词槽

词槽删除

词槽只能逐个删除

增加批量删除词槽的功能

马冬颖

需求

  

  

  

2

指令库

词槽管理

无法在词槽管理页面查看词槽的关联指令

词槽管理页，关联指令的数字设置成链接形式，点击后链接到词槽关联到的所有指令（参考词槽对应实体数字的设置）

马冬颖

需求

  

  

  

3

编辑母版

指令标识

逐条编辑指令的页面显示的是“指令编码”，导入模板中显示的是“指令标识”

统一导入模板与编辑指令页面对于“指令标识”的表述

马冬颖

缺陷

![](/download/thumbnails/101837505/image2023-6-1_20-43-49.png?version=1&modificationDate=1685623429828&api=v2)

![](/download/attachments/101837505/image2023-6-1_20-44-24.png?version=1&modificationDate=1685623464193&api=v2)

  

  

4

编辑母版

分类

指令只能逐个修改分类

支持批量修改指令分类

马冬颖

需求

  

  

  

5

编辑母版

相似问

引用系统词槽（duration和number）时，相似问中不能直接用词槽名称来代替，要举实体的例子来代替，比如三分钟

引用系统词槽时，相似问中同样可以用词槽名称来代替

马冬颖

需求

![](/download/attachments/101837505/image2023-3-21_15-55-1.png?version=1&modificationDate=1685625391788&api=v2)

  

  

6

编辑母版

导入结果报告

生成的导入报告只是将导入失败的词槽和指令名称标红，在数据量很大的情况下很难找到，也不清楚导入失败的原因

在原有表格的基础上添加一列，写明导入结果及失败原因

马冬颖

需求

  

  

  

7

编辑母版

批量导出

只支持相应指令库下面所有指令的全量导出

支持指令按照分类导出和多选导出

马冬颖

需求

  

  

  

8

测试母版

批量测试

目前指令只能逐条测试，在相似问较多的情况下，测试工作量较大

提供指令批量测试的功能

马冬颖

需求

  

  

  

9

指令训练

指令训练

目前指令训练只能看到训练中的状态，无法查看训练进度和训练时间

提供指令训练进度和训练时间查询的功能

廖鸿珍

需求

  

  

  

### 4、测试结果

![](/download/attachments/101837505/image2023-6-2_17-53-14.png?version=2&modificationDate=1685699599486&api=v2)

  

  

  

  

  

[Filter table data](#)[Create a pivot table](#)[Create a chart from data series](#)

[Configure buttons visibility](/users/tfac-settings.action)