{
	"title": "Vue3+Fabricjså®šåˆ¶å›½åº†ä¸“å±å¤´åƒğŸŒˆ",
	"author": "é‡‡é»",
	"publishTime": "2023-09-27",
	"readTime": "é˜…è¯»6åˆ†é’Ÿ",
	"tags": "[\"å‰ç«¯\",\"JavaScript\",\"Vue.js\"]",
	"description": "ç”Ÿåœ¨å›½æ——ä¸‹ï¼Œé•¿åœ¨æ˜¥é£é‡Œï¼å›½åº†å°†è‡³ï¼Œé‡‡é»ä¸ºå¤§å®¶å¸¦æ¥å®šåˆ¶å¤´åƒ2.0ï¼ˆå›½åº†å¤´åƒï¼‰ï¼Œè®©æˆ‘ä»¬ç”¨ä»£ç çš„å½¢å¼ä¸ºç¥–å›½åº†ç”Ÿï¼æƒ³çœ‹æ•ˆæœæˆ–è€…æƒ³å®šåˆ¶æ˜¥èŠ‚å¤´åƒçš„å°ä¼™ä¼´è¯·ç›´å¥”æ•ˆæœåŒºåŸŸï¼Œè¯·è€å¿ƒé˜…è¯»ï¼Œæœ¬æ–‡ä»£ç ç‰‡æ®µè¾ƒå¤š~",
	"article": "Vue3 + Fabricjs å®ç°å®šåˆ¶å¤´åƒ2.0ğŸŒˆ\n===========================\n\n![perview.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/86b5e36a1b5441e8bed0860114b48e79~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1000&h=495&s=888187&e=png&b=ebdad4)\n\n> ç”Ÿåœ¨å›½æ——ä¸‹ï¼Œé•¿åœ¨æ˜¥é£é‡Œï¼å›½åº†å°†è‡³ï¼Œé‡‡é»ä¸ºå¤§å®¶å¸¦æ¥ **å®šåˆ¶å¤´åƒ2.0ï¼ˆå›½åº†å¤´åƒï¼‰**ï¼Œè®©æˆ‘ä»¬ç”¨ä»£ç çš„å½¢å¼ä¸ºç¥–å›½åº†ç”Ÿï¼æ¬¢è¿å¤§å®¶**ç‚¹èµæ”¶è—åŠ å…³æ³¨å“¦**\n\nå‰è¨€\n--\n\næƒ³çœ‹æ•ˆæœæˆ–è€…æƒ³å®šåˆ¶æ˜¥èŠ‚å¤´åƒçš„å°ä¼™ä¼´è¯·ç›´å¥” **æ•ˆæœ**åŒºåŸŸï¼›  \næƒ³ä¸€ç¹**å®šåˆ¶å¤´åƒ2.0**å°å·¥å…·çš„åŸç†åŠå®ç°æ€è·¯è¯·è€å¿ƒé˜…è¯»ï¼Œæœ¬æ–‡ä»£ç ç‰‡æ®µè¾ƒå¤š~\n\n### **åœ¨è¯„è®ºåŒºæ™’å®šåˆ¶å¤´åƒï¼Œçœ‹çœ‹è°çš„å¤´åƒæœ€å¥½çœ‹ï¼ğŸ¤£**\n\nåœ¨çº¿å®šåˆ¶\n----\n\nğŸš€ğŸš€ğŸš€ **[å®šåˆ¶å¤´åƒå…¥å£, ä½“éªŒåœ°å€](https://link.juejin.cn?target=https%3A%2F%2Fwww.xiaoli.vip%2Fcustom-avatar \"https://www.xiaoli.vip/custom-avatar\")** ğŸš€ğŸš€ğŸš€\n\nğŸš€ğŸš€ğŸš€ **[githubé¡¹ç›®åœ°å€ï¼ˆæ¬¢è¿â­ï¼‰](https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxiaoli1999%2Fcustom-avatar \"https://github.com/xiaoli1999/custom-avatar\")** ğŸš€ğŸš€ğŸš€\n\nå–œæ¬¢è¿™ä¸ªå°å·¥å…·çš„è¯ï¼ŒåŠ¨åŠ¨å°æ‰‹ç‚¹ä¸ªstarâ­å“¦ï¼Œè°¢è°¢ï¼\n\nå…³äºè¿­ä»£\n----\n\nç»§ `å®šåˆ¶å…”å¹´æ˜¥èŠ‚å¤´åƒ` ä¸Šçº¿åï¼Œå¾ˆå¤šå°ä¼™ä¼´ä½“éªŒåç¬¬ä¸€æ—¶é—´å°±ç»™äº†å»ºè®®ã€åé¦ˆï¼›åœ¨å¤§å®¶çš„å¸®åŠ©ä¸‹ï¼Œå·¥å…·ä¹Ÿåœ¨ä¸æ–­çš„å®Œå–„ï¼›æ¯”å¦‚å¯¼å‡ºå›¾ç‰‡ä¸å¤Ÿæ¸…æ™°ã€ä¸èƒ½è®¾ç½®é€æ˜åº¦ç­‰ç­‰ï¼Œè¿­ä»£åˆ°1.4.0åï¼Œå·²ç»å¯ä»¥ä¿è¯æ­£å¸¸çš„ä½¿ç”¨äº†ï¼Œè¿™é‡Œé‡‡é»ç»™å¤§å®¶è¯´å£°è°¢è°¢ï¼\n\nç”±äºå½“æ—¶èšç„¦åœ¨**å…”å¹´**ã€**æ˜¥èŠ‚å¤´åƒ**ä¸Šï¼Œå·¥å…·é£æ ¼å•ä¸€ï¼ŒåŠŸèƒ½è¿˜ä¸å¤Ÿå®Œå–„ï¼Œå†…éƒ¨é€»è¾‘æœ‰ç‚¹å¤§æå°ç”¨ç­‰ç­‰ï¼Œäºæ˜¯ä¾¿æœ‰äº†å¤§ç‰ˆæœ¬çš„**å®šåˆ¶å¤´åƒ2.0**è¿­ä»£ã€‚\n\næ›´æ–°å†…å®¹\n----\n\n### ä»“åº“åç§°\n\n*    ç”± **custom-rabbitImage** æ”¹ä¸º **custom-avatar**\n\n### é¡µé¢\n\n*    é‡æ„é¡µé¢æ•´ä½“é£æ ¼ï¼Œè°ƒæ•´ä¸ºé€šç”¨å‹é£æ ¼\n*    å…¼å®¹pcã€ç§»åŠ¨ç«¯\n*    ç§»åŠ¨ç«¯å¤´åƒå¢™é‡‡ç”¨ç€‘å¸ƒæµ\n\n### ç”»å¸ƒç›¸å…³\n\n*    ç”¨æˆ·ä¸Šä¼ çš„åŸå›¾åšçŸ­è¾¹é€‚é…ï¼Œä¿è¯ä¸å˜å½¢\n*    ä¼˜åŒ–å…ƒç´ æ§ä»¶æ•ˆæœï¼Œå¢åŠ åˆ é™¤æ§ä»¶\n*    ä¼˜åŒ–ç»˜åˆ¶é€»è¾‘ï¼Œå‡å°‘æ— ç”¨è¿ç®—ã€‚\n\n### æ–°å¢åŠŸèƒ½\n\n*    å¢åŠ å¤šä¸»é¢˜é€‰é¡¹ï¼ˆä¸­ç§‹èŠ‚ã€å›½åº†èŠ‚ã€æ˜¥èŠ‚ç­‰ï¼Œå…¶ä»–ä¼ ç»ŸèŠ‚æ—¥æ•¬è¯·æœŸå¾…ï¼‰\n*    å¢åŠ è´´çº¸æ•ˆæœï¼Œå¯å¤šé€‰ã€å¯åˆ é™¤\n*    å¢åŠ å¿«é€Ÿåˆ‡æ¢å¤´åƒæ¡†åŠŸèƒ½\n*    å¢åŠ é€šçŸ¥åŠŸèƒ½ï¼ˆxxç”¨æˆ·åœ¨3åˆ†é’Ÿå‰å®šåˆ¶äº†å›½åº†å¤´åƒï¼‰\n*    å¢åŠ åˆ†äº«æµ·æŠ¥åŠŸèƒ½\n*    å¢åŠ å¤´åƒå¢™åŠŸèƒ½ï¼Œç”¨æˆ·å¯é¢„è§ˆä»–äººå®šåˆ¶çš„å¤´åƒ\n\n### ä¿®å¤å·²çŸ¥é—®é¢˜\n\n*    ä¿®å¤qqæµè§ˆå™¨æ— æ³•é€‰æ‹©æ–‡ä»¶\n*    ä¿®å¤å¾®ä¿¡æµè§ˆå™¨æ— æ³•ä¿å­˜å›¾ç‰‡\n\né¡¹ç›®æ¶æ„\n----\n\nts\n\n ä»£ç è§£è¯»\n\nå¤åˆ¶ä»£ç \n\n`vue3 | vite | ts | less | Elemenu UI | eslint | stylelint | husky | lint-staged | commitlint`\n\næ‰€éœ€ç´ æ\n----\n\nå¤´åƒæ¡†ã€è´´çº¸æ­£åœ¨è®¾è®¡ä¸­ï¼Œä¼šä¸€ç‚¹ä¸€ç‚¹è¡¥èµ·æ¥ã€‚\n\n### ä¸­ç§‹ä¸»é¢˜\n\n![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/be50eebf61b84b51b126ac31a31345b8~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1344&h=314&s=178133&e=png&b=fefafa)\n\n### å›½åº†ä¸»é¢˜\n\n![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/026e22eef5ae421a9434754afd749d30~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1371&h=340&s=171160&e=png&b=fdf9f8)\n\n### æ˜¥èŠ‚ä¸»é¢˜\n\n![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9e09a89a568a47c9b88e3bde7c9cfa63~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1336&h=379&s=227629&e=png&b=fdf9f8)\n\næ€è·¯\n--\n\nåŸºæœ¬æ€è·¯ä¸å˜ï¼Œ[å®šåˆ¶å…”å¹´æ˜¥èŠ‚å¤´åƒ](https://juejin.cn/post/7189425070291288121 \"https://juejin.cn/post/7189425070291288121\")ä¸­å·²ç»è®²è¿‡ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°äº†ã€‚\n\n### ç”»å¸ƒäº¤äº’é€»è¾‘ä¼˜åŒ–\n\nè¿™æ˜¯ç¬¬ä¸€ç‰ˆçš„é€»è¾‘æ¢³ç† ![flow.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b2e2b6b594b54822a1362d4375577453~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp)\n\nè€ƒè™‘åˆ°å®šåˆ¶å¤´åƒå·¥å…·å›¾å±‚ä¸ä¼šè¿‡å¤šï¼ŒåŠŸèƒ½ä¸ä¼šå¤ªå¤æ‚ï¼Œäºæ˜¯ åœ¨æ–°ç‰ˆä¸­åšäº†å¦‚ä¸‹ä¼˜åŒ–\n\n*   åˆ é™¤ç»˜åˆ¶å¤šä¸ªå›¾å±‚é€»è¾‘ï¼ˆç›‘å¬å›¾å±‚åˆ—è¡¨å˜åŒ–ï¼Œè¿›è€Œç»˜åˆ¶å›¾å±‚ï¼‰\n*   ç»˜åˆ¶å¤´åƒæ¡†æ”¹ä¸ºä¸»åŠ¨è°ƒç”¨ï¼Œå‡å°‘æ— ç”¨è°ƒç”¨é¢‘æ¬¡ï¼›\n*   ç»˜åˆ¶è´´çº¸ä¸ºä¸»åŠ¨è°ƒç”¨ï¼Œå¯ç»˜åˆ¶å¤šä¸ª\n*   åˆ é™¤ç”»å¸ƒæ“ä½œåŒæ­¥é€»è¾‘ï¼ˆä¸éœ€è¦å›æ˜¾æ•°æ®åˆ°é¡µé¢ï¼Œä¹Ÿä¸ç”¨äºŒæ¬¡ç»˜åˆ¶ï¼Œæ•…åˆ é™¤ï¼‰\n\nåšå®Œä¸Šè¿°ä¼˜åŒ–åï¼Œä»£ç é‡æ˜æ˜¾ä¸‹æ¥äº†ï¼›åªæ€ªå½“æ—¶æ²¡æœ‰è¿‡å¤šçš„æ€è€ƒï¼Œå°±å°†å…¶ä»–é¡¹ç›®çš„å®ç°æ–¹å¼ç”Ÿæ¬ç¡¬å¥—äº†ã€‚\n\nä»£ç å®ç°\n----\n\n### ç”»å¸ƒ\n\n1.  åˆå§‹åŒ–ç”»å¸ƒåŠæ§ä»¶\n\nts\n\n ä»£ç è§£è¯»\n\nå¤åˆ¶ä»£ç \n\n`const init = () => {     /* åˆå§‹åŒ–æ§ä»¶ */     initFabricControl()     /* åˆå§‹åŒ–ç”»å¸ƒ */     Canvas = initCanvas(CanvasId.value, canvasSize, false)     // å…ƒç´ ç¼©æ”¾äº‹ä»¶     Canvas.on('object:scaling', canvasMouseScaling) } /* åˆå§‹åŒ–æ§ä»¶ */ const initFabricControl = () => {     fabric.Object.prototype.set(control)     // è®¾ç½®ç¼©æ”¾æ‘‡æ†åç§»     fabric.Object.prototype.controls.mtr.offsetY = control.mtrOffsetY     // éšè—ä¸éœ€è¦çš„æ§ä»¶     hiddenControl.map((name: string) => (fabric.Object.prototype.controls[name].visible = false))     /* æ·»åŠ åˆ é™¤æ§ä»¶ */     const delImgElement = document.createElement('img')     delImgElement.src = new URL('./icons/delete.png', import.meta.url).href     const size = 52     const deleteControlHandel = (e, transform:any) => {         const target = transform.target         const canvas = target.canvas         canvas.remove(target).renderAll()     }     const renderDeleteIcon = (ctx:any, left:any, top:any, styleOverride:any, fabricObject:any) => {         ctx.save()         ctx.translate(left, top)         ctx.rotate(fabric.util.degreesToRadians(fabricObject.angle))         ctx.drawImage(delImgElement, -size / 2, -size / 2, size, size)         ctx.restore()     }     fabric.Object.prototype.controls.deleteControl = new fabric.Control({         x: 0.5,         y: -0.5,         cornerSize: size,         offsetY: -48,         offsetX: 48,         cursorStyle: 'pointer',         // eslint-disable-next-line @typescript-eslint/ban-ts-comment         // @ts-ignore         mouseUpHandler: deleteControlHandel,         render: renderDeleteIcon     }) }`\n\n2.  ç›‘å¬åŸå›¾ï¼ˆç”¨æˆ·ä¸Šä¼ çš„å¤´åƒï¼‰æ”¹å˜ï¼Œå¹¶è¿›è¡ŒçŸ­è¾¹é€‚é…\n\nts\n\n ä»£ç è§£è¯»\n\nå¤åˆ¶ä»£ç \n\n`/* æ›´æ”¹åŸå›¾ */ watch(() => props.bg, async (val) => (await drawBackground(Canvas, val))) /**  * @function drawBackground ç»˜åˆ¶èƒŒæ™¯  * @param { Object } Canvas ç”»å¸ƒå®ä¾‹  * @param { String } bgUrl ç”¨æˆ·ä¸Šä¼ å¾—åŸå›¾ç‰‡é“¾æ¥  */ export const drawBackground = async (Canvas, bgUrl: string) => {     return new Promise((resolve: any) => {         if (!bgUrl) return resolve()         fabric.Image.fromURL(bgUrl, (img: any) => {             img.set({                 left: Canvas.width / 2,                 top: Canvas.height / 2,                 originX: 'center',                 originY: 'center'             })             /* çŸ­è¾¹é€‚é… */             img.width > img.height ? img.scaleToHeight(Canvas.height, true) : img.scaleToWidth(Canvas.width, true)             Canvas.setBackgroundImage(img, Canvas.renderAll.bind(Canvas))             resolve()         }, { crossOrigin: 'Anonymous' })     }) }`\n\n3.  ç»˜åˆ¶å¤´åƒæ¡†ï¼Œå¹¶éšè—åˆ é™¤æŒ‰é’®æ§ä»¶\n\nts\n\n ä»£ç è§£è¯»\n\nå¤åˆ¶ä»£ç \n\n``const frameName = 'frame' /**  * @function addFrame æ·»åŠ å¤´åƒæ¡†å›¾å±‚  * @param { String } url å¤´åƒæ¡†é“¾æ¥  */ const addFrame = async (url = '') => {     if (!url) return     const frameLayer: any = await drawImg(`${ url }!frame`)     frameLayer.set({         left: Canvas.width / 2,         top: Canvas.height / 2     })     /* éšè—åˆ é™¤æŒ‰é’® */     frameLayer.setControlVisible('deleteControl', false)     frameLayer.scaleToWidth(Canvas.width, true)     frameLayer.name = frameName     addOrReplaceLayer(Canvas, frameLayer) }``\n\n4.  è®¾ç½®å¤´åƒæ¡†é€æ˜åº¦\n\nts\n\n ä»£ç è§£è¯»\n\nå¤åˆ¶ä»£ç \n\n`/**  * @function setFrameOpacity è®¾ç½®å¤´åƒæ¡†é€æ˜åº¦  * @param { Number } opacity é€æ˜åº¦  */ const setFrameOpacity = (opacity = 1) => {     const frameLayer: any = findCanvasItem(Canvas, frameName)[1] || ''     if (!frameLayer) return     frameLayer.set({ opacity })     Canvas.renderAll() }`\n\n5.  ç»˜åˆ¶è´´çº¸\n\njs\n\n ä»£ç è§£è¯»\n\nå¤åˆ¶ä»£ç \n\n``/**  * @function addMark æ·»åŠ è´´çº¸  * @param { String } url è´´çº¸é“¾æ¥  */ const addMark = async (url) => {     if (!url) return     const markLayer: any = await drawImg(url)     markLayer.set({         left: Canvas.width / 2,         top: Canvas.height / 2     })     markLayer.width > markLayer.height ? markLayer.scaleToHeight(200, true) : markLayer.scaleToWidth(200, true)     markLayer.name = `mark-${ createUuid() }`     addOrReplaceLayer(Canvas, markLayer) }``\n\n6.  ä¿å­˜å›¾ç‰‡ï¼Œå¯¼å‡ºbase64\n\nts\n\n ä»£ç è§£è¯»\n\nå¤åˆ¶ä»£ç \n\n`/**  * @function save ä¿å­˜æ•ˆæœå›¾  * @return { String } result base64 ä¿å­˜/é¢„è§ˆæ—¶è¿”å›  */ const save = async (): Promise<string> => {     return Canvas.toDataURL({         format: 'png',         left: 0,         top: 0,         width: Canvas.width,         height: Canvas.height     }) }`\n\nç°åœ¨ä»£ç æ˜æœ—äº†å¾ˆå¤šï¼ŒçŠ¹å¦‚æŸ³æš—èŠ±æ˜ã€‚\n\n### é¡µé¢äº¤äº’\n\n1.  ç”¨æˆ·ä¸Šä¼ å›¾ç‰‡ï¼Œç”Ÿæˆæœ¬åœ°çŸ­é“¾ï¼Œç„¶åç»˜åˆ¶åŸå¤´åƒï¼Œå¹¶é»˜è®¤ç»˜åˆ¶ç¬¬ä¸€ä¸ªå¤´åƒæ¡†ã€‚\n\nts\n\n ä»£ç è§£è¯»\n\nå¤åˆ¶ä»£ç \n\n`const uploadFile = async (e: any) => {     if (!e.target.files || !e.target.files.length) return ElMessage.warning('ä¸Šä¼ å¤±è´¥ï¼')     const file = e.target.files[0]     if (!file.type.includes('image')) return ElMessage.warning('è¯·ä¸Šä¼ æ­£ç¡®çš„å›¾ç‰‡æ ¼å¼ï¼')     const url = getCreatedUrl(file) ?? ''     /* ç”¨æˆ·åˆæ¬¡ä¸Šä¼ å¤´åƒé»˜è®¤é€‰ä¸­ç¬¬ä¸€ä¸ªå¤´åƒæ¡† */     if (!originAvatarUrl.value) {         originAvatarUrl.value = url         selectFrame(0)     } else {         originAvatarUrl.value = url     }     (document.getElementById('uploadImg') as HTMLInputElement).value = '' }`\n\n2.  ç”¨æˆ·ç‚¹å‡»å¤´åƒæ¡†æˆ–ç‚¹å‡»å¿«é€Ÿåˆ‡æ¢æŒ‰é’®ï¼Œç»˜åˆ¶å¤´åƒæ¡†\n\nts\n\n ä»£ç è§£è¯»\n\nå¤åˆ¶ä»£ç \n\n`/* å¿«é€Ÿåˆ‡æ¢å¤´åƒæ¡† */ const changeFrame = (isNext) => {     if (!originAvatarUrl.value) return ElMessage.warning('è¯·å…ˆä¸Šä¼ å¤´åƒï¼')     const frameList =  picList[styleIndex.value].frameList     if (isNext) {         (selectFrameIndex.value === frameList.length - 1) ? selectFrameIndex.value = 0 : (selectFrameIndex.value as number)++     } else {         (selectFrameIndex.value === 0) ? selectFrameIndex.value = frameList.length - 1 : (selectFrameIndex.value as number)--     }     selectFrame(selectFrameIndex.value as number) } /* ç»˜åˆ¶å¤´åƒæ¡†-è°ƒç”¨ç”»å¸ƒç»˜åˆ¶å‡½æ•° */ const selectFrame = (index: number) => {     if (!originAvatarUrl.value) return ElMessage.warning('è¯·å…ˆä¸Šä¼ å¤´åƒï¼')     opacity.value = 1     selectFrameIndex.value = index     frameUrl.value = picList[styleIndex.value].frameList[index]     DrawRef.value.addFrame(frameUrl.value) }`\n\n3.  è®¾ç½®å¤´åƒæ¡†é€æ˜åº¦\n\nts\n\n ä»£ç è§£è¯»\n\nå¤åˆ¶ä»£ç \n\n`const opacity = ref<number>(1) const opacityChange = (num: number) => DrawRef.value.setFrameOpacity(num)`\n\n4.  ç‚¹å‡»è´´çº¸ï¼Œç»˜åˆ¶è´´çº¸\n\nts\n\n ä»£ç è§£è¯»\n\nå¤åˆ¶ä»£ç \n\n`const selectMark = (index: number) => {     if (!originAvatarUrl.value) return ElMessage.warning('è¯·å…ˆä¸Šä¼ å¤´åƒï¼')     const markUrl = picList[styleIndex.value].markList[index]     DrawRef.value.addMark(markUrl) }`\n\né¡µé¢çš„äº¤äº’é€»è¾‘ç›¸å¯¹ç®€å•ï¼Œä¸€æ­¥ä¸€æ­¥èµ°å°±okã€‚\n\n### æ»šåŠ¨é€šçŸ¥åŠ¨ç”»æ•ˆæœ\n\nè¿™é‡Œä½¿ç”¨vueçš„è¿‡æ¸¡åŠ¨ç”»ï¼Œæ¨¡æ‹Ÿäº†æ»šåŠ¨çš„æ•ˆæœï¼Œ æœ¬è´¨å°±æ˜¯keyå˜äº†åï¼Œä¼šè§¦å‘å¼¹å…¥å¼¹å‡ºæ•ˆæœã€‚\n\nhtml\n\n ä»£ç è§£è¯»\n\nå¤åˆ¶ä»£ç \n\n`<transition name=\"notice\" mode=\"out-in\">     <div v-if=\"avatarList && avatarList.length\" class=\"notice\" :key=\"avatarList[noticeIndex].last_modified\">         <p>             <span style=\"color: #409eff;\">æ¸¸å®¢{{ (avatarList[noticeIndex].last_modified + '').slice(-5) }} </span>             <span style=\"padding-left: 2px;\">{{ calcOverTime(avatarList[noticeIndex].last_modified) }}å‰</span>             <span style=\"padding-right: 2px;\">åˆ¶ä½œäº†</span>             <span style=\"color: #f56c6c;\">{{ styleEnums[avatarList[noticeIndex].id] }}å¤´åƒ </span>             <span style=\"padding-left: 4px;\"></span>         </p>         <img :src=\"avatarList[noticeIndex].url\" alt=\"\">     </div> </transition>`\n\n### æµ·æŠ¥åŠŸèƒ½\n\nè¿™ä¸ªç”¨**html2canvas**åº“å°±å¥½äº†ï¼Œç”¨æ­£å¸¸çš„csså±æ€§ï¼Œä»–éƒ½å¯ä»¥å®ç°ã€‚\n\nhtml\n\n ä»£ç è§£è¯»\n\nå¤åˆ¶ä»£ç \n\n`<!-- ç”Ÿæˆæµ·æŠ¥ --> <div id=\"poster\" class=\"poster\">     <!-- å†…å®¹çœç•¥ --> </div>`\n\nts\n\n ä»£ç è§£è¯»\n\nå¤åˆ¶ä»£ç \n\n`/* æ³¨æ„å›¾ç‰‡è·¨åŸŸ */ await nextTick(() => {     /* ç”Ÿæˆæµ·æŠ¥ */     const posterDom = document.getElementById('poster') as HTMLElement     html2canvas(posterDom, { useCORS: true }).then((canvas) => {         shareUrl.value = canvas.toDataURL('image/png')         shareShow.value = true         loading.value = false     }) })`\n\n### ç§»åŠ¨ç«¯ç€‘å¸ƒæµå®ç°\n\npcå’Œç§»åŠ¨ç«¯éƒ½æ˜¯gridå¸ƒå±€ï¼Œæˆ‘ä»¬ç»™ç§»åŠ¨ç«¯çš„è¡Œåˆ—ä»½æ•°éšæœºï¼Œpcç«¯å¼ºåˆ¶è®¾ä¸º1ï¼Œä¿è¯è¡Œã€åˆ—æ‰€å çš„ä»½æ•°ä¸€è‡´å°±å¥½ï¼ˆå®šåˆ¶å¤´åƒå¯¼å‡ºéƒ½æ˜¯æ­£æ–¹å½¢çš„ï¼‰\n\n**grid-auto-flow: dense;** è¿™ä¸ªæ ·å¼æ˜¯å…³é”®ï¼Œ\n\nhtml\n\n ä»£ç è§£è¯»\n\nå¤åˆ¶ä»£ç \n\n``<div class=\"wall\">     <div class=\"wall-list\">         <el-image v-for=\"(url, index) in avatarPageUrlList\" :key=\"url\" :src=\"url\"          :style=\"{ gridColumn: `span ${ avatarList[index].span}`, gridRow: `span ${ avatarList[index].span }` }\" />     </div> </div>``\n\nless\n\n ä»£ç è§£è¯»\n\nå¤åˆ¶ä»£ç \n\n`.wall {     .wall-list {         display: grid;         gap: 8px;         grid-template-columns: repeat(8, minmax(0, 1fr));         grid-auto-flow: dense;     }     .wall-more {         padding-top: 16px;         text-align: center;     } } /* pcç«¯ä¸ä½¿ç”¨ç€‘å¸ƒæµï¼Œå¼ºè¦†ç›–è¡Œåˆ—ä»½æ•° */ @media only screen and (min-width: 769px) {     .wall {         .wall-list {             > div {                 grid-row: span 1 !important;                 grid-column: span 1 !important;             }         }     } }`\n\nåˆ°è¿™é‡Œï¼ŒåŸºæœ¬æ ¸å¿ƒã€ç»†èŠ‚çš„ç‚¹éƒ½å®ç°äº†ï¼›è‹¥æƒ³çŸ¥é“æ›´å¤šä»£ç è®¾è®¡ã€å¼€å‘æ€è·¯ï¼Œè¯·ç§»æ­¥githubï¼Œä»£ç å·²å¼€æºã€‚\n\nå…³äºå¼€æº\n----\n\nè¿™ä¸€è·¯èµ°æ¥å®å±ä¸æ˜“ï¼Œå…¶ä¸­è‹¦æ¶©ä¸ç¦è¨€è¯´ï¼›æˆ‘ä¹Ÿæ·±çŸ¥ï¼Œè¿™ä¸ªé¡¹ç›®è¿˜æœ‰è®¸å¤šçš„ä¸è¶³ï¼Œè¿™å¹¶ä¸èƒ½å¤Ÿä¸€è¹´è€Œå°±çš„ï¼›å¤§å®¶åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œæœ‰ä»€ä¹ˆå»ºè®®æˆ–æ„è§ï¼Œå¯ä»¥å‘Šè¯‰æˆ‘ã€‚è¿™ä¹Ÿæ˜¯æˆ‘è§‰å¾—å¼€æºé¡¹ç›®æ›´æœ‰é­…åŠ›çš„ç‚¹ï¼Œå¯ä»¥é›†æ€å¹¿ç›Šï¼Œé›†ç™¾å®¶ä¹‹ä¼—é•¿ã€‚å¸Œæœ›è¿™ä¸ªå·¥å…·èƒ½æ„ˆå‘å®Œå–„ï¼Œå¾—åˆ°æ›´å¤šäººçš„å–œæ¬¢ï¼\n\nä½™éŸ³\n--\n\næœ€è¿‘æœ‰ä¸ªæƒ³æ³•ï¼Œå‡†å¤‡åšä¸ªåˆ›æ„å·¥å…·ä¸“æ ï¼Œè¿™ä¸ªè¿˜å¾—å†æ–Ÿé…Œæ–Ÿé…Œã€‚\n\nç¥ç¥–å›½èŠ‚æ—¥å¿«ä¹ï¼Œä¹Ÿç¥å¤§å®¶å›½åº†å¿«ä¹å“¦ï¼Œå†ä¼šï¼"
}