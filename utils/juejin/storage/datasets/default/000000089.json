{
	"title": "GaussDBSQL基础语法-变量&常量",
	"author": "Gauss松鼠会",
	"publishTime": "2024-09-23",
	"readTime": "阅读4分钟",
	"tags": "[\"前端\"]",
	"description": "一、前言SQL是用于访问和处理数据库的标准计算机语言。GaussDB支持SQL标准（默认支持SQL2、SQL3和SQL4的主要特性）。本系列将以《云数据库GaussDB—SQL参考》在线文档为主线",
	"article": "### 一、前言\n\nSQL是用于访问和处理数据库的标准计算机语言。GaussDB支持SQL标准（默认支持SQL2、SQL3和SQL4的主要特性）。\n\n本系列将以《云数据库GaussDB—SQL参考》在线文档为主线进行介绍。\n\n### 二、GaussDB数据库中的常量和变量的基本概述及语法定义\n\n数据库中的变量和常量是两种重要的数据使用类型。变量是可以变化和被修改的，而常量则是固定不变，不能被修改的。\n\n1、变量定义 在GaussDB中，变量是用于存储可变值的数据类型。变量通常在程序中定义，并在执行期间可以更改其值。在GaussDB中，可以使用以下语法来定义变量：\n\nini\n\n 代码解读\n\n复制代码\n\n`DECLARE variable_name data_type;`\n\n其中，variable\\_name 是变量的名称，data\\_type 是变量的数据类型。例如，要定义一个名为 my\\_variable 的整数变量，可以使用以下语句：\n\nsql\n\n 代码解读\n\n复制代码\n\n`DECLARE my_variable INT;`\n\n2、常量定义 在GaussDB中，常量用于存储固定值的数据类型。常量在程序中定义后，其值不能被修改。在GaussDB中，可以使用以下语法来定义常量：\n\nini\n\n 代码解读\n\n复制代码\n\n`DECLARE constant_name data_type = constant_value;`\n\n其中，constant\\_name 是常量的名称，data\\_type 是常量的数据类型，constant\\_value 是常量的值。例如，要定义一个名为 my\\_constant 的整数常量，可以使用以下语句：\n\nini\n\n 代码解读\n\n复制代码\n\n`DECLARE my_constant INT = 10;`\n\n这将定义一个名为 my\\_constant 的整数常量，其值为 10。\n\n请注意，这只是GaussDB中定义变量和常量的基本语法。具体建议参考GaussDB的官方文档或相关资料以获取更详细信息。\n\n3、其他（%TYPE、%ROWTYPE属性） 变量类型除了支持基本类型，还可使用%TYPE和%ROWTYPE去声明一些与其他表字段或表结构本身相关的变量。\n\n%TYPE属性：\n\n%TYPE主要用于声明某个与其他变量类型（例如，表中某列的类型）相同的变量。假如我们想定义一个my\\_name变量，它的变量类型与employee的firstname类型相同，我们可以通过如下定义：\n\nsql\n\n 代码解读\n\n复制代码\n\n`--使用某列的属性声明 DECLARE my_name employee.firstname%TYPE --使用其他变量的属性声明 DECLARE    name     VARCHAR(10) NOT NULL := 'ZhangSan';   surname  name%TYPE := 'LiSi';`\n\n这样定义可以带来两个好处，首先，我们不用预先知道employee 表的firstname类型具体是什么。其次，即使之后firstname类型有了变化，我们也不需要再次修改my\\_name的类型。\n\n%ROWTYPE属性：\n\n%ROWTYPE属性主要用于对一组数据的类型声明，用于存储表中的一行数据，或从游标匹配的结果。假如，我们需要一组数据，该组数据的字段名称与字段类型都与employee表相同。我们可以通过如下定义：\n\nsql\n\n 代码解读\n\n复制代码\n\n`--根据表employee表结构定义变量类型 DECLARE my_employee employee%ROWTYPE`\n\n### 三、在GaussDB数据库中如何使用变量&常量（示例）\n\n变量&常量一般在数据库中不能直接应用到简单的SQL语句中，而是常常用于自定义的函数、存储过程中。下文简单举一列子(可参考前面FUNCTION/PROCEDURE等相关文章)：\n\n示例一，定义常量&变量（创建动态语句） ![在这里插入图片描述](https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1e673f2f745c498bbef83cd01371db64~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR2F1c3Pmnb7pvKDkvJo=:q75.awebp?rk3s=f64ab15b&x-expires=1728271087&x-signature=HVm6z5bC2XvJJVSD2f0irtJkN9M%3D)\n\n常量作为WHERE 条件之一；变量存储查询的结果值。\n\n示例二，定义变量（创建游标） ![在这里插入图片描述](https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/97da69715bd04dcfa177cad87c43189f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR2F1c3Pmnb7pvKDkvJo=:q75.awebp?rk3s=f64ab15b&x-expires=1728271087&x-signature=TEQNctz0KFbW%2BjVo028HSj%2Bbyp4%3D)\n\n定义变量，存储游标结果值\n\n示例三，定义变量（创建package属性重载函数） ![在这里插入图片描述](https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9273ce9b3ac7480b96dfc012cde7aa40~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR2F1c3Pmnb7pvKDkvJo=:q75.awebp?rk3s=f64ab15b&x-expires=1728271087&x-signature=9pczR4nzIqHRlg%2Fop97tUrer2fQ%3D)\n\n定义TEXT类型变量、赋值SQL语句\n\n### 四、小结\n\n在GaussDB数据库中，变量和常量是两种不同的数据存储方式。变量是用于存储可变值的数据类型，可以在程序执行期间更改其值。而常量则是用于存储固定值的数据类型，其值在定义后不能被修改。 在GaussDB中，可以使用DECLARE语句来定义变量和常量，并通过使用“:=”运算符来为它们赋值。正确地定义和使用变量和常量可以提高程序的灵活性和可维护性，并确保数据的准确性和完整性。\n\n——结束\n\n​"
}