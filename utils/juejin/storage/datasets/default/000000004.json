{
	"title": "PyQtï¼šå›¾è¡¨ä¹Ÿèƒ½è¿™ä¹ˆç§€ï¼Œæ— ç¼é›†æˆECharts",
	"author": "å¿—å­—è¾ˆå°èš‚èš",
	"publishTime": "2024-10-04",
	"readTime": "é˜…è¯»5åˆ†é’Ÿ",
	"tags": "[\"åç«¯\",\"å‰ç«¯\",\"Python\"]",
	"description": "ä¸€.å‰è¨€åœ¨è¿™ä¸€ç¯‡é‡Œé¢ä¼šå¼•å…¥ä¸¤ä¸ªçŸ¥è¯†ç‚¹ï¼šApacheECharts:ä¸€æ¬¾JavaScriptçš„å¯è§†åŒ–å›¾è¡¨å›¾ï¼ŒåŠŸèƒ½é½å…¨ï¼Œç”¨æ³•ç®€å•PyQt6-WebEngineï¼šPyQt6çš„æ‰©",
	"article": "### ä¸€. å‰è¨€\n\nåœ¨è¿™ä¸€ç¯‡é‡Œé¢ä¼šå¼•å…¥ä¸¤ä¸ªçŸ¥è¯†ç‚¹ ï¼š\n\n*   [Apache ECharts](https://link.juejin.cn?target=https%3A%2F%2Fecharts.apache.org%2Fexamples%2Fzh%2Findex.html \"https://echarts.apache.org/examples/zh/index.html\") : ä¸€æ¬¾ JavaScript çš„å¯è§†åŒ–å›¾è¡¨å›¾ ï¼ŒåŠŸèƒ½é½å…¨ ï¼Œç”¨æ³•ç®€å•\n*   PyQt6-WebEngine ï¼š PyQt6 çš„æ‰©å±•æ¨¡å—ï¼Œå®ƒåŸºäº Qt WebEngineï¼Œå…è®¸åœ¨ PyQt6 åº”ç”¨ç¨‹åºä¸­åµŒå…¥å’Œæ˜¾ç¤ºç°ä»£ç½‘é¡µå†…å®¹\n\n> å…ˆæ¥çœ‹ä¸€ä¸‹ ECharts æ”¯æŒçš„å›¾è¡¨æœ‰å¤šå°‘\n\n![image.png](https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c78ac088ade04f9fac07eb952593987e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b-X5a2X6L6I5bCP6JqC6JqB:q75.awebp?rk3s=f64ab15b&x-expires=1728657791&x-signature=5bf91u2OhPGHVak%2BOyG9Zr2YHts%3D)\n\n> å†æ¥çœ‹çœ‹ WebEngine çš„ç®€å•åŸç†\n\nWebEngine æ˜¯åŸºäº Chromium å¼€å‘ ï¼Œé€šè¿‡é›†æˆ Chromium åˆ° QT æ¡†æ¶ä¸­ ï¼Œä½¿ WebEngine å…·æœ‰äº†æµè§ˆå™¨çš„åŠŸèƒ½ã€‚\n\n**ä½†æ˜¯è¦æ³¨æ„ ï¼Œç”±äºæ‰“å…¥äº† Chromium çš„ç›¸å…³èµ„æºå’Œæ–‡ä»¶ ï¼Œä¼šå¯¼è‡´ PyQt å¯¼æ‰“åŒ…çš„æ–‡ä»¶æ˜æ˜¾å˜å¤§ã€‚**\n\næ‰€ä»¥åœ¨æ‰“åŒ…è¿‡ç¨‹ä¸­ ï¼Œéœ€è¦ä¼˜åŒ–æ–‡ä»¶å¤§å°ç­‰å·¥ä½œï¼ˆè¿™ä¸ªåç»­å†çœ‹ï¼‰ã€‚\n\n### äºŒ. PyQt é›†æˆ Web-Engine\n\n#### 2.1 åŸºç¡€å…¥é—¨ä½¿ç”¨\n\nPython\n\n ä»£ç è§£è¯»\n\nå¤åˆ¶ä»£ç \n\n`// å®‰è£… Web-WebEngine pip install PyQt6 PyQt6-WebEngine // ç›¸å…³ä»£ç  ï¼š  import sys from PyQt6.QtWidgets import QApplication, QMainWindow from PyQt6.QtWebEngineWidgets import QWebEngineView from PyQt6.QtCore import QUrl class WebBrowser(QMainWindow):     def __init__(self):         super().__init__()         self.setWindowTitle('PyQt6 ç™¾åº¦ä¸€ä¸‹')         self.setGeometry(100, 100, 1200, 800)         # åˆ›å»º QWebEngineView         self.browser = QWebEngineView()         # åŠ è½½ URL         self.browser.setUrl(QUrl(\"https://www.baidu.com/\"))         # å°†æµè§ˆå™¨è®¾ç½®ä¸ºä¸»çª—å£çš„å°éƒ¨ä»¶         self.setCentralWidget(self.browser) if __name__ == \"__main__\":     app = QApplication(sys.argv)     window = WebBrowser()     window.show()     sys.exit(app.exec())`\n\n![image.png](https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c3d22fb5284440919380000c999b9f07~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b-X5a2X6L6I5bCP6JqC6JqB:q75.awebp?rk3s=f64ab15b&x-expires=1728657791&x-signature=8OJJE%2FTNLHGFqKYvky5OkCpQ0Og%3D)\n\n*   åœ¨è¿™ä¸ªé‡Œé¢å®ç°äº†åŸºç¡€çš„æµè§ˆå™¨åŠŸèƒ½ ï¼Œè®© PyQT åº”ç”¨é‡Œé¢å¯ä»¥å±•ç¤ºWebç«¯çš„é¡µé¢\n\n> ç›´æ¥å±•ç¤º HTML è„šæœ¬\n\npython\n\n ä»£ç è§£è¯»\n\nå¤åˆ¶ä»£ç \n\n`html_content = ''' <!DOCTYPE html> <html> <head>     <title>PyQt6 WebEngine Example</title> </head> <body>     <p>åœ¨ PyQt6 App ä¸­å±•ç¤ºä¸€æ®µ HTML æ–‡æœ¬</p> </body> </html> ''' # åŠ è½½ HTML å†…å®¹ self.browser.setHtml(html_content)`\n\n*   è¿˜å¯ä»¥é€šè¿‡ä¼ å…¥ä¸€æ®µ HTML è„šæœ¬ + setHtml æ–¹æ³• ï¼Œå±•ç¤º HTML æ–‡æœ¬\n*   ä½†æ˜¯è¿™æ ·å¹¶ä¸æ»¡è¶³æˆ‘ä»¬çš„å¤æ‚éœ€æ±‚ ï¼Œæˆ‘ä»¬éœ€è¦ä¸€å®šçš„ JS çš„èƒ½åŠ›\n\n#### 2.2 è¿è¡Œç›¸å…³çš„ Java Script\n\n> ç¬¬ä¸€ç§æ–¹å¼ ï¼š æŠŠ JavaScript ä»£ç å†™åœ¨è„šæœ¬æ–‡ä»¶ä¸­\n\npython\n\n ä»£ç è§£è¯»\n\nå¤åˆ¶ä»£ç \n\n`import sys from PyQt6.QtWidgets import QApplication, QMainWindow, QPushButton, QVBoxLayout, QWidget from PyQt6.QtWebEngineWidgets import QWebEngineView class WebBrowser(QMainWindow):     def __init__(self):          super().__init__()         self.setWindowTitle('PyQt6 JS ä»£ç ')         self.setGeometry(100, 100, 1200, 800)         # åˆ›å»ºä¸»å¸ƒå±€         self.layout = QVBoxLayout()         # åˆ›å»ºæµè§ˆå™¨         self.browser = QWebEngineView()         # HTML å†…å®¹         html_content = '''         <!DOCTYPE html>         <html>         <head>             <title>JavaScript Example</title>         </head>         <body>             <h1 id=\"title\">è¿™æ˜¯ä¸€æ®µæ–‡æœ¬!</h1>             <button onclick=\"changeTitle()\">Change Title</button>             <script>                 function changeTitle() {                     document.getElementById(\"title\").innerText = \"æˆ‘ç‚¹äº†ä¸€ä¸‹ï¼Œæ‰€ä»¥å®ƒå˜äº†\";                 }             </script>         </body>         </html>         '''         # åŠ è½½ HTML         self.browser.setHtml(html_content)         self.setCentralWidget(self.browser) // çœç•¥ main æ–¹æ³•`\n\n*   æŠŠ HTML ç›¸å…³å†…å®¹èšåˆåœ¨è‡ªå·±çš„ HTML æ–‡ä»¶é‡Œé¢ ï¼Œç„¶åè®©å®ƒçš„æ¨¡å—å†…éƒ¨æµè½¬æ˜¯ **ä¸€ç§æ¯”è¾ƒå¥½çš„éš”ç¦»æ–¹å¼**\n*   ä½†æ˜¯ ï¼Œåœ¨ PyQT ä¸Šé¢æˆ‘ä»¬**æ— æ³•è¿›è¡Œå®Œå…¨çš„éš”ç¦»** ï¼Œå› ä¸ºæ•°æ®è¦è¿›è¡Œæµè½¬ ï¼ŒåŠŸèƒ½è¦å›è°ƒ ï¼Œè¿™æ ·å°±è¦è¿›è¡Œè€¦åˆäº¤äº’\n\n> æ–¹å¼äºŒ ï¼š Python å’Œ Web äº¤äº’è¿›è¡Œè€¦åˆ\n\npython\n\n ä»£ç è§£è¯»\n\nå¤åˆ¶ä»£ç \n\n`import sys from PyQt6.QtWidgets import QApplication, QMainWindow, QPushButton, QVBoxLayout, QWidget from PyQt6.QtWebEngineWidgets import QWebEngineView class WebBrowser(QMainWindow):     def __init__(self):         super().__init__()         self.setWindowTitle('JavaScript è„šæœ¬çš„ä½¿ç”¨')         self.setGeometry(100, 100, 1200, 800)         # åˆ›å»ºä¸»å¸ƒå±€         self.layout = QVBoxLayout()         # åˆ›å»ºæµè§ˆå™¨         self.browser = QWebEngineView()         # HTML å†…å®¹         html_content = '''         <!DOCTYPE html>         <html>         <head>             <title>JavaScript Example</title>         </head>         <body>             <h1 id=\"title\">Hello, World!</h1>         </body>         </html>         '''         # åŠ è½½ HTML         self.browser.setHtml(html_content)         # æ·»åŠ æŒ‰é’®ç”¨äºæ‰§è¡Œ JavaScript         self.button = QPushButton('ç‚¹å‡»ä¿®æ”¹')         self.button.clicked.connect(self.run_js)         # å¸ƒå±€ ï¼ˆæ­¤å¤„æ·»åŠ äº†æŒ‰é’®å’Œå±•ç¤ºçª—ï¼‰         self.layout.addWidget(self.browser)         self.layout.addWidget(self.button)         # åˆ›å»ºä¸­å¤®å°éƒ¨ä»¶å¹¶è®¾ç½®å¸ƒå±€         container = QWidget()         container.setLayout(self.layout)         self.setCentralWidget(container)     def run_js(self):         # è¿è¡Œ JavaScript å¹¶è·å–ç»“æœ         # å‰é¢æ˜¯è¦æ‰§è¡Œçš„ JS è„šæœ¬ ï¼Œåé¢æ˜¯å›è°ƒçš„æ–¹æ³•         self.browser.page().runJavaScript(             'document.getElementById(\"title\").innerText=\"ç‚¹äº†ä¸€ä¸‹æœ€ä¸‹é¢çš„æŒ‰é’®\"', self.js_callback)     def js_callback(self, result):         print(f\"JavaScript Result: {result}\") // çœç•¥ main æ–¹æ³•`\n\nåœ¨è¿™ä¸ªä»£ç é‡Œé¢ ï¼Œå°±å®ç°äº† PyQT çš„å·¥å…·ç»„ä»¶å’Œ JS / HTML çš„äº¤äº’å…³ç³»\n\n#### 2.3 åŠ è½½ HTML æ–‡ä»¶\n\n*   ä¸è¿‡ ï¼Œç›´æ¥æŠŠ HTML å†…å®¹å†™åœ¨ä»£ç é‡Œé¢æ˜¯å¾ˆä¸åˆç†çš„ ï¼Œæ‰€ä»¥`å¯ä»¥é€šè¿‡å¼•å…¥ HTML æ–‡ä»¶è¿›è¡Œæ›´è½»é‡åŒ–çš„å¤„ç†`\n\npython\n\n ä»£ç è§£è¯»\n\nå¤åˆ¶ä»£ç \n\n`# åŠ è½½æœ¬åœ° HTML æ–‡ä»¶ current_dir = os.path.dirname(os.path.abspath(__file__)) local_file_path = os.path.join(current_dir, 'web.html') local_url = QUrl.fromLocalFile(local_file_path) self.browser.setUrl(local_url) # å°†æµè§ˆå™¨è®¾ç½®ä¸ºä¸»çª—å£çš„å°éƒ¨ä»¶ self.setCentralWidget(self.browser)`\n\n*   è¿™ç§æ–¹å¼ä¹Ÿæ˜¯æ¯”è¾ƒç†æƒ³çš„ HTML é›†æˆæ–¹å¼\n\n### ä¸‰. é›†æˆ EChats\n\nä¸Šé¢å­¦ä¹ å®Œäº† WebEngine ï¼Œ å‰©ä¸‹å°±æ˜¯ é›†æˆ Echats äº†ï¼Œ å…ˆæ¥ä¸€ä¸ªç®€æ˜“ç‰ˆçš„ ï¼š\n\n> åŸºç¡€ç®€æ˜“ç‰ˆ ï¼š\n\n![image.png](https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fe7130b13aaa4c62b3c3fb887d529b88~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b-X5a2X6L6I5bCP6JqC6JqB:q75.awebp?rk3s=f64ab15b&x-expires=1728657791&x-signature=ftcboerJ7clA1i3dD%2F0D%2BLVoeq0%3D)\n\nä»£ç å°±ä¸è´´äº† ï¼Œæˆ‘è¿™é‡Œç›´æ¥ä½¿ç”¨çš„æœ¬åœ°JSæ–‡ä»¶ ï¼š\n\n*   S1 : ä¸‹è½½ echats çš„ä»£ç  [Echats.main.js](https://link.juejin.cn?target=%255Bcdn.jsdelivr.net%2Fnpm%2Fecharts%2Fdist%2Fecharts.min.js%255D\\(https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fecharts%2Fdist%2Fecharts.min.js\\) \"%5Bcdn.jsdelivr.net/npm/echarts/dist/echarts.min.js%5D(https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js)\")\n*   S2 : å‡†å¤‡å¥½ HTML æ–‡ä»¶\n*   S3 : é€šè¿‡æ³¨å…¥ HTML çš„æ–¹å¼è¿›è¡Œæ³¨å…¥\n\n> ä»å¤–éƒ¨å¯¼å…¥æ•°æ®\n\n![image.png](https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/da59f134e78748da865d85e5a3044d18~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b-X5a2X6L6I5bCP6JqC6JqB:q75.awebp?rk3s=f64ab15b&x-expires=1728657791&x-signature=p8fotIBRTSYZwwIsn35COMOB%2FAI%3D)\n\nâ“ ä¸ºäº†è®© Data æ•°æ®çš„å¯¼å…¥æ›´åŠ æ–¹ä¾¿ ï¼Œæ‰€ä»¥æ•°æ®æºè¦åœ¨ Python ä»£ç ä¸­ç”Ÿæˆ ï¼Œå¹¶ä¸”å¯¼å…¥åˆ° HTML æ–‡ä»¶ä¸­ã€‚\n\n*   ç”±äº `Echats çš„è‰¯å¥½æ”¯æŒ` ï¼Œå¯ä»¥é€šè¿‡ JSON æ–‡ä»¶è¿›è¡Œæ•°æ®çš„ä¼ é€’\n*   è¿™é‡Œä»ä¸€ä¸ª data.json æ–‡ä»¶ä¸­è¯»å–åˆ°æ•°æ®æ ¼å¼ ï¼Œé€šè¿‡ **runJavaScript** è¿è¡Œ JS è„šæœ¬\n*   ä»¥ä¸‹æ˜¯å®Œæ•´ä»£ç  ğŸ‘‡ğŸ‘‡ğŸ‘‡\n\npython\n\n ä»£ç è§£è¯»\n\nå¤åˆ¶ä»£ç \n\n`import sys import os import json from PyQt6.QtWidgets import QApplication, QMainWindow, QPushButton, QVBoxLayout, QWidget from PyQt6.QtWebEngineWidgets import QWebEngineView from PyQt6.QtCore import QUrl class WebBrowser(QMainWindow):     def __init__(self):         super().__init__()         self.setWindowTitle('PyQt6 WebEngine JavaScript Example')         self.setGeometry(100, 100, 1200, 800)         # åˆ›å»ºä¸»å¸ƒå±€         self.layout = QVBoxLayout()         # åˆ›å»ºæµè§ˆå™¨         self.browser = QWebEngineView()         # è·å–å½“å‰ç›®å½•çš„ç»å¯¹è·¯å¾„         current_dir = os.path.dirname(os.path.abspath(__file__))         local_file_path = os.path.join(current_dir, 'no_data.html')         url = QUrl.fromLocalFile(local_file_path)         self.browser.setUrl(url)         # æ·»åŠ æŒ‰é’®ç”¨äºæ‰§è¡Œ JavaScript         self.button = QPushButton('ç‚¹å‡»ä¿®æ”¹')         self.button.clicked.connect(self.run_js)         # å¸ƒå±€         self.layout.addWidget(self.browser)         self.layout.addWidget(self.button)         # åˆ›å»ºä¸­å¤®å°éƒ¨ä»¶å¹¶è®¾ç½®å¸ƒå±€         container = QWidget()         container.setLayout(self.layout)         self.setCentralWidget(container)     # æ­¤å¤„ä¸ºäº†æ–¹ä¾¿å±•ç¤º ï¼ŒæŠŠæ•°æ®å…ˆå­˜åˆ°äº†data.json æ–‡ä»¶ä¸­      # åœ¨å¤æ‚çš„åœºæ™¯ä¸­ ï¼Œå¯ä»¥é€šè¿‡æ›´å¤šå…¶ä»–çš„æ–¹å¼ç”Ÿæˆ json æ•°æ®     def run_js(self):         # åœ¨ EChartsWindow ç±»ä¸­åŠ è½½å®Œ HTML åè°ƒç”¨         data_str = self.load_json_data('data.json')         print(f\"JavaScript Result: {data_str}\")         js_code = f'initChart({data_str});'         self.browser.page().runJavaScript(js_code)     # å›è°ƒå‡½æ•°     def js_callback(self, result):         print(f\"JavaScript Result: {result}\")     # åŠ è½½æœ¬åœ°çš„ JSON æ–‡ä»¶     def load_json_data(self, filename):         current_directory = os.path.dirname(os.path.abspath(__file__))         json_file_path = os.path.join(current_directory, filename)         with open(json_file_path, 'r', encoding='utf-8') as json_file:             data = json.load(json_file)         return data if __name__ == \"__main__\":     app = QApplication(sys.argv)     window = WebBrowser()     window.show()     sys.exit(app.exec())`\n\n> data.json + html\n\nhtml\n\n ä»£ç è§£è¯»\n\nå¤åˆ¶ä»£ç \n\n`{     \"title\": {         \"text\": \"ECharts å…¥é—¨ç¤ºä¾‹\"     },     \"tooltip\": {},     \"legend\": {         \"data\": [\"é”€é‡\"]     },     \"xAxis\": {         \"data\": [\"è¡¬è¡«\", \"ç¾Šæ¯›è¡«\", \"é›ªçººè¡«\", \"è£¤å­\", \"é«˜è·Ÿé‹\", \"è¢œå­\"         ]     },     \"yAxis\": {},     \"series\": [         {         \"name\": \"é”€é‡\",         \"type\": \"bar\",         \"data\": [                 5,                 20,                 36,                 10,                 10,                 20             ]         }     ] } <!DOCTYPE html> <html style=\"height: 100%\"> <head>     <meta charset=\"utf-8\">     <title>ECharts Example</title>     <!-- å¼•å…¥ ECharts -->     <script src=\"echarts.min.js\"></script>     <script type=\"text/javascript\">         if (typeof echarts === 'undefined') {             alert('ECharts åŠ è½½å¤±è´¥');         }     </script> </head> <body style=\"height: 100%; margin: 0\">     <div id=\"main\" style=\"height: 100%\"></div>     <script type=\"text/javascript\">         function initChart(data) {             // åŸºäºå‡†å¤‡å¥½çš„ DOMï¼Œåˆå§‹åŒ– echarts å®ä¾‹             myChart = echarts.init(document.getElementById('main'));             myChart.setOption(data);         }     </script> </body> </html>`\n\n*   è¿™é‡Œç‚¹å‡»å ï¼Œæ•°æ®å°±è‡ªç„¶ç”Ÿæˆäº†ã€‚ğŸ‘‡ğŸ‘‡ğŸ‘‡\n*   `å¤æ‚çš„æ“ä½œå°±ä¸å±•ç¤ºäº†` ï¼Œèƒ½åˆ°è¿™ä¸€æ­¥åé¢éƒ½å”°å”°å”°çš„ä¸Š\n\n![image.png](https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7890076e81a84174ab0de67362f97f8f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b-X5a2X6L6I5bCP6JqC6JqB:q75.awebp?rk3s=f64ab15b&x-expires=1728657791&x-signature=omGv6xooPKTcSFXpG7HRm57CGNU%3D)\n\n### æ€»ç»“\n\n> ä½¿ç”¨æ„Ÿå— ï¼š\n\n*   **è®ºç¾è§‚** ï¼ŒJS åº“è¿˜æ˜¯è¦æ¯” Python çš„åº“**å¼ºå¤ªå¤šäº†**\n*   **ä¸Šæ‰‹éš¾åº¦ä¸é«˜** ï¼ŒèŠ±1-2ä¸ªå°æ—¶å°±å¯ä»¥åˆ›å»ºå¤æ‚çš„å›¾è¡¨\n*   **æ€§èƒ½è¿˜ä¸é”™** ï¼Œå±•ç¤ºçš„å¾ˆå¿« ï¼Œ**ç”¨æ³•ä¹Ÿå¾ˆçµæ´»**\n\nğŸ‰ğŸ‰ğŸ‰â¤ï¸â¤ï¸â¤ï¸ **ç¥å¤§å®¶å›½åº†èŠ‚å¿«ä¹** ï¼ï¼ï¼\n\n### æœ€åçš„æœ€å â¤ï¸â¤ï¸â¤ï¸ğŸ‘‡ğŸ‘‡ğŸ‘‡\n\n*   ğŸ‘ˆ **æ¬¢è¿å…³æ³¨** ï¼Œè¶…200ç¯‡ä¼˜è´¨æ–‡ç« ï¼Œæœªæ¥æŒç»­é«˜è´¨é‡è¾“å‡º ğŸ‰ğŸ‰\n*   [ğŸ”¥ğŸ”¥ğŸ”¥ ç³»åˆ—æ–‡ç« é›†åˆï¼Œé«˜å¹¶å‘ï¼Œæºç åº”æœ‰å°½æœ‰ ğŸ‘ğŸ‘](https://juejin.cn/post/6941642435189538824 \"https://juejin.cn/post/6941642435189538824\")\n*   èµ°è¿‡è·¯è¿‡ä¸è¦é”™è¿‡ ï¼ŒçŸ¥è¯†æ— ä»·è¿˜ä¸æ”¶é’± â—â—"
}