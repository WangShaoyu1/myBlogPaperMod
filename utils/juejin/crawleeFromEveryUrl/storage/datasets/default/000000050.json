{
	"title": "ä¸ºä»€ä¹ˆæˆ‘è¦è‡ªå·±å†™ä¸€ä¸ªNavigation",
	"author": "",
	"publishTime": "2023-08-30",
	"readTime": "é˜…è¯»9åˆ†é’Ÿ",
	"tags": "[\"Android\",\"Android Jetpackä¸­æ–‡æŠ€æœ¯ç¤¾åŒº\",\"å‰ç«¯å¼€å‘ç¤¾åŒº\",\"å‰ç«¯æŠ€æœ¯äº¤æµ\",\"å‰ç«¯æ¡†æ¶æ•™ç¨‹\",\"JavaScript å­¦ä¹ èµ„æº\",\"CSS æŠ€å·§ä¸æœ€ä½³å®è·µ\",\"HTML5 æœ€æ–°åŠ¨æ€\",\"å‰ç«¯å·¥ç¨‹å¸ˆèŒä¸šå‘å±•\",\"å¼€æºå‰ç«¯é¡¹ç›®\",\"å‰ç«¯æŠ€æœ¯è¶‹åŠ¿\"]",
	"description": "åšä¸€ä¸ªSingle Activity Applicationï¼ŒNavigationå¾ˆå¥½ç”¨ï¼Œä½†è¿˜æ˜¯ä¸å¤Ÿå¥½ç”¨ã€‚å¦‚æœè¦è‡ªå·±å†™ä¸€ä¸ªFragmentè·¯ç”±æ¡†æ¶ï¼Œé˜ä¸‹åˆæ”¹å¦‚ä½•åº”å¯¹å‘¢ï¼Ÿ",
	"article": "Fragmentçš„åœ°ä½åœ¨æå‡\n--------------\n\nä¼ ç»Ÿæ¥è¯´ï¼ŒAndroid APPä¸­çš„é¡µé¢åº”è¯¥æ˜¯ä»¥å¤šä¸ªActivityå»ç»„ç»‡çš„ï¼ŒFragmentå¾€å¾€åªé€‚åˆåœ¨Activityä¸­æŒ–å‡ºä¸€å—ï¼Œç”¨äºå±•ç¤ºä¾¿äºåˆ‡æ¢çš„ç¢ç‰‡é¡µé¢ã€‚\n\néšç€Jetpack Navigation(æ­¤å¤„ä¸»è¦æŒ‡çš„æ˜¯`navigation-fragment`)çš„æ¨å‡ºï¼ŒFragmentçš„åœ°ä½å¼€å§‹æœ‰æ‰€æé«˜ã€‚Navigationæ¨èæˆ‘ä»¬ç”¨å¤šä¸ªFragmentå»å±•ç¤ºå•ä¸ªä¸šåŠ¡ä¸‹çš„å¤šä¸ªé¡µé¢ï¼Œä»¿ä½›æ¸æ¸å–ä»£äº†ä¼ ç»Ÿçš„Activityï¼Œå½“ä¸Šäº†ä¸»è§’ã€‚\n\nç”šè‡³ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘ä¸€æ•´ä¸ªappéƒ½åªåœ¨ä¸€ä¸ªActivityå®¹å™¨ä¸Šæ‰¿è½½ï¼Œæ‰€æœ‰é¡µé¢éƒ½é€šè¿‡Fragmentå»å®ç°ï¼Œè¿™å°±æ˜¯Single activity applicationã€‚æ—©åœ¨å¤šå¹´å‰ï¼ŒAndroidå®˜æ–¹æ¨å‡ºNavigationæ—¶å°±æå‡ºäº†è¿™ç§è®¾æƒ³ï¼ˆSingle activity: Why, when, and how (Android Dev Summit '18)ï¼‰ã€‚è¿™æ ·åšæœ‰å“ªäº›æ¿€åŠ¨äººå¿ƒçš„å˜åŒ–å‘¢ï¼Ÿ\n\n*   **æ›´è½»é‡çš„å®ç°**ï¼šFragmentæ¯”Activityæ›´è½»é‡ï¼Œä¹Ÿä¸éœ€è¦åœ¨AndroidManifestä¸­å®šä¹‰\n*   **æ›´å¥½çš„æ€§èƒ½**ï¼šå¯åŠ¨Activityæ¶‰åŠä¸ç³»ç»ŸæœåŠ¡çš„è·¨è¿›ç¨‹é€šä¿¡ï¼Œè€Œå¯åŠ¨Fragmentåˆ™ç®€å•å¾—å¤š\n*   **ä¿¡æ¯ä¼ é€’**ï¼šé€šè¿‡å…±äº«ViewModelå»ä¼ é€’å‚æ•°ï¼Œæ¯”é€šè¿‡Intentå»ç»™å¦ä¸€ä¸ªActivityä¼ å‚æ›´ç®€å•å’Œçµæ´»\n*   **å…¨å±€å¼¹çª—**ï¼šæ˜¯å¦é‡åˆ°è¿‡å¼¹çª—è¿˜æ²¡å¤„ç†çš„æ—¶å€™å‘ç”Ÿäº†Activityè·³è½¬ï¼Œæ­¤æ—¶å¼¹çª—å°±è¢«æŒ¤æ‰äº†ã€‚åªæœ‰ä¸€ä¸ªActivityæ—¶ï¼Œå¼¹çª—å°±æ˜¯å…¨å±€çš„ï¼Œè·å¾—å’ŒiOSä¸€æ ·çš„å…¨å±€å¼¹çª—ä½“éªŒã€‚\n*   **æ— éœ€ç”³è¯·æƒé™çš„åº”ç”¨å†…æµ®çª—**ï¼šæˆ‘ä»¬çŸ¥é“ä½¿ç”¨æµ®åŠ¨çª—å£æ˜¯éœ€è¦å‘ç³»ç»Ÿç”³è¯·ç›¸å…³æƒé™çš„ï¼Œå¦‚æœæˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªåº”ç”¨å†…çš„â€œæµ®çª—â€ï¼Œé‚£åªè¦å¾€Activityçš„å¸ƒå±€ä¸Šæ·»åŠ è¿™ä¸ªâ€œæµ®çª—â€ï¼Œå®ƒå°±å¯ä»¥â€œæµ®åŠ¨â€åœ¨æ‰€æœ‰é¡µé¢çš„é¡¶ä¸Šï¼Œå¾—åˆ°ä¸€ä¸ªåº”ç”¨å†…æµ®çª—çš„æ•ˆæœã€‚\n\n#### âš– é‚£ä»£ä»·å‘¢\n\nå‡¡äº‹æ€»æœ‰åˆ©å¼Šï¼ŒSingle Activity Applicationå¸¦æ¥å¥½å¤„çš„åŒæ—¶ä¹Ÿå¼•å…¥äº†ä¸€äº›é£é™©ï¼š\n\n*   Fragmentçš„ç”Ÿå‘½å‘¨æœŸæ¯”Activityæ›´å¤æ‚\n*   Fragmentçš„å›é€€æ ˆä¸å¥½ç®¡ç†ï¼Œä¸”è°ƒè¯•æ—¶æ— æ³•ç”¨adbæŒ‡ä»¤dumpå‡ºæ¥\n*   å±å¹•æ–¹å‘ç­‰Activityé…ç½®éš¾ä»¥ç®¡ç†\n\nä¸ºäº†æ–¹ä¾¿å¼€å‘è€…å®ç°å¤šFragmentçš„è·¯ç”±ï¼ŒJetpackæ¨å‡ºäº†Navigationè¿™ä¸ªæœ€æ—©æ˜¯ç”¨äºæ§åˆ¶Fragmentè·¯ç”±å¯¼èˆªçš„æ¡†æ¶ã€‚\n\nNavigationå¥½ç”¨å—\n-------------\n\nä½œä¸ºå®˜æ–¹æ¨å‡ºçš„æ¡†æ¶ï¼Œä»‹ç»å®ƒçš„æ–‡ç« è‡ªæœ‰ä¸å°‘ï¼Œè¿™é‡Œå°±ä¸å±•å¼€ã€‚\n\næˆ‘ä¹Ÿäº²èº«ä½¿ç”¨è¿‡ä¸€æ®µæ—¶é—´ï¼Œç¡®å®èƒ½è§£å†³ä¸€äº›é—®é¢˜ï¼Œä½†ä¹ŸåŒæ—¶æœ‰å¾ˆå¤šç—›ç‚¹\n\n*   ç”¨xmlå®šä¹‰è·¯ç”±è¡¨ï¼Œä¸ä»£ç å®šä¹‰çš„Fragmentæœ‰ç‚¹å‰²è£‚ï¼Œä¸”å†™æ³•å¤æ‚\n*   æ— æ³•ä¿æŒä¹‹å‰çš„FragmentçŠ¶æ€\n*   é™¤äº†è‡ªè¡Œæ§åˆ¶ï¼Œåœ¨è¿›å…¥æˆ–è¿”å›æ—¶ï¼Œä¸ç¡®å®šèƒ½å¦ä¿æŒFragmentçš„å±å¹•æ–¹å‘ï¼Œæ˜¯å¦å…¨å±ç­‰å±æ€§\n*   ç”¨idèµ„æºæ¥åšè·¯ç”±åœ°å€ï¼Œé™¤éç”¨DeepLink\n*   ç¼ºä¹è·¯ç”±æ‹¦æˆªå™¨æœºåˆ¶\n\nå†™å®ŒFragmentåè¿˜è¦å»navGraphçš„xmlå»å®šä¹‰ä¸€ä¸‹ï¼Œå®åœ¨æ˜¯éº»çƒ¦ï¼Œæˆ‘ç”šè‡³è¿layoutçš„xmléƒ½ä¸æƒ³å†™\n\n> å’Œlayout xmlè¯´æ‹œæ‹œ [BrickUIï¼ŒåŸºäºAndroid Viewä½“ç³»æ’¸ä¸€ä¸ªå£°æ˜å¼UIæ¡†æ¶](https://juejin.cn/post/7243725397858336805 \"https://juejin.cn/post/7243725397858336805\")\n\nå¦‚æœè®©æˆ‘æ¥å†™ä¸€ä¸ªFragmentè·¯ç”±æ¡†æ¶\n--------------------\n\næˆ‘å¼€å§‹è€ƒè™‘ï¼Œå¦‚æœæˆ‘è¦å»åšä¸€ä¸ªSingle activity applicationï¼Œæˆ‘éœ€è¦ä¸€ä¸ªæ€æ ·çš„è·¯ç”±æ¡†æ¶ï¼Ÿ\n\n*   ç›´æ¥åœ¨Fragmentä¸Šå®šä¹‰è·¯ç”±ä¿¡æ¯\n*   å¯ä»¥é€‰æ‹©æ˜¯å¦ä¿æŒå†å²Fragmentçš„çŠ¶æ€\n*   å¯ä»¥åœ¨å»åˆ°æˆ–å›åˆ°Fragmentæ—¶ï¼Œå°±åƒActivityä¸€æ ·ï¼Œæ¢å¤å…¶æ¨ªç«–å±ã€å…¨å±ç­‰çª—å£å±æ€§ï¼Œè€Œä¸éœ€è¦é¢å¤–æ§åˆ¶\n*   å¯ä»¥é€šè¿‡uriæ¥é…ç½®è·¯ç”±åœ°å€å’Œä¼ å‚ï¼Œä¸€ä¸ªé¡µé¢æ”¯æŒé…ç½®å¤šä¸ªè·¯ç”±åœ°å€\n*   å…·æœ‰è·¯ç”±æ‹¦æˆªå™¨æœºåˆ¶ï¼Œæ‹¦æˆªå™¨å¯ä»¥åŠ¨æ€è£…è½½å’Œå¸è½½ï¼Œæ‹¦æˆªå™¨æœ‰ä¼˜å…ˆçº§åŒºåˆ†\n*   æ—¢ç„¶èƒ½ä¼ å‚ï¼Œé‚£è¿˜åº”è¯¥å¯ä»¥è¿”å›ç»“æœç»™ä¸Šä¸€ä¸ªé¡µé¢ï¼Œç±»ä¼¼onActivityResult\n*   æ”¯æŒç±»ä¼¼Activityçš„LaunchMode\n\n![image.png](/images/jueJin/4d731d68d4494fc.png)\n\n#### è¿™ä¸ªè·¯ç”±æ¡†æ¶å·²ç»å†™å¥½äº† ğŸ‘‡ğŸ»ğŸ‘‡ğŸ»ğŸ‘‡ğŸ»\n\nğŸ± [github.com/robin8yeungâ€¦](https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Frobin8yeung%2FBlink%2Ftree%2Fmain%2Fblink-fragment \"https://github.com/robin8yeung/Blink/tree/main/blink-fragment\")\n\n**Blink**ï¼Œåå­—å–è‡ªdotaæ¸¸æˆä¸­çš„é—ªçƒæŠ€èƒ½ã€‚æ¬¢è¿å¤§å®¶æ¥starä¸€ä¸‹â­ï¸â­ï¸â­ï¸\n\næ¥çœ‹çœ‹blink-fragmentæ€ä¹ˆç”¨\n--------------------\n\n### å®šä¹‰Activityå®¹å™¨\n\nå®¹å™¨Activityç”¨äºæ‰¿è½½Fragmentï¼Œä¸ºäº†ä½¿`blink-fragment`æ¡†æ¶æ­£å¸¸è¿è¡Œï¼Œæœ‰ä»¥ä¸‹è¦æ±‚ï¼š\n\n*   éœ€è¦ç»§æ‰¿æŠ½è±¡ç±»`BlinkContainerActivity`\n*   ç¦æ­¢ç³»ç»Ÿè®¾ç½®å˜åŒ–å¯¼è‡´Activityé‡å»º\n\n```kotlin\n    class FragmentContainerActivity: BlinkContainerActivity() {\n    // é¦–ä¸ªå±•ç¤ºçš„Fragmentï¼Œä¸å¸Œæœ›å†™æ­»ä¹Ÿå¯ä»¥è¿”å›nullï¼Œåç»­é€šè¿‡blink()æ–¹æ³•æ¥è·³è½¬\n    override fun startFragment() = HomeFragment()\n    \n    // å…¶ä»–ä¸šåŠ¡ä»£ç \n}\n```\n\nç”±äºActivityé‡å»ºä¼šå¯¼è‡´ä¸€ç³»åˆ—é—®é¢˜ï¼Œä¸å¤ªå¥½è§£å†³ï¼Œå¦‚ç»“æœè¿”å›ï¼ŒçŠ¶æ€ç»´æŠ¤ç­‰ï¼Œæ‰€ä»¥ç°é˜¶æ®µç¦æ­¢Activityé‡å»ºï¼Œè¯·åœ¨`AndroidManifest.xml`ä¸­å¯¹å®¹å™¨Activityçš„`android:configChanges`è¿›è¡Œä»¥ä¸‹é…ç½®ï¼š\n\n```xml\n<activity android:name=\"com.seewo.blink.example.fragment.FragmentContainerActivity\"\nandroid:configChanges=\"mcc|mnc|navigation|orientation|touchscreen|keyboardHidden|keyboard|screenSize|smallestScreenSize|locale|layoutDirection|fontScale|screenLayout|density|uiMode\"/>\n```\n\n### å®šä¹‰ä¸€ä¸ªFragment\n\né€šè¿‡æ³¨è§£å³å¯åœ¨å®šä¹‰Fragmentçš„åœ°æ–¹å®šä¹‰å¥½å®ƒçš„è·¯ç”±åœ°å€ï¼Œä»¥åŠå®ƒçš„ä¸€ç³»åˆ—é¡µé¢å±æ€§ã€‚å½“ç„¶ï¼Œè¿™äº›é¡µé¢å±æ€§çš„å®šä¹‰ä¸æ˜¯å¿…é¡»çš„ã€‚\n\n```kotlin\n    object Uris {\n    const val fragment = \"blink://my.app/fragment\"\n    const val HOME = \"blink://my.app/home\"\n}\n\n// ä¸ºMyFragmentå®šä¹‰ä¸€ä¸ªæˆ–å¤šä¸ªè·¯ç”±uri\n@BlinkUri(value = [Uris.fragment, Uris.HOME])\n// å®šä¹‰é¡µé¢æ–¹å‘ä¸ºç«–å±ï¼Œå½“æ¥åˆ°æˆ–å›åˆ°è¿™ä¸ªé¡µé¢æ—¶ï¼Œå±å¹•æ–¹å‘éƒ½å°†åˆ‡æ¢ä¸ºç«–å±\n@Orientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT)\n// è‡ªå®šä¹‰è½¬åœºåŠ¨ç”»\n@CustomAnimations(\nenter = R.anim.enter_from_bottom, exit = R.anim.fade_out,\npopEnter = R.anim.fade_in, popExit = R.anim.exit_to_bottom)\n// å®šä¹‰é¡µé¢è¿›å…¥å›é€€æ ˆåä¸å†ä¿æŒçŠ¶æ€(å³é€šè¿‡replaceåˆ‡æ¢åˆ°æ–°çš„é¡µé¢)\n@KeepAlive(false)\n// è®¾ç½®SystemUIæ ·å¼ï¼Œå½“æ¥åˆ°æˆ–å›åˆ°æ­¤é¡µé¢æ—¶ï¼ŒSystemUIæ ·å¼æ›´æ–°ä¸ºä»¥ä¸‹é…ç½®\n@SystemUI(\nhideStatusBar = true,\nhideNavigationBar = true,\nbrightnessLight = false,\n)\n// è®¾ç½®é¡µé¢çš„èƒŒæ™¯é¢œè‰²ï¼Œç±»ä¼¼äºActivityè®¾ç½®windowçš„èƒŒæ™¯é¢œè‰²\n@Background(Color.TRANSPARENT)\n    class MyFragment : Fragment() {\n    // ....\n}\n```\n\n#### ğŸš€ LaunchMode\n\nå‰é¢è¯´äº†ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å®šä¹‰LaunchModeï¼Œä½†ä¸æ˜¯é€šè¿‡æ³¨è§£æ¥å®šä¹‰ã€‚ä¸æ˜¯ä¸è¡Œï¼Œè€Œæ˜¯ç±»ä¼¼Activityéœ€è¦åœ¨onNewIntentä¸­å»æ¥æ”¶äºŒæ¬¡æ‰“å¼€æ—¶çš„æ–°Intentã€‚è€Œblink-fragmentå®šä¹‰äº†ç›¸å…³æŠ½è±¡ç±»æ¥æä¾›ç›¸åº”åŠŸèƒ½ã€‚\n\n```kotlin\n// ä¸ºMyFragmentå®šä¹‰LaunchModeä¸ºsingleTopï¼Œç»§æ‰¿SingleTopFragmentå³å¯\n@BlinkUri(Uris.fragment)\n    class MyFragment : SingleTopFragment() {\n        override fun onNewArguments(arguments: Bundle?) {\n        // é‡å¤æ‰“å¼€æ—¶ï¼Œä¼šå›è°ƒæ­¤æ–¹æ³•\n    }\n}\n\n// ä¸ºMyFragmentå®šä¹‰LaunchModeä¸ºsingleTaskï¼Œç»§æ‰¿SingleTaskFragmentå³å¯\n@BlinkUri(Uris.fragment)\n    class MyFragment : SingleTaskFragment() {\n        override fun onNewArguments(arguments: Bundle?) {\n        // é‡å¤æ‰“å¼€æ—¶ï¼Œä¼šå›è°ƒæ­¤æ–¹æ³•\n    }\n}\n```\n\nè¿™é‡Œæ²¡æœ‰SingleInstanceæ¨¡å¼ï¼Œéœ€è¦çš„è¯å¯ä»¥è‡ªè¡Œå¼€ä¸€ä¸ªæ–°çš„Activityã€‚\n\n#### ğŸš¥ è·¯ç”±è¡¨åˆå§‹åŒ–\n\nåªç”¨`@BlinkUri`å®šä¹‰äº†è·¯ç”±åœ°å€å®é™…ä¸Šè¿˜æ— æ³•ç”Ÿæ•ˆï¼Œå®ƒåªæ˜¯ä¾¿äºåˆå§‹åŒ–è·¯ç”±è¡¨åœ¨æ‰§è¡ŒKSPæ—¶æ”¶é›†ä¿¡æ¯ã€‚\n\nå¯¹äºå¤šmoduleçš„é¡¹ç›®ï¼Œæ¯ä¸ªå®šä¹‰è¿‡`@BlinkUri`çš„moduleä¸­ï¼Œéƒ½éœ€è¦å®ç°ä¸€ä¸ªRouteMetadataï¼Œåœ¨åˆå§‹åŒ–çš„æ—¶å€™ï¼Œå¦‚Applicationçš„onCreateï¼Œè°ƒç”¨æ¯ä¸ªRouteMetadataçš„inject()æ¥æŠŠmoduleçš„è·¯ç”±è¡¨æ³¨å…¥åˆ°å…¨å±€è·¯ç”±è¡¨ä¹‹ä¸­ã€‚\n\nå¦‚æœä¸å¸Œæœ›moduleçš„é€»è¾‘ä¾µå…¥app moduleï¼Œä¹Ÿå¯ä»¥å€ŸåŠ©Jetpack startupæ¡†æ¶äº†æ¥æ‰§è¡Œmoduleå†…éƒ¨çš„åˆå§‹åŒ–\n\nä¸ºä»€ä¹ˆä¸ç”¨ASMçš„æ–¹å¼æ¥ç®€åŒ–è¿™ä¸ªæ­¥éª¤å‘¢ï¼Ÿæˆ‘çš„è€ƒè™‘æ˜¯ç¼–è¯‘æ—¶æ’æ¡©å®¹æ˜“åœ¨ç¼–è¯‘ä¾§é€ æˆå¼€é”€ï¼Œè€Œè¿™ä¸ªåˆå§‹åŒ–å¯¹äºæ¯ä¸ªmoduleï¼Œåªéœ€è¦å†™ä¸€ç‚¹ä»£ç å°±å¯ä»¥ä¸€åŠ³æ°¸é€¸ï¼Œæœ€ç»ˆè¿˜æ˜¯å†³å®šç¨å¾®éš¾ä¸ºä¸€ä¸‹å¼€å‘è€…ã€‚\n\n```kotlin\n// ç”¨@BlinkMetadataæ³¨è§£å®šä¹‰ä¸€ä¸ªè·¯ç”±è¡¨çš„åˆå§‹åŒ–å…¥å£ï¼Œä¸ºäº†ç®€åŒ–å®ç°ï¼Œè¯·ç»§æ‰¿BaseMetadata\n@BlinkMetadata\nclass RouteMetadata : BaseMetadata()\n\n// lib moduleå»ºè®®ç”¨startupæ¡†æ¶æ¥å®ç°åˆå§‹åŒ–ï¼Œä¹Ÿå¯ä»¥åœ¨Applicationçš„onCreateä¸­å¯¹æ‰€æœ‰æ¨¡å—çš„BaseMetadataå­ç±»è¿›è¡Œåˆå§‹åŒ–è°ƒç”¨\n    class AvatarInitializer : Initializer<Unit>{\n        override fun create(context: Context) {\n        // åˆå§‹åŒ–ï¼Œæ³¨å…¥moduleçš„è·¯ç”±è¡¨åˆ°å…¨å±€è·¯ç”±è¡¨ï¼Œå»ºç«‹uriä¸é¡µé¢çš„æ˜ å°„å…³ç³»ï¼Œå¦åˆ™æ— æ³•å®ç°è·¯ç”±è·³è½¬\n        RouteMetadata().inject()\n    }\n    \n    override fun dependencies(): MutableList<Class<out Initializer<*>>> =\n    mutableListOf()\n}\n```\n\n### ä¼ å‚ä¸è¿”å›\n\n#### ğŸ ä¼ å‚ä¸è¿”å›å›è°ƒ\n\nblink-fragmentåŸºäºuriå‚æ•°æ¥ä¼ å‚ï¼Œä¹Ÿæä¾›äº†ç®€æ´çš„æ–¹å¼æ¥åˆ›å»ºuriã€‚\n\næ­¤å¤–é€šè¿‡`blink()`å‡½æ•°çš„`å›è°ƒå‚æ•°`å³å¯æ¥æ”¶ä¸‹ä¸ªé¡µé¢è¿”å›çš„æ•°æ®ï¼Œæ˜¯ä¸æ˜¯æ¯”ä¼ ç»ŸActivityçš„`onActivityResult`æ–¹ä¾¿å¤šäº†ï¼Ÿ\n\n```kotlin\n    object Uris {\n    const val HOME = \"blink://my.app/home\"\n}\n\n// ä»¥ä¸‹ä¸¤ç§Uriçš„æ„é€ æ–¹å¼æ˜¯ç­‰æ•ˆçš„ï¼Œéƒ½å¯ä»¥è·¯ç”±åˆ°@BlinkUriå®šä¹‰ä¸ºUris.HOMEçš„é¡µé¢å¹¶ä¼ å‚\n    fragment.blink(\"${Uris.HOME}?name=Peter&age=8\") {\n    // æ­¤å¤„æ¥å—è¿”å›å›è°ƒï¼Œè¿”å›çš„ç»“æœæ˜¯ä¸ªBundle?ç±»å‹\n}\n\n    fragment.blink(Uris.HOME.buildUri {\n    append(\"name\", \"Peter\")\n    append(\"age\", \"8\")\n        }) {\n        // æ­¤å¤„æ¥å—è¿”å›å›è°ƒï¼Œè¿”å›çš„ç»“æœæ˜¯ä¸ªBundle?ç±»å‹\n    }\n```\n\n#### ğŸ“® æ¥æ”¶å‚æ•°ä¸è¿”å›ç»“æœ\n\nblink-fragmentæä¾›äº†ä¸€ç³»åˆ—ç®€å•çš„æ¥æ”¶å‚æ•°çš„æ“ä½œç¬¦ï¼Œä¹Ÿå¯ä»¥é€šè¿‡by lazyçš„æ–¹å¼æ¥è‡ªè¡Œå¤„ç†å¤æ‚çš„æ¥å—å‚æ•°çš„æ“ä½œ\n\n```kotlin\n@BlinkUri(Uris.HOME)\n    class HomeFragment : Fragment() {\n    \n    // å¼€å‘è€…é€šè¿‡by lazyè‡ªè¡Œå¤„ç†Nameå‚æ•°ä¼ å…¥\nprivate val name: String? by lazy { arguments?.uriOrNull?.getQueryParameter(\"name\") }\n\n// ç”±Blinkæä¾›æ‡’åŠ è½½å‡½æ•°è¿›è¡Œå‚æ•°æ³¨å…¥ï¼Œé»˜è®¤å€¼å¯é€‰ã€‚\nprivate val age: Int by intParams(\"age\", 18)\n\n    override fun onActivityCreated(savedInstanceState: Bundle?) {\n    super.onActivityCreated(savedInstanceState)\n        findViewById<View>(R.id.button).setOnClickListener {\n        // ç‚¹å‡»æŒ‰é’®ï¼Œè¿”å›Bundleç»“æœ\n            pop(Bundle().apply {\n            putInt(\"result\", 1)\n            })\n        }\n            findViewById<View>(R.id.cancel).setOnClickListener {\n            // ç‚¹å‡»å–æ¶ˆï¼Œç›´æ¥è¿”å›ï¼Œæ­¤æ—¶è·¯ç”±å‘èµ·æ–¹çš„å›è°ƒåˆ™ä¼šæ¥æ”¶åˆ°ä¸€ä¸ªnullæ•°æ®\n            pop()\n        }\n    }\n}\n```\n\n### æ‹¦æˆªå™¨\n\né€šè¿‡æ‹¦æˆªå™¨å¯ä»¥æ–¹ä¾¿çš„æ‹¦æˆªæŸäº›è·¯ç”±æˆ–å¯¹è·¯ç”±è¿›è¡Œé‡å®šå‘ï¼Œä¿®æ”¹å‚æ•°ç­‰ã€‚blink-fragmentçš„æ‹¦æˆªå™¨æ”¯æŒåŠ¨æ€çš„æ·»åŠ å’Œç§»é™¤ï¼Œä¹Ÿæ”¯æŒä¼˜å…ˆçº§çš„å®šä¹‰\n\n```kotlin\n// è¿™é‡Œä»…ç”¨äºä¸¾ä¾‹ï¼ŒçœŸå®ä½¿ç”¨æ—¶ï¼Œå»ºè®®æ‹¦æˆªå™¨èŒè´£å•ä¸€\n    class ExampleInterceptor : Interceptor {\n        override fun process(from: Fragment?, target: Bundle) {\n        val uri = target.uriOrNull\n        // æ‰“å°è·¯ç”±ä¿¡æ¯\n        Log.i(\"blink\", \"[from] $from [to] $uri\")\n        // è·å–è·¯ç”±è¯·æ±‚çš„å‚æ•°ï¼Œä¿®æ”¹pathå¹¶å¢åŠ å‚æ•°\n            target.setUri(uri?.build {\n            path(\"/another\")\n            append(\"new\", true)\n            })\n            // å¯¹äºç¼ºå°‘æƒé™çš„æƒ…å†µï¼Œæ‹¦æˆªè·³è½¬\n                if (!Permission.hasCameraPermission) {\n                interrupt(\"ç¼ºå°‘å¿…è¦æƒé™\")\n            }\n            // å¦‚æœæƒé™å…·å¤‡ï¼Œåˆ™ç»§ç»­è·‘åˆ°ä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨æˆ–è€…è·‘å®Œäº†æ‰€æœ‰æ‹¦æˆªå™¨åˆ™æ‰§è¡Œè·¯ç”±\n        }\n    }\n    \n    val exampleInterceptor = ExampleInterceptor()\n    \n    // æ·»åŠ æ‹¦æˆªå™¨\n    exampleInterceptor.attach()\n    // ç§»é™¤æ‹¦æˆªå™¨\n    exampleInterceptor.detach()\n```\n\n#### ğŸš’ å¼‚å¸¸å¤„ç†\n\næ—¢ç„¶è·¯ç”±å¯èƒ½è¢«æ‹¦æˆªï¼Œå°±è¦è€ƒè™‘åšå¼‚å¸¸å¤„ç†ã€‚`blink()`å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ª`Result<Unit>`ï¼Œå¯ä»¥å¯¹Resultå¤„ç†å¼‚å¸¸ã€‚\n\n**è·¯ç”±å¤±è´¥çš„åŸå› ä¸»è¦æœ‰ï¼š**\n\n*   **FragmentNotFoundException** æ— æ³•æ‰¾åˆ°uriå¯¹åº”çš„Fragment\n*   **è‡ªå®šä¹‰å¼‚å¸¸** è¢«è·¯ç”±æ‹¦æˆªï¼Œæ‹¦æˆªå™¨è°ƒç”¨`interrupt()`æ—¶ï¼Œé»˜è®¤æŠ›`InterruptedException`æ¥æ‹¦æˆªæ‹¦æˆªï¼Œä¹Ÿæ”¯æŒè‡ªå®šä¹‰æ‹¦æˆªå¼‚å¸¸\n\n```kotlin\n    blink(\"blink://navigator/example?name=Blink\").onFailure {\n    // å¤„ç†å¼‚å¸¸\n        }.onSuccess {\n        // è·¯ç”±æˆåŠŸ\n    }\n```\n\nå®ç°åŸç†\n----\n\n**blink-fragment**çš„åŸç†å¹¶ä¸å¤æ‚ï¼Œä¸»è¦åšäº†å‡ ä»¶äº‹ï¼š\n\n#### ğŸ¡ ä¸ºæ¯ä¸ªFragmentåˆ†é…å®¹å™¨\n\né€šè¿‡blink-fragmentå®šä¹‰çš„Fragmentå®é™…ä¸Šå¹¶ä¸æ˜¯ç›´æ¥æ’å…¥`BlinkContainerActivity`ä¸­çš„ï¼Œè€Œæ˜¯åœ¨å…¶å¤–å±‚è¿˜åŒ…äº†ä¸€å±‚`BlinkContainerFragment`ï¼ŒBlinkContainerFragmentä½œä¸ºå®¹å™¨ï¼Œä¸ºå®é™…çš„Fragmentæä¾›äº†èƒŒæ™¯é¢œè‰²ï¼Œå±æ€§ç®¡ç†ç­‰çš„ç›¸å…³æ”¯æŒï¼Œä¹Ÿå°±æ˜¯å®é™…Fragmenté€šè¿‡æ³¨è§£å®šä¹‰çš„é™¤äº†BlinkUriä»¥å¤–çš„å±æ€§ï¼Œéƒ½è®°å½•åœ¨äº†è¿™ä¸ªå®¹å™¨ä¸­ï¼Œå½“æ¥åˆ°æˆ–å›åˆ°è¿™ä¸ªé¡µé¢æ—¶ï¼Œå®ƒå°±ä¼šè®©è¿™äº›å±æ€§ç”Ÿæ•ˆï¼Œå…å»Fragmentå¯¹è¿™äº›é€»è¾‘çš„å…³å¿ƒã€‚\n\n#### ğŸŒ ç”Ÿæˆè·¯ç”±è¡¨\n\nå€ŸåŠ©kspæ¡†æ¶ï¼Œåœ¨ç¼–è¯‘æ—¶æ‰«æå¼€å‘è€…å®šä¹‰åœ¨moduleå†…å®šä¹‰çš„BlinkUriï¼Œå¹¶ä¸ºè¯¥moduleç”Ÿæˆè·¯ç”±è¡¨ã€‚å†æŠŠè·¯ç”±è¡¨ä¿¡æ¯å†™å…¥åˆ°è¢«`@BlinkMetadata`æ³¨è§£çš„ç±»ä¸­ï¼Œä¸ºå…¶åˆ›å»ºä¸€ä¸ª`_inject()`å‡½æ•°ï¼Œç”¨äºæ³¨å…¥å…¨å±€è·¯ç”±è¡¨ã€‚æœ€ç»ˆè°ƒç”¨åˆ°äº†è¿™ä¸ª\\_inject()å‡½æ•°å³å¯å®Œæˆè·¯ç”±è¡¨çš„åˆå§‹åŒ–ã€‚è€Œ\\_inject()å‡½æ•°çš„åŠŸèƒ½ï¼Œå³æ˜¯å¾€å…¨å±€è·¯ç”±è¡¨å•ä¾‹`RouteMap`ä¸­æ³¨å†Œè¯¥moduleçš„è·¯ç”±è¡¨ä¿¡æ¯ã€‚\n\n#### ğŸš€ æ‰§è¡Œè·¯ç”±\n\né€šè¿‡è°ƒç”¨`blink(uri)`æ¥æ‰§è¡Œè·¯ç”±å¯¼èˆªæ—¶ï¼Œuriä¼šç»è¿‡æ¯ä¸€ä¸ªæ‹¦æˆªå™¨å¤„ç†ï¼Œå¦‚æœæœªè¢«æ‹¦æˆªï¼Œåˆ™æœ€ç»ˆè¾“å‡ºä¸€ä¸ªæœ€ç»ˆuriï¼Œæ­¤æ—¶å³å¯åˆ°å…¨å±€è·¯ç”±è¡¨`RouteMap`ä¸­å»æŸ¥æ‰¾uriæ‰€å¯¹åº”çš„Fragmentã€‚å¦‚æœæ— æ³•æŸ¥æ‰¾åˆ°Fragmentï¼Œåˆ™æŠ›å‡º`FragmentNotFoundException`ï¼›å¦‚æœèƒ½æŸ¥æ‰¾åˆ°å¯¹åº”çš„Fragmentï¼Œåˆ™åˆ›å»ºä¸€ä¸ª`BlinkContainerFragment`å®¹å™¨å»è£…è½½è¿™ä¸ªFragmentï¼Œå¹¶ä¸”è·å–å…¶æ³¨è§£çš„ç›¸å…³å‚æ•°ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªå”¯ä¸€æ ‡è¯†ç¬¦ï¼Œæœ€ç»ˆæŠŠè¿™ä¸ªBlinkContainerFragmentæ ¹æ®æ‰€æ³¨è§£çš„å‚æ•°ï¼Œè£…è½½åˆ°`BlinkContainerActivity`ä¸­\n\n#### âœ‰ï¸ ç»“æœè¿”å›\n\nblink-fragmentçš„è·¯ç”±åŠŸèƒ½æœ¬èº«åŸºäºä¸€ä¸ª`Blink`å•ä¾‹æ¥å®ç°ï¼Œå…¶ä¹Ÿç®¡ç†äº†ä¸€ä¸ªæ”¶é›†å›è°ƒçš„æ˜ å°„è¡¨ï¼Œæ˜ å°„è¡¨çš„keyä¸ºç›®æ ‡Fragmentçš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚å½“è°ƒç”¨`pop(bundle)`è¿”å›æ—¶ï¼Œé€šè¿‡è¿™ä¸ªæ ‡è¯†ç¬¦å³å¯æŸ¥æ‰¾åˆ°å¯¹åº”çš„ç»“æœå›è°ƒï¼Œå›è°ƒç»™è·¯ç”±æ¥æº\n\næ€»ç»“\n--\n\nç›®å‰`blink-fragment`å·²ç»æ¥å…¥åˆ°ä¸€äº›å®é™…çš„é¡¹ç›®ä¸­ï¼Œä¹Ÿæœ‰ç€ä¸é”™çš„å¼€å‘æ•ˆç‡æ”¶ç›Šã€‚ä¸è¿‡å¦‚æœè¦åšåˆ°Single Activity Applicationï¼Œå¯èƒ½å¯¹äºæ–°é¡¹ç›®ä¼šæ›´é€‚åˆï¼Œæ¯•ç«Ÿå¯¹äºæˆç†Ÿé¡¹ç›®ï¼ŒæŠŠä¸€ä¸ªä¸ªActivityæ”¹æˆFragmentï¼Œå·¥ä½œé‡å’Œé£é™©ç€å®ä¸å°ã€‚\n\næœ¬æ–‡é€‚åˆçš„åœºæ™¯æœ‰é™ï¼Œæ‰€ä»¥ä»…å½“ç»™å¤§å®¶æ‹“å®½ä¸ªæ€è·¯ã€‚å¦‚æœæœ‰ä¸åˆç†å’Œè€ƒè™‘ä¸å‘¨çš„åœ°æ–¹ï¼Œä¹Ÿå¸Œæœ›å¯ä»¥å’Œå¤§å®¶å‹å¥½è®¨è®ºã€‚\n\næœ€åå¦‚æœæœ¬æ–‡å¯¹ä½ æœ‰å¸®åŠ©ï¼Œå°±æ±‚ç‚¹èµæ±‚è¯„è®ºæ±‚æ”¶è—ï¼Œç»™ä¸ªä¸€é”®ä¸‰è¿å§~ğŸ‰",
	"selfDefined": "likes:31,comments:0,collects:31,likes:2139"
}