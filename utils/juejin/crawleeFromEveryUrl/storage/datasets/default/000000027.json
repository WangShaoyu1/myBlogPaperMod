{
	"title": "Vue3 实现超级有趣的功能：数字增长动画！！",
	"author": "Sunshine_Lin",
	"publishTime": "2024-05-06",
	"readTime": "阅读2分钟",
	"tags": "[\"前端\",\"Vue.js中文技术社区\",\"前端开发社区\",\"前端技术交流\",\"前端框架教程\",\"JavaScript 学习资源\",\"CSS 技巧与最佳实践\",\"HTML5 最新动态\",\"前端工程师职业发展\",\"开源前端项目\",\"前端技术趋势\"]",
	"description": "前言 大家好，我是林三心，用最通俗易懂的话讲最难的知识点是我的座右铭，基础是进阶的前提是我的初心~ 背景 平时浏览一些跟数字有关的网页的时候，可能你会发现数字并不是直接从 0 变成 99999 的，这",
	"article": "前言\n--\n\n大家好，我是林三心，用最通俗易懂的话讲最难的知识点是我的座右铭，基础是进阶的前提是我的初心~\n\n背景\n--\n\n平时浏览一些跟数字有关的网页的时候，可能你会发现数字并不是直接从 0 变成 99999 的，这样会很生硬，而是会有一个从 0 增长到 99999 的动画效果，如下图\n\n![](/images/jueJin/a265ea9b8af0479.png)\n\n那这个效果要怎么实现呢？其实挺简单的，也挺有趣的，继续往下看吧~\n\nuseNumberAnimation\n------------------\n\n我们创建一个文件 `use-number-animation.ts` 来写这个 hooks\n\n### 确定参数\n\n首先来确定这个函数需要接受什么参数：\n\n*   \\*\\*from：\\*\\*起始数字\n*   \\*\\*to：\\*\\*最终数字\n*   \\*\\*duration：\\*\\*动画延迟间隔\n*   \\*\\*onProgress：\\*\\*增长回调函数\n\n![](/images/jueJin/0f9bad696edc4a1.png)\n\n### requestAnimationFrame\n\n![](/images/jueJin/4f762dba78dd4f9.png)\n\n可以看到数字是在不停变化的，所以我们需要有一个定时任务去让这个数字一直变化才行，那么用 setInterval 吗？不是的，显然用 `requestAnimationFrame` 性能会更佳，它会在浏览器下一帧重绘之前执行~\n\n![](/images/jueJin/b960fdf3debf4a6.png)\n\n### 增长速度\n\n![](/images/jueJin/b99bfe68dad7463.png)\n\n可以看到数字在不断增长，那么既然是增长，就需要计算增长速度，增长速度要怎么算呢？\n\n假设我要用`3000ms`的时间去从`0`增长到`378291.668`，那增长速度是不是 `(378291.668 - 0) / 3000`呢？\n\n![](/images/jueJin/9ad8b3a746ba411.png)\n\n由此我们可以知道增长速度 `speed = (to - from) / duration;`\n\n![](/images/jueJin/95ad87e8c82a483.png)\n\n### 啥时候终止增长？\n\n啥时候终止增长呢？其实很简单，那就是从开始增长开始，经过的时间大于 duration 时，就终止，这个时候说明动画必须要结束的~\n\n最终代码\n----\n\n可以得出最终的代码为\n\n![](/images/jueJin/3a18da1c8825471.png)\n\n使用方式如下\n\n![](/images/jueJin/6384f5e3593b4b4.png)\n\n最终达到数字增长的动画效果~\n\n![](/images/jueJin/b76dd437b23c4cd.png)\n\n结语 & 加学习群 & 摸鱼群\n---------------\n\n我是林三心\n\n*   一个待过**小型toG型外包公司、大型外包公司、小公司、潜力型创业公司、大公司**的作死型前端选手；\n*   一个偏前端的全干工程师；\n*   一个不正经的掘金作者；\n*   一个逗比的B站up主；\n*   一个不帅的小红书博主；\n*   一个喜欢打铁的篮球菜鸟；\n*   一个喜欢历史的乏味少年；\n*   一个喜欢rap的五音不全弱鸡\n\n如果你想一起学习前端，一起摸鱼，一起研究简历优化，一起研究面试进步，一起交流历史音乐篮球rap，可以来俺的摸鱼学习群哈哈，点这个，有7000多名前端小伙伴在等着一起学习哦 --> [摸鱼沸点](https://juejin.cn/pin/7035153948126216206 \"https://juejin.cn/pin/7035153948126216206\")",
	"selfDefined": "likes:9,comments:0,collects:8,likes:684"
}