{
	"title": "ç”¨JSå¼€å‘è·¨å¹³å°æ¡Œé¢åº”ç”¨ï¼Œä»åŸç†åˆ°å®è·µ",
	"author": "",
	"publishTime": "2019-06-10",
	"readTime": "é˜…è¯»31åˆ†é’Ÿ",
	"tags": "[\"JavaScript\",\"Electronä¸­æ–‡æŠ€æœ¯ç¤¾åŒº\",\"å‰ç«¯å¼€å‘ç¤¾åŒº\",\"å‰ç«¯æŠ€æœ¯äº¤æµ\",\"å‰ç«¯æ¡†æ¶æ•™ç¨‹\",\"JavaScript å­¦ä¹ èµ„æº\",\"CSS æŠ€å·§ä¸æœ€ä½³å®è·µ\",\"HTML5 æœ€æ–°åŠ¨æ€\",\"å‰ç«¯å·¥ç¨‹å¸ˆèŒä¸šå‘å±•\",\"å¼€æºå‰ç«¯é¡¹ç›®\",\"å‰ç«¯æŠ€æœ¯è¶‹åŠ¿\"]",
	"description": "ä½¿ç”¨Electronå¼€å‘å®¢æˆ·ç«¯ç¨‹åºå·²ç»æœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œæ•´ä½“æ„Ÿè§‰è¿˜æ˜¯éå¸¸ä¸é”™çš„ï¼Œå…¶ä¸­ä¹Ÿé‡åˆ°äº†ä¸€äº›å‘ç‚¹ï¼Œæœ¬æ–‡æ˜¯ä»ã€è¿è¡ŒåŸç†ã€‘åˆ°ã€å®é™…åº”ç”¨ã€‘å¯¹Electronè¿›è¡Œä¸€æ¬¡ç³»ç»Ÿæ€§çš„æ€»ç»“ã€‚ã€å¤šå›¾ï¼Œé•¿æ–‡é¢„è­¦ï½ã€‘ æœ¬æ–‡æ‰€æœ‰å®ä¾‹ä»£ç å‡åœ¨æˆ‘çš„github electron-reactä¸Šï¼Œç»“åˆä»£ç é˜…è¯»æ–‡â€¦",
	"article": "å¯¼è¯»\n--\n\nä½¿ç”¨`Electron`å¼€å‘å®¢æˆ·ç«¯ç¨‹åºå·²ç»æœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œæ•´ä½“æ„Ÿè§‰è¿˜æ˜¯éå¸¸ä¸é”™çš„ï¼Œå…¶ä¸­ä¹Ÿé‡åˆ°äº†ä¸€äº›å‘ç‚¹ï¼Œæœ¬æ–‡æ˜¯ä»ã€è¿è¡ŒåŸç†ã€‘åˆ°ã€å®é™…åº”ç”¨ã€‘å¯¹`Electron`è¿›è¡Œä¸€æ¬¡ç³»ç»Ÿæ€§çš„æ€»ç»“ã€‚ã€å¤šå›¾ï¼Œé•¿æ–‡é¢„è­¦ï½ã€‘\n\næœ¬æ–‡æ‰€æœ‰å®ä¾‹ä»£ç å‡åœ¨æˆ‘çš„[github electron-react](https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FConardLi%2Felectron-react \"https://github.com/ConardLi/electron-react\")ä¸Šï¼Œç»“åˆä»£ç é˜…è¯»æ–‡ç« æ•ˆæœæ›´ä½³ã€‚å¦å¤–`electron-react`è¿˜å¯ä½œä¸ºä½¿ç”¨`Electron + React + Mobx + Webpack`æŠ€æœ¯æ ˆçš„è„šæ‰‹æ¶å·¥ç¨‹ã€‚\n\nä¸€ã€æ¡Œé¢åº”ç”¨ç¨‹åº\n--------\n\n![](/images/jueJin/16b3d1c9782ebcc.png)\n\n> æ¡Œé¢åº”ç”¨ç¨‹åºï¼Œåˆç§°ä¸º GUI ç¨‹åºï¼ˆGraphical User Interfaceï¼‰ï¼Œä½†æ˜¯å’Œ GUI ç¨‹åºä¹Ÿæœ‰ä¸€äº›åŒºåˆ«ã€‚æ¡Œé¢åº”ç”¨ç¨‹åº å°† GUI ç¨‹åºä»GUI å…·ä½“ä¸ºâ€œæ¡Œé¢â€ï¼Œä½¿å†·å†°å†°çš„åƒå—æœ¨å¤´ä¸€æ ·çš„ç”µè„‘æ¦‚å¿µæ›´å…·æœ‰ äººæ€§åŒ–ï¼Œæ›´ç”ŸåŠ¨å’Œå¯Œæœ‰æ´»åŠ›ã€‚\n\næˆ‘ä»¬ç”µè„‘ä¸Šä½¿ç”¨çš„å„ç§å®¢æˆ·ç«¯ç¨‹åºéƒ½å±äºæ¡Œé¢åº”ç”¨ç¨‹åºï¼Œè¿‘å¹´æ¥`WEB`å’Œç§»åŠ¨ç«¯çš„å…´èµ·è®©æ¡Œé¢ç¨‹åºæ¸æ¸æš—æ·¡ï¼Œä½†æ˜¯åœ¨æŸäº›æ—¥å¸¸åŠŸèƒ½æˆ–è€…è¡Œä¸šåº”ç”¨ä¸­æ¡Œé¢åº”ç”¨ç¨‹åºä»ç„¶æ˜¯å¿…ä¸å¯å°‘çš„ã€‚\n\nä¼ ç»Ÿçš„æ¡Œé¢åº”ç”¨å¼€å‘æ–¹å¼ï¼Œä¸€èˆ¬æ˜¯ä¸‹é¢ä¸¤ç§ï¼š\n\n### 1.1 åŸç”Ÿå¼€å‘\n\nç›´æ¥å°†è¯­è¨€ç¼–è¯‘æˆå¯æ‰§è¡Œæ–‡ä»¶ï¼Œç›´æ¥è°ƒç”¨ç³»ç»Ÿ`API`ï¼Œå®ŒæˆUIç»˜åˆ¶ç­‰ã€‚è¿™ç±»å¼€å‘æŠ€æœ¯ï¼Œæœ‰ç€è¾ƒé«˜çš„è¿è¡Œæ•ˆç‡ï¼Œä½†ä¸€èˆ¬æ¥è¯´ï¼Œå¼€å‘é€Ÿåº¦è¾ƒæ…¢ï¼ŒæŠ€æœ¯è¦æ±‚è¾ƒé«˜ï¼Œä¾‹å¦‚ï¼š\n\n*   ä½¿ç”¨`C++ / MFC`å¼€å‘`Windows`åº”ç”¨\n*   ä½¿ç”¨`Objective-C`å¼€å‘`MAC`åº”ç”¨\n\n### 1.2 æ‰˜ç®¡å¹³å°\n\nä¸€å¼€å§‹å°±æœ‰æœ¬åœ°å¼€å‘å’ŒUIå¼€å‘ã€‚ä¸€æ¬¡ç¼–è¯‘åï¼Œå¾—åˆ°ä¸­é—´æ–‡ä»¶ï¼Œé€šè¿‡å¹³å°æˆ–è™šæœºå®ŒæˆäºŒæ¬¡åŠ è½½ç¼–è¯‘æˆ–è§£é‡Šè¿è¡Œã€‚è¿è¡Œæ•ˆç‡ä½äºåŸç”Ÿç¼–è¯‘ï¼Œä½†å¹³å°ä¼˜åŒ–åï¼Œå…¶æ•ˆç‡ä¹Ÿæ˜¯æ¯”è¾ƒå¯è§‚çš„ã€‚å°±å¼€å‘é€Ÿåº¦æ–¹é¢ï¼Œæ¯”åŸç”Ÿç¼–è¯‘æŠ€æœ¯è¦å¿«ä¸€äº›ã€‚ä¾‹å¦‚ï¼š\n\n*   ä½¿ç”¨`C# / .NET Framework`(åªèƒ½å¼€å‘`Windowsåº”ç”¨`)\n*   `Java / Swing`\n\nä¸è¿‡ï¼Œä¸Šé¢ä¸¤ç§å¯¹å‰ç«¯å¼€å‘äººå‘˜å¤ªä¸å‹å¥½äº†ï¼ŒåŸºæœ¬æ˜¯å‰ç«¯äººå‘˜ä¸ä¼šæ¶‰åŠçš„é¢†åŸŸï¼Œä½†æ˜¯åœ¨è¿™ä¸ªã€å¤§å‰ç«¯ğŸ˜…ã€‘çš„æ—¶ä»£ï¼Œå‰ç«¯å¼€å‘è€…æ­£åœ¨æƒ³æ–¹è®¾æ³•æ¶‰è¶³å„ä¸ªé¢†åŸŸï¼Œä½¿ç”¨`WEB`æŠ€æœ¯å¼€å‘å®¢æˆ·ç«¯çš„æ–¹å¼æ¨ªç©ºå‡ºä¸–ã€‚\n\n### 1.3 WEBå¼€å‘\n\nä½¿ç”¨`WEB`æŠ€æœ¯è¿›è¡Œå¼€å‘ï¼Œåˆ©ç”¨æµè§ˆå™¨å¼•æ“å®Œæˆ`UI`æ¸²æŸ“ï¼Œåˆ©ç”¨`Node.js`å®ç°æœåŠ¡å™¨ç«¯`JS`ç¼–ç¨‹å¹¶å¯ä»¥è°ƒç”¨ç³»ç»Ÿ`API`ï¼Œå¯ä»¥æŠŠå®ƒæƒ³åƒæˆä¸€ä¸ªå¥—äº†ä¸€ä¸ªå®¢æˆ·ç«¯å¤–å£³çš„`WEB`åº”ç”¨ã€‚\n\nåœ¨ç•Œé¢ä¸Šï¼Œ`WEB`çš„å¼ºå¤§ç”Ÿæ€ä¸º`UI`å¸¦æ¥äº†æ— é™å¯èƒ½ï¼Œå¹¶ä¸”å¼€å‘ã€ç»´æŠ¤æˆæœ¬ç›¸å¯¹è¾ƒä½ï¼Œæœ‰`WEB`å¼€å‘ç»éªŒçš„å‰ç«¯å¼€å‘è€…å¾ˆå®¹æ˜“ä¸Šæ‰‹è¿›è¡Œå¼€å‘ã€‚\n\næœ¬æ–‡å°±æ¥ç€é‡ä»‹ç»ä½¿ç”¨`WEB`æŠ€æœ¯å¼€å‘å®¢æˆ·ç«¯ç¨‹åºçš„æŠ€æœ¯ä¹‹ä¸€ã€`electron`ã€‘\n\näºŒã€Electron\n----------\n\n![](/images/jueJin/16b3d1c918263a3.png)\n\n`Electron`æ˜¯ç”±`Github`å¼€å‘ï¼Œç”¨`HTMLï¼ŒCSS`å’Œ`JavaScript`æ¥æ„å»ºè·¨å¹³å°æ¡Œé¢åº”ç”¨ç¨‹åºçš„ä¸€ä¸ªå¼€æºåº“ã€‚ `Electron`é€šè¿‡å°†`Chromium`å’Œ`Node.js`åˆå¹¶åˆ°åŒä¸€ä¸ªè¿è¡Œæ—¶ç¯å¢ƒä¸­ï¼Œå¹¶å°†å…¶æ‰“åŒ…ä¸º`Macï¼ŒWindows`å’Œ`Linux`ç³»ç»Ÿä¸‹çš„åº”ç”¨æ¥å®ç°è¿™ä¸€ç›®çš„ã€‚\n\n### 2.1 ä½¿ç”¨Electronå¼€å‘çš„ç†ç”±ï¼š\n\n*   ä½¿ç”¨å…·æœ‰å¼ºå¤§ç”Ÿæ€çš„`Web`æŠ€æœ¯è¿›è¡Œå¼€å‘ï¼Œå¼€å‘æˆæœ¬ä½ï¼Œå¯æ‰©å±•æ€§å¼ºï¼Œæ›´ç‚«é…·çš„`UI`\n*   è·¨å¹³å°ï¼Œä¸€å¥—ä»£ç å¯æ‰“åŒ…ä¸º`Windowsã€Linuxã€Mac`ä¸‰å¥—è½¯ä»¶ï¼Œä¸”ç¼–è¯‘å¿«é€Ÿ\n*   å¯ç›´æ¥åœ¨ç°æœ‰`Web`åº”ç”¨ä¸Šè¿›è¡Œæ‰©å±•ï¼Œæä¾›æµè§ˆå™¨ä¸å…·å¤‡çš„èƒ½åŠ›\n*   ä½ æ˜¯ä¸€ä¸ªå‰ç«¯ğŸ‘¨ğŸ’»ï½\n\nå½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿè¦è®¤æ¸…å®ƒçš„ç¼ºç‚¹ï¼šæ€§èƒ½æ¯”åŸç”Ÿæ¡Œé¢åº”ç”¨è¦ä½ï¼Œæœ€ç»ˆæ‰“åŒ…åçš„åº”ç”¨æ¯”åŸç”Ÿåº”ç”¨å¤§å¾ˆå¤šã€‚\n\n### 2.2 å¼€å‘ä½“éªŒ\n\n**å…¼å®¹æ€§**\n\nè™½ç„¶ä½ è¿˜åœ¨ç”¨`WEB`æŠ€æœ¯è¿›è¡Œå¼€å‘ï¼Œä½†æ˜¯ä½ ä¸ç”¨å†è€ƒè™‘å…¼å®¹æ€§é—®é¢˜äº†ï¼Œä½ åªéœ€è¦å…³å¿ƒä½ å½“å‰ä½¿ç”¨`Electron`çš„ç‰ˆæœ¬å¯¹åº”`Chrome`çš„ç‰ˆæœ¬ï¼Œä¸€èˆ¬æƒ…å†µä¸‹å®ƒå·²ç»è¶³å¤Ÿæ–°æ¥è®©ä½ ä½¿ç”¨æœ€æ–°çš„`API`å’Œè¯­æ³•äº†ï¼Œä½ è¿˜å¯ä»¥æ‰‹åŠ¨å‡çº§`Chrome`ç‰ˆæœ¬ã€‚åŒæ ·çš„ï¼Œä½ ä¹Ÿä¸ç”¨è€ƒè™‘ä¸åŒæµè§ˆå™¨å¸¦çš„æ ·å¼å’Œä»£ç å…¼å®¹é—®é¢˜ã€‚\n\n**Nodeç¯å¢ƒ**\n\nè¿™å¯èƒ½æ˜¯å¾ˆå¤šå‰ç«¯å¼€å‘è€…æ›¾ç»æ¢¦æƒ³è¿‡çš„åŠŸèƒ½ï¼Œåœ¨`WEB`ç•Œé¢ä¸­ä½¿ç”¨`Node.js`æä¾›çš„å¼ºå¤§`API`ï¼Œè¿™æ„å‘³ç€ä½ åœ¨`WEB`é¡µé¢ç›´æ¥å¯ä»¥æ“ä½œæ–‡ä»¶ï¼Œè°ƒç”¨ç³»ç»Ÿ`API`ï¼Œç”šè‡³æ“ä½œæ•°æ®åº“ã€‚å½“ç„¶ï¼Œé™¤äº†å®Œæ•´çš„`Node API`ï¼Œä½ è¿˜å¯ä»¥ä½¿ç”¨é¢å¤–çš„å‡ åä¸‡ä¸ª`npm`æ¨¡å—ã€‚\n\n**è·¨åŸŸ**\n\nä½ å¯ä»¥ç›´æ¥ä½¿ç”¨`Node`æä¾›çš„`request`æ¨¡å—è¿›è¡Œç½‘ç»œè¯·æ±‚ï¼Œè¿™æ„å‘³ç€ä½ æ— éœ€å†è¢«è·¨åŸŸæ‰€å›°æ‰°ã€‚\n\n**å¼ºå¤§çš„æ‰©å±•æ€§**\n\nå€ŸåŠ©`node-ffi`ï¼Œä¸ºåº”ç”¨ç¨‹åºæä¾›å¼ºå¤§çš„æ‰©å±•æ€§ï¼ˆåé¢çš„ç« èŠ‚ä¼šè¯¦ç»†ä»‹ç»ï¼‰ã€‚\n\n### 2.3 è°åœ¨ç”¨Electron\n\n![](/images/jueJin/16b3d1c91810fbd.png)\n\nç°åœ¨å¸‚é¢ä¸Šå·²ç»æœ‰éå¸¸å¤šçš„åº”ç”¨åœ¨ä½¿ç”¨`Electron`è¿›è¡Œå¼€å‘äº†ï¼ŒåŒ…æ‹¬æˆ‘ä»¬ç†Ÿæ‚‰çš„`VS Code`å®¢æˆ·ç«¯ã€`GitHub`å®¢æˆ·ç«¯ã€`Atom`å®¢æˆ·ç«¯ç­‰ç­‰ã€‚å°è±¡å¾ˆæ·±çš„ï¼Œå»å¹´è¿…é›·åœ¨å‘å¸ƒè¿…é›·X`10.1`æ—¶çš„æ–‡æ¡ˆï¼š\n\n> ä»è¿…é›·X 10.1ç‰ˆæœ¬å¼€å§‹ï¼Œæˆ‘ä»¬é‡‡ç”¨Electronè½¯ä»¶æ¡†æ¶å®Œå…¨é‡å†™äº†è¿…é›·ä¸»ç•Œé¢ã€‚ä½¿ç”¨æ–°æ¡†æ¶çš„è¿…é›·Xå¯ä»¥å®Œç¾æ”¯æŒ2Kã€4Kç­‰é«˜æ¸…æ˜¾ç¤ºå±ï¼Œç•Œé¢ä¸­çš„æ–‡å­—æ¸²æŸ“ä¹Ÿæ›´åŠ æ¸…æ™°é”åˆ©ã€‚ä»æŠ€æœ¯å±‚é¢æ¥è¯´ï¼Œæ–°æ¡†æ¶çš„ç•Œé¢ç»˜åˆ¶ã€äº‹ä»¶å¤„ç†ç­‰æ–¹é¢æ¯”è€æ¡†æ¶æ›´åŠ çµæ´»é«˜æ•ˆï¼Œå› æ­¤ç•Œé¢çš„æµç•…åº¦ä¹Ÿæ˜¾è‘—ä¼˜äºè€æ¡†æ¶çš„è¿…é›·ã€‚è‡³äºå…·ä½“æå‡æœ‰å¤šå¤§ï¼Ÿæ‚¨ä¸€è¯•ä¾¿çŸ¥ã€‚\n\nä½ å¯ä»¥æ‰“å¼€`VS Code`ï¼Œç‚¹å‡»ã€å¸®åŠ©ã€‘ã€åˆ‡æ¢å¼€å‘äººå‘˜å·¥å…·ã€‘æ¥è°ƒè¯•`VS Code`å®¢æˆ·ç«¯çš„ç•Œé¢ã€‚\n\n![](/images/jueJin/16b3d1c91990f81.png)\n\nä¸‰ã€Electronè¿è¡ŒåŸç†\n--------------\n\n![](/images/jueJin/16b3d1c977d8d72.png)\n\n`Electron` ç»“åˆäº† `Chromium`ã€`Node.js` å’Œç”¨äºè°ƒç”¨æ“ä½œç³»ç»Ÿæœ¬åœ°åŠŸèƒ½çš„`API`ã€‚\n\n### 3.1 Chromium\n\n`Chromium`æ˜¯`Google`ä¸ºå‘å±•`Chrome`æµè§ˆå™¨è€Œå¯åŠ¨çš„å¼€æºé¡¹ç›®ï¼Œ`Chromium`ç›¸å½“äº`Chrome`çš„å·¥ç¨‹ç‰ˆæˆ–ç§°å®éªŒç‰ˆï¼Œæ–°åŠŸèƒ½ä¼šç‡å…ˆåœ¨`Chromium`ä¸Šå®ç°ï¼Œå¾…éªŒè¯åæ‰ä¼šåº”ç”¨åœ¨`Chrome`ä¸Šï¼Œæ•…`Chrome`çš„åŠŸèƒ½ä¼šç›¸å¯¹è½åä½†è¾ƒç¨³å®šã€‚\n\n`Chromium`ä¸º`Electron`æä¾›å¼ºå¤§çš„`UI`èƒ½åŠ›ï¼Œå¯ä»¥åœ¨ä¸è€ƒè™‘å…¼å®¹æ€§çš„æƒ…å†µä¸‹å¼€å‘ç•Œé¢ã€‚\n\n### 3.2 Node.js\n\n`Node.js`æ˜¯ä¸€ä¸ªè®©`JavaScript`è¿è¡Œåœ¨æœåŠ¡ç«¯çš„å¼€å‘å¹³å°ï¼Œ`Node`ä½¿ç”¨äº‹ä»¶é©±åŠ¨ï¼Œéé˜»å¡`I/O`æ¨¡å‹è€Œå¾—ä»¥è½»é‡å’Œé«˜æ•ˆã€‚\n\nå•å•é `Chromium`æ˜¯ä¸èƒ½å…·å¤‡ç›´æ¥æ“ä½œåŸç”Ÿ`GUI`èƒ½åŠ›çš„ï¼Œ`Electron`å†…é›†æˆäº†`Nodejs`ï¼Œè¿™è®©å…¶åœ¨å¼€å‘ç•Œé¢çš„åŒæ—¶ä¹Ÿæœ‰äº†æ“ä½œç³»ç»Ÿåº•å±‚`API`çš„èƒ½åŠ›ï¼Œ`Nodejs` ä¸­å¸¸ç”¨çš„ `Pathã€fsã€Crypto` ç­‰æ¨¡å—åœ¨ `Electron` å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚\n\n### 3.3 ç³»ç»ŸAPI\n\nä¸ºäº†æä¾›åŸç”Ÿç³»ç»Ÿçš„`GUI`æ”¯æŒï¼Œ`Electron`å†…ç½®äº†åŸç”Ÿåº”ç”¨ç¨‹åºæ¥å£ï¼Œå¯¹è°ƒç”¨ä¸€äº›ç³»ç»ŸåŠŸèƒ½ï¼Œå¦‚è°ƒç”¨ç³»ç»Ÿé€šçŸ¥ã€æ‰“å¼€ç³»ç»Ÿæ–‡ä»¶å¤¹æä¾›æ”¯æŒã€‚\n\nåœ¨å¼€å‘æ¨¡å¼ä¸Šï¼Œ`Electron`åœ¨è°ƒç”¨ç³»ç»Ÿ`API`å’Œç»˜åˆ¶ç•Œé¢ä¸Šæ˜¯åˆ†ç¦»å¼€å‘çš„ï¼Œä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹`Electron`å…³äºè¿›ç¨‹å¦‚ä½•åˆ’åˆ†ã€‚\n\n### 3.4 ä¸»è¿›ç¨‹\n\n`Electron`åŒºåˆ†äº†ä¸¤ç§è¿›ç¨‹ï¼šä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹ï¼Œä¸¤è€…å„è‡ªè´Ÿè´£è‡ªå·±çš„èŒèƒ½ã€‚\n\n![](/images/jueJin/16b3d1c9796221e.png)\n\n`Electron` è¿è¡Œ`package.json`çš„ `main` è„šæœ¬çš„è¿›ç¨‹è¢«ç§°ä¸ºä¸»è¿›ç¨‹ã€‚ä¸€ä¸ª `Electron` åº”ç”¨æ€»æ˜¯æœ‰ä¸”åªæœ‰ä¸€ä¸ªä¸»è¿›ç¨‹ã€‚\n\n**èŒè´£:**\n\n*   åˆ›å»ºæ¸²æŸ“è¿›ç¨‹ï¼ˆå¯å¤šä¸ªï¼‰\n*   æ§åˆ¶äº†åº”ç”¨ç”Ÿå‘½å‘¨æœŸï¼ˆå¯åŠ¨ã€é€€å‡º`APP`ä»¥åŠå¯¹`APP`åšä¸€äº›äº‹ä»¶ç›‘å¬ï¼‰\n*   è°ƒç”¨ç³»ç»Ÿåº•å±‚åŠŸèƒ½ã€è°ƒç”¨åŸç”Ÿèµ„æº\n\n**å¯è°ƒç”¨çš„API:**\n\n*   `Node.js API`\n*   `Electron`æä¾›çš„ä¸»è¿›ç¨‹`API`ï¼ˆåŒ…æ‹¬ä¸€äº›ç³»ç»ŸåŠŸèƒ½å’Œ`Electron`é™„åŠ åŠŸèƒ½ï¼‰\n\n### 3.5 æ¸²æŸ“è¿›ç¨‹\n\nç”±äº `Electron` ä½¿ç”¨äº† `Chromium` æ¥å±•ç¤º `web` é¡µé¢ï¼Œæ‰€ä»¥ `Chromium` çš„å¤šè¿›ç¨‹æ¶æ„ä¹Ÿè¢«ä½¿ç”¨åˆ°ã€‚ æ¯ä¸ª`Electron` ä¸­çš„ `web`é¡µé¢è¿è¡Œåœ¨å®ƒè‡ªå·±çš„æ¸²æŸ“è¿›ç¨‹ä¸­ã€‚\n\n> ä¸»è¿›ç¨‹ä½¿ç”¨ BrowserWindow å®ä¾‹åˆ›å»ºé¡µé¢ã€‚ æ¯ä¸ª BrowserWindow å®ä¾‹éƒ½åœ¨è‡ªå·±çš„æ¸²æŸ“è¿›ç¨‹é‡Œè¿è¡Œé¡µé¢ã€‚ å½“ä¸€ä¸ª BrowserWindow å®ä¾‹è¢«é”€æ¯åï¼Œç›¸åº”çš„æ¸²æŸ“è¿›ç¨‹ä¹Ÿä¼šè¢«ç»ˆæ­¢ã€‚\n\nä½ å¯ä»¥æŠŠæ¸²æŸ“è¿›ç¨‹æƒ³åƒæˆä¸€ä¸ªæµè§ˆå™¨çª—å£ï¼Œå®ƒèƒ½å­˜åœ¨å¤šä¸ªå¹¶ä¸”ç›¸äº’ç‹¬ç«‹ï¼Œä¸è¿‡å’Œæµè§ˆå™¨ä¸åŒçš„æ˜¯ï¼Œå®ƒèƒ½è°ƒç”¨`Node API`ã€‚\n\n**èŒè´£:**\n\n*   ç”¨`HTML`å’Œ`CSS`æ¸²æŸ“ç•Œé¢\n*   ç”¨`JavaScript`åšä¸€äº›ç•Œé¢äº¤äº’\n\n**å¯è°ƒç”¨çš„API:**\n\n*   `DOM API`\n*   `Node.js API`\n*   `Electron`æä¾›çš„æ¸²æŸ“è¿›ç¨‹`API`\n\nå››ã€ElectronåŸºç¡€\n------------\n\n### 4.1 Electron API\n\nåœ¨ä¸Šé¢çš„ç« èŠ‚æˆ‘ä»¬æåˆ°ï¼Œæ¸²æŸ“è¿›å’Œä¸»è¿›ç¨‹åˆ†åˆ«å¯è°ƒç”¨çš„`Electron API`ã€‚æ‰€æœ‰`Electron`çš„`API`éƒ½è¢«æŒ‡æ´¾ç»™ä¸€ç§è¿›ç¨‹ç±»å‹ã€‚ è®¸å¤š`API`åªèƒ½è¢«ç”¨äºä¸»è¿›ç¨‹ä¸­ï¼Œæœ‰äº›`API`åˆåªèƒ½è¢«ç”¨äºæ¸²æŸ“è¿›ç¨‹ï¼Œåˆæœ‰ä¸€äº›ä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹ä¸­éƒ½å¯ä»¥ä½¿ç”¨ã€‚\n\nä½ å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼è·å–`Electron API`\n\n```\nconst { BrowserWindow, ... } = require('electron')\n```\n\nä¸‹é¢æ˜¯ä¸€äº›å¸¸ç”¨çš„`Electron API`ï¼š\n\n![](/images/jueJin/16b3d1c9d2e22a4.png)\n\nåœ¨åé¢çš„ç« èŠ‚æˆ‘ä»¬ä¼šé€‰æ‹©å…¶ä¸­å¸¸ç”¨çš„æ¨¡å—è¿›è¡Œè¯¦ç»†ä»‹ç»ã€‚\n\n### 4.2 ä½¿ç”¨ Node.js çš„ API\n\n![](/images/jueJin/16b3d1ca5937a1c.png)\n\nä½ å¯ä»¥åŒæ—¶åœ¨`Electron`çš„ä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹ä½¿ç”¨`Node.js API`ï¼Œ)æ‰€æœ‰åœ¨`Node.js`å¯ä»¥ä½¿ç”¨çš„`API`ï¼Œåœ¨`Electron`ä¸­åŒæ ·å¯ä»¥ä½¿ç”¨ã€‚\n\n```\nimport {shell} from 'electron';\nimport os from 'os';\n\n    document.getElementById('btn').addEventListener('click', () => {\n    shell.showItemInFolder(os.homedir());\n    })\n```\n\n> æœ‰ä¸€ä¸ªéå¸¸é‡è¦çš„æç¤º: åŸç”ŸNode.jsæ¨¡å— (å³æŒ‡ï¼Œéœ€è¦ç¼–è¯‘æºç è¿‡åæ‰èƒ½è¢«ä½¿ç”¨çš„æ¨¡å—) éœ€è¦åœ¨ç¼–è¯‘åæ‰èƒ½å’ŒElectronä¸€èµ·ä½¿ç”¨ã€‚\n\n### 4.3 è¿›ç¨‹é€šä¿¡\n\nä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹è™½ç„¶æ‹¥æœ‰ä¸åŒçš„èŒè´£ï¼Œç„¶æ˜¯ä»–ä»¬ä¹Ÿéœ€è¦ç›¸äº’åä½œï¼Œäº’ç›¸é€šè®¯ã€‚\n\n> ä¾‹å¦‚ï¼šåœ¨`web`é¡µé¢ç®¡ç†åŸç”Ÿ`GUI`èµ„æºæ˜¯å¾ˆå±é™©çš„ï¼Œä¼šå¾ˆå®¹æ˜“æ³„éœ²èµ„æºã€‚æ‰€ä»¥åœ¨`web`é¡µé¢ï¼Œä¸å…è®¸ç›´æ¥è°ƒç”¨åŸç”Ÿ`GUI`ç›¸å…³çš„`API`ã€‚æ¸²æŸ“è¿›ç¨‹å¦‚æœæƒ³è¦è¿›è¡ŒåŸç”Ÿçš„`GUI`æ“ä½œï¼Œå°±å¿…é¡»å’Œä¸»è¿›ç¨‹é€šè®¯ï¼Œè¯·æ±‚ä¸»è¿›ç¨‹æ¥å®Œæˆè¿™äº›æ“ä½œã€‚\n\n![](/images/jueJin/16b3d1ca6198ef0.png)\n\n### 4.4 æ¸²æŸ“è¿›ç¨‹å‘ä¸»è¿›ç¨‹é€šä¿¡\n\n`ipcRenderer` æ˜¯ä¸€ä¸ª `EventEmitter` çš„å®ä¾‹ã€‚ ä½ å¯ä»¥ä½¿ç”¨å®ƒæä¾›çš„ä¸€äº›æ–¹æ³•ï¼Œä»æ¸²æŸ“è¿›ç¨‹å‘é€åŒæ­¥æˆ–å¼‚æ­¥çš„æ¶ˆæ¯åˆ°ä¸»è¿›ç¨‹ã€‚ ä¹Ÿå¯ä»¥æ¥æ”¶ä¸»è¿›ç¨‹å›å¤çš„æ¶ˆæ¯ã€‚\n\nåœ¨æ¸²æŸ“è¿›ç¨‹å¼•å…¥`ipcRenderer`ï¼š\n\n```\nimport { ipcRenderer } from 'electron';\n```\n\nå¼‚æ­¥å‘é€ï¼š\n\né€šè¿‡ `channel` å‘é€åŒæ­¥æ¶ˆæ¯åˆ°ä¸»è¿›ç¨‹ï¼Œå¯ä»¥æºå¸¦ä»»æ„å‚æ•°ã€‚\n\n> åœ¨å†…éƒ¨ï¼Œå‚æ•°ä¼šè¢«åºåˆ—åŒ–ä¸º `JSON`ï¼Œå› æ­¤å‚æ•°å¯¹è±¡ä¸Šçš„å‡½æ•°å’ŒåŸå‹é“¾ä¸ä¼šè¢«å‘é€ã€‚\n\n```\nipcRenderer.send('async-render', 'æˆ‘æ˜¯æ¥è‡ªæ¸²æŸ“è¿›ç¨‹çš„å¼‚æ­¥æ¶ˆæ¯');\n```\n\nåŒæ­¥å‘é€ï¼š\n\n```\nconst msg = ipcRenderer.sendSync('sync-render', 'æˆ‘æ˜¯æ¥è‡ªæ¸²æŸ“è¿›ç¨‹çš„åŒæ­¥æ¶ˆæ¯');\n```\n\n> æ³¨æ„: å‘é€åŒæ­¥æ¶ˆæ¯å°†ä¼šé˜»å¡æ•´ä¸ªæ¸²æŸ“è¿›ç¨‹ï¼Œç›´åˆ°æ”¶åˆ°ä¸»è¿›ç¨‹çš„å“åº”ã€‚\n\nä¸»è¿›ç¨‹ç›‘å¬æ¶ˆæ¯ï¼š\n\n`ipcMain`æ¨¡å—æ˜¯`EventEmitter`ç±»çš„ä¸€ä¸ªå®ä¾‹ã€‚ å½“åœ¨ä¸»è¿›ç¨‹ä¸­ä½¿ç”¨æ—¶ï¼Œå®ƒå¤„ç†ä»æ¸²æŸ“å™¨è¿›ç¨‹ï¼ˆç½‘é¡µï¼‰å‘é€å‡ºæ¥çš„å¼‚æ­¥å’ŒåŒæ­¥ä¿¡æ¯ã€‚ ä»æ¸²æŸ“å™¨è¿›ç¨‹å‘é€çš„æ¶ˆæ¯å°†è¢«å‘é€åˆ°è¯¥æ¨¡å—ã€‚\n\n`ipcMain.on`ï¼šç›‘å¬ `channel`ï¼Œå½“æ¥æ”¶åˆ°æ–°çš„æ¶ˆæ¯æ—¶ `listener` ä¼šä»¥ `listener(event, args...)` çš„å½¢å¼è¢«è°ƒç”¨ã€‚\n\n```\n    ipcMain.on('sync-render', (event, data) => {\n    console.log(data);\n    });\n```\n\n### 4.5 ä¸»è¿›ç¨‹å‘æ¸²æŸ“è¿›ç¨‹é€šä¿¡\n\nåœ¨ä¸»è¿›ç¨‹ä¸­å¯ä»¥é€šè¿‡`BrowserWindow`çš„`webContents`å‘æ¸²æŸ“è¿›ç¨‹å‘é€æ¶ˆæ¯ï¼Œæ‰€ä»¥ï¼Œåœ¨å‘é€æ¶ˆæ¯å‰ä½ å¿…é¡»å…ˆæ‰¾åˆ°å¯¹åº”æ¸²æŸ“è¿›ç¨‹çš„`BrowserWindow`å¯¹è±¡ã€‚ï¼š\n\n```\nconst mainWindow = BrowserWindow.fromId(global.mainId);\nmainWindow.webContents.send('main-msg', `ConardLi]`)\n```\n\næ ¹æ®æ¶ˆæ¯æ¥æºå‘é€ï¼š\n\nåœ¨`ipcMain`æ¥å—æ¶ˆæ¯çš„å›è°ƒå‡½æ•°ä¸­ï¼Œé€šè¿‡ç¬¬ä¸€ä¸ªå‚æ•°`event`çš„å±æ€§`sender`å¯ä»¥æ‹¿åˆ°æ¶ˆæ¯æ¥æºæ¸²æŸ“è¿›ç¨‹çš„`webContents`å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ç”¨æ­¤å¯¹è±¡å›åº”æ¶ˆæ¯ã€‚\n\n```\n    ipcMain.on('sync-render', (event, data) => {\n    console.log(data);\n    event.sender.send('main-msg', 'ä¸»è¿›ç¨‹æ”¶åˆ°äº†æ¸²æŸ“è¿›ç¨‹çš„ã€å¼‚æ­¥ã€‘æ¶ˆæ¯ï¼')\n    });\n```\n\næ¸²æŸ“è¿›ç¨‹ç›‘å¬ï¼š\n\n`ipcRenderer.on`:ç›‘å¬ `channel`, å½“æ–°æ¶ˆæ¯åˆ°è¾¾ï¼Œå°†é€šè¿‡`listener(event, args...)`è°ƒç”¨ `listener`ã€‚\n\n```\n    ipcRenderer.on('main-msg', (event, msg) => {\n    console.log(msg);\n    })\n```\n\n### 4.6 é€šä¿¡åŸç†\n\n`ipcMain` å’Œ `ipcRenderer` éƒ½æ˜¯ `EventEmitter` ç±»çš„ä¸€ä¸ªå®ä¾‹ã€‚`EventEmitter` ç±»æ˜¯ `NodeJS` äº‹ä»¶çš„åŸºç¡€ï¼Œå®ƒç”± `NodeJS` ä¸­çš„ `events` æ¨¡å—å¯¼å‡ºã€‚\n\n`EventEmitter` çš„æ ¸å¿ƒå°±æ˜¯äº‹ä»¶è§¦å‘ä¸äº‹ä»¶ç›‘å¬å™¨åŠŸèƒ½çš„å°è£…ã€‚å®ƒå®ç°äº†äº‹ä»¶æ¨¡å‹éœ€è¦çš„æ¥å£ï¼Œ åŒ…æ‹¬ `addListenerï¼ŒremoveListener`, `emit` åŠå…¶å®ƒå·¥å…·æ–¹æ³•. åŒåŸç”Ÿ `JavaScript` äº‹ä»¶ç±»ä¼¼ï¼Œ é‡‡ç”¨äº†å‘å¸ƒ/è®¢é˜…(è§‚å¯Ÿè€…)çš„æ–¹å¼ï¼Œ ä½¿ç”¨å†…éƒ¨ `_events` åˆ—è¡¨æ¥è®°å½•æ³¨å†Œçš„äº‹ä»¶å¤„ç†å™¨ã€‚\n\næˆ‘ä»¬é€šè¿‡ `ipcMain`å’Œ`ipcRenderer` çš„ `onã€send` è¿›è¡Œç›‘å¬å’Œå‘é€æ¶ˆæ¯éƒ½æ˜¯ `EventEmitter` å®šä¹‰çš„ç›¸å…³æ¥å£ã€‚\n\n### 4.7 remote\n\n`remote` æ¨¡å—ä¸ºæ¸²æŸ“è¿›ç¨‹ï¼ˆwebé¡µé¢ï¼‰å’Œä¸»è¿›ç¨‹é€šä¿¡ï¼ˆ`IPC`ï¼‰æä¾›äº†ä¸€ç§ç®€å•æ–¹æ³•ã€‚ ä½¿ç”¨ `remote` æ¨¡å—, ä½ å¯ä»¥è°ƒç”¨ `main` è¿›ç¨‹å¯¹è±¡çš„æ–¹æ³•, è€Œä¸å¿…æ˜¾å¼å‘é€è¿›ç¨‹é—´æ¶ˆæ¯, ç±»ä¼¼äº `Java` çš„ `RMI` ã€‚\n\n```\nimport { remote } from 'electron';\n\nremote.dialog.showErrorBox('ä¸»è¿›ç¨‹æ‰æœ‰çš„dialogæ¨¡å—', 'æˆ‘æ˜¯ä½¿ç”¨remoteè°ƒç”¨çš„')\n```\n\n![](/images/jueJin/16b3d1de209ac27.png)\n\nä½†å®é™…ä¸Šï¼Œæˆ‘ä»¬åœ¨è°ƒç”¨è¿œç¨‹å¯¹è±¡çš„æ–¹æ³•ã€å‡½æ•°æˆ–è€…é€šè¿‡è¿œç¨‹æ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œå®é™…ä¸Šéƒ½æ˜¯åœ¨å‘é€ä¸€ä¸ªåŒæ­¥çš„è¿›ç¨‹é—´æ¶ˆæ¯ã€‚\n\nåœ¨ä¸Šé¢é€šè¿‡ `remote` æ¨¡å—è°ƒç”¨ `dialog` çš„ä¾‹å­é‡Œã€‚æˆ‘ä»¬åœ¨æ¸²æŸ“è¿›ç¨‹ä¸­åˆ›å»ºçš„ `dialog` å¯¹è±¡å…¶å®å¹¶ä¸åœ¨æˆ‘ä»¬çš„æ¸²æŸ“è¿›ç¨‹ä¸­ï¼Œå®ƒåªæ˜¯è®©ä¸»è¿›ç¨‹åˆ›å»ºäº†ä¸€ä¸ª `dialog` å¯¹è±¡ï¼Œå¹¶è¿”å›äº†è¿™ä¸ªç›¸å¯¹åº”çš„è¿œç¨‹å¯¹è±¡ç»™äº†æ¸²æŸ“è¿›ç¨‹ã€‚\n\n### 4.8 æ¸²æŸ“è¿›ç¨‹é—´é€šä¿¡\n\n`Electron`å¹¶æ²¡æœ‰æä¾›æ¸²æŸ“è¿›ç¨‹ä¹‹é—´ç›¸äº’é€šä¿¡çš„æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸»è¿›ç¨‹ä¸­å»ºç«‹ä¸€ä¸ªæ¶ˆæ¯ä¸­è½¬ç«™ã€‚\n\næ¸²æŸ“è¿›ç¨‹ä¹‹é—´é€šä¿¡é¦–å…ˆå‘é€æ¶ˆæ¯åˆ°ä¸»è¿›ç¨‹ï¼Œä¸»è¿›ç¨‹çš„ä¸­è½¬ç«™æ¥æ”¶åˆ°æ¶ˆæ¯åæ ¹æ®æ¡ä»¶è¿›è¡Œåˆ†å‘ã€‚\n\n### 4.9 æ¸²æŸ“è¿›ç¨‹æ•°æ®å…±äº«\n\nåœ¨ä¸¤ä¸ªæ¸²æŸ“è¿›ç¨‹é—´å…±äº«æ•°æ®æœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨æµè§ˆå™¨ä¸­å·²ç»å®ç°çš„`HTML5 API`ã€‚ å…¶ä¸­æ¯”è¾ƒå¥½çš„æ–¹æ¡ˆæ˜¯ç”¨`Storage API`ï¼Œ `localStorageï¼ŒsessionStorage` æˆ–è€… `IndexedDBã€‚`\n\nå°±åƒåœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ä¸€æ ·ï¼Œè¿™ç§å­˜å‚¨ç›¸å½“äºåœ¨åº”ç”¨ç¨‹åºä¸­æ°¸ä¹…å­˜å‚¨äº†ä¸€éƒ¨åˆ†æ•°æ®ã€‚æœ‰æ—¶ä½ å¹¶ä¸éœ€è¦è¿™æ ·çš„å­˜å‚¨ï¼Œåªéœ€è¦åœ¨å½“å‰åº”ç”¨ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸå†…è¿›è¡Œä¸€äº›æ•°æ®çš„å…±äº«ã€‚è¿™æ—¶ä½ å¯ä»¥ç”¨ `Electron` å†…çš„ `IPC` æœºåˆ¶å®ç°ã€‚\n\nå°†æ•°æ®å­˜åœ¨ä¸»è¿›ç¨‹çš„æŸä¸ªå…¨å±€å˜é‡ä¸­ï¼Œç„¶ååœ¨å¤šä¸ªæ¸²æŸ“è¿›ç¨‹ä¸­ä½¿ç”¨ `remote` æ¨¡å—æ¥è®¿é—®å®ƒã€‚\n\n![](/images/jueJin/16b3d1de212d8b5.png)\n\nåœ¨ä¸»è¿›ç¨‹ä¸­åˆå§‹åŒ–å…¨å±€å˜é‡ï¼š\n\n```\nglobal.mainId = ...;\nglobal.device = {...};\nglobal.__dirname = __dirname;\nglobal.myField = { name: 'ConardLi' };\n```\n\nåœ¨æ¸²æŸ“è¿›ç¨‹ä¸­è¯»å–ï¼š\n\n```\nimport { ipcRenderer, remote } from 'electron';\n\nconst { getGlobal } = remote;\n\nconst mainId = getGlobal('mainId')\nconst dirname = getGlobal('__dirname')\nconst deviecMac = getGlobal('device').mac;\n```\n\nåœ¨æ¸²æŸ“è¿›ç¨‹ä¸­æ”¹å˜ï¼š\n\n```\ngetGlobal('myField').name = 'codeç§˜å¯†èŠ±å›­';\n```\n\nå¤šä¸ªæ¸²æŸ“è¿›ç¨‹å…±äº«åŒä¸€ä¸ªä¸»è¿›ç¨‹çš„å…¨å±€å˜é‡ï¼Œè¿™æ ·å³å¯è¾¾åˆ°æ¸²æŸ“è¿›ç¨‹æ•°æ®å…±äº«å’Œä¼ é€’çš„æ•ˆæœã€‚\n\näº”ã€çª—å£\n----\n\n### 5.1 BrowserWindow\n\nä¸»è¿›ç¨‹æ¨¡å—`BrowserWindow`ç”¨äºåˆ›å»ºå’Œæ§åˆ¶æµè§ˆå™¨çª—å£ã€‚\n\n```\n    mainWindow = new BrowserWindow({\n    width: 1000,\n    height: 800,\n    // ...\n    });\n    mainWindow.loadURL('http://www.conardli.top/');\n```\n\nä½ å¯ä»¥åœ¨[è¿™é‡Œ](https://link.juejin.cn?target=https%3A%2F%2Felectronjs.org%2Fdocs%2Fapi%2Fbrowser-window%23new-browserwindowoptions \"https://electronjs.org/docs/api/browser-window#new-browserwindowoptions\")æŸ¥çœ‹å®ƒæ‰€æœ‰çš„æ„é€ å‚æ•°ã€‚\n\n![](/images/jueJin/16b3d1ccd2ea682.png)\n\n### 5.2 æ— æ¡†çª—å£\n\n> æ— æ¡†çª—å£æ˜¯æ²¡æœ‰é•¶è¾¹çš„çª—å£ï¼Œçª—å£çš„éƒ¨åˆ†ï¼ˆå¦‚å·¥å…·æ ï¼‰ä¸å±äºç½‘é¡µçš„ä¸€éƒ¨åˆ†ã€‚\n\nåœ¨`BrowserWindow`çš„æ„é€ å‚æ•°ä¸­ï¼Œå°†`frame`è®¾ç½®ä¸º`false`å¯ä»¥æŒ‡å®šçª—å£ä¸ºæ— è¾¹æ¡†çª—å£ï¼Œå°†å·¥å…·æ éšè—åï¼Œå°±ä¼šäº§ç”Ÿä¸¤ä¸ªé—®é¢˜ï¼š\n\n*   1.çª—å£æ§åˆ¶æŒ‰é’®ï¼ˆæœ€å°åŒ–ã€å…¨å±ã€å…³é—­æŒ‰é’®ï¼‰ä¼šè¢«éšè—\n*   2.æ— æ³•æ‹–æ‹½ç§»åŠ¨çª—å£\n\nå¯ä»¥é€šè¿‡æŒ‡å®š`titleBarStyle`é€‰é¡¹æ¥å†å°†å·¥å…·æ æŒ‰é’®æ˜¾ç¤ºå‡ºæ¥ï¼Œå°†å…¶è®¾ç½®ä¸º`hidden`è¡¨ç¤ºè¿”å›ä¸€ä¸ªéšè—æ ‡é¢˜æ çš„å…¨å°ºå¯¸å†…å®¹çª—å£ï¼Œåœ¨å·¦ä¸Šè§’ä»ç„¶æœ‰æ ‡å‡†çš„çª—å£æ§åˆ¶æŒ‰é’®ã€‚\n\n```\n    new BrowserWindow({\n    width: 200,\n    height: 200,\n    titleBarStyle: 'hidden',\n    frame: false\n    });\n```\n\n### 5.3 çª—å£æ‹–æ‹½\n\né»˜è®¤æƒ…å†µä¸‹, æ— è¾¹æ¡†çª—å£æ˜¯ä¸å¯æ‹–æ‹½çš„ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ç•Œé¢ä¸­é€šè¿‡`CSS`å±æ€§`-webkit-app-region: drag`æ‰‹åŠ¨åˆ¶å®šæ‹–æ‹½åŒºåŸŸã€‚\n\nåœ¨æ— æ¡†çª—å£ä¸­, æ‹–åŠ¨è¡Œä¸ºå¯èƒ½ä¸é€‰æ‹©æ–‡æœ¬å†²çªï¼Œå¯ä»¥é€šè¿‡è®¾å®š`-webkit-user-select: none;`ç¦ç”¨æ–‡æœ¬é€‰æ‹©ï¼š\n\n```\n    .header {\n    -webkit-user-select: none;\n    -webkit-app-region: drag;\n}\n```\n\n> ç›¸åçš„ï¼Œåœ¨å¯æ‹–æ‹½åŒºåŸŸå†…éƒ¨è®¾ç½® `-webkit-app-region: no-drag`åˆ™å¯ä»¥æŒ‡å®šç‰¹å®šä¸å¯æ‹–æ‹½åŒºåŸŸã€‚\n\n### 5.4 é€æ˜çª—å£\n\né€šè¿‡å°†`transparent`é€‰é¡¹è®¾ç½®ä¸º`true`, è¿˜å¯ä»¥ä½¿æ— æ¡†çª—å£é€æ˜:\n\n```\n    new BrowserWindow({\n    transparent: true,\n    frame: false\n    });\n```\n\n### 5.5 Webview\n\nä½¿ç”¨ `webview` æ ‡ç­¾åœ¨`Electron` åº”ç”¨ä¸­åµŒå…¥ \"å¤–æ¥\" å†…å®¹ã€‚å¤–æ¥å†…å®¹åŒ…å«åœ¨ `webview` å®¹å™¨ä¸­ã€‚ åº”ç”¨ä¸­çš„åµŒå…¥é¡µé¢å¯ä»¥æ§åˆ¶å¤–æ¥å†…å®¹çš„å¸ƒå±€å’Œé‡ç»˜ã€‚\n\nä¸ `iframe` ä¸åŒ, `webview` åœ¨ä¸åº”ç”¨ç¨‹åºä¸åŒçš„è¿›ç¨‹ä¸­è¿è¡Œã€‚å®ƒä¸æ‚¨çš„ç½‘é¡µæ²¡æœ‰ç›¸åŒçš„æƒé™, åº”ç”¨ç¨‹åºå’ŒåµŒå…¥å†…å®¹ä¹‹é—´çš„æ‰€æœ‰äº¤äº’éƒ½å°†æ˜¯å¼‚æ­¥çš„ã€‚\n\nå…­ã€å¯¹è¯æ¡†\n-----\n\n`dialog` æ¨¡å—æä¾›äº†`api`æ¥å±•ç¤ºåŸç”Ÿçš„ç³»ç»Ÿå¯¹è¯æ¡†ï¼Œä¾‹å¦‚æ‰“å¼€æ–‡ä»¶æ¡†ï¼Œ`alert`æ¡†ï¼Œæ‰€ä»¥`web`åº”ç”¨å¯ä»¥ç»™ç”¨æˆ·å¸¦æ¥è·Ÿç³»ç»Ÿåº”ç”¨ç›¸åŒçš„ä½“éªŒã€‚\n\n> æ³¨æ„ï¼šdialogæ˜¯ä¸»è¿›ç¨‹æ¨¡å—ï¼Œæƒ³è¦åœ¨æ¸²æŸ“è¿›ç¨‹è°ƒç”¨å¯ä»¥ä½¿ç”¨remote\n\n![](/images/jueJin/16b3d1cd641a098.png)\n\n### 6.1 é”™è¯¯æç¤º\n\n`dialog.showErrorBox`ç”¨äºæ˜¾ç¤ºä¸€ä¸ªæ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯çš„æ¨¡æ€å¯¹è¯æ¡†ã€‚\n\n```\nremote.dialog.showErrorBox('é”™è¯¯', 'è¿™æ˜¯ä¸€ä¸ªé”™è¯¯å¼¹æ¡†ï¼')\n```\n\n### 6.2 å¯¹è¯æ¡†\n\n`dialog.showErrorBox`ç”¨äºè°ƒç”¨ç³»ç»Ÿå¯¹è¯æ¡†ï¼Œå¯ä»¥ä¸ºæŒ‡å®šå‡ ç§ä¸åŒçš„ç±»å‹ï¼š \"`none`\", \"`info`\", \"`error`\", \"`question`\" æˆ–è€… \"`warning`\"ã€‚\n\n> åœ¨ Windows ä¸Š, \"question\" ä¸\"info\"æ˜¾ç¤ºç›¸åŒçš„å›¾æ ‡, é™¤éä½ ä½¿ç”¨äº† \"icon\" é€‰é¡¹è®¾ç½®å›¾æ ‡ã€‚ åœ¨ macOS ä¸Š, \"warning\" å’Œ \"error\" æ˜¾ç¤ºç›¸åŒçš„è­¦å‘Šå›¾æ ‡\n\n```\n    remote.dialog.showMessageBox({\n    type: 'info',\n    title: 'æç¤ºä¿¡æ¯',\n    message: 'è¿™æ˜¯ä¸€ä¸ªå¯¹è¯å¼¹æ¡†ï¼',\nbuttons: ['ç¡®å®š', 'å–æ¶ˆ']\n    }, (index) => {\n    this.setState({ dialogMessage: `ã€ä½ ç‚¹å‡»äº†${index ? 'å–æ¶ˆ' : 'ç¡®å®š'}ï¼ï¼ã€‘` })\n    })\n```\n\n### 6.3 æ–‡ä»¶æ¡†\n\n`dialog.showOpenDialog`ç”¨äºæ‰“å¼€æˆ–é€‰æ‹©ç³»ç»Ÿç›®å½•ã€‚\n\n```\n    remote.dialog.showOpenDialog({\nproperties: ['openDirectory', 'openFile']\n    }, (data) => {\n    this.setState({ filePath: `ã€é€‰æ‹©è·¯å¾„ï¼š${data[0]}ã€‘ ` })\n    })\n```\n\n### 6.4 ä¿¡æ¯æ¡†\n\nè¿™é‡Œæ¨èç›´æ¥ä½¿ç”¨`HTML5 API`ï¼Œå®ƒåªèƒ½åœ¨æ¸²æŸ“å™¨è¿›ç¨‹ä¸­ä½¿ç”¨ã€‚\n\n```\n    let options = {\n    title: 'ä¿¡æ¯æ¡†æ ‡é¢˜',\n    body: 'æˆ‘æ˜¯ä¸€æ¡ä¿¡æ¯ï½ï½ï½',\n}\nlet myNotification = new window.Notification(options.title, options)\n    myNotification.onclick = () => {\n    this.setState({ message: 'ã€ä½ ç‚¹å‡»äº†ä¿¡æ¯æ¡†ï¼ï¼ã€‘' })\n}\n```\n\nä¸ƒã€ç³»ç»Ÿ\n----\n\n### 7.1 è·å–ç³»ç»Ÿä¿¡æ¯\n\n![](/images/jueJin/16b3d1cebfd523b.png)\n\né€šè¿‡`remote`è·å–åˆ°ä¸»è¿›ç¨‹çš„`process`å¯¹è±¡ï¼Œå¯ä»¥è·å–åˆ°å½“å‰åº”ç”¨çš„å„ä¸ªç‰ˆæœ¬ä¿¡æ¯ï¼š\n\n*   `process.versions.electron`ï¼š`electron`ç‰ˆæœ¬ä¿¡æ¯\n*   `process.versions.chrome`ï¼š`chrome`ç‰ˆæœ¬ä¿¡æ¯\n*   `process.versions.node`ï¼š`node`ç‰ˆæœ¬ä¿¡æ¯\n*   `process.versions.v8`ï¼š`v8`ç‰ˆæœ¬ä¿¡æ¯\n\nè·å–å½“å‰åº”ç”¨æ ¹ç›®å½•ï¼š\n\n```\nremote.app.getAppPath()\n```\n\nä½¿ç”¨`node`çš„`os`æ¨¡å—è·å–å½“å‰ç³»ç»Ÿæ ¹ç›®å½•ï¼š\n\n```\nos.homedir();\n```\n\n### 7.2 å¤åˆ¶ç²˜è´´\n\n![](/images/jueJin/16b3d1d00a0313f.png)\n\n`Electron`æä¾›çš„`clipboard`åœ¨æ¸²æŸ“è¿›ç¨‹å’Œä¸»è¿›ç¨‹éƒ½å¯ä½¿ç”¨ï¼Œç”¨äºåœ¨ç³»ç»Ÿå‰ªè´´æ¿ä¸Šæ‰§è¡Œå¤åˆ¶å’Œç²˜è´´æ“ä½œã€‚\n\nä»¥çº¯æ–‡æœ¬çš„å½¢å¼å†™å…¥å‰ªè´´æ¿ï¼š\n\n```\nclipboard.writeText(text[, type])\n```\n\nä»¥çº¯æ–‡æœ¬çš„å½¢å¼è·å–å‰ªè´´æ¿çš„å†…å®¹ï¼š\n\n```\nclipboard.readText([type])\n```\n\n### 7.3 æˆªå›¾\n\n`desktopCapturer`ç”¨äºä»æ¡Œé¢æ•è·éŸ³é¢‘å’Œè§†é¢‘çš„åª’ä½“æºçš„ä¿¡æ¯ã€‚å®ƒåªèƒ½åœ¨æ¸²æŸ“è¿›ç¨‹ä¸­è¢«è°ƒç”¨ã€‚\n\n![](/images/jueJin/16b3d1d058a5bec.png)\n\nä¸‹é¢çš„ä»£ç æ˜¯ä¸€ä¸ªè·å–å±å¹•æˆªå›¾å¹¶ä¿å­˜çš„å®ä¾‹ï¼š\n\n```\n    getImg = () => {\n    this.setState({ imgMsg: 'æ­£åœ¨æˆªå–å±å¹•...' })\n    const thumbSize = this.determineScreenShotSize()\nlet options = { types: ['screen'], thumbnailSize: thumbSize }\n    desktopCapturer.getSources(options, (error, sources) => {\n    if (error) return console.log(error)\n        sources.forEach((source) => {\n            if (source.name === 'Entire screen' || source.name === 'Screen 1') {\n            const screenshotPath = path.join(os.tmpdir(), 'screenshot.png')\n                fs.writeFile(screenshotPath, source.thumbnail.toPNG(), (error) => {\n                if (error) return console.log(error)\n                shell.openExternal(`file://${screenshotPath}`)\n                this.setState({ imgMsg: `æˆªå›¾ä¿å­˜åˆ°: ${screenshotPath}` })\n                })\n            }\n            })\n            })\n        }\n        \n            determineScreenShotSize = () => {\n            const screenSize = screen.getPrimaryDisplay().workAreaSize\n            const maxDimension = Math.max(screenSize.width, screenSize.height)\n                return {\n                width: maxDimension * window.devicePixelRatio,\n                height: maxDimension * window.devicePixelRatio\n            }\n        }\n        \n```\n\nå…«ã€èœå•\n----\n\nåº”ç”¨ç¨‹åºçš„èœå•å¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«æ·çš„åˆ°è¾¾æŸä¸€åŠŸèƒ½ï¼Œè€Œä¸å€ŸåŠ©å®¢æˆ·ç«¯çš„ç•Œé¢èµ„æºï¼Œä¸€èˆ¬èœå•åˆ†ä¸ºä¸¤ç§ï¼š\n\n*   åº”ç”¨ç¨‹åºèœå•ï¼šä½äºåº”ç”¨ç¨‹åºé¡¶éƒ¨ï¼Œåœ¨å…¨å±€èŒƒå›´å†…éƒ½èƒ½ä½¿ç”¨\n*   ä¸Šä¸‹æ–‡èœå•ï¼šå¯è‡ªå®šä¹‰ä»»æ„é¡µé¢æ˜¾ç¤ºï¼Œè‡ªå®šä¹‰è°ƒç”¨ï¼Œå¦‚å³é”®èœå•\n\n`Electron`ä¸ºæˆ‘ä»¬æä¾›äº†`Menu`æ¨¡å—ç”¨äºåˆ›å»ºæœ¬æœºåº”ç”¨ç¨‹åºèœå•å’Œä¸Šä¸‹æ–‡èœå•ï¼Œå®ƒæ˜¯ä¸€ä¸ªä¸»è¿›ç¨‹æ¨¡å—ã€‚\n\nä½ å¯ä»¥é€šè¿‡`Menu`çš„é™æ€æ–¹æ³•`buildFromTemplate(template)`ï¼Œä½¿ç”¨è‡ªå®šä¹‰èœå•æ¨¡ç‰ˆæ¥æ„é€ ä¸€ä¸ªèœå•å¯¹è±¡ã€‚\n\n`template`æ˜¯ä¸€ä¸ª`MenuItem`çš„æ•°ç»„ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹`MenuItem`çš„å‡ ä¸ªé‡è¦å‚æ•°ï¼š\n\n*   `label`ï¼šèœå•æ˜¾ç¤ºçš„æ–‡å­—\n*   `click`ï¼šç‚¹å‡»èœå•åçš„äº‹ä»¶å¤„ç†å‡½æ•°\n*   `role`ï¼šç³»ç»Ÿé¢„å®šä¹‰çš„èœå•ï¼Œä¾‹å¦‚`copy`(å¤åˆ¶)ã€`paste`(ç²˜è´´)ã€`minimize`(æœ€å°åŒ–)...\n*   `enabled`ï¼šæŒ‡ç¤ºæ˜¯å¦å¯ç”¨è¯¥é¡¹ç›®ï¼Œæ­¤å±æ€§å¯ä»¥åŠ¨æ€æ›´æ”¹\n*   `submenu`ï¼šå­èœå•ï¼Œä¹Ÿæ˜¯ä¸€ä¸ª`MenuItem`çš„æ•°ç»„\n\n> æ¨èï¼šæœ€å¥½æŒ‡å®šroleä¸æ ‡å‡†è§’è‰²ç›¸åŒ¹é…çš„ä»»ä½•èœå•é¡¹ï¼Œè€Œä¸æ˜¯å°è¯•æ‰‹åŠ¨å®ç°clickå‡½æ•°ä¸­çš„è¡Œä¸ºã€‚å†…ç½®roleè¡Œä¸ºå°†æä¾›æœ€ä½³çš„æœ¬åœ°ä½“éªŒã€‚\n\nä¸‹é¢çš„å®ä¾‹æ˜¯ä¸€ä¸ªç®€å•çš„é¢èœå•`template`ã€‚\n\n```\n    const template = [\n        {\n        label: 'æ–‡ä»¶',\n            submenu: [\n                {\n                label: 'æ–°å»ºæ–‡ä»¶',\n                    click: function () {\n                        dialog.showMessageBox({\n                        type: 'info',\n                        message: 'å˜¿!',\n                        detail: 'ä½ ç‚¹å‡»äº†æ–°å»ºæ–‡ä»¶ï¼',\n                        })\n                    }\n                }\n            ]\n            },\n                {\n                label: 'ç¼–è¾‘',\n                    submenu: [{\n                    label: 'å‰ªåˆ‡',\n                    role: 'cut'\n                        }, {\n                        label: 'å¤åˆ¶',\n                        role: 'copy'\n                            }, {\n                            label: 'ç²˜è´´',\n                            role: 'paste'\n                        }]\n                        },\n                            {\n                            label: 'æœ€å°åŒ–',\n                            role: 'minimize'\n                        }\n                    ]\n```\n\n### 8.1 åº”ç”¨ç¨‹åºèœå•\n\nä½¿ç”¨`Menu`çš„é™æ€æ–¹æ³•`setApplicationMenu`ï¼Œå¯åˆ›å»ºä¸€ä¸ªåº”ç”¨ç¨‹åºèœå•ï¼Œåœ¨ `Windows` å’Œ `Linux` ä¸Šï¼Œ`menu`å°†è¢«è®¾ç½®ä¸ºæ¯ä¸ªçª—å£çš„é¡¶å±‚èœå•ã€‚\n\n> æ³¨æ„ï¼šå¿…é¡»åœ¨æ¨¡å—readyäº‹ä»¶åè°ƒç”¨æ­¤ API appã€‚\n\næˆ‘ä»¬å¯ä»¥æ ¹æ®åº”ç”¨ç¨‹åºä¸åŒçš„çš„ç”Ÿå‘½å‘¨æœŸï¼Œä¸åŒçš„ç³»ç»Ÿå¯¹èœå•åšä¸åŒçš„å¤„ç†ã€‚\n\n![](/images/jueJin/16b3d1d0717763e.png)\n\n```\n    app.on('ready', function () {\n    const menu = Menu.buildFromTemplate(template)\n    Menu.setApplicationMenu(menu)\n    })\n    \n        app.on('browser-window-created', function () {\n        let reopenMenuItem = findReopenMenuItem()\n        if (reopenMenuItem) reopenMenuItem.enabled = false\n        })\n        \n            app.on('window-all-closed', function () {\n            let reopenMenuItem = findReopenMenuItem()\n            if (reopenMenuItem) reopenMenuItem.enabled = true\n            })\n            \n                if (process.platform === 'win32') {\n                const helpMenu = template[template.length - 1].submenu\n                addUpdateMenuItems(helpMenu, 0)\n            }\n```\n\n### 8.2 ä¸Šä¸‹æ–‡èœå•\n\nä½¿ç”¨`Menu`çš„å®ä¾‹æ–¹æ³•`menu.popup`å¯è‡ªå®šä¹‰å¼¹å‡ºä¸Šä¸‹æ–‡èœå•ã€‚\n\n![](/images/jueJin/16b3d1eeb6466cb.png)\n\n```\nlet m = Menu.buildFromTemplate(template)\n    document.getElementById('menuDemoContainer').addEventListener('contextmenu', (e) => {\n    e.preventDefault()\n    m.popup({ window: remote.getCurrentWindow() })\n    })\n```\n\n### 8.3 å¿«æ·é”®\n\nåœ¨èœå•é€‰é¡¹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šä¸€ä¸ª`accelerator`å±æ€§æ¥æŒ‡å®šæ“ä½œçš„å¿«æ·é”®ï¼š\n\n```\n    {\n    label: 'æœ€å°åŒ–',\n    accelerator: 'CmdOrCtrl+M',\n    role: 'minimize'\n}\n```\n\nå¦å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨`globalShortcut`æ¥æ³¨å†Œå…¨å±€å¿«æ·é”®ã€‚\n\n```\n    globalShortcut.register('CommandOrControl+N', () => {\n        dialog.showMessageBox({\n        type: 'info',\n        message: 'å˜¿!',\n        detail: 'ä½ è§¦å‘äº†æ‰‹åŠ¨æ³¨å†Œçš„å¿«æ·é”®.',\n        })\n        })\n```\n\n> CommandOrControlä»£è¡¨åœ¨macOSä¸Šä¸ºCommandé”®ï¼Œä»¥åŠåœ¨Linuxå’ŒWindowsä¸Šä¸ºControlé”®ã€‚\n\nä¹ã€æ‰“å°\n----\n\nå¾ˆå¤šæƒ…å†µä¸‹ç¨‹åºä¸­ä½¿ç”¨çš„æ‰“å°éƒ½æ˜¯ç”¨æˆ·æ— æ„ŸçŸ¥çš„ã€‚å¹¶ä¸”æƒ³è¦çµæ´»çš„æ§åˆ¶æ‰“å°å†…å®¹ï¼Œå¾€å¾€éœ€è¦å€ŸåŠ©æ‰“å°æœºç»™æˆ‘ä»¬æä¾›çš„`api`å†è¿›è¡Œå¼€å‘ï¼Œè¿™ç§å¼€å‘æ–¹å¼éå¸¸ç¹çï¼Œå¹¶ä¸”å¼€å‘éš¾åº¦è¾ƒå¤§ã€‚ç¬¬ä¸€æ¬¡åœ¨ä¸šåŠ¡ä¸­ç”¨åˆ°`Electron`å…¶å®å°±æ˜¯ç”¨åˆ°å®ƒçš„æ‰“å°åŠŸèƒ½ï¼Œè¿™é‡Œå°±å¤šä»‹ç»ä¸€äº›ã€‚\n\n`Electron`æä¾›çš„æ‰“å°apiå¯ä»¥éå¸¸çµæ´»çš„æ§åˆ¶æ‰“å°è®¾ç½®çš„æ˜¾ç¤ºï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡htmlæ¥ä¹¦å†™æ‰“å°å†…å®¹ã€‚`Electron`æä¾›äº†ä¸¤ç§æ–¹å¼è¿›è¡Œæ‰“å°ï¼Œä¸€ç§æ˜¯ç›´æ¥è°ƒç”¨æ‰“å°æœºæ‰“å°ï¼Œä¸€ç§æ˜¯æ‰“å°åˆ°`pdf`ã€‚\n\nå¹¶ä¸”æœ‰ä¸¤ç§å¯¹è±¡å¯ä»¥è°ƒç”¨æ‰“å°ï¼š\n\n*   é€šè¿‡`window`çš„`webcontent`å¯¹è±¡ï¼Œä½¿ç”¨æ­¤ç§æ–¹å¼éœ€è¦å•ç‹¬å¼€å‡ºä¸€ä¸ªæ‰“å°çš„çª—å£ï¼Œå¯ä»¥å°†è¯¥çª—å£éšè—ï¼Œä½†æ˜¯é€šä¿¡è°ƒç”¨ç›¸å¯¹å¤æ‚ã€‚\n*   ä½¿ç”¨é¡µé¢çš„`webview`å…ƒç´ è°ƒç”¨æ‰“å°ï¼Œå¯ä»¥å°†`webview`éšè—åœ¨è°ƒç”¨çš„é¡µé¢ä¸­ï¼Œé€šä¿¡æ–¹å¼æ¯”è¾ƒç®€å•ã€‚\n\nä¸Šé¢ä¸¤ç§æ–¹å¼åŒæ—¶æ‹¥æœ‰`print`å’Œ`printToPdf`æ–¹æ³•ã€‚\n\n![](/images/jueJin/16b3d1d12f9121d.png)\n\n### 9.1 è°ƒç”¨ç³»ç»Ÿæ‰“å°\n\n```\ncontents.print([options], [callback])ï¼›\n```\n\næ‰“å°é…ç½®(options)ä¸­åªæœ‰ç®€å•çš„ä¸‰ä¸ªé…ç½®ï¼š\n\n*   `silent`ï¼šæ‰“å°æ—¶æ˜¯å¦ä¸å±•ç¤ºæ‰“å°é…ç½®ï¼ˆæ˜¯å¦é™é»˜æ‰“å°ï¼‰\n*   `printBackground`ï¼šæ˜¯å¦æ‰“å°èƒŒæ™¯\n*   `deviceName`ï¼šæ‰“å°æœºè®¾å¤‡åç§°\n\né¦–å…ˆè¦å°†æˆ‘ä»¬ä½¿ç”¨çš„æ‰“å°æœºåç§°é…ç½®å¥½ï¼Œå¹¶ä¸”è¦åœ¨è°ƒç”¨æ‰“å°å‰é¦–å…ˆè¦åˆ¤æ–­æ‰“å°æœºæ˜¯å¦å¯ç”¨ã€‚\n\nä½¿ç”¨`webContents`çš„`getPrinters`æ–¹æ³•å¯è·å–å½“å‰è®¾å¤‡å·²ç»é…ç½®çš„æ‰“å°æœºåˆ—è¡¨ï¼Œæ³¨æ„é…ç½®è¿‡ä¸æ˜¯å¯ç”¨ï¼Œåªæ˜¯åœ¨æ­¤è®¾å¤‡ä¸Šå®‰è£…è¿‡é©±åŠ¨ã€‚\n\né€šè¿‡`getPrinters`è·å–åˆ°çš„æ‰“å°æœºå¯¹è±¡ï¼š[electronjs.org/docs/api/stâ€¦](https://link.juejin.cn?target=https%3A%2F%2Felectronjs.org%2Fdocs%2Fapi%2Fstructures%2Fprinter-info \"https://electronjs.org/docs/api/structures/printer-info\")\n\næˆ‘ä»¬è¿™é‡Œåªç®¡å…³å¿ƒä¸¤ä¸ªï¼Œ`name`å’Œ`status`ï¼Œ`status`ä¸º`0`æ—¶è¡¨ç¤ºæ‰“å°æœºå¯ç”¨ã€‚\n\n`print`çš„ç¬¬äºŒä¸ªå‚æ•°`callback`æ˜¯ç”¨äºåˆ¤æ–­æ‰“å°ä»»åŠ¡æ˜¯å¦å‘å‡ºçš„å›è°ƒï¼Œè€Œä¸æ˜¯æ‰“å°ä»»åŠ¡å®Œæˆåçš„å›è°ƒã€‚æ‰€ä»¥ä¸€èˆ¬æ‰“å°ä»»åŠ¡å‘å‡ºï¼Œå›è°ƒå‡½æ•°å³ä¼šè°ƒç”¨å¹¶è¿”å›å‚æ•°`true`ã€‚è¿™ä¸ªå›è°ƒå¹¶ä¸èƒ½åˆ¤æ–­æ‰“å°æ˜¯å¦çœŸçš„æˆåŠŸäº†ã€‚\n\n```\n    if (this.state.curretnPrinter) {\n        mainWindow.webContents.print({\n        silent: silent, printBackground: true, deviceName: this.state.curretnPrinter\n        }, () => { })\n            } else {\n            remote.dialog.showErrorBox('é”™è¯¯', 'è¯·å…ˆé€‰æ‹©ä¸€ä¸ªæ‰“å°æœºï¼')\n        }\n```\n\n### 9.2 æ‰“å°åˆ°PDF\n\n`printToPdf`çš„ç”¨æ³•åŸºæœ¬å’Œ`print`ç›¸åŒï¼Œä½†æ˜¯`print`çš„é…ç½®é¡¹éå¸¸å°‘ï¼Œè€Œ`printToPdf`åˆ™æ‰©å±•äº†å¾ˆå¤šå±æ€§ã€‚è¿™é‡Œç¿»äº†ä¸€ä¸‹æºç å‘ç°è¿˜æœ‰å¾ˆå¤šæ²¡æœ‰è¢«è´´è¿›æ–‡æ¡£çš„ï¼Œå¤§æ¦‚æœ‰ä¸‰åå‡ ä¸ªï¼ŒåŒ…æ‹¬å¯ä»¥å¯¹æ‰“å°çš„marginï¼Œæ‰“å°é¡µçœ‰é¡µè„šç­‰è¿›è¡Œé…ç½®ã€‚\n\n```\ncontents.printToPDF(options, callback)\n```\n\n`callback`å‡½æ•°åœ¨æ‰“å°å¤±è´¥æˆ–æ‰“å°æˆåŠŸåè°ƒç”¨ï¼Œå¯è·å–æ‰“å°å¤±è´¥ä¿¡æ¯æˆ–åŒ…å«`PDF`æ•°æ®çš„ç¼“å†²åŒºã€‚\n\n```\nconst pdfPath = path.join(os.tmpdir(), 'webviewPrint.pdf');\nconst webview = document.getElementById('printWebview');\nconst renderHtml = 'æˆ‘æ˜¯è¢«ä¸´æ—¶æ’å…¥webviewçš„å†…å®¹...';\nwebview.executeJavaScript('document.documentElement.innerHTML =`' + renderHtml + '`;');\n    webview.printToPDF({}, (err, data) => {\n    console.log(err, data);\n        fs.writeFile(pdfPath, data, (error) => {\n        if (error) throw error\n        shell.openExternal(`file://${pdfPath}`)\n        this.setState({ webviewPdfPath: pdfPath })\n        });\n        });\n```\n\n> è¿™ä¸ªä¾‹å­ä¸­çš„æ‰“å°æ˜¯ä½¿ç”¨`webview`å®Œæˆçš„ï¼Œé€šè¿‡è°ƒç”¨`executeJavaScript`æ–¹æ³•å¯åŠ¨æ€å‘`webview`æ’å…¥æ‰“å°å†…å®¹ã€‚\n\n### 9.3 ä¸¤ç§æ‰“å°æ–¹æ¡ˆçš„é€‰æ‹©\n\nä¸Šé¢æåˆ°ï¼Œä½¿ç”¨`webview`å’Œ`webcontent`éƒ½å¯ä»¥è°ƒç”¨æ‰“å°åŠŸèƒ½ï¼Œä½¿ç”¨`webcontent`æ‰“å°ï¼Œé¦–å…ˆè¦æœ‰ä¸€ä¸ªæ‰“å°çª—å£ï¼Œè¿™ä¸ªçª—å£ä¸èƒ½éšæ—¶æ‰“å°éšæ—¶åˆ›å»ºï¼Œæ¯”è¾ƒè€—è´¹æ€§èƒ½ã€‚å¯ä»¥å°†å®ƒåœ¨ç¨‹åºè¿è¡Œæ—¶å¯åŠ¨å¥½ï¼Œå¹¶åšå¥½äº‹ä»¶ç›‘å¬ã€‚\n\næ­¤è¿‡ç¨‹éœ€å’Œè°ƒç”¨æ‰“å°çš„è¿›è¡Œåšå¥½é€šä¿¡ï¼Œå¤§è‡´è¿‡ç¨‹å¦‚ä¸‹ï¼š\n\n![](/images/jueJin/16b3d1de2493ff0.png)\n\nå¯è§é€šä¿¡éå¸¸ç¹çï¼Œä½¿ç”¨`webview`è¿›è¡Œæ‰“å°å¯å®ç°åŒæ ·çš„æ•ˆæœä½†æ˜¯é€šä¿¡æ–¹å¼ä¼šå˜å¾—ç®€å•ï¼Œå› ä¸ºæ¸²æŸ“è¿›ç¨‹å’Œ`webview`é€šä¿¡ä¸éœ€è¦ç»è¿‡ä¸»è¿›ç¨‹ï¼Œé€šè¿‡å¦‚ä¸‹æ–¹å¼å³å¯ï¼š\n\n```\nconst webview = document.querySelector('webview')\n    webview.addEventListener('ipc-message', (event) => {\n    console.log(event.channel)\n    })\n    webview.send('ping')ï¼›\n    \n    const {ipcRenderer} = require('electron')\n        ipcRenderer.on('ping', () => {\n        ipcRenderer.sendToHost('pong')\n        })\n```\n\nä¹‹å‰ä¸“é—¨ä¸º`ELectron`æ‰“å°å†™è¿‡ä¸€ä¸ª`DEMO`ï¼š[electron-print-demo](https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FConardLi%2Felectron-print-demo \"https://github.com/ConardLi/electron-print-demo\")æœ‰å…´è¶£å¯ä»¥`clone`ä¸‹æ¥çœ‹ä¸€ä¸‹ã€‚\n\n### 9.4 æ‰“å°åŠŸèƒ½å°è£…\n\nä¸‹é¢æ˜¯å‡ ä¸ªé’ˆå¯¹å¸¸ç”¨æ‰“å°åŠŸèƒ½çš„å·¥å…·å‡½æ•°å°è£…ã€‚\n\n```\n/**\n* è·å–ç³»ç»Ÿæ‰“å°æœºåˆ—è¡¨\n*/\n    export function getPrinters() {\n    let printers = [];\n        try {\n        const contents = remote.getCurrentWindow().webContents;\n        printers = contents.getPrinters();\n            } catch (e) {\n            console.error('getPrintersError', e);\n        }\n        return printers;\n    }\n    /**\n    * è·å–ç³»ç»Ÿé»˜è®¤æ‰“å°æœº\n    */\n        export function getDefaultPrinter() {\n        return getPrinters().find(element => element.isDefault);\n    }\n    /**\n    * æ£€æµ‹æ˜¯å¦å®‰è£…äº†æŸä¸ªæ‰“å°é©±åŠ¨\n    */\n        export function checkDriver(driverMame) {\n        return getPrinters().find(element => (element.options[\"printer-make-and-model\"] || '').includes(driverMame));\n    }\n    /**\n    * æ ¹æ®æ‰“å°æœºåç§°è·å–æ‰“å°æœºå¯¹è±¡\n    */\n        export function getPrinterByName(name) {\n        return getPrinters().find(element => element.name === name);\n    }\n    \n```\n\nåã€ç¨‹åºä¿æŠ¤\n------\n\n![](/images/jueJin/16b3d1f9e124970.png)\n\n### 10.1 å´©æºƒ\n\nå´©æºƒç›‘æ§æ˜¯æ¯ä¸ªå®¢æˆ·ç«¯ç¨‹åºå¿…å¤‡çš„ä¿æŠ¤åŠŸèƒ½ï¼Œå½“ç¨‹åºå´©æºƒæ—¶æˆ‘ä»¬ä¸€èˆ¬æœŸæœ›åšåˆ°ä¸¤ä»¶äº‹ï¼š\n\n*   1.ä¸Šä¼ å´©æºƒæ—¥å¿—ï¼ŒåŠæ—¶æŠ¥è­¦\n*   2.ç›‘æ§ç¨‹åºå´©æºƒï¼Œæç¤ºç”¨æˆ·é‡å¯ç¨‹åº\n\n`electron`ä¸ºæˆ‘ä»¬æä¾›ç»™äº†`crashReporter`æ¥å¸®åŠ©æˆ‘ä»¬è®°å½•å´©æºƒæ—¥å¿—ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡`crashReporter.start`æ¥åˆ›å»ºä¸€ä¸ªå´©æºƒæŠ¥å‘Šå™¨ï¼š\n\n```\nconst { crashReporter } = require('electron')\n    crashReporter.start({\n    productName: 'YourName',\n    companyName: 'YourCompany',\n    submitURL: 'https://your-domain.com/url-to-submit',\n    uploadToServer: true\n    })\n```\n\nå½“ç¨‹åºå‘ç”Ÿå´©æºƒæ—¶ï¼Œå´©æºƒæŠ¥æ—¥å¿—å°†è¢«å‚¨å­˜åœ¨ä¸´æ—¶æ–‡ä»¶å¤¹ä¸­åä¸º`YourName Crashes`çš„æ–‡ä»¶æ–‡ä»¶å¤¹ä¸­ã€‚`submitURL`ç”¨äºæŒ‡å®šä½ çš„å´©æºƒæ—¥å¿—ä¸Šä¼ æœåŠ¡å™¨ã€‚ åœ¨å¯åŠ¨å´©æºƒæŠ¥å‘Šå™¨ä¹‹å‰ï¼Œæ‚¨å¯ä»¥é€šè¿‡è°ƒç”¨`app.setPath('temp', 'my/custom/temp')`APIæ¥è‡ªå®šä¹‰è¿™äº›ä¸´æ—¶æ–‡ä»¶çš„ä¿å­˜è·¯å¾„ã€‚ä½ è¿˜å¯ä»¥é€šè¿‡`crashReporter.getLastCrashReport()`æ¥è·å–ä¸Šæ¬¡å´©æºƒæŠ¥å‘Šçš„æ—¥æœŸå’Œ`ID`ã€‚\n\næˆ‘ä»¬å¯ä»¥é€šè¿‡`webContents`çš„`crashed`æ¥ç›‘å¬æ¸²æŸ“è¿›ç¨‹çš„å´©æºƒï¼Œå¦å¤–ç»æµ‹è¯•æœ‰äº›ä¸»è¿›ç¨‹çš„å´©æºƒä¹Ÿä¼šè§¦å‘è¯¥äº‹ä»¶ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ ¹æ®ä¸»`window`æ˜¯å¦è¢«é”€æ¯æ¥åˆ¤æ–­è¿›è¡Œä¸åŒçš„é‡å¯é€»è¾‘ï¼Œä¸‹é¢æ˜¯æ•´ä¸ªå´©æºƒç›‘æ§çš„é€»è¾‘ï¼š\n\n```\nimport { BrowserWindow, crashReporter, dialog } from 'electron';\n// å¼€å¯è¿›ç¨‹å´©æºƒè®°å½•\n    crashReporter.start({\n    productName: 'electron-react',\n    companyName: 'ConardLi',\n    submitURL: 'http://xxx.com',  // ä¸Šä¼ å´©æºƒæ—¥å¿—çš„æ¥å£\n    uploadToServer: false\n    });\n        function reloadWindow(mainWin) {\n            if (mainWin.isDestroyed()) {\n            app.relaunch();\n            app.exit(0);\n                } else {\n                // é”€æ¯å…¶ä»–çª—å£\n                    BrowserWindow.getAllWindows().forEach((w) => {\n                    if (w.id !== mainWin.id) w.destroy();\n                    });\n                        const options = {\n                        type: 'info',\n                        title: 'æ¸²æŸ“å™¨è¿›ç¨‹å´©æºƒ',\n                        message: 'è¿™ä¸ªè¿›ç¨‹å·²ç»å´©æºƒ.',\n                    buttons: ['é‡è½½', 'å…³é—­']\n                }\n                    dialog.showMessageBox(options, (index) => {\n                    if (index === 0) mainWin.reload();\n                    else mainWin.close();\n                    })\n                }\n            }\n                export default function () {\n                const mainWindow = BrowserWindow.fromId(global.mainId);\n                    mainWindow.webContents.on('crashed', () => {\n                    const errorMessage = crashReporter.getLastCrashReport();\n                    console.error('ç¨‹åºå´©æºƒäº†ï¼', errorMessage); // å¯å•ç‹¬ä¸Šä¼ æ—¥å¿—\n                    reloadWindow(mainWindow);\n                    });\n                }\n```\n\n### 10.2 æœ€å°åŒ–åˆ°æ‰˜ç›˜\n\næœ‰çš„æ—¶å€™æˆ‘ä»¬å¹¶ä¸æƒ³è®©ç”¨æˆ·é€šè¿‡ç‚¹å…³é—­æŒ‰é’®çš„æ—¶å€™å°±å…³é—­ç¨‹åºï¼Œè€Œæ˜¯æŠŠç¨‹åºæœ€å°åŒ–åˆ°æ‰˜ç›˜ï¼Œåœ¨æ‰˜ç›˜ä¸ŠåšçœŸæ­£çš„é€€å‡ºæ“ä½œã€‚\n\né¦–å…ˆè¦ç›‘å¬çª—å£çš„å…³é—­äº‹ä»¶ï¼Œé˜»æ­¢ç”¨æˆ·å…³é—­æ“ä½œçš„é»˜è®¤è¡Œä¸ºï¼Œå°†çª—å£éšè—ã€‚\n\n```\n    function checkQuit(mainWindow, event) {\n        const options = {\n        type: 'info',\n        title: 'å…³é—­ç¡®è®¤',\n        message: 'ç¡®è®¤è¦æœ€å°åŒ–ç¨‹åºåˆ°æ‰˜ç›˜å—ï¼Ÿ',\n    buttons: ['ç¡®è®¤', 'å…³é—­ç¨‹åº']\n    };\n        dialog.showMessageBox(options, index => {\n            if (index === 0) {\n            event.preventDefault();\n            mainWindow.hide();\n                } else {\n                mainWindow = null;\n                app.exit(0);\n            }\n            });\n        }\n            function handleQuit() {\n            const mainWindow = BrowserWindow.fromId(global.mainId);\n                mainWindow.on('close', event => {\n                event.preventDefault();\n                checkQuit(mainWindow, event);\n                });\n            }\n```\n\nè¿™æ—¶ç¨‹åºå°±å†ä¹Ÿæ‰¾ä¸åˆ°äº†ï¼Œä»»åŠ¡æ‰˜ç›˜ä¸­ä¹Ÿæ²¡æœ‰æˆ‘ä»¬çš„ç¨‹åºï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å…ˆåˆ›å»ºå¥½ä»»åŠ¡æ‰˜ç›˜ï¼Œå¹¶åšå¥½äº‹ä»¶ç›‘å¬ã€‚\n\n> windowså¹³å°ä½¿ç”¨`ico`æ–‡ä»¶å¯ä»¥è¾¾åˆ°æ›´å¥½çš„æ•ˆæœ\n\n```\n    export default function createTray() {\n    const mainWindow = BrowserWindow.fromId(global.mainId);\n    const iconName = process.platform === 'win32' ? 'icon.ico' : 'icon.png'\n    tray = new Tray(path.join(global.__dirname, iconName));\n        const contextMenu = Menu.buildFromTemplate([\n            {\n                label: 'æ˜¾ç¤ºä¸»ç•Œé¢', click: () => {\n                mainWindow.show();\n                mainWindow.setSkipTaskbar(false);\n            }\n            },\n                {\n                    label: 'é€€å‡º', click: () => {\n                    mainWindow.destroy();\n                    app.quit();\n                }\n                },\n                ])\n                tray.setToolTip('electron-react');\n                tray.setContextMenu(contextMenu);\n            }\n```\n\nåä¸€ã€æ‰©å±•èƒ½åŠ›\n-------\n\n![](/images/jueJin/16b3d1d6acbcded.png)\n\nåœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œä½ çš„åº”ç”¨ç¨‹åºè¦å’Œå¤–éƒ¨è®¾å¤‡è¿›è¡Œäº¤äº’ï¼Œä¸€èˆ¬æƒ…å†µä¸‹å‚å•†ä¼šä¸ºä½ æä¾›ç¡¬ä»¶è®¾å¤‡çš„å¼€å‘åŒ…ï¼Œè¿™äº›å¼€å‘åŒ…åŸºæœ¬ä¸Šéƒ½æ˜¯é€šè¿‡`C++` ç¼–å†™ï¼Œåœ¨ä½¿ç”¨`electron`å¼€å‘çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¹¶ä¸å…·å¤‡ç›´æ¥è°ƒç”¨`C++`ä»£ç çš„èƒ½åŠ›ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨`node-ffi`æ¥å®ç°è¿™ä¸€åŠŸèƒ½ã€‚\n\n`node-ffi`æä¾›äº†ä¸€ç»„å¼ºå¤§çš„å·¥å…·ï¼Œç”¨äºåœ¨`Node.js`ç¯å¢ƒä¸­ä½¿ç”¨çº¯`JavaScript`è°ƒç”¨åŠ¨æ€é“¾æ¥åº“æ¥å£ã€‚å®ƒå¯ä»¥ç”¨æ¥ä¸ºåº“æ„å»ºæ¥å£ç»‘å®šï¼Œè€Œä¸éœ€è¦ä½¿ç”¨ä»»ä½•`C++`ä»£ç ã€‚\n\n> æ³¨æ„`node-ffi`å¹¶ä¸èƒ½ç›´æ¥è°ƒç”¨`C++`ä»£ç ï¼Œä½ éœ€è¦å°†`C++`ä»£ç ç¼–è¯‘ä¸ºåŠ¨æ€é“¾æ¥åº“ï¼šåœ¨ `Windows`ä¸‹æ˜¯ `Dll` ï¼Œåœ¨ `Mac OS`ä¸‹æ˜¯ `dylib` `ï¼ŒLinux` æ˜¯ `so` ã€‚\n\n> `node-ffi` åŠ è½½ `Library`æ˜¯æœ‰é™åˆ¶çš„ï¼Œåªèƒ½å¤„ç† `C`é£æ ¼çš„ `Library`ã€‚\n\nä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„å®ä¾‹ï¼š\n\n```\nconst ffi = require('ffi');\nconst ref = require('ref');\nconst SHORT_CODE = ref.refType('short');\n\n\n    const DLL = new ffi.Library('test.dll', {\n    Test_CPP_Method: ['int', ['string',SHORT_CODE]],\n    })\n    \n        testCppMethod(str: String, num: number): void {\n            try {\n            const result: any = DLL.Test_CPP_Method(str, num);\n            return result;\n                } catch (error) {\n                console.log('è°ƒç”¨å¤±è´¥ï½',error);\n            }\n        }\n        \n        this.testCppMethod('ConardLi',123);\n```\n\nä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ç”¨`ffi`åŒ…è£…`C++`æ¥å£ç”Ÿæˆçš„åŠ¨æ€é“¾æ¥åº“`test.dll`ï¼Œå¹¶ä½¿ç”¨`ref`è¿›è¡Œä¸€äº›ç±»å‹æ˜ å°„ã€‚\n\nä½¿ç”¨`JavaScript`è°ƒç”¨è¿™äº›æ˜ å°„æ–¹æ³•æ—¶ï¼Œæ¨èä½¿ç”¨`TypeScript`æ¥çº¦å®šå‚æ•°ç±»å‹ï¼Œå› ä¸ºå¼±ç±»å‹çš„`JavaScript`åœ¨è°ƒç”¨å¼ºç±»å‹è¯­è¨€çš„æ¥å£æ—¶å¯èƒ½ä¼šå¸¦æ¥æ„æƒ³ä¸åˆ°çš„é£é™©ã€‚\n\nå€ŸåŠ©è¿™ä¸€èƒ½åŠ›ï¼Œå‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆä¹Ÿå¯ä»¥åœ¨`IOT`é¢†åŸŸä¸€å±•èº«æ‰‹äº†ğŸ˜ï½\n\nåäºŒã€ç¯å¢ƒé€‰æ‹©\n-------\n\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå¯èƒ½è¿è¡Œåœ¨å¤šå¥—ç¯å¢ƒä¸‹ï¼ˆ`production`ã€`beta`ã€`uat`ã€`moke`ã€`development`...ï¼‰ï¼Œä¸åŒçš„å¼€å‘ç¯å¢ƒå¯èƒ½å¯¹åº”ä¸åŒçš„åç«¯æ¥å£æˆ–è€…å…¶ä»–é…ç½®ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å®¢æˆ·ç«¯ç¨‹åºä¸­å†…ç½®ä¸€ä¸ªç®€å•çš„ç¯å¢ƒé€‰æ‹©åŠŸèƒ½æ¥å¸®åŠ©æˆ‘ä»¬æ›´é«˜æ•ˆçš„å¼€å‘ã€‚\n\n![](/images/jueJin/16b3d1d71f9463b.png)\n\nå…·ä½“ç­–ç•¥å¦‚ä¸‹ï¼š\n\n![](/images/jueJin/16b3d1d745caac2.png)\n\n*   åœ¨å¼€å‘ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬ç›´æ¥è¿›å…¥ç¯å¢ƒé€‰æ‹©é¡µé¢ï¼Œè¯»å–åˆ°é€‰æ‹©çš„ç¯å¢ƒåè¿›è¡Œå“åº”çš„é‡å®šå‘æ“ä½œ\n*   åœ¨èœå•ä¿ç•™ç¯å¢ƒé€‰æ‹©å…¥å£ï¼Œä»¥ä¾¿åœ¨å¼€å‘è¿‡ç¨‹ä¸­åˆ‡æ¢\n\n```\nconst envList = [\"moke\", \"beta\", \"development\", \"production\"];\nexports.envList = envList;\nconst urlBeta = 'https://wwww.xxx-beta.com';\nconst urlDev = 'https://wwww.xxx-dev.com';\nconst urlProp = 'https://wwww.xxx-prop.com';\nconst urlMoke = 'https://wwww.xxx-moke.com';\nconst path = require('path');\nconst pkg = require(path.resolve(global.__dirname, 'package.json'));\nconst build = pkg['build-config'];\n    exports.handleEnv = {\n    build,\n    currentEnv: 'moke',\n        setEnv: function (env) {\n        this.currentEnv = env\n        },\n            getUrl: function () {\n            console.log('env:', build.env);\n                if (build.env === 'production' || this.currentEnv === 'production') {\n                return urlProp;\n                    } else if (this.currentEnv === 'moke') {\n                    return urlMoke;\n                        } else if (this.currentEnv === 'development') {\n                        return urlDev;\n                            } else if (this.currentEnv === \"beta\") {\n                            return urlBeta;\n                        }\n                        },\n                            isDebugger: function () {\n                            return build.env === 'development'\n                        }\n                    }\n```\n\nåä¸‰ã€æ‰“åŒ…\n-----\n\næœ€åä¹Ÿæ˜¯æœ€é‡è¦çš„ä¸€æ­¥ï¼Œå°†å†™å¥½çš„ä»£ç æ‰“åŒ…æˆå¯è¿è¡Œçš„`.app`æˆ–`.exe`å¯æ‰§è¡Œæ–‡ä»¶ã€‚\n\nè¿™é‡Œæˆ‘æŠŠæ‰“åŒ…æ°›å›´ä¸¤éƒ¨åˆ†æ¥åšï¼Œæ¸²æŸ“è¿›ç¨‹æ‰“åŒ…å’Œä¸»è¿›ç¨‹æ‰“åŒ…ã€‚\n\n### 13.1 æ¸²æŸ“è¿›ç¨‹æ‰“åŒ…å’Œå‡çº§\n\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„å¤§éƒ¨åˆ†ä¸šåŠ¡é€»è¾‘ä»£ç æ˜¯åœ¨æ¸²æŸ“è¿›ç¨‹å®Œæˆçš„ï¼Œåœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹æˆ‘ä»¬ä»…ä»…éœ€è¦å¯¹æ¸²æŸ“è¿›ç¨‹è¿›è¡Œæ›´æ–°å’Œå‡çº§è€Œä¸éœ€è¦æ”¹åŠ¨ä¸»è¿›ç¨‹ä»£ç ï¼Œæˆ‘ä»¬æ¸²æŸ“è¿›ç¨‹çš„æ‰“åŒ…å®é™…ä¸Šå’Œä¸€èˆ¬çš„`web`é¡¹ç›®æ‰“åŒ…æ²¡æœ‰å¤ªå¤§å·®åˆ«ï¼Œä½¿ç”¨`webpack`æ‰“åŒ…å³å¯ã€‚\n\nè¿™é‡Œæˆ‘è¯´è¯´æ¸²æŸ“è¿›ç¨‹å•ç‹¬æ‰“åŒ…çš„å¥½å¤„ï¼š\n\næ‰“åŒ…å®Œæˆçš„`html`å’Œ`js`æ–‡ä»¶ï¼Œæˆ‘ä»¬ä¸€èˆ¬è¦ä¸Šä¼ åˆ°æˆ‘ä»¬çš„å‰ç«¯é™æ€èµ„æºæœåŠ¡å™¨ä¸‹ï¼Œç„¶åå‘ŠçŸ¥æœåŠ¡ç«¯æˆ‘ä»¬çš„æ¸²æŸ“è¿›ç¨‹æœ‰ä»£ç æ›´æ–°ï¼Œè¿™é‡Œå¯ä»¥è¯´æˆæ¸²æŸ“è¿›ç¨‹å•ç‹¬çš„å‡çº§ã€‚\n\næ³¨æ„ï¼Œå’Œå£³çš„å‡çº§ä¸åŒï¼Œæ¸²æŸ“è¿›ç¨‹çš„å‡çº§ä»…ä»…æ˜¯é™æ€èµ„æºæœåŠ¡å™¨ä¸Š`html`å’Œ`js`æ–‡ä»¶çš„æ›´æ–°ï¼Œè€Œä¸éœ€è¦é‡æ–°ä¸‹è½½æ›´æ–°å®¢æˆ·ç«¯ï¼Œè¿™æ ·æˆ‘ä»¬æ¯æ¬¡å¯åŠ¨ç¨‹åºçš„æ—¶å€™æ£€æµ‹åˆ°ç¦»çº¿åŒ…æœ‰æ›´æ–°ï¼Œå³å¯ç›´æ¥åˆ·æ–°è¯»å–æœ€æ–°ç‰ˆæœ¬çš„é™æ€èµ„æºæ–‡ä»¶ï¼Œå³ä½¿åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­è¦å¼ºåˆ¶æ›´æ–°ï¼Œæˆ‘ä»¬çš„ç¨‹åºåªéœ€è¦å¼ºåˆ¶åˆ·æ–°é¡µé¢è¯»å–æœ€æ–°çš„é™æ€èµ„æºå³å¯ï¼Œè¿™æ ·çš„å‡çº§å¯¹ç”¨æˆ·æ˜¯éå¸¸å‹å¥½çš„ã€‚\n\nè¿™é‡Œæ³¨æ„ï¼Œä¸€æ—¦æˆ‘ä»¬è¿™æ ·é…ç½®ï¼Œå°±æ„å‘³ç€æ¸²æŸ“è¿›ç¨‹å’Œä¸»è¿›ç¨‹æ‰“åŒ…å‡çº§çš„å®Œå…¨åˆ†ç¦»ï¼Œæˆ‘ä»¬åœ¨å¯åŠ¨ä¸»çª—å£æ—¶è¯»å–çš„æ–‡ä»¶å°±ä¸åº”è¯¥å†æ˜¯æœ¬åœ°æ–‡ä»¶ï¼Œè€Œæ˜¯æ‰“åŒ…å®Œæˆåæ”¾åœ¨é™æ€èµ„æºæœåŠ¡å™¨çš„æ–‡ä»¶ã€‚\n\nä¸ºäº†æ–¹ä¾¿å¼€å‘ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥åŒºåˆ†æœ¬åœ°å’Œçº¿ä¸ŠåŠ è½½ä¸åŒçš„æ–‡ä»¶ï¼š\n\n```\n    function getVersion (mac,current){\n    // æ ¹æ®è®¾å¤‡macå’Œå½“å‰ç‰ˆæœ¬è·å–æœ€æ–°ç‰ˆæœ¬\n}\n    export default function () {\n        if (build.env === 'production') {\n        const version = getVersion (mac,current);\n        return 'https://www.xxxserver.html/electron-react/index_'+version+'.html';\n    }\n        return url.format({\n        protocol: 'file:',\n        pathname: path.join(__dirname, 'env/environment.html'),\n        slashes: true,\n    query: { debugger: build.env === \"development\" }\n    });\n}\n```\n\nå…·ä½“çš„`webpack`é…ç½®è¿™é‡Œå°±ä¸å†è´´å‡ºï¼Œå¯ä»¥åˆ°æˆ‘çš„[`github` `electron-react`](https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FConardLi%2Felectron-react%2Ftree%2Fmaster%2Fscripts \"https://github.com/ConardLi/electron-react/tree/master/scripts\")çš„`/scripts`ç›®å½•ä¸‹æŸ¥çœ‹ã€‚\n\nè¿™é‡Œéœ€è¦æ³¨æ„ï¼Œåœ¨å¼€å‘ç¯å¢ƒä¸‹æˆ‘ä»¬å¯ä»¥ç»“åˆ`webpack`çš„`devServer`å’Œ`electron`å‘½ä»¤æ¥å¯åŠ¨`app`ï¼š\n\n```\n    devServer: {\n    contentBase: './assets/',\n    historyApiFallback: true,\n    hot: true,\n    port: PORT,\n    noInfo: false,\n        stats: {\n        colors: true,\n        },\n            setup() {\n            spawn(\n            'electron',\n            ['.'],\n                {\n                shell: true,\n                stdio: 'inherit',\n            }\n            )\n            .on('close', () => process.exit(0))\n            .on('error', e => console.error(e));\n            },\n            },//...\n```\n\n### 13.2 ä¸»è¿›ç¨‹æ‰“åŒ…\n\nä¸»è¿›ç¨‹ï¼Œå³å°†æ•´ä¸ªç¨‹åºæ‰“åŒ…æˆå¯è¿è¡Œçš„å®¢æˆ·ç«¯ç¨‹åºï¼Œå¸¸ç”¨çš„æ‰“åŒ…æ–¹æ¡ˆä¸€èˆ¬æœ‰ä¸¤ç§ï¼Œ`electron-packager`å’Œ`electron-builder`ã€‚\n\n`electron-packager`åœ¨æ‰“åŒ…é…ç½®ä¸Šæˆ‘è§‰å¾—æœ‰äº›ç¹çï¼Œè€Œä¸”å®ƒåªèƒ½å°†åº”ç”¨ç›´æ¥æ‰“åŒ…ä¸ºå¯æ‰§è¡Œç¨‹åºã€‚\n\nè¿™é‡Œæˆ‘æ¨èä½¿ç”¨`electron-builder`ï¼Œå®ƒä¸ä»…æ‹¥æœ‰æ–¹ä¾¿çš„é…ç½® `protocol` çš„åŠŸèƒ½ã€å†…ç½®çš„ `Auto Update`ã€ç®€å•çš„é…ç½® `package.json` ä¾¿èƒ½å®Œæˆæ•´ä¸ªæ‰“åŒ…å·¥ä½œï¼Œç”¨æˆ·ä½“éªŒéå¸¸ä¸é”™ã€‚è€Œä¸”`electron-builder`ä¸ä»…èƒ½ç›´æ¥å°†åº”ç”¨æ‰“åŒ…æˆ`exe app`ç­‰å¯æ‰§è¡Œç¨‹åºï¼Œè¿˜èƒ½æ‰“åŒ…æˆ`msi dmg`ç­‰å®‰è£…åŒ…æ ¼å¼ã€‚\n\nä½ å¯ä»¥åœ¨`package.json`æ–¹ä¾¿çš„è¿›è¡Œå„ç§é…ç½®ï¼š\n\n```\n    \"build\": {\n    \"productName\": \"electron-react\", // appä¸­æ–‡åç§°\n    \"appId\": \"electron-react\",// appæ ‡è¯†\n    \"directories\": { // æ‰“åŒ…åè¾“å‡ºçš„æ–‡ä»¶å¤¹\n    \"buildResources\": \"resources\",\n    \"output\": \"dist/\"\n}\n\"files\": [ // æ‰“åŒ…åä¾ç„¶ä¿ç•™çš„æºæ–‡ä»¶\n\"main_process/\",\n\"render_process/\",\n],\n\"mac\": { // macæ‰“åŒ…é…ç½®\n\"target\": \"dmg\",\n\"icon\": \"icon.ico\"\n},\n\"win\": { // windowsæ‰“åŒ…é…ç½®\n\"target\": \"nsis\",\n\"icon\": \"icon.ico\"\n},\n\"dmg\": { // dmgæ–‡ä»¶æ‰“åŒ…é…ç½®\n\"artifactName\": \"electron_react.dmg\",\n    \"contents\": [\n        {\n        \"type\": \"link\",\n        \"path\": \"/Applications\",\n        \"x\": 410,\n        \"y\": 150\n        },\n            {\n            \"type\": \"file\",\n            \"x\": 130,\n            \"y\": 150\n        }\n    ]\n    },\n    \"nsis\": { // nsisæ–‡ä»¶æ‰“åŒ…é…ç½®\n    \"oneClick\": false,\n    \"allowToChangeInstallationDirectory\": true,\n    \"shortcutName\": \"electron-react\"\n    },\n}\n```\n\næ‰§è¡Œ`electron-builder`æ‰“åŒ…å‘½ä»¤æ—¶ï¼Œå¯æŒ‡å®šå‚æ•°è¿›è¡Œæ‰“åŒ…ã€‚\n\n```\n--mac, -m, -o, --macos   macOSæ‰“åŒ…\n--linux, -l              Linuxæ‰“åŒ…\n--win, -w, --windows     Windowsæ‰“åŒ…\n--mwl                    åŒæ—¶ä¸ºmacOSï¼ŒWindowså’ŒLinuxæ‰“åŒ…\n--x64                    x64 (64ä½å®‰è£…åŒ…)\n--ia32                   ia32(32ä½å®‰è£…åŒ…)\n```\n\nå…³äºä¸»è¿›ç¨‹çš„æ›´æ–°ä½ å¯ä»¥ä½¿ç”¨`electron-builder`è‡ªå¸¦çš„`Auto Update`æ¨¡å—ï¼Œåœ¨`electron-react`ä¹Ÿå®ç°äº†æ‰‹åŠ¨æ›´æ–°çš„æ¨¡å—ï¼Œç”±äºç¯‡å¹…åŸå› è¿™é‡Œå°±ä¸å†èµ˜è¿°ï¼Œå¦‚æœæœ‰å…´è¶£å¯ä»¥åˆ°æˆ‘çš„[`github`](https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FConardLi%2Felectron-react%2Ftree%2Fmaster%2Fscripts \"https://github.com/ConardLi/electron-react/tree/master/scripts\")æŸ¥çœ‹`main`ä¸‹çš„`update`æ¨¡å—ã€‚\n\n### 13.3 æ‰“åŒ…ä¼˜åŒ–\n\n`electron-builder`æ‰“åŒ…å‡ºæ¥çš„`App`è¦æ¯”ç›¸åŒåŠŸèƒ½çš„åŸç”Ÿå®¢æˆ·ç«¯åº”ç”¨ä½“ç§¯å¤§å¾ˆå¤šï¼Œå³ä½¿æ˜¯ç©ºçš„åº”ç”¨ï¼Œä½“ç§¯ä¹Ÿè¦åœ¨`100mb`ä»¥ä¸Šã€‚åŸå› æœ‰å¾ˆå¤šï¼š\n\nç¬¬ä¸€ç‚¹ï¼›ä¸ºäº†è¾¾åˆ°è·¨å¹³å°çš„æ•ˆæœï¼Œæ¯ä¸ª`Electron`åº”ç”¨éƒ½åŒ…å«äº†æ•´ä¸ª`V8`å¼•æ“å’Œ`Chromium`å†…æ ¸ã€‚\n\nç¬¬äºŒç‚¹ï¼šæ‰“åŒ…æ—¶ä¼šå°†æ•´ä¸ª`node_modules`æ‰“åŒ…è¿›å»ï¼Œå¤§å®¶éƒ½çŸ¥é“ä¸€ä¸ªåº”ç”¨çš„`node_module`ä½“ç§¯æ˜¯éå¸¸åºå¤§çš„ï¼Œè¿™ä¹Ÿæ˜¯ä½¿å¾—`Electron`åº”ç”¨æ‰“åŒ…åçš„ä½“ç§¯è¾ƒå¤§çš„åŸå› ã€‚\n\nç¬¬ä¸€ç‚¹æˆ‘ä»¬æ— æ³•æ”¹å˜ï¼Œæˆ‘ä»¬å¯ä»¥ä»ç¬¬äºŒç‚¹å¯¹åº”ç”¨ä½“ç§¯è¿›è¡Œä¼˜åŒ–ï¼š`Electron`åœ¨æ‰“åŒ…æ—¶åªä¼šå°†`denpendencies`çš„ä¾èµ–æ‰“åŒ…è¿›å»ï¼Œè€Œä¸ä¼šå°† `devDependencies` ä¸­çš„ä¾èµ–è¿›è¡Œæ‰“åŒ…ã€‚æ‰€ä»¥æˆ‘ä»¬åº”å°½å¯èƒ½çš„å‡å°‘`denpendencies`ä¸­çš„ä¾èµ–ã€‚åœ¨ä¸Šé¢çš„è¿›ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨`webpack`å¯¹æ¸²æŸ“è¿›ç¨‹è¿›è¡Œæ‰“åŒ…ï¼Œæ‰€ä»¥æ¸²æŸ“è¿›ç¨‹çš„ä¾èµ–å…¨éƒ¨éƒ½å¯ä»¥ç§»å…¥`devDependencies`ã€‚\n\nå¦å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨åŒ`packajson.json`çš„æ–¹å¼æ¥è¿›è¡Œä¼˜åŒ–ï¼ŒæŠŠåªåœ¨å¼€å‘ç¯å¢ƒä¸­ä½¿ç”¨åˆ°çš„ä¾èµ–æ”¾åœ¨æ•´ä¸ªé¡¹ç›®çš„æ ¹ç›®å½•çš„`package.json`ä¸‹ï¼Œå°†ä¸å¹³å°ç›¸å…³çš„æˆ–è€…è¿è¡Œæ—¶éœ€è¦çš„ä¾èµ–è£…åœ¨`app`ç›®å½•ä¸‹ã€‚å…·ä½“è¯¦è§[two-package-structure](https://link.juejin.cn?target=https%3A%2F%2Fwww.electron.build%2Ftutorials%2Ftwo-package-structure \"https://www.electron.build/tutorials/two-package-structure\")ã€‚\n\nå‚è€ƒ\n--\n\n*   [electronjs.org/docs](https://link.juejin.cn?target=https%3A%2F%2Felectronjs.org%2Fdocs \"https://electronjs.org/docs\")\n*   [jlord.us/essential-eâ€¦](https://link.juejin.cn?target=http%3A%2F%2Fjlord.us%2Fessential-electron%2F \"http://jlord.us/essential-electron/\")\n*   [imweb.io/topic/5b9f5â€¦](https://link.juejin.cn?target=https%3A%2F%2Fimweb.io%2Ftopic%2F5b9f500cc2ec8e6772f34d79 \"https://imweb.io/topic/5b9f500cc2ec8e6772f34d79\")\n*   [www.jianshu.com/p/1ece6fd7aâ€¦](https://link.juejin.cn?target=https%3A%2F%2Fwww.jianshu.com%2Fp%2F1ece6fd7a80c \"https://www.jianshu.com/p/1ece6fd7a80c\")\n*   [zhuanlan.zhihu.com/p/52991793](https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F52991793 \"https://zhuanlan.zhihu.com/p/52991793\")\n\n> æœ¬é¡¹ç›®æºç åœ°å€ï¼š[github.com/ConardLi/elâ€¦](https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FConardLi%2Felectron-react \"https://github.com/ConardLi/electron-react\")\n\nå°ç»“\n--\n\nå¸Œæœ›ä½ é˜…è¯»æœ¬ç¯‡æ–‡ç« åå¯ä»¥è¾¾åˆ°ä»¥ä¸‹å‡ ç‚¹ï¼š\n\n*   äº†è§£`Electron`çš„åŸºæœ¬è¿è¡ŒåŸç†\n*   æŒæ¡`Electron`å¼€å‘çš„æ ¸å¿ƒåŸºç¡€çŸ¥è¯†\n*   äº†è§£`Electron`å…³äºå¼¹æ¡†ã€æ‰“å°ã€ä¿æŠ¤ã€æ‰“åŒ…ç­‰åŠŸèƒ½çš„åŸºæœ¬ä½¿ç”¨\n\næ–‡ä¸­å¦‚æœ‰é”™è¯¯ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºæŒ‡æ­£ï¼Œå¦‚æœè¿™ç¯‡æ–‡ç« å¸®åŠ©åˆ°äº†ä½ ï¼Œæ¬¢è¿ç‚¹èµå’Œå…³æ³¨ã€‚\n\næƒ³é˜…è¯»æ›´å¤šä¼˜è´¨æ–‡ç« ã€å¯å…³æ³¨æˆ‘çš„[`github`åšå®¢](https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FConardLi%2FConardLi.github.io \"https://github.com/ConardLi/ConardLi.github.io\")ï¼Œä½ çš„starâœ¨ã€ç‚¹èµå’Œå…³æ³¨æ˜¯æˆ‘æŒç»­åˆ›ä½œçš„åŠ¨åŠ›ï¼\n\næ¨èå…³æ³¨æˆ‘çš„å¾®ä¿¡å…¬ä¼—å·ã€codeç§˜å¯†èŠ±å›­ã€‘ï¼Œæ¯å¤©æ¨é€é«˜è´¨é‡æ–‡ç« ï¼Œæˆ‘ä»¬ä¸€èµ·äº¤æµæˆé•¿ã€‚\n\n![](/images/jueJin/16afa505d0b684c.png)\n\n> å…³æ³¨å…¬ä¼—å·åå›å¤ã€åŠ ç¾¤ã€‘æ‹‰ä½ è¿›å…¥ä¼˜è´¨å‰ç«¯äº¤æµç¾¤ã€‚",
	"selfDefined": "likes:730,comments:0,collects:804,likes:34261"
}