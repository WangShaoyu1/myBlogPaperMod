{
	"title": "全网最通俗易懂的【短链接】入门",
	"author": "Java3y",
	"publishTime": "2019-11-27",
	"readTime": "阅读5分钟",
	"tags": "[\"Java\",\"Java EE中文技术社区\",\"前端开发社区\",\"前端技术交流\",\"前端框架教程\",\"JavaScript 学习资源\",\"CSS 技巧与最佳实践\",\"HTML5 最新动态\",\"前端工程师职业发展\",\"开源前端项目\",\"前端技术趋势\"]",
	"description": "最近接了一个需求，涉及到了短链接的相关的知识，于是去查阅了相关的资料，在这里给大家整理分享一下。 我帮阿里云推广服务器89年，2293年，买来送自己，送女朋友马上过年再合适不过了，买了搭建个项目给面试官看也香，还可以熟悉技术栈，(老用户用家人账号买就好了，我用我女朋友的😂…",
	"article": "前言\n--\n\n> 只有光头才能变强。\n\n> 文本已收录至我的GitHub仓库，欢迎Star：[github.com/ZhongFuChen…](https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FZhongFuCheng3y%2F3y \"https://github.com/ZhongFuCheng3y/3y\")\n\n最近接了一个需求，涉及到了**短链接**的相关的知识，于是去查阅了相关的资料，在这里给大家整理分享一下。\n\n[**我帮阿里云推广服务器89/年，229/3年，买来送自己，送女朋友马上过年再合适不过了，买了搭建个项目给面试官看也香，还可以熟悉技术栈，(老用户用家人账号买就好了，我用我女朋友的😂）。扫码或者点击购买**](https://link.juejin.cn?target=https%3A%2F%2Fwww.aliyun.com%2Fminisite%2Fgoods%3FuserCode%3Dpfn5xpli%26share_source%3Dcopy_link \"https://www.aliyun.com/minisite/goods?userCode=pfn5xpli&share_source=copy_link\")\n\n![](/images/jueJin/16ecb45e19ed59e.png)\n\n[**搭建教程，从0开始一步一步带你搭建**😂](https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FMQqasjPs4Y-OCjQLuFj4ew \"https://mp.weixin.qq.com/s/MQqasjPs4Y-OCjQLuFj4ew\")\n\n一、短链接介绍\n-------\n\n举个例子，现在我的GitHub的地址是这个：`https://github.com/ZhongFuCheng3y/3y` (36个字符)\n\n我通过百度的短链接服务可以将上面的地址转成`https://dwz.cn/LwlrfG4j`(23个字符)\n\n![转短链接](/images/jueJin/16daa4a6a479c6b.png)\n\n那我为什么要将原有的URL转成**较短**的链接呢？比如我们发**短信**提醒用户去XXX，XXX有优惠活动，在文案上往往会带有一个链接进行跳转，方便用户快速去到对应的活动落地页。\n\n而短信的发送是需要成本的，短信的成本主要有两方面组成：\n\n1.  发送的人数（发的人越多，自然短信的花费就越大，这个我就不解释了）\n2.  短信发送的字数（比如，文案总字数超过70个字，那就算两条短信计费，超过140个字就算三条短信计费）\n\n所以在发送短信给用户时：要么就投放更加精准优质的用户，以便控制好发送的数量，要么就尽可能控制文案的字数。\n\n显然，如果在短信上配上普通的URL，那真正的文案可写的字数就没多少了。于是我们可以发现，各大公司的短信推送的URL都是**短链接**。\n\n![短链接案例之一](/images/jueJin/16daa5760025bd4.png)\n\n比如在一些平台发布消息时会**限制字数**，如果我们的发的URL过长就很容易就被限制住了：\n\n![限制字数](/images/jueJin/16daa5e1feb8427.png)\n\n> 使用短链接的好处：**短、字符少、美观、便于发布、传播**。\n\n二、短链接它是怎么干的呢？\n-------------\n\n我们先回到生成好的短链上`https://dwz.cn/LwlrfG4j`\n\n虽然这个链接看起来有点奇怪，但他终究还是一个链接，从URL的特征我们可以分出：\n\n*   `dwz.cn`是域名\n*   `LwlrfG4j`是参数\n\n![域名](/images/jueJin/16daa6c3bc293b5.png)\n\n我们在浏览器请求一下短链接看看是什么情况：\n\n![302跳转](/images/jueJin/16daa6a14a50337.png)\n\n短链接的原理其实就是：\n\n*   将长链接通过一定的`手段`生成一个短链接\n*   访问短链接时实际访问的是**短链接服务器**，然后根据短链接的参数**找回**对应的长链接\n*   重定向跳转\n\n![大致原理图](/images/jueJin/16daa75f651d469.png)\n\n### 2.1 核心的要解决的问题\n\n通过上面的分析我们可以知道的是，我们实际核心要做的是怎么从`LwlrfG4j`类似这样的参数找到对应的完整URL：`https://github.com/ZhongFuCheng3y/3y`\n\n脑子第一时间想到的是：能不能通过一个压缩算法将`https://github.com/ZhongFuCheng3y/3y`压缩更小的字符？\n\n显然，不能，压缩算法大多数都是针对**大文本**才奏效，本身的URL也不见得有多大...压缩出来肯定比原来的URL还大。\n\n脑子第二时间想到的是：能不能用Hash算法？**还是不能**，用Hash存在**哈希碰撞**的问题\n\n*   什么是哈希碰撞？两个不相同的字符串(值)进行Hash操作后，得到的哈希值相同。\n*   这就意味着，两个完全不同的长链得到的哈希值一模一样，而我的**短链是依赖哈希值去找到长链的**(此时一个短链对应多个长链，这不合理)。\n\n脑子第三时间想到的是？**脑子想不到了**。\n\n现在业内用得比较多的是**发号器**（ID自增)+**62进制编码**：\n\n*   比如，我将`https://github.com/ZhongFuCheng3y/3y`看作是`10000`，然后将`10000`进行62进制编码得到的结果是：`2Bi`\n\n![](/images/jueJin/16dab8e69b04692.png)\n\n那我的短链URL就可以弄成`https://3y.cn/2Bi`，其中`3y.cn`是域名，`2Bi`是经过62进制转换后的参数。\n\n为什么要用62进制转换？64进制转换倒是听得多了\n\n*   62进制转换是因为62进制转换后**只含**数字+小写+大写字母。而64进制转换会含有`/`,`+`这样的符号（不符合正常URL的字符）\n*   10进制转62进制可以**缩短**字符，如果我们要6位字符的话，已经有560亿个组合了。\n\n![6位字符](/images/jueJin/16dab5feceb1801.png)\n\n总结：\n\n*   ID自增后，转成62进制，在DB保存映射关系，生成短链接\n\n![短链接过程](/images/jueJin/16dab6a0b80480b.png)\n\n### 三、短信的链接直接跳转到APP\n\n> 以下内容来源：[sq.163yun.com/blog/articl…](https://link.juejin.cn?target=https%3A%2F%2Fsq.163yun.com%2Fblog%2Farticle%2F158315832059072512 \"https://sq.163yun.com/blog/article/158315832059072512\") ，作者：西西吹雪\n\n综合起来就是：\n\n*   通过 Deep Links（iOS 则是Universal Links），可以实现点击短信链接直接唤起 App；\n*   如果系统因为各种原因不支持 Deep Links，备选方案是 `intent filter`，不过会出弹框让用户选择用哪个 App 打开链接；\n*   如果用户没有选择我们的 App 而是选择了浏览器打开，则通过 `自定义 scheme` 尝试唤起 App；\n*   由于技术和成本问题，我们忽略不支持 `自定义 scheme` 的浏览器。\n\n![短信链接唤醒APP](/images/jueJin/16dab74e50e3318.png)\n\n最后\n--\n\n这篇文章主要是简单了解一下短链接的相关知识，一个完备的短链服务肯定还要考虑更多的事，这里我就不展开了（毕竟我也没真正写过，可以在下方的链接继续学习）~\n\n更多资料查阅：\n\n*   [www.zhihu.com/question/29…](https://link.juejin.cn?target=https%3A%2F%2Fwww.zhihu.com%2Fquestion%2F29270034%2Fanswer%2F46446911 \"https://www.zhihu.com/question/29270034/answer/46446911\")\n*   [hufangyun.com/2017/short-…](https://link.juejin.cn?target=https%3A%2F%2Fhufangyun.com%2F2017%2Fshort-url%2F \"https://hufangyun.com/2017/short-url/\")\n*   [blog.csdn.net/c10WTiybQ1Y…](https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fc10WTiybQ1Ye3%2Farticle%2Fdetails%2F78098840 \"https://blog.csdn.net/c10WTiybQ1Ye3/article/details/78098840\")\n\n> **本已收录至我的GitHub精选文章，欢迎Star**：[github.com/ZhongFuChen…](https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FZhongFuCheng3y%2F3y \"https://github.com/ZhongFuCheng3y/3y\")\n> \n> 乐于输出**干货**的Java技术公众号：**Java3y**。公众号内**有300多篇原创**技术文章、海量视频资源、精美脑图，**关注即可获取！**\n\n![转发到朋友圈是对我最大的支持！](/images/jueJin/16e9370fba5cbb6.png)\n\n非常感谢**人才**们能看到这里，如果这个文章写得还不错，觉得「三歪」我**有点东西**的话 **求点赞** **求关注️** **求分享👥** **求留言💬** 对暖男我来说真的 **非常有用**！！！\n\n创作不易，各位的支持和认可，就是我创作的最大动力，我们下篇文章见！",
	"selfDefined": "likes:254,comments:31,collects:197,likes:10176"
}