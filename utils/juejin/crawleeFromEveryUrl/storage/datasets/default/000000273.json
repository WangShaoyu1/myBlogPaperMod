{
	"title": "MySql时间处理函数的学习与实践",
	"author": "捡田螺的小男孩",
	"publishTime": "2019-11-24",
	"readTime": "阅读4分钟",
	"tags": "[\"MySQL中文技术社区\",\"前端开发社区\",\"前端技术交流\",\"前端框架教程\",\"JavaScript 学习资源\",\"CSS 技巧与最佳实践\",\"HTML5 最新动态\",\"前端工程师职业发展\",\"开源前端项目\",\"前端技术趋势\"]",
	"description": "日常业务开发中，我们经常需要跟SQl的日期打交道，比如查询最近30天的订单，查询某一个月的订单量，统计某天每小时的下单量等等，于是整理了以下MySql时间处理函数。 定义 向日期添加指定的时间间隔。 定义 从日期减去指定的时间间隔。 定义 表示返回日期是星期几，记住：星期…",
	"article": "前言\n--\n\n日常业务开发中，我们经常需要跟SQl的日期打交道，比如查询最近30天的订单，查询某一个月的订单量，统计某天每小时的下单量等等，于是整理了以下MySql时间处理函数。\n\n### DATE\\_ADD()\n\n**定义:** 向日期添加指定的时间间隔。\n\n**语法格式：**\n\n```\nDATE_ADD(date,INTERVAL expr unit)\n```\n\n**demo：**\n\n```\nmysql> SELECT DATE_ADD('2018-05-01',INTERVAL 1 DAY);\n-> '2018-05-02'\n\n//如果你查最近七天内的订单，可以这样：\nmysql> SELECT * FROM `order` WHERE OrderDate>=DATE_ADD(NOW(),INTERVAL -7 DAY);\n```\n\n### DATE\\_SUB()\n\n**定义:** 从日期减去指定的时间间隔。\n\n**语法格式：**\n\n```\nDATE_SUB(date,INTERVAL expr unit)\n```\n\n**demo：**\n\n```\nSELECT DATE_SUB('2018-05-01',INTERVAL 1 YEAR);\n-> '2017-05-01'\n//如果你查最近七天内的订单，可以这样：\nselect * from `order` where OrderDate>=DATE_SUB(NOW(),INTERVAL 7 DAY);\n```\n\n### DATEDIFF()\n\n**定义:** 返回两个日期之间的天数\n\n**语法格式：**\n\n```\nDATEDIFF(expr1,expr2)\n```\n\n**demo：**\n\n```\nmysql> SELECT DATEDIFF('2007-12-31 23:59:59','2007-12-30');\n-> 1\nmysql> SELECT DATEDIFF('2010-11-30 23:59:59','2010-12-31');\n-> -31\n//如果你查最近30天内的订单，可以这样：\nselect * from `order` where DATEDIFF(NOW(),OrderDate)<=30;\n```\n\n### DAYOFWEEK()\n\n**定义:** 表示返回日期是星期几，记住：星期天=1，星期一=2， ... 星期六=7\n\n**语法格式：**\n\n```\nDAYOFWEEK(date)\n```\n\n**demo：**\n\n```\nmysql> SELECT DAYOFWEEK('2007-02-03');\n-> 7\n//查询星期六下的订单\nmysql> SELECT * FROM `order` WHERE DAYOFWEEK(OrderDate) =7;\n```\n\n### MONTH()\n\n**定义:** 返回date是当年的第几月，1月就返回1，... ,12月就返回12\n\n**语法格式：**\n\n```\nMONTH(date)\n```\n\n**demo：**\n\n```\nmysql> SELECT MONTH('2019-11-24');\n-> 11\n//查看今年11月份下的订单\nSELECT * FROM `order` WHERE OrderDate>= '2019-01-01' and MONTH(OrderDate) =11 ;\n```\n\n### YEAR()\n\n**定义:** 返回date是年份，从1000到9999.\n\n**语法格式：**\n\n```\nYEAR(date)\n```\n\n**demo：**\n\n```\nmysql> SELECT YEAR('1987-01-01');\n-> 1987\n// 查看2018年下的订单总数\nSELECT count(*) FROM `order` WHERE Year(OrderDate) =2018 ;\n```\n\n### HOUR()\n\n**定义:** 返回该date或者time的hour值，值范围（0-23).\n\n**语法格式：**\n\n```\nHOUR(time)\n```\n\n**demo：**\n\n```\nmysql> SELECT HOUR('10:05:03');\n-> 10\n// 查看2019年双11，0点下单量\nSELECT count(*) FROM `order` WHERE  OrderDate BETWEEN '2019-11-11' and '2019-11-12' and HOUR(OrderDate) =0 ;\n```\n\n### DATE\\_FORMAT()\n\n**定义：** 用于以不同的格式显示日期/时间数据。。\n\n**语法格式：**\n\n```\nDATE_FORMAT(date,format)\n```\n\ndate为对应的日期，fromat为输出格式。format的格式如下：\n\n格式\n\n描述\n\n%a\n\n缩写星期名\n\n%b\n\n缩写月名\n\n%c\n\n月，数值\n\n%D\n\n带有英文前缀的月中的天\n\n%d\n\n月的天，数值(00-31)\n\n%e\n\n月的天，数值(0-31)\n\n%f\n\n微秒\n\n%H\n\n小时 (00-23)\n\n%h\n\n小时 (01-12)\n\n%i\n\n分钟，数值(00-59)\n\n%j\n\n年的天 (001-366)\n\n%M\n\n月名\n\n%m\n\n月，数值(00-12)\n\n%S\n\n秒(00-59)\n\n%T\n\n时间, 24-小时 (hh:mm:ss)\n\n%W\n\n星期名\n\n%Y\n\n年，4 位\n\n**demo：**\n\n```\nmysql> SELECT DATE_FORMAT('2009-10-04 22:23:00', '%W %M %Y');\n-> 'Sunday October 2009'\nmysql> SELECT DATE_FORMAT('2007-10-04 22:23:00', '%H:%i:%s');\n-> '22:23:00'\n// 统计2019年11月23号，每小时的下单量\nselect hour(OrderDate) as hour,count(*) as counts from `order` where\nDATE_FORMAT(OrderDate,'%Y-%m-%d') = '2019-11-23'  group by hour(OrderDate);\n```\n\n### EXTRACT()\n\n**定义：** 用于返回日期/时间的单独部分，比如年、月、日、小时、分钟等等。\n\n**语法格式：**\n\n```\nEXTRACT(unit FROM date)\n```\n\ndate 参数是合法的日期表达式。unit 参数可以是下列的值：\n\nUnit值\n\nSECOND\n\nMINUTE\n\nHOUR\n\nDAY\n\nWEEK\n\nMONTH\n\nYEAR\n\n...\n\n**demo：**\n\n```\nmysql> SELECT EXTRACT(YEAR FROM '2019-07-02');\n-> 2019\nmysql> SELECT EXTRACT(YEAR_MONTH FROM '2019-07-02 01:02:03');\n-> 201907\nmysql> SELECT EXTRACT(DAY_MINUTE FROM '2019-07-02 01:02:03');\n-> 20102\n\n//查询订单的年月日\nmysql>SELECT EXTRACT(YEAR FROM OrderDate) AS OrderYear,\n->EXTRACT(MONTH FROM OrderDate) AS OrderMonth,\n->EXTRACT(DAY FROM OrderDate) AS OrderDay\n->FROM `order`\n```\n\n### NOW()，CURDATE()，CURTIME()\n\n**定义：**\n\n*   NOW()返回当前的日期和时间\n*   CURDATE() 返回当前的日期\n*   CURTIME() 返回当前的时间\n\n**语法格式：**\n\n```\nNOW()\nCURDATE()\nCURTIME()\n```\n\n**demo:**\n\n![](/images/jueJin/16e9d00b99ff282.png)\n\n### DATE(),DAY(), TIME()\n\n**定义:**\n\n*   DATE() 提取日期或日期/时间表达式的日期部分\n*   DAY() 返回当月的几号 (1-31)\n*   TIME() 提取日期或日期/时间表达式的时间部分\n\n**语法格式：**\n\n```\nDATE(expr)\nDAY(date)\nTIME(expr)\n```\n\n**demo:**\n\n```\nmysql> SELECT DATE('2003-12-31 01:02:03');\n-> '2003-12-31'\nmysql> select day('2017-02-03');\n->3\nmysql>  SELECT TIME('2003-12-31 01:02:03');\n-> '01:02:03'\nmysql> SELECT TIME('2003-12-31 01:02:03.000123');\n-> '01:02:03.000123'\n```\n\n参考与感谢\n-----\n\n*   MySql官网[](https://link.juejin.cn?target=https%3A%2F%2Fdev.mysql.com%2Fdoc%2Frefman%2F8.0%2Fen%2Fdate-and-time-functions.html%23function_date-format \"https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_date-format\")\n*   [SQL Date 函数](https://link.juejin.cn?target=https%3A%2F%2Fwww.w3school.com.cn%2Fsql%2Fsql_dates.asp \"https://www.w3school.com.cn/sql/sql_dates.asp\")（[www.w3school.com.cn/sql/sql\\_dat…](https://link.juejin.cn?target=https%3A%2F%2Fwww.w3school.com.cn%2Fsql%2Fsql_dates.asp%25EF%25BC%2589 \"https://www.w3school.com.cn/sql/sql_dates.asp%EF%BC%89\")\n\n个人公众号\n-----\n\n![](/images/jueJin/16c381c89b127bb.png)\n\n*   如果你是个爱学习的好孩子，可以关注我公众号，一起学习讨论。\n*   如果你觉得本文有哪些不正确的地方，可以评论，也可以关注我公众号，私聊我，大家一起学习进步哈。",
	"selfDefined": "likes:24,comments:0,collects:33,likes:3209"
}