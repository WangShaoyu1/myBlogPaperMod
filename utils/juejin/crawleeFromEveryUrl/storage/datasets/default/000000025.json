{
	"title": "JavaScript 原生深拷贝方法来啦！structuredClone 闪耀登场~",
	"author": "Sunshine_Lin",
	"publishTime": "2024-05-09",
	"readTime": "阅读2分钟",
	"tags": "[\"前端\",\"JavaScript中文技术社区\",\"前端开发社区\",\"前端技术交流\",\"前端框架教程\",\"JavaScript 学习资源\",\"CSS 技巧与最佳实践\",\"HTML5 最新动态\",\"前端工程师职业发展\",\"开源前端项目\",\"前端技术趋势\"]",
	"description": "前言 大家好，我是林三心，用最通俗易懂的话讲最难的知识点是我的座右铭，基础是进阶的前提是我的初心~ 原生的深拷贝~ 分享一个 JavaScript 原生的深拷贝方法 structuredClone，其",
	"article": "前言\n==\n\n大家好，我是林三心，用最通俗易懂的话讲最难的知识点是我的座右铭，基础是进阶的前提是我的初心~\n\n原生的深拷贝~\n-------\n\n分享一个 JavaScript 原生的深拷贝方法 `structuredClone`，其实这个方法出了很久了，但是存在感一直很低~\n\n![](/images/jueJin/eea017d6e72f4fb.png)\n\n说这个方法前，我们先来讨论一下，常见的**深拷贝**都有哪些方案呢？\n\nJSON.parse & JSON.stringify()\n-----------------------------\n\n很多人会用 `JSON.parse(JSON.stringify(obj))`来对对象进行深拷贝操作，但是这个方式缺点太多了\n\n![](/images/jueJin/6ea6518fe016428.png)\n\n![](/images/jueJin/c52b76d506bf45d.png)\n\n可以看到很多数据类型都没有深拷贝成功\n\n数据类型\n\n克隆结果\n\n**number**\n\n✔\n\n**string**\n\n✔\n\n**undefined**\n\n✖\n\n**null**\n\n✔\n\n**boolean**\n\n✔\n\n**object**\n\n✔\n\n**Array**\n\n✔\n\n**Function**\n\n✖\n\n**map**\n\n✖\n\n**Set**\n\n✖\n\n**Date**\n\n✖\n\n**Error**\n\n✖\n\n**Regex**\n\n✖\n\n**Dom节点**\n\n✖\n\n并且在对象具有**环引用**的情况下，这种深拷贝方式会导致报错\n\n![](/images/jueJin/ab9294b013344dc.png)\n\n![](/images/jueJin/e97d257542e246b.png)\n\nlodash.cloneDeep\n----------------\n\nlodash 的 `cloneDeep`也是深拷贝的手段之一，且非常完善，能成功拷贝各种数据类型\n\n但是大家要注意使用 lodash 时要使用 `lodash-es`，这样才能做到按需加载，减少不必要的代码体积\n\n![](/images/jueJin/1ca4d617433d414.png)\n\n![](/images/jueJin/e11298187c644a0.png)\n\n数据类型\n\n克隆结果\n\n**number**\n\n✔\n\n**string**\n\n✔\n\n**undefined**\n\n✔\n\n**null**\n\n✔\n\n**boolean**\n\n✔\n\n**object**\n\n✔\n\n**Array**\n\n✔\n\n**Function**\n\n✔\n\n**map**\n\n✔\n\n**Set**\n\n✔\n\n**Date**\n\n✔\n\n**Error**\n\n✔\n\n**Regex**\n\n✔\n\n**Dom节点**\n\n✔\n\nwindow.structuredClone\n----------------------\n\n全局的 `structuredClone()` 方法使用结构化克隆算法将给定的值进行深拷贝\n\n![](/images/jueJin/cd090f639dac454.png)\n\n![](/images/jueJin/0af73151aa00430.png)\n\n当克隆`Function、Dom节点`时，会报错\n\n![](/images/jueJin/61f1c63f7ffc4f7.png)\n\n![](/images/jueJin/e00c902bc1264f7.png)\n\n其他数据类型可以成功拷贝~\n\n![](/images/jueJin/351de7ead83d44c.png)\n\n数据类型\n\n克隆结果\n\n**number**\n\n✔\n\n**string**\n\n✔\n\n**undefined**\n\n✔\n\n**null**\n\n✔\n\n**boolean**\n\n✔\n\n**object**\n\n✔\n\n**Array**\n\n✔\n\n**Function**\n\n✖\n\n**map**\n\n✔\n\n**Set**\n\n✔\n\n**Date**\n\n✔\n\n**Error**\n\n✔\n\n**Regex**\n\n✔\n\n**Dom节点**\n\n✖\n\n结语 & 加学习群 & 摸鱼群\n---------------\n\n我是林三心\n\n*   一个待过**小型toG型外包公司、大型外包公司、小公司、潜力型创业公司、大公司**的作死型前端选手；\n*   一个偏前端的全干工程师；\n*   一个不正经的掘金作者；\n*   一个逗比的B站up主；\n*   一个不帅的小红书博主；\n*   一个喜欢打铁的篮球菜鸟；\n*   一个喜欢历史的乏味少年；\n*   一个喜欢rap的五音不全弱鸡\n\n如果你想一起学习前端，一起摸鱼，一起研究简历优化，一起研究面试进步，一起交流历史音乐篮球rap，可以来俺的摸鱼学习群哈哈，点这个，有7000多名前端小伙伴在等着一起学习哦 --> [摸鱼沸点](https://juejin.cn/pin/7035153948126216206 \"https://juejin.cn/pin/7035153948126216206\")",
	"selfDefined": "likes:9,comments:0,collects:2,likes:799"
}