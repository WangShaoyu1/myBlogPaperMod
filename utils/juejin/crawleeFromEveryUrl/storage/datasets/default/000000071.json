{
	"title": "åŽç«¯ï¼šä½ JavaScriptä¸æ˜¯ä¸–ç•Œæœ€å¥½çš„è¯­è¨€å—ï¼Ÿè‡ªå·±è§£å†³ç²¾åº¦ä¸¢å¤±é—®é¢˜å¥½ä¸å¥½ï¼Ÿ",
	"author": "Sunshine_Lin",
	"publishTime": "2023-08-13",
	"readTime": "é˜…è¯»7åˆ†é’Ÿ",
	"tags": "[\"å‰ç«¯ä¸­æ–‡æŠ€æœ¯ç¤¾åŒº\",\"å‰ç«¯å¼€å‘ç¤¾åŒº\",\"å‰ç«¯æŠ€æœ¯äº¤æµ\",\"å‰ç«¯æ¡†æž¶æ•™ç¨‹\",\"JavaScript å­¦ä¹ èµ„æº\",\"CSS æŠ€å·§ä¸Žæœ€ä½³å®žè·µ\",\"HTML5 æœ€æ–°åŠ¨æ€\",\"å‰ç«¯å·¥ç¨‹å¸ˆèŒä¸šå‘å±•\",\"å¼€æºå‰ç«¯é¡¹ç›®\",\"å‰ç«¯æŠ€æœ¯è¶‹åŠ¿\"]",
	"description": "å‰è¨€ å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯æž—ä¸‰å¿ƒï¼Œç”¨æœ€é€šä¿—æ˜“æ‡‚çš„è¯è®²æœ€éš¾çš„çŸ¥è¯†ç‚¹æ˜¯æˆ‘çš„åº§å³é“­ï¼ŒåŸºç¡€æ˜¯è¿›é˜¶çš„å‰ææ˜¯æˆ‘çš„åˆå¿ƒã€‚ JS ç»•ä¸å¼€çš„ç²¾åº¦ä¸¢å¤±é—®é¢˜ åœ¨ javascript ä¸­ï¼Œå½“æˆ‘ä»¬è¿›è¡Œè¿ç®—æ—¶ ä½ è§‰å¾—è¾“å‡ºæ˜¯ 03 å—",
	"article": "å‰è¨€\n--\n\nå¤§å®¶å¥½ï¼Œæˆ‘æ˜¯æž—ä¸‰å¿ƒï¼Œç”¨æœ€é€šä¿—æ˜“æ‡‚çš„è¯è®²æœ€éš¾çš„çŸ¥è¯†ç‚¹æ˜¯æˆ‘çš„åº§å³é“­ï¼ŒåŸºç¡€æ˜¯è¿›é˜¶çš„å‰ææ˜¯æˆ‘çš„åˆå¿ƒã€‚\n\n![](/images/jueJin/793d42e704ef435.png)\n\nJS ç»•ä¸å¼€çš„ç²¾åº¦ä¸¢å¤±é—®é¢˜\n-------------\n\nåœ¨ javascript ä¸­ï¼Œå½“æˆ‘ä»¬è¿›è¡Œè¿ç®—æ—¶\n\n```js\n0.1 + 0.2\n```\n\nä½ è§‰å¾—è¾“å‡ºæ˜¯ 0.3 å—ï¼Ÿæ˜¾ç„¶ä¸æ˜¯çš„ï¼Œç”±äºŽ javascript å­˜åœ¨ç²¾åº¦ä¸¢å¤±é—®é¢˜ï¼Œå¯¼è‡´äº†è¾“å‡ºçš„ä¸æ˜¯ä½ é¢„æœŸçš„\n\n![image.png](/images/jueJin/9b072a56f88243b.png)\n\nè‡³äºŽä¸ºä»€ä¹ˆä¼šç²¾åº¦ä¸¢å¤±å‘¢ï¼Ÿæˆ‘ä¹‹å‰å‡ºè¿‡ä¸€ç¯‡æ–‡ç« ä¸“é—¨è®²äº†è¿™ä¸ªåŽŸå› [ä½ çŸ¥é“ 0.1+0.2 !==0.3æ˜¯è¿›åˆ¶é—®é¢˜ï¼Œä½†ä½ è®²ä¸å‡ºä¸ªæ‰€ä»¥ç„¶ï¼Œæ˜¯å§ï¼ŸðŸ¶](https://juejin.cn/post/7041546152994406430 \"https://juejin.cn/post/7041546152994406430\")ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥çœ‹çœ‹ï¼Œç”±äºŽè¿™ä¸æ˜¯æœ¬æ–‡çš„é‡ç‚¹ï¼Œæ‰€ä»¥æˆ‘åœ¨è¿™å°±ä¸è¿‡å¤šè®²è§£~\n\nè§£å†³ç²¾åº¦ä¸¢å¤±çš„æ–¹æ¡ˆï¼Ÿ\n----------\n\næˆ‘ä¼šé€‰æ‹©ä½¿ç”¨ `decimal.js` è¿™ä¸ªåº“ï¼Œæ–‡æ¡£åœ¨ [æ–‡æ¡£](https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fdecimal.js \"https://www.npmjs.com/package/decimal.js\")ï¼Œä»–çš„åŸºæœ¬ä½¿ç”¨å¦‚ä¸‹ï¼š\n\n```js\n// å…ˆå®‰è£…\nnpm install decimal.js\n\n// åŽä½¿ç”¨\nconst Decimal = require('decimal.js');\n\nnew Decimal(0.1).add(0.2) // åŠ æ³• è¾“å‡º 0.3\nnew Decimal(0.1).sub(0.2) // å‡æ³•\nnew Decimal(0.1).mul(0.2) // ä¹˜æ³•\nnew Decimal(0.1).div(0.2) // é™¤æ³•\n```\n\nä½¿ç”¨ `decimal.js`è¿›è¡Œè¿ç®—ï¼Œèƒ½è§£å†³ç²¾åº¦ä¸¢å¤±çš„é—®é¢˜~\n\nä¸æƒ³æ‰‹åŠ¨ï¼æƒ³è‡ªåŠ¨ï¼\n---------\n\n### å¾ˆçƒ¦å•Šï¼\n\nå½“æˆ‘ä»¬æ‹¥æœ‰äº†`decimal.js`ä¹‹åŽï¼Œæ¯å½“æˆ‘ä»¬è¿›è¡Œè¿ç®—çš„æ—¶å€™ï¼Œå°±å¿…é¡»å¼•å…¥å®ƒè¿›è¡Œä½¿ç”¨ï¼Œæ¯ä¸€ä¸ªé¡µé¢éƒ½å¾—é‡å¤è¿™ä¸€æ“ä½œï¼ŒäºŽæ˜¯èŒç”Ÿäº†ä¸€ä¸ªæƒ³æ³•â€”â€”æˆ‘æƒ³è‡ªåŠ¨ï¼ä¸æƒ³æ‰‹åŠ¨ï¼\n\n### æ€è·¯\n\né‚£è¦æ€Žä¹ˆæ‰èƒ½è‡ªåŠ¨å‘¢ï¼Ÿç”±äºŽå‰æ®µæ—¶é—´ç¾¤é‡Œå¾ˆå¤šäººè¯´æƒ³å­¦ä¹ å†™ babel æ’ä»¶ï¼Œæ‰€ä»¥åˆšå¥½ï¼Œé’ˆå¯¹è¿™ä¸ªéœ€æ±‚ï¼Œæˆ‘å¯ä»¥å®žçŽ°ä¸€ä¸ª babel æ’ä»¶ï¼Œå®ƒçš„åŠŸèƒ½æ˜¯ï¼šå°†é¡¹ç›®ä¸­ `0.1 + 0.2` è¿™ç§è¡¨è¾¾å¼ï¼Œè½¬æ¢ä¸º `new Decimal(0.1).add(0.2)`\n\n```js\n0.1 + 0.2\n// è½¬æ¢ä¸º\nnew Decimal(0.1).add(0.2)\n```\n\nè¿™æ ·å°±èƒ½ä¸€æ¬¡æ€§æŠŠé¡¹ç›®ä¸­çš„ç²¾åº¦ä¸¢å¤±é—®é¢˜è§£å†³äº†~\n\nå¼€å‘ babel æ’ä»¶\n-----------\n\n### å‰ç½®å‡†å¤‡\n\næ¶‰åŠåˆ°ä¸‰ä¸ªé—®é¢˜ï¼š\n\n*   webpack å’Œ rollup å¦‚ä½•é€‰æ‹©\n*   rollup æ‰“åŒ…çŽ¯å¢ƒçš„æ­å»º\n*   å¦‚ä½•å‘å¸ƒåˆ° npm ä¸Š\n\nè¿™ä¸‰ä¸ªé—®é¢˜å…·ä½“æˆ‘åœ¨ä¸Šä¸€ç¯‡æ–‡ç« [ã€å‰ç«¯å°çŸ¥è¯†ã€‘Rollupå¼€å‘ä¸€ä¸ªNpmåŒ…ï¼Œå¹¶å‘å¸ƒ](https://juejin.cn/post/7264044879209529381 \"https://juejin.cn/post/7264044879209529381\")é‡Œæœ‰æåˆ°è¿‡äº†ï¼Œåœ¨æœ¬æ–‡æˆ‘å°±ä¸è¿‡å¤šè®²è§£\n\n### æ­å»ºä¸€ä¸ª Rollup æ‰“åŒ…çŽ¯å¢ƒ\n\næ–°å»ºä¸€ä¸ª `babel-plugin-sx-accuracy`æ–‡ä»¶å¤¹ï¼Œç”¨æ¥å¼€å‘ babel æ’ä»¶\n\n> åå­—å¯ä»¥è‡ªå·±å–ï¼Œä½†æ˜¯ä¸ºäº†è§„èŒƒï¼Œæœ€å¥½æ˜¯ `babel-plugin-` å¼€å¤´\n\næŽ¥ç€è¿›å…¥ `babel-plugin-sx-accuracy` æ–‡ä»¶å¤¹ï¼Œè¾“å…¥\n\n```js\nnpm init\nnpm i rollup @rollup/plugin-babel -D\nnpm i decimal.js -S\n```\n\n`package.json` ä¸­çš„å†…å®¹ä¸ºï¼š\n\n```js\n\"name\": \"babel-plugin-sx-accuracy\",\n\"version\": \"1.0.20\",\n\"description\": \"\",\n\"main\": \"dist/index.js\",\n\"type\": \"module\",\n    \"scripts\": {\n    \"build\": \"rollup -c\"\n    },\n        \"files\": [\n        \"dist/*\",\n        \"src/*\"\n        ],\n        \"author\": \"\",\n        \"license\": \"ISC\",\n            \"devDependencies\": {\n            \"@rollup/plugin-babel\": \"^6.0.3\",\n            \"rollup\": \"^3.26.2\"\n            },\n                \"dependencies\": {\n                \"decimal.js\": \"^10.4.3\"\n            }\n        }\n```\n\nç„¶åŽåœ¨æ ¹ç›®å½•ä¸‹æ–°å»º `rollup.config.js` æ–‡ä»¶ï¼Œç”¨æ¥é…ç½® rollup æ‰“åŒ…\n\n```js\n// rollup.config.js\nimport babel from '@rollup/plugin-babel';\n\n    export default {\n    input: 'src/index.js',\n        output: {\n        file: 'dist/index.js',\n        format: 'cjs',\n        },\n            plugins: [\n                babel({\n                babelHelpers: 'bundled',\n                }),\n                ],\n                };\n```\n\næœ€åŽæ–°å»º `src/index.js`ï¼Œæˆ‘ä»¬çš„æ’ä»¶é€»è¾‘å°±å†™åœ¨è¿™é‡Œ\n\n![image.png](/images/jueJin/69a02d1101a8486.png)\n\n### ä»€ä¹ˆæ˜¯æŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰ï¼Ÿ\n\næˆ‘ä»¬å¯ä»¥å€ŸåŠ©ä¸€ä¸ªç½‘ç«™ï¼Œæ¥ä¸€ç¹æŠ½è±¡è¯­æ³•æ ‘çš„çœŸå®¹~ [astexplorer.net/](https://link.juejin.cn?target=https%3A%2F%2Fastexplorer.net%2F \"https://astexplorer.net/\")\n\n![image.png](/images/jueJin/8769fc1066b2444.png)\n\nè¿™é‡Œæˆ‘ä»¬å¯ä»¥è®°ä½å‡ ä¸ªç‚¹\n\n*   æ¯ä¸€ä¸ªä»£ç ç‰‡æ®µéƒ½æœ‰å±žäºŽè‡ªå·±çš„èŠ‚ç‚¹ç±»åž‹\n*   ä»£ç æœ€å¤–å±‚çš„èŠ‚ç‚¹ç±»åž‹ä¸º `Program`\n*   åƒ `0.1+0.2` è¿™ç§è¡¨è¾¾å¼ï¼ŒèŠ‚ç‚¹ç±»åž‹ä¸º `BinaryExpression`\n*   `BinaryExpression`èŠ‚ç‚¹é‡Œä¼šæœ‰å‡ ä¸ªé‡è¦çš„ä¸œè¥¿\n    *   operaorï¼šè¿ç®—ç¬¦å·\n    *   leftï¼šå·¦è¾¹çš„æ•°å­—\n    *   rightï¼šå³è¾¹çš„æ•°å­—\n\nå…¶å®žæŠ½è±¡è¯­æ³•æ ‘çš„èŠ‚ç‚¹ç±»åž‹æœ‰å¾ˆå¤šç§ï¼Œæˆ‘åˆ—ä¸¾ä¸€äº›ï¼š\n\n*   æ ‡è¯†ç¬¦ï¼ˆIdentifierï¼‰ï¼šè¡¨ç¤ºå˜é‡ã€å‡½æ•°åç­‰æ ‡è¯†ç¬¦çš„èŠ‚ç‚¹\n*   å­—é¢é‡ï¼ˆLiteralï¼‰ï¼šè¡¨ç¤ºå­—é¢é‡å€¼ï¼Œå¦‚å­—ç¬¦ä¸²ã€æ•°å­—ã€å¸ƒå°”å€¼ç­‰\n*   è¡¨è¾¾å¼è¯­å¥ï¼ˆExpressionStatementï¼‰ï¼šè¡¨ç¤ºåŒ…å«è¡¨è¾¾å¼çš„è¯­å¥èŠ‚ç‚¹\n*   èµ‹å€¼è¡¨è¾¾å¼ï¼ˆAssignmentExpressionï¼‰ï¼šè¡¨ç¤ºèµ‹å€¼æ“ä½œçš„è¡¨è¾¾å¼èŠ‚ç‚¹ï¼Œå¦‚Â `x = 5`\n*   äºŒå…ƒè¡¨è¾¾å¼ï¼ˆBinaryExpressionï¼‰ï¼šè¡¨ç¤ºåŒ…å«äºŒå…ƒæ“ä½œç¬¦çš„è¡¨è¾¾å¼èŠ‚ç‚¹ï¼Œå¦‚Â `x + y`\n*   ä¸€å…ƒè¡¨è¾¾å¼ï¼ˆUnaryExpressionï¼‰ï¼šè¡¨ç¤ºåŒ…å«ä¸€å…ƒæ“ä½œç¬¦çš„è¡¨è¾¾å¼èŠ‚ç‚¹ï¼Œå¦‚Â `-x`\n*   å‡½æ•°å£°æ˜Žï¼ˆFunctionDeclarationï¼‰ï¼šè¡¨ç¤ºå‡½æ•°å£°æ˜Žçš„èŠ‚ç‚¹ï¼ŒåŒ…æ‹¬å‡½æ•°åã€å‚æ•°å’Œå‡½æ•°ä½“\n*   å˜é‡å£°æ˜Žï¼ˆVariableDeclarationï¼‰ï¼šè¡¨ç¤ºå˜é‡å£°æ˜Žçš„èŠ‚ç‚¹ï¼ŒåŒ…å«å˜é‡åå’Œå¯é€‰çš„åˆå§‹å€¼\n*   æ¡ä»¶è¯­å¥ï¼ˆIfStatementï¼‰ï¼šè¡¨ç¤º If æ¡ä»¶è¯­å¥çš„èŠ‚ç‚¹ï¼ŒåŒ…æ‹¬æ¡ä»¶è¡¨è¾¾å¼ã€if åˆ†æ”¯å’Œå¯é€‰çš„ else åˆ†æ”¯\n*   å¾ªçŽ¯è¯­å¥ï¼ˆWhileStatementã€ForStatementï¼‰ï¼šè¡¨ç¤ºå¾ªçŽ¯è¯­å¥çš„èŠ‚ç‚¹ï¼Œåˆ†åˆ«ä»£è¡¨ While å¾ªçŽ¯å’Œ For å¾ªçŽ¯\n*   å¯¹è±¡å­—é¢é‡ï¼ˆObjectLiteralï¼‰ï¼šè¡¨ç¤ºå¯¹è±¡å­—é¢é‡çš„èŠ‚ç‚¹ï¼ŒåŒ…å«å¯¹è±¡å±žæ€§å’Œå±žæ€§å€¼\n*   æ•°ç»„å­—é¢é‡ï¼ˆArrayLiteralï¼‰ï¼šè¡¨ç¤ºæ•°ç»„å­—é¢é‡çš„èŠ‚ç‚¹ï¼ŒåŒ…å«æ•°ç»„å…ƒç´ \n*   å‡½æ•°è°ƒç”¨ï¼ˆCallExpressionï¼‰ï¼šè¡¨ç¤ºå‡½æ•°è°ƒç”¨çš„èŠ‚ç‚¹ï¼ŒåŒ…å«è°ƒç”¨çš„å‡½æ•°åå’Œå‚æ•°åˆ—è¡¨\n*   è¿”å›žè¯­å¥ï¼ˆReturnStatementï¼‰ï¼šè¡¨ç¤ºè¿”å›žè¯­å¥çš„èŠ‚ç‚¹ï¼ŒåŒ…å«è¿”å›žçš„è¡¨è¾¾å¼\n\nå½“ç„¶å¤§å®¶çŽ°é˜¶æ®µä¸éœ€è¦åŽ»è®°ï¼Œå¤§å®¶åªéœ€è¦è®°å¾—è¿™ä¸¤ä¸ªç±»åž‹å°±è¡Œäº†ï¼š\n\n*   ä»£ç æœ€å¤–å±‚çš„èŠ‚ç‚¹ç±»åž‹ä¸º `Program`\n*   åƒ `0.1+0.2` è¿™ç§è¡¨è¾¾å¼ï¼ŒèŠ‚ç‚¹ç±»åž‹ä¸º `BinaryExpression`\n\nå…¶å®žï¼Œæˆ‘ä»¬å¹³æ—¶åœ¨ webpack å¼€å‘æ—¶ä¼šæŽ¥è§¦åˆ°ä¸€ç³»åˆ—çš„æ’ä»¶ï¼Œä»–ä»¬çš„åŠŸèƒ½æ¯”å¦‚æœ‰\n\n*   åŽ»é™¤ console.log\n*   åŽ‹ç¼©ä»£ç \n*   åŽ»é™¤æ³¨é‡Š\n\nå…¶å®žä»–ä»¬çš„åŽŸç†æ•´ä½“ä¸Šéƒ½æ˜¯ä¸€è‡´çš„ï¼Œåˆ†ä¸ºä¸‰æ­¥ï¼š\n\n*   ç¬¬ä¸€æ­¥ï¼šå°†ä»£ç è½¬æ¢æˆæŠ½è±¡è¯­æ³•æ ‘\n*   ç¬¬äºŒæ­¥ï¼šä½¿ç”¨ babel ä¸ºæˆ‘ä»¬æä¾›çš„æ–¹æ³•ï¼Œå¯¹è¯­æ³•æ ‘è¿›è¡Œå¢žåˆ æ”¹æŸ¥\n*   ç¬¬ä¸‰æ­¥ï¼šå°†å¤„ç†åŽçš„è¯­æ³•æ ‘é‡æ–°è½¬æ¢æˆä»£ç \n\nè€Œæˆ‘ä»¬å°†è¦å¼€å‘çš„æ’ä»¶ï¼Œä¹Ÿæ˜¯ç”¨åˆ°è¿™ä¸ªè¿‡ç¨‹ï¼Œä½†æ˜¯ç¬¬ä¸€æ­¥å’Œç¬¬ä¸‰æ­¥æˆ‘ä»¬ä¸éœ€è¦ç®¡ï¼Œæˆ‘ä»¬åªéœ€è¦å®Œæˆç¬¬äºŒæ­¥ä¸­çš„å¢žåˆ æ”¹æŸ¥æ“ä½œå³å¯~\n\n> æ³¨æ„ç‚¹ï¼šåœ¨ç¬¬äºŒæ­¥ä¸­ï¼Œbabel ä¼šå¯¹æŠ½è±¡è¯­æ³•æ ‘è¿›è¡Œæ·±åº¦éåŽ†ï¼ŒéåŽ†åˆ°ç›®æ ‡èŠ‚ç‚¹åŽï¼Œåˆä¼šé‡æ–°å›žåˆ°ä¸Šå±‚èŠ‚ç‚¹åŽ»é‡æ–°éåŽ†ä¸‹ä¸€ä¸ªç›®æ ‡èŠ‚ç‚¹ï¼Œæ‰€ä»¥ä¸€ä¸ªèŠ‚ç‚¹ä¼šè¢«éåŽ†ä¸¤æ¬¡ï¼Œä¸€æ¥ä¸€å›ž è¿›åŽ»æ˜¯ `enter` å›žåŽ»æ˜¯ `exit`\n\n![image.png](/images/jueJin/6ccb757b3b264aa.png)\n\n### æ’ä»¶åŸºæœ¬ä»£ç ç»“æž„\n\n> ä¸‹æ–‡ä½¿ç”¨ `AST` æ¥è¡¨è¾¾æŠ½è±¡è¯­æ³•æ ‘\n\n```js\n    export default function ({ template: template, types: t }) {\n    \n        return {\n            visitor: {\n                Program: {\n                    exit: function (path) {\n                }\n                },\n                    BinaryExpression: {\n                        exit: function (path) {\n                    }\n                }\n            }\n        }\n    }\n```\n\nå¼€å‘ä¸€ä¸ª babel æ’ä»¶ï¼Œæ–‡ä»¶å¿…é¡»é»˜è®¤è¿”å›žä¸€ä¸ªå‡½æ•°ï¼ŒæŽ¥æ”¶ä¸€ä¸ªå¯¹è±¡å‚æ•°ï¼Œé‡Œé¢æœ‰ä¸ªå±žæ€§æˆ‘ä»¬éœ€è¦ç”¨åˆ°\n\n*   **templateï¼š** æ˜¯`@babel/template`çš„ä¸€ä¸ªæ–¹æ³•ï¼Œä»–èƒ½ä½¿ç”¨æ¨¡æ¿çš„æ–¹å¼ç”ŸæˆASTèŠ‚ç‚¹\n\nå‡½æ•°å†…éƒ¨çš„ä¸œè¥¿ï¼Œæˆ‘ä»¬ä¹Ÿä»‹ç»ä¸‹\n\n*   **vistorï¼š** ä½ å¯ä»¥ç†è§£ä¸ºä¿®æ”¹ASTèŠ‚ç‚¹çš„`å…¥å£`\n*   **Programã€BinaryExpressionï¼š** ä½ éœ€è¦ä¿®æ”¹çš„ASTèŠ‚ç‚¹ç±»åž‹\n*   **exitï¼š** å°±æ˜¯åˆšåˆšè¯´çš„ `ä¸€æ¥ä¸€å›ž` ä¸­çš„ï¼Œ`å›ž`\n*   **pathï¼š** å°±æ˜¯è¢«éåŽ†åˆ°çš„ASTèŠ‚ç‚¹å¯¹è±¡\n\n### æ’ä»¶å®Œå…¨å®žçŽ°\n\n```js\n// å®šä¹‰æž„é€ å‡½æ•°çš„åç§°å¸¸é‡\nconst DECIMAL_FUN_NAME = 'Decimal'\n// è¿ç®—ç¬¦å·æ˜ å°„ decimal.js çš„å››ä¸ªæ–¹æ³•\n    const OPERATIONS_MAP = {\n    '+': 'add',\n    '-': 'sub',\n    '*': 'mul',\n    '/': 'div'\n}\n// è¿ç®—ç¬¦å·æ•°ç»„\nconst OPERATIONS = Object.keys(OPERATIONS_MAP)\n\n    export default function ({ template: template }) {\n    \n    // require decimal.js çš„èŠ‚ç‚¹æ¨¡æ¿\n    const requireDecimalTemp = template(`const ${DECIMAL_FUN_NAME}=require('decimal.js')`);\n    // å°†è¿ç®—è¡¨è¾¾å¼è½¬æ¢ä¸ºdecimalå‡½æ•°çš„èŠ‚ç‚¹æ¨¡æ¿\n    const operationTemp = template(`new ${DECIMAL_FUN_NAME}(LEFT).OPERATION(RIGHT).toNumber()`);\n    \n        return {\n            visitor: {\n                Program: {\n                    exit: function (path) {\n                    // è°ƒç”¨æ–¹æ³•ï¼Œå¾€å­èŠ‚ç‚¹body\n                    // ä¸­æ’å…¥ const Decimal = require('decimal.js')\n                    // è¡¨è¾¾å¼\n                    path.unshiftContainer(\"body\",\n                    requireDecimalTemp())\n                }\n                },\n                    BinaryExpression: {\n                        exit: function (path) {\n                        const operator = path.node.operator;\n                            if (OPERATIONS.includes(operator)) {\n                            // è°ƒç”¨æ–¹æ³•æ›¿æ¢èŠ‚ç‚¹\n                            path.replaceWith(\n                            // ä¼ å…¥ operator left right\n                                operationTemp({\n                                LEFT: path.node.left,\n                                RIGHT: path.node.right,\n                            OPERATION: OPERATIONS_MAP[operator]\n                            })\n                            )\n                        }\n                    }\n                }\n            }\n        }\n    }\n```\n\n### æ‰“åŒ… & å‘å¸ƒ NPM\n\nå½“å¼€å‘å®ŒæˆåŽï¼Œæˆ‘ä»¬å…ˆ `npm run build`è¿›è¡Œæ‰“åŒ…\n\nç„¶åŽè¿è¡Œ `npm publish` å‘å¸ƒåˆ° NPM ä¸Š\n\n![image.png](/images/jueJin/728b249a4b9045e.png)\n\n### é¡¹ç›®ä½¿ç”¨\n\né¦–å…ˆå®‰è£… `babel-plugin-sx-accuracy`\n\n```js\nnpm i babel-plugin-sx-accuracy\n```\n\nåªéœ€è¦åœ¨é¡¹ç›®ä¸­çš„ `.babelrc` æˆ–è€… `babel.config.js` ä¸­åŠ å…¥ `babel-plugin-sx-accuracy`å³å¯\n\n```js\n    {\n    \"presets\": [\"@babel/preset-env\"],\n\"plugins\": [\"babel-plugin-sx-accuracy\"]\n}\n```\n\næˆ‘ä»¬æ¥è¯•è¯•ï¼Œä¸€å¼€å§‹ä»£ç æ˜¯\n\n```js\nconsole.log(0.1 + 0.2)\nconsole.log(0.3 - 0.1)\nconsole.log(0.2 * 0.1)\nconsole.log(0.3 / 0.1)\n```\n\næ‰“åŒ…åŽæˆ‘ä»¬çœ‹çœ‹äº§ç‰©ï¼Œå¹¶ä¸”è¾“å‡ºçš„ä¹Ÿéƒ½æ˜¯æ²¡æœ‰ç²¾åº¦ä¸¢å¤±çš„ç»“æžœï¼ï¼ï¼\n\n![image.png](/images/jueJin/9eb02b8b0a8f413.png)\n\nç»“è¯­ & åŠ å­¦ä¹ ç¾¤ & æ‘¸é±¼ç¾¤\n---------------\n\næˆ‘æ˜¯æž—ä¸‰å¿ƒ\n\n*   ä¸€ä¸ªå¾…è¿‡**å°åž‹toGåž‹å¤–åŒ…å…¬å¸ã€å¤§åž‹å¤–åŒ…å…¬å¸ã€å°å…¬å¸ã€æ½œåŠ›åž‹åˆ›ä¸šå…¬å¸ã€å¤§å…¬å¸**çš„ä½œæ­»åž‹å‰ç«¯é€‰æ‰‹ï¼›\n*   ä¸€ä¸ªåå‰ç«¯çš„å…¨å¹²å·¥ç¨‹å¸ˆï¼›\n*   ä¸€ä¸ªä¸æ­£ç»çš„æŽ˜é‡‘ä½œè€…ï¼›\n*   ä¸€ä¸ªé€—æ¯”çš„Bç«™upä¸»ï¼›\n*   ä¸€ä¸ªä¸å¸…çš„å°çº¢ä¹¦åšä¸»ï¼›\n*   ä¸€ä¸ªå–œæ¬¢æ‰“é“çš„ç¯®çƒèœé¸Ÿï¼›\n*   ä¸€ä¸ªå–œæ¬¢åŽ†å²çš„ä¹å‘³å°‘å¹´ï¼›\n*   ä¸€ä¸ªå–œæ¬¢rapçš„äº”éŸ³ä¸å…¨å¼±é¸¡\n\nå¦‚æžœä½ æƒ³ä¸€èµ·å­¦ä¹ å‰ç«¯ï¼Œä¸€èµ·æ‘¸é±¼ï¼Œä¸€èµ·ç ”ç©¶ç®€åŽ†ä¼˜åŒ–ï¼Œä¸€èµ·ç ”ç©¶é¢è¯•è¿›æ­¥ï¼Œä¸€èµ·äº¤æµåŽ†å²éŸ³ä¹ç¯®çƒrapï¼Œå¯ä»¥æ¥ä¿ºçš„æ‘¸é±¼å­¦ä¹ ç¾¤å“ˆå“ˆï¼Œç‚¹è¿™ä¸ªï¼Œæœ‰7000å¤šåå‰ç«¯å°ä¼™ä¼´åœ¨ç­‰ç€ä¸€èµ·å­¦ä¹ å“¦ -->Â [æ‘¸é±¼æ²¸ç‚¹](https://juejin.cn/pin/7035153948126216206 \"https://juejin.cn/pin/7035153948126216206\")\n\n![image.png](/images/jueJin/d2416f4483ff44f.png)",
	"selfDefined": "likes:94,comments:30,collects:125,likes:7295"
}