---
author: "ç¨‹åºå‘˜æ™“å‡¡"
title: "SpringAIå¥¹æ¥äº†ï¼ŒçœŸçš„æ¥äº†"
date: 2024-04-15
description: "è‡ªä»ChatGPTç«äº†ä¹‹åï¼Œå„ç§äº§å“éƒ½åœ¨ä¸åœçš„æ‹¥æŠ±AIï¼Œåœ¨å„è‡ªåœºæ™¯ä¸­æ¥å…¥AIï¼Œå›½å†…å¤–å„ç§å¤§æ¨¡å‹å±‚å‡ºä¸ç©·ã€‚å¥½åƒæœ‰ç‚¹æ‰¯è¿œäº†ï¼Œè¨€å½’æ­£ä¼ ï¼Œä»Šå¤©æˆ‘ä»¬è¦è¯´çš„æ˜¯SpringAI"
tags: ["åç«¯"]
ShowReadingTime: "é˜…è¯»4åˆ†é’Ÿ"
weight: 880
---
### å†™åœ¨å‰é¢

è‡ªä»`ChatGPT`ç«äº†ä¹‹åï¼Œå„ç§äº§å“éƒ½åœ¨ä¸åœçš„æ‹¥æŠ±AIï¼Œåœ¨å„è‡ªåœºæ™¯ä¸­æ¥å…¥AIï¼Œå›½å†…å¤–å„ç§å¤§æ¨¡å‹å±‚å‡ºä¸ç©·ã€‚

å¥½åƒæœ‰ç‚¹æ‰¯è¿œäº†ï¼Œè¨€å½’æ­£ä¼ ï¼Œä»Šå¤©æˆ‘ä»¬è¦è¯´çš„æ˜¯SpringAIï¼Œå¤§å®¶åœ¨é€›Spring å®˜ç½‘ï¼ˆ[spring.io/ï¼‰](https://link.juejin.cn?target=https%3A%2F%2Fspring.io%2F%25EF%25BC%2589 "https://spring.io/%EF%BC%89") åº”è¯¥å‘ç°äº†ï¼Œåœ¨å®˜ç½‘ä¸­å¤šäº†`SpringAI` æ¨¡å—

![springAI](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/72ec3c34ee224b60993e82ff56e082d3~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1702&h=979&s=192651&e=png&b=ffffff)

### ä¸€ã€SpringAI ç®€ä»‹

æˆ‘ä»¬æ¥çœ‹çœ‹å®˜ç½‘æ˜¯æ€ä¹ˆä»‹ç»çš„

Spring AI is an application framework for AI engineering. Its goal is to apply to the AI domain Spring ecosystem design principles such as portability and modular design and promote using POJOs as the building blocks of an application to the AI domain.

Portable API support across AI providers for Chat, text-to-image, and Embedding models. Both synchronous and stream API options are supported. Dropping down to access model-specific features is also supported.

ä¸Šé¢ç¿»è¯‘è¿‡æ¥å°±æ˜¯

Spring AIæ˜¯ä¸€ä¸ªé¢å‘AIå·¥ç¨‹çš„åº”ç”¨æ¡†æ¶ã€‚å…¶ç›®æ ‡æ˜¯å°†å¯ç§»æ¤æ€§å’Œæ¨¡å—åŒ–è®¾è®¡ç­‰è®¾è®¡åŸåˆ™åº”ç”¨äºAIé¢†åŸŸçš„Springç”Ÿæ€ç³»ç»Ÿï¼Œå¹¶å°†POJOä½œä¸ºåº”ç”¨ç¨‹åºçš„æ„å»ºå—æ¨å¹¿åˆ°AIé¢†åŸŸã€‚

è·¨AIæä¾›å•†çš„ä¾¿æºAPIæ”¯æŒèŠå¤©ã€æ–‡æœ¬åˆ°å›¾åƒå’ŒåµŒå…¥æ¨¡å‹ã€‚åŒæ—¶æ”¯æŒåŒæ­¥å’ŒæµAPIé€‰é¡¹ã€‚è¿˜æ”¯æŒå„ç§å®šåˆ¶çš„åŠŸèƒ½ã€‚

æ€»çš„æ¥è¯´å°±æ˜¯ï¼šSpringå‡ºäº†ä¸€ä¸ªAIæ¡†æ¶ï¼Œå¸®åŠ©æˆ‘ä»¬å¿«é€Ÿè°ƒç”¨AIï¼Œä»è€Œå®ç°å„ç§åŠŸèƒ½åœºæ™¯ã€‚

åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­æˆ‘ä»¬æœ‰è¯´è¿‡Javaæ€ä¹ˆè°ƒç”¨OpenAIï¼Œ **ä¼ é€é—¨**ğŸ‘‰[Javaç¨‹åºæ¥å…¥ChatGPT](https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FwZSAKtauOzXK1AZxL_nekg "https://mp.weixin.qq.com/s/wZSAKtauOzXK1AZxL_nekg") ğŸ‘ˆ

ä»Šå¤©æˆ‘ä»¬å°±æ¥çœ‹çœ‹æ€ä¹ˆä½¿ç”¨Spring è‡ªå·±æä¾›çš„æ¡†æ¶è°ƒç”¨AI

### äºŒã€å„ç§æ¨¡å‹

> è¿™é‡Œåˆ—ä¸¾å‡ºäº†æ”¯æŒçš„å„ç§å‚å•†çš„å„ç§æ¨¡å‹æ¥å…¥ï¼Œæœ‰æˆ‘ä»¬ç†Ÿæ‚‰çš„Amazonã€Google ç­‰æ¨¡å‹ï¼Œä½†ç›®å‰è¿˜ä¸æ”¯æŒå›½å†…çš„ä»»ä½•ä¸€ç§æ¨¡å‹

#### 2.1 Chat Models èŠå¤©æ¨¡å‹

![èŠå¤©æ¨¡å‹](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b79cb03c83eb4b0f8d8a769726b2cbd6~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=899&h=482&s=35369&e=png&b=ffffff)

#### 2.2 Text-to-image Models æ–‡ç”Ÿå›¾æ¨¡å‹

![æ–‡ç”Ÿå›¾æ¨¡å‹](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/19885c6c71144418aadfdd40f1989c3f~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=364&h=110&s=4605&e=png&b=ffffff)

#### 2.3 Transcription (audio to text) Models éŸ³é¢‘æ–‡æœ¬äº’è½¬æ¨¡å‹

![éŸ³é¢‘æ¨¡å‹](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/032f852508d34989bf410f1ff528e9b8~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=397&h=65&s=1637&e=png&b=ffffff)

#### 2.4 Embedding Models åµŒå…¥æ¨¡å‹

![åµŒå…¥æ¨¡å‹](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/86160ba787164d97897a65b7bddd1c1a~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=456&h=374&s=15847&e=png&b=ffffff)

### ä¸‰ã€æ¥å…¥å‡†å¤‡

æˆ‘ä»¬è¿™é‡Œä»¥æ¥å…¥`OpenAI` ä¸ºä¾‹ï¼Œçœ‹çœ‹éœ€è¦åšå“ªäº›å‡†å¤‡

â‘  é¦–å…ˆæˆ‘ä»¬å¾—èƒ½é­”æ³•ä¸Šç½‘

â‘¡ æ³¨å†Œè¿‡`OpenAI`è´¦å·ï¼Œå¹¶åˆ›å»ºäº†`API keys`

è¿˜ä¸çŸ¥é“æ€ä¹ˆæ³¨å†Œçš„å¯ä»¥ç¿»ä¸€ç¿»ä¹‹å‰çš„æ–‡ç« ï¼Œ **ä¼ é€é—¨** ğŸ‘‰ [å¦‚ä½•æ³¨å†ŒOpenAI](https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FwZSAKtauOzXK1AZxL_nekg "https://mp.weixin.qq.com/s/wZSAKtauOzXK1AZxL_nekg") ğŸ‘ˆ

**æ³¨ï¼š** ä¹‹å‰æˆ‘ä»¬æ³¨å†Œç”Ÿæˆçš„`API keys` å¯èƒ½è¿‡æœŸäº†ï¼Œæœ‰å¯èƒ½éœ€è¦é‡æ–°åˆ›å»ºä¸€ä¸ª

![åˆ›å»ºAPI key](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fdc50f3e45b64a65839b34f469705754~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1804&h=680&s=82671&e=png&b=fefefe)

è¦æƒ³æ¥ä¸‹æ¥è°ƒç”¨æˆåŠŸï¼Œä¸Šé¢ä¸¤æ­¥ç¼ºä¸€ä¸å¯

### å››ã€åˆ›å»ºspringbooté¡¹ç›®

â‘  `Spring Initializr` åˆ›å»ºé¡¹ç›®

**æ³¨ï¼š**

*   Server URL è¿™é‡Œä¸€å®šè¦ å¡«[start.spring.io/](https://link.juejin.cn?target=https%3A%2F%2Fstart.spring.io%2F "https://start.spring.io/") ï¼Œè€Œä¸æ˜¯ [start.aliyun.com/](https://link.juejin.cn?target=https%3A%2F%2Fstart.aliyun.com%2F "https://start.aliyun.com/") é˜¿é‡Œäº‘æš‚æ—¶è¿˜ä¸æ”¯æŒ
*   jdkä¸€å®šè¦é€‰æ‹©17åŠä»¥ä¸Šç‰ˆæœ¬

![åˆ›å»ºspringbooté¡¹ç›®](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1763675a1be54a5ba45f4eded9f78b99~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=917&h=774&s=53935&e=png&b=3d4042)

â‘¡ é€‰æ‹©æ”¯æŒæ¨¡å—

å¦‚æœä¸Šé¢ä¸€æ­¥é€‰æ‹©æ­£ç¡®çš„è¯ï¼Œè¿™ä¸€æ­¥æˆ‘ä»¬ä¼šçœ‹åˆ°ä¸€ä¸ªAIæ¨¡å—ï¼Œè¿™é‡Œé€‰æ‹©`OpenAI` æ¨¡å‹å’ŒSpring Webå³å¯ï¼Œ

å¦‚æœè¿™ä¸€æ­¥æ²¡çœ‹åˆ°AIæ¨¡å—çš„ï¼Œè¯·returnåˆ°ä¸Šä¸€æ­¥

![æ¨¡å—é€‰æ‹©](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/119b37105ccc46ffafddc11da5b4cc4d~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=901&h=774&s=47275&e=png&b=3c3f41)

### äº”ã€æ‰€éœ€ä¾èµ–

æŒ‰ç…§ä¸Šé¢æ·»åŠ æ¨¡å—ä¹‹åï¼Œideaä¼šé»˜è®¤ç»™æˆ‘ä»¬æ·»åŠ å¦‚ä¸‹ä¾èµ–ï¼Œå½“ç„¶äº†ä¹Ÿè¿˜ç”¨åˆ°å…¶ä»–ä¾èµ–ï¼Œè¿™é‡Œå°±ä¸éƒ½è´´å‡ºæ¥äº†

xml

 ä»£ç è§£è¯»

å¤åˆ¶ä»£ç 

`<dependency>     <groupId>org.springframework.ai</groupId>     <artifactId>spring-ai-openai-spring-boot-starter</artifactId> </dependency>`

å¦‚æœä½ ç”¨çš„æ˜¯`Gradle` æ„å»ºå·¥å…·ï¼Œé‚£å°±æ˜¯

xml

 ä»£ç è§£è¯»

å¤åˆ¶ä»£ç 

`dependencies {     implementation 'org.springframework.ai:spring-ai-openai-spring-boot-starter' }`

**æ³¨ï¼š**

æ·»åŠ ä¾èµ–ä¹‹åï¼Œå¦‚æœæˆ‘ä»¬é¡¹ç›®é…ç½®çš„æ˜¯é˜¿é‡Œäº‘é•œåƒçš„è¯ï¼Œéœ€è¦ä¿®æ”¹æˆå¦‚ä¸‹ä»“åº“åœ°å€ï¼Œå¦åˆ™ä¾èµ–ä¸‹è½½ä¸ä¸‹æ¥

xml

 ä»£ç è§£è¯»

å¤åˆ¶ä»£ç 

`<repositories>     <repository>         <id>spring-milestones</id>         <name>Spring Milestones</name>         <url>https://repo.spring.io/milestone</url>         <snapshots>             <enabled>false</enabled>         </snapshots>     </repository> </repositories>`

### å…­ã€ä¿®æ”¹é…ç½®æ–‡ä»¶

`application.properties` æˆ–è€…`application.yml`é…ç½®æ–‡ä»¶

properties

 ä»£ç è§£è¯»

å¤åˆ¶ä»£ç 

`spring.ai.openai.api-key=å‰é¢æ­¥éª¤åˆ›å»ºçš„apikey spring.ai.openai.chat.options.model=gpt-3.5-turbo spring.ai.openai.chat.options.temperature=0.7`

æˆ–è€…

yml

 ä»£ç è§£è¯»

å¤åˆ¶ä»£ç 

`spring:   ai:     openai:       api-key: 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       chat:         options:           model: gpt-3.5-turbo           temperature: 0.7`

*   `api-key` : å‰é¢æ­¥éª¤åˆ›å»ºçš„`apikey`
*   `chat.options.model`: `gpt`æ¨¡å‹ ,ä¸Šé¢æˆ‘ä»¬é…ç½®çš„æ˜¯3.5 æ¨¡å‹
*   `chat.options.temperature`:`Spring AI`ä¸PTæ¨¡å‹äº¤äº’æ—¶ï¼Œç‰¹åˆ«æ˜¯åœ¨èŠå¤©æˆ–æ–‡æœ¬ç”Ÿæˆåœºæ™¯ä¸‹ï¼Œæ¨¡å‹ç”Ÿæˆæ–‡æœ¬æ—¶çš„éšæœºæ€§ç¨‹åº¦ä¸º0.7

### ä¸ƒã€ä»£ç ç¼–å†™

è¿™é‡Œæˆ‘ä»¬åªæ˜¯ç®€å•æµ‹è¯•ä¸€ä¸‹ï¼Œæ‰€ä»¥ä»£ç éƒ½å†™åœ¨äº†`controller` å±‚é‡Œ

java

 ä»£ç è§£è¯»

å¤åˆ¶ä»£ç 

`@RestController public class ChatController {     private final OpenAiChatClient chatClient;     @Autowired     public ChatController(OpenAiChatClient chatClient) {         this.chatClient = chatClient;     }     @GetMapping("/ai/generate")     public Map  generate(@RequestParam(value = "message", defaultValue = "Tell me a joke") String message) {         return Map.of("generation", chatClient.call(message));     }     @GetMapping("/ai/generateStream")     public Flux<ChatResponse> generateStream(@RequestParam(value = "message", defaultValue = "Tell me a joke") String message) {         Prompt prompt = new Prompt(new UserMessage(message));         return chatClient.stream(prompt);     } }`

ä»£ç è§£é‡Šï¼šä¸Šé¢ä»£ç æä¾›äº†`generate`å’Œ`generateStream` ä¸¤ä¸ªæ–¹æ³•æ¥æ”¶å‰ç«¯ä¼ æ¥çš„å‚æ•°`message`,ç„¶åå°†`message`ä½œä¸º`prompt` ï¼ˆå¦‚æœä½ è¿˜ä¸çŸ¥é“`prompt`å¯ä»¥å»ç™¾åº¦ä¸€ä¸‹ï¼‰å»è°ƒç”¨å°è£…å¥½çš„å¤§æ¨¡å‹ï¼Œå¹¶å°†å¤§æ¨¡å‹çš„ç»“æœè¿”å›å»ã€‚

### å…«ã€Spring AIå‡½æ•°è°ƒç”¨æµç¨‹

![AIå‡½æ•°è°ƒç”¨æµç¨‹1](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/49350b34b4964c229f8e9db70ee756cf~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1131&h=884&s=117823&e=jpg&b=fcfcfc)

![AIå‡½æ•°è°ƒç”¨æµç¨‹2](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5994100e43fc4affa42a3e5d5dbe6dab~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1117&h=895&s=176558&e=jpg&b=fbfbfb)

### ä¹ã€å…¶ä»–æ¨¡å‹è°ƒç”¨

ä¸Šé¢ä¾‹å­ä¸­æˆ‘ä»¬åªæ˜¯åˆ—ä¸¾å‡º`OpenAI` æ¨¡å‹è°ƒç”¨æ–¹å¼ï¼Œå…¶ä»–æ¨¡å‹å¤§å®¶å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼Œæ–‡æ¡£å†™çš„ä¹Ÿéå¸¸è¯¦ç»†

å‡è®¾æˆ‘ä»¬æƒ³ä½¿ç”¨äºšé©¬é€Šçš„å¤§æ¨¡å‹ï¼Œå¯ä»¥åˆ°[docs.spring.io/spring-ai/râ€¦](https://link.juejin.cn?target=https%3A%2F%2Fdocs.spring.io%2Fspring-ai%2Freference%2Fapi%2Fbedrock-chat.html "https://docs.spring.io/spring-ai/reference/api/bedrock-chat.html") æŸ¥çœ‹æ–‡æ¡£

![å…¶ä»–æ¨¡å‹è°ƒç”¨](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/27646e5c060d4085b931c205965f44dc~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1867&h=949&s=182794&e=png&b=1e2226)

æœ¬æœŸå†…å®¹åˆ°è¿™å„¿å°±ç»“æŸäº†ï¼Œå¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ©

æˆ‘ä»¬ä¸‹æœŸå†è§ (â—'â—¡'â—)