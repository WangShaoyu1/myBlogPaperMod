---
author: "æ‹çŒ«deå°éƒ­"
title: "ReactNative0.76ï¼ŒNewArchitectureå°†æˆä¸ºé»˜è®¤æ¨¡å¼ï¼Œå…¨æ–°çš„RNæ¥äº†"
date: 2024-09-09
description: "å…³äºReactNativeçš„NewArchitectureæ¦‚å¿µï¼Œæœ€æ—©åº”è¯¥æ˜¯ä»2018å¹´RNå›¢é˜Ÿå†³å®šé‡å†™å¤§é‡åº•å±‚å®ç°å¼€å§‹ï¼Œå› ä¸ºé‚£æ—¶å€™ReactNativeé¢ä¸´å„ç§ç»“æ„é—®é¢˜å’Œæ€§èƒ½"
tags: ["å‰ç«¯","Android","ReactNative"]
ShowReadingTime: "é˜…è¯»11åˆ†é’Ÿ"
weight: 666
---
å…³äº React Native çš„ New Architecture æ¦‚å¿µï¼Œæœ€æ—©åº”è¯¥æ˜¯ä» [2018 å¹´ RN å›¢é˜Ÿå†³å®šé‡å†™å¤§é‡åº•å±‚å®ç°](https://link.juejin.cn?target=https%3A%2F%2Fwww.oschina.net%2Fnews%2F97129%2Fstate-of-react-native-2018 "https://www.oschina.net/news/97129/state-of-react-native-2018")å¼€å§‹ï¼Œå› ä¸ºé‚£æ—¶å€™ React Native é¢ä¸´å„ç§ç»“æ„é—®é¢˜å’Œæ€§èƒ½ç“¶é¢ˆï¼Œæœ€ç»ˆè¿«ä½¿ RN å›¢é˜Ÿå¼€å§‹è¿›è¡Œé‡æ„ã€‚

è€Œä» [React Native 0.68](https://link.juejin.cn?target=https%3A%2F%2Freactnative.dev%2Fblog%2F2022%2F03%2F30%2Fversion-068%23opting-in-to-the-new-architecture "https://reactnative.dev/blog/2022/03/30/version-068#opting-in-to-the-new-architecture") å¼€å§‹ï¼ŒNew Architecture è¢«ä½œä¸ºå®éªŒæ€§é€‰æ‹©åŠ å…¥é¡¹ç›®ï¼Œä¹‹å 2022 å¹´ RN å›¢é˜Ÿæ­£å¼å‘å¸ƒäº† JSIã€Fabricã€ Turbo Modulesã€Codegen çš„ New Architectureï¼ŒåŒæ—¶å‘å¸ƒçš„è¿˜æœ‰ Hermes JS å¼•æ“ï¼Œåœ¨åŒå¹´ [React Native 0.70 ç‰ˆæœ¬å‘å¸ƒçš„æ—¶å€™ï¼ŒHermes æˆä¸ºäº† RN çš„é»˜è®¤ Engine](https://juejin.cn/post/7140474062211383333 "https://juejin.cn/post/7140474062211383333") ã€‚

**ä½†æ˜¯ç”±äºæ–°æ¶æ„çš„é‡æ„å¯¼è‡´äº†å¤§é‡çš„ break change** ï¼Œæ‰€ä»¥åœ¨æ­¤ä¹‹å RN å›¢é˜Ÿå¼€å§‹åŠªåŠ›æ¨è¿›å’Œè§£å†³å„ç§ç¤¾åŒºæ–°æ¡†æ¶é—®é¢˜ï¼Œè€Œç›´åˆ° 2024 å¹´ï¼Œæ–°æ¡†æ¶æ¨¡å¼åœ¨ React Native å·²ç»è¿‡å¤§è§„æ¨¡éªŒè¯ï¼Œå¹¶ä¸º Meta çš„ç”Ÿäº§åº”ç”¨æä¾›äº†å¤§é‡æ”¯æŒï¼Œ**æ‰€ä»¥ä» 0.76 å¼€å§‹ï¼Œæ•´å¥— New Architecture å®ç°å°†æˆä¸º React Native çš„é»˜è®¤é…ç½®**ã€‚

![](https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8f9a39f22f704446a25403519c10bc1a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&x-expires=1727651044&x-signature=Gb%2FAZLnRUqU4AlduVoNFesjJDFI%3D)

> **è™½ç„¶è¿™ä¹ˆå¤šå¹´è¿‡å» RN è¿˜æ˜¯æ²¡æœ‰å‘å¸ƒ 1.0 è¿™ä¸ªæ¢—ä¾æ—§**ï¼Œä½†æ˜¯ RN ç¡®ç¡®å®å®å·²ç»â€œè„±èƒæ¢éª¨â€ï¼Œå¯ä»¥è¯´ 0.7x å’Œ 0.6x å‡ ä¹éƒ½å¿«ä¸æ˜¯ä¸€ä¸ªé¡¹ç›®ã€‚

æ­£å¦‚ RN å›¢é˜Ÿæ‰€è¯´ï¼š**2024 å¹´æ˜¯å‘æ‰€æœ‰ React Native ç”¨æˆ·æ¨å‡ºæ–°æ¶æ„çš„ä¸€å¹´ï¼Œäº‹å®ä¸Šè¿™ä¹Ÿè¯æ˜äº†ï¼Œä¸€ä¸ªé¡¹ç›®åªè¦å‘å±•æ—¶é—´å¤Ÿé•¿ï¼Œç”¨æˆ·åŸºæ•°å¤Ÿå¤§ï¼Œæœ€ç»ˆéƒ½ä¼šé€šè¿‡é‡æ–°è‡ªç ”æŸäº›èƒ½åŠ›æ¥è§£å†³é—®é¢˜ï¼ŒRN æ˜¯è¿™æ ·ï¼ŒFlutter ä¹Ÿæ˜¯è¿™æ ·**ã€‚

å‰æƒ…æè¦
====

åœ¨ RN ä¸Šæœ€æ—© New Architecture ä¸»è¦å›´ç»•å››ä¸ªæ ¸å¿ƒå’Œä¸€ä¸ªå¼•æ“æ¥å±•å¼€ï¼šJSIï¼ˆJavaScript Interfaceï¼‰ã€Fabric ã€Turbo Modulesã€CodeGen å’Œ Hermes Engineï¼Œè¿™é‡Œæˆ‘ä»¬ç®€å•å›é¡¾ä¸€ä¸‹ä»–ä»¬çš„ä½œç”¨ã€‚

JSI
---

JSI å±äº JavaScript æ¥å£ï¼Œå®ƒæ˜¯ä¸€ä¸ªç»Ÿä¸€çš„è½»é‡çº§é€šç”¨ APIï¼Œç†è®ºä¸Šé€‚ç”¨äºä»»ä½• JavaScript è™šæ‹Ÿæœºï¼Œå¹¶ä¸”å®ƒé‡‡ç”¨ C++ å®ç°ï¼Œè®© JS å¯ä»¥ä½¿ç”¨å®ƒç›´æ¥æ‰§è¡Œæˆ–è€…è°ƒç”¨ Native ä»£ç ï¼Œæ‰€ä»¥å®ƒçš„ä½œç”¨å°±æ˜¯è®© JavaScript æ¥å£ä¸ Engine åˆ†ç¦»ã€‚

> æ‰€ä»¥ JSI çš„å‡ºç°è®© RN å¯ä»¥åˆ‡æ¢ JS å¼•æ“ï¼Œæ¯”å¦‚ `Chakra`ã€`v8`ã€`Hermes` ï¼ŒåŒæ—¶å…è®¸ JS å’Œ Native çº¿ç¨‹ä¹‹é—´çš„åŒæ­¥ç›¸äº’æ‰§è¡Œï¼Œ

JSI ä½œä¸ºæ¥å£ï¼Œ**å®ƒå…è®¸ JS ä¿å­˜å¯¹ C++ å¯¹è±¡çš„å¼•ç”¨**ï¼Œåä¹‹äº¦ç„¶ï¼Œä¾‹å¦‚ä½¿ç”¨å†…å­˜å¼•ç”¨æ—¶ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨æ–¹æ³•è€Œæ— éœ€åºåˆ—åŒ–æˆæœ¬ï¼Œä¾‹å¦‚åœ¨å®æ—¶å¤„ç†å¸§æ•°æ®æ—¶ï¼ŒJSI å¯ä»¥è½»æ¾å¤„ç†æ›´å¤§çš„å¸§é€Ÿç‡æ•°æ®ï¼Œ**æ‰€ä»¥ JSI å°†æœ€å¤§é™åº¦åœ°å‡å°‘ JS å’ŒåŸç”Ÿå†…å­˜ä¹‹é—´çš„å¼€é”€**ã€‚

Fabric
------

**ç®€å•ç†è§£å®ƒå°±æ˜¯ RN åœ¨ UI å±‚çš„é‡æ–°å®ç°**ï¼Œç±»ä¼¼å–ä»£äº†åŸæœ¬çš„ UI Managerï¼Œä¸»è¦æ˜¯ä¸ºäº†ä»¥å……åˆ†åˆ©ç”¨ React çš„å¹¶å‘æ¸²æŸ“èƒ½åŠ›ï¼Œç‰¹åˆ«æ˜¯ç°åœ¨çš„æ–°æ¶æ„æ”¯æŒ React 18 åŠæ›´é«˜ç‰ˆæœ¬ä¸­æä¾›çš„å¹¶å‘æ¸²æŸ“åŠŸèƒ½ã€‚

è€Œå¾—ç›Šäºå‰é¢çš„ JSIï¼Œ JS å¯ä»¥ç›´æ¥è°ƒç”¨ Native æ–¹æ³•ï¼Œå…¶å®å°±åŒ…æ‹¬äº† UI æ–¹æ³•ï¼Œæ‰€ä»¥ JS å’Œ UI çº¿ç¨‹å¯ä»¥åŒæ­¥æ‰§è¡Œä»è€Œæé«˜åˆ—è¡¨ã€è·³è½¬ã€æ‰‹åŠ¿å¤„ç†ç­‰çš„æ€§èƒ½ã€‚

> åœ¨æ­¤ä¹‹å‰ï¼ŒJS å’Œ UI çº¿ç¨‹ä¸åŒæ­¥ï¼Œå› æ­¤åœ¨æŸäº›æƒ…å†µä¸‹ App å¯èƒ½ä¼šå› ä¸ºä¸¢å¸§è€Œæ˜¾å¾—å¡é¡¿

Turbo Modules
-------------

åœ¨ä¹‹å‰çš„æ¶æ„ä¸­ JS ä½¿ç”¨çš„æ‰€æœ‰ Native Modulesï¼ˆä¾‹å¦‚è“ç‰™ã€åœ°ç†ä½ç½®ã€æ–‡ä»¶å­˜å‚¨ç­‰ï¼‰éƒ½å¿…é¡»åœ¨åº”ç”¨æ‰“å¼€ä¹‹å‰è¿›è¡Œåˆå§‹åŒ–ï¼Œè¿™æ„å‘³ç€å³ä½¿ç”¨æˆ·ä¸éœ€è¦æŸäº›æ¨¡å—ï¼Œä½†æ˜¯å®ƒä»ç„¶å¿…é¡»åœ¨å¯åŠ¨æ—¶è¿›è¡Œåˆå§‹åŒ–ã€‚

Turbo Modules åŸºæœ¬ä¸Šæ˜¯å¯¹è¿™äº›æ—§çš„ Native æ¨¡å—çš„å¢å¼ºï¼Œç°åœ¨ JS å°†èƒ½å¤ŸæŒæœ‰è¿™äº›æ¨¡å—çš„å¼•ç”¨ï¼Œæ‰€ä»¥ JS ä»£ç å¯ä»¥ä»…åœ¨éœ€è¦æ—¶æ‰åŠ è½½å¯¹åº”æ¨¡å—ï¼Œè¿™æ ·å¯ä»¥å°†æ˜¾ç€ç¼©çŸ­ RN åº”ç”¨çš„å¯åŠ¨æ—¶é—´ã€‚

Codegen
-------

**Codegen ä¸»è¦æ˜¯ç”¨äºä¿è¯ JS ä»£ç å’Œ C++ çš„ JSI å¯ä»¥æ­£å¸¸é€šä¿¡çš„é™æ€ç±»å‹æ£€æŸ¥å™¨**ï¼Œé€šè¿‡ä½¿ç”¨ç±»å‹åŒ–çš„ JS ä½œä¸ºå‚è€ƒæ¥æºï¼ŒCodeGen å°†å®šä¹‰å¯ä»¥è¢« Turbo æ¨¡å—å’Œ Fabric ä½¿ç”¨çš„æ¥å£ï¼Œå¦å¤– Codegen ä¼šåœ¨æ„å»ºæ—¶ç”Ÿæˆ Native ä»£ç ï¼Œå‡å°‘è¿è¡Œæ—¶çš„å¼€æ”¯ã€‚

Hermes
------

Hermes æ˜¯ RN ç ”å‘çš„å…¨æ–° JS å¼•æ“ï¼Œè€Œä¹‹æ‰€ä»¥æœ‰ Hermes ï¼Œæ˜¯å› ä¸ºå®ƒæ˜¯ä¸“ä¸ºèµ„æºå—é™çš„è®¾å¤‡è€Œè®¾è®¡çš„å­˜åœ¨ï¼Œå¹¶é’ˆå¯¹å¯åŠ¨ã€åº”ç”¨å¤§å°å’Œå†…å­˜æ¶ˆè€—è¿›è¡Œäº†ç›¸åº”ä¼˜åŒ–ï¼ŒHermes å’Œå…¶ä»– JS å¼•æ“ä¹‹é—´çš„ä¸€ä¸ªå…³é”®åŒºåˆ«æ˜¯ï¼š**å®ƒèƒ½å¤Ÿæå‰å°† JavaScript æºä»£ç ç¼–è¯‘ä¸ºå­—èŠ‚ç **ã€‚

Hermes æ”¯æŒæå‰æ‰§è¡Œç¼–è¯‘çš„èƒ½åŠ›ï¼Œæ„å‘³ç€å¯ç”¨äº† Hermes çš„ React Native åº”ç”¨ä¼šå¸¦æœ‰é¢„ç¼–è¯‘çš„ä¼˜åŒ–å­—èŠ‚ç ï¼Œè€Œä¸æ˜¯çº¯ JavaScript æºä»£ç ã€‚

Hermes çš„å­˜åœ¨å¤§å¤§å‡å°‘äº†ä¸ºç”¨æˆ·å¯åŠ¨çš„æ—¶é—´ï¼Œå®˜æ–¹æ›¾è¡¨ç¤ºå¯ç”¨ Hermes é€šå¸¸ä¼šå°†äº§å“çš„ TTI æŒ‡æ ‡ç¼©çŸ­è¿‘ä¸€åŠã€‚

æ­¤å¤– Hermes è¿˜ä¼˜åŒ–äº† GC å®ç°ï¼Œ é‡‡ç”¨äº† [Hades](https://link.juejin.cn?target=https%3A%2F%2Fhermesengine.dev%2Fdocs%2Fhades "https://hermesengine.dev/docs/hades") çš„å…¨æ–°å¹¶å‘ GCï¼Œåœ¨ 64 ä½è®¾å¤‡ä¸Šï¼ŒHades åœ¨ p99.9 å¤„ä»…æš‚åœ 48 æ¯«ç§’ï¼Œæ¯”é»˜è®¤çš„ GenGC å¿« 34 å€ï¼Œ**è¿™ä¹Ÿä¸º React Fiber å¯ç”¨å¹¶å‘æ¸²æŸ“ï¼Œé€šè¿‡å°†æ¸²æŸ“å·¥ä½œæ‹†åˆ†ä¸ºå—æ¥é¿å…è°ƒåº¦é•¿ JavaScript ä»»åŠ¡æä¾›äº†è‰¯å¥½åŸºç¡€æ”¯æŒ**ã€‚

Interop Layers
==============

æ‰€ä»¥å¯ä»¥çœ‹åˆ°ï¼ŒåŸºäº Hermes å¼•æ“çš„åŠ æŒï¼Œé…åˆ JSIã€Fabric ã€Turbo Modulesã€CodeGen çš„å®ç°ï¼Œ React Native åƒæ˜¯æ¢äº†ã€Œäº”è„å…­è…‘ã€ï¼Œ**ä½†æ˜¯è¿™ä¹Ÿç»™å®ƒçš„è€æ—§é€‚é…å¸¦æ¥äº†æŒ‘æˆ˜**ã€‚

éšç€æ–°æ¶æ„çš„æ¨å‡ºï¼Œç¤¾åŒºé€‚é…æˆäº†å®ƒæ¨è¿›çš„æœ€å¤§é˜»åŠ›ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ New Architecture åœ¨ 2022 å‘å¸ƒä¹‹åâ€œè½åœ°æ”¾ç¼“â€çš„åŸå› ï¼Œè€Œå¯¹äº RN å›¢é˜Ÿç»™å‡ºçš„ç­”æ¡ˆæ˜¯ï¼š**Interop Layers** ã€‚

> æˆ‘çš„é¡¹ç›®ä¹ŸåŸºæœ¬åœæ»åœ¨ New Architecture ä¹‹å‰ã€‚

åœ¨äº’æ“ä½œå±‚( Interop Layers )å‡ºç°ä¹‹å‰ï¼Œå½“ä½ å°è¯•åœ¨æ–°æ¶æ„ä¸Šä½¿ç”¨ Legacy Component æ—¶ï¼Œä½ ä¼šçœ‹åˆ°å¦‚ä¸‹å†…å®¹ï¼š

![](https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df95805f41584a36880fee4895dc328a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&x-expires=1727651044&x-signature=Q%2FjZU4nXlEd4XBaycxMabzZJQPw%3D)

è€Œ React Native åœ¨ 0.72 æ·»åŠ äº†äº’æ“ä½œå±‚(Interop Layers)ï¼Œ**å®ƒçš„ä½œç”¨æ˜¯è®©è€æ—§é¡¹ç›®ã€Œæ— éœ€è°ƒæ•´ã€å³å¯è¿è¡Œåˆ° New Architecture**ï¼Œè€Œ React Native 0.74 é»˜è®¤å¯ç”¨ï¼š

> Interop layer åœ¨ New Architecture é‡Œä¼šé‡ç”¨æ—§ç‰ˆçš„åŸç”Ÿç»„ä»¶ï¼Œå®ƒå±äºä¸€ä¸ªå¹³å°å±‚ï¼Œå…è®¸å¼€å‘è€…å°†æ—§ç»„ä»¶æ³¨å†Œåˆ° New Rendererï¼ˆFabricï¼‰é‡Œï¼Œå¹¶å°†æ—§å‡½æ•°è°ƒç”¨ï¼ˆä¾‹å¦‚ç‰¹å®šå±æ€§çš„ setterï¼‰æ˜ å°„åˆ° New Renderer ä¸­çš„ç­‰æ•ˆ updateProps å‡½æ•°ã€‚

å¯¹äºæ–°æ¶æ„ï¼Œå…¼å®¹å‡çº§æœ€å¤§çš„æˆæœ¬å°±æ˜¯å°†åŸç”Ÿç»„ä»¶è¿ç§»åˆ° New Renderer ï¼Œå› ä¸ºéœ€è¦å¤§é‡æ—¶é—´ï¼Œå¹¶ä¸”é€šå¸¸æ— æ³•è‡ªåŠ¨åŒ–ï¼Œå› ä¸ºèŒƒå¼å®Œå…¨ä¸åŒï¼Œæ‰€ä»¥ç°åœ¨ Interop layer å®é™…ä¸Šæ˜¯ä½œä¸ºä¸€ä¸ª wrapper å­˜åœ¨ï¼Œä»è€Œå…è®¸æ—§ç»„ä»¶ä¸ New Renderer ä¸€èµ·ä½¿ç”¨ï¼Œä¾‹å¦‚ï¼š

> åœ¨åå°ï¼Œæ¯å½“ prop æ›´æ–°æˆ–å‘é€å‘½ä»¤æ—¶ï¼Œå®ƒéƒ½ä¼šè½¬å‘åˆ° New Renderer çš„ UIManager ï¼ŒUIManager ä¼šå°†æ¶ˆæ¯å‘é€åˆ° wrapper ï¼Œ wrapper ä¼šâ€œå°å¿ƒåœ°â€å°†å…¶è½¬æ¢ä¸ºä¼ ç»Ÿæ¶æ„å¯ä»¥ç†è§£çš„æ ¼å¼ï¼Œå¹¶è®©ä¼ ç»Ÿç»„ä»¶å¤„ç†å®ƒï¼Œç„¶åå®ƒå°†æ¶ˆæ¯åå‘ä¼ é€’åˆ° JSï¼Œä»è€Œæ›´æ–° UIã€‚

ç°åœ¨äº’æ“ä½œå±‚è¿™ä¸ª wrapper ä¼šå¸®åŠ©å¤§å®¶è§£å†³å¤§éƒ¨åˆ†é—®é¢˜ï¼Œ**è™½ç„¶å®ƒå¹¶ä¸æ˜¯å®Œå…¨å…¼å®¹**ï¼Œè€Œå¯¹äº RN å›¢é˜Ÿçš„ç›®æ ‡æ¥è¯´ï¼Œå®ƒä¹Ÿä¸æ˜¯ä¸ºäº† 100% å…¼å®¹è€Œå­˜åœ¨ï¼Œå®ƒæ›´å¤šæ˜¯ä¸ºäº†è¿‡æ¸¡é€‚é…è€Œå­˜åœ¨ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œç°åœ¨åœ¨å®˜æ–¹ç»Ÿè®¡é‡Œï¼Œ**1465 ä¸ª package é‡Œå·²ç»æœ‰ 851 æ”¯æŒæ–°æ¶æ„ï¼Œæ‰€ä»¥ 0.76 default ä¹Ÿå¯ä»¥è¯´å½’åŠŸäº Interop Layers** ã€‚

![](https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b81d8b166674a41887865f711c55320~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&x-expires=1727651044&x-signature=PB%2BGc7rB9wJ8UMewDYLxSx%2FHQpA%3D)

Bridgeless Mode
===============

Bridgeless Mode æ˜¯åœ¨ 0.73 è¢«å¼•å…¥ï¼Œç„¶å React Native 0.74 é»˜è®¤å¯ç”¨ï¼Œè¿™ä¹Ÿæ–°æ¶æ„çš„ä¸€ä¸ªå…³é”®åŠŸèƒ½ï¼Œåœ¨æ–°æ¶æ„ä¹‹å‰ï¼ŒReact Native éœ€è¦æ¡¥(bridge)ç”¨äº JS å’ŒåŸç”Ÿä¹‹é—´è¿›è¡Œé€šä¿¡ã€‚

> æ¡¥ç›¸å½“äºæ˜¯ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ï¼Œä¼šè¢«ç”¨äºæ¸²æŸ“è§†å›¾ã€è°ƒç”¨æœ¬æœºå¯è°ƒç”¨å¯¹è±¡æˆ–æ³¨å†Œäº‹ä»¶å¤„ç†ç¨‹åºç­‰æŒ‡ä»¤ï¼Œè€Œæ¡¥çš„å­˜åœ¨é™åˆ¶äº† React Native çš„å¼‚æ­¥è®¾è®¡ã€æ¶ˆæ¯æ‰¹å¤„ç†å’Œåºåˆ—åŒ–æˆæœ¬ã€‚

New Architecture çš„å¾ˆå¤§ä¸€éƒ¨åˆ†å·¥ä½œæ˜¯æ¶ˆé™¤ React Native å¯¹ bridge çš„ä¾èµ–ï¼Œä¾‹å¦‚ï¼š

*   TurboModules å°†æœ¬åœ°è°ƒç”¨ç§»å‡ºäº†æ¡¥æ¥
*   Fabric å°†ç»„ä»¶æ¸²æŸ“ä» Bridge ç§»é™¤

è€Œ Bridgeless Mode ä¸‹ï¼Œä¼šå°†å‰©ä¸‹çš„ React Native è¿è¡Œæ—¶å†…å®¹ï¼Œå¦‚é”™è¯¯å¤„ç†ã€å…¨å±€äº‹ä»¶å‘å°„å™¨ã€è®¡æ—¶å™¨ç­‰ä»æ¡¥æ¥ä¸­ç§»å‡ºï¼Œå¹¶ä¸”ä¸å†åˆå§‹åŒ–æ¡¥æ¥ï¼Œ**ä¹Ÿå°±æ˜¯ React Native 0.74 å°†ä¸åœ¨æœ‰æ¡¥æ¥è°ƒç”¨çš„å­˜åœ¨**ã€‚

> è€Œç”±äºå®Œå…¨ç§»é™¤äº† bridgeï¼Œæ‰€ä»¥è¿™ä¸ª break change åŒæ ·éœ€è¦ Interop Layers è¿™ä¸ª Wrapper æ¥å……å½“æ—§ç‰ˆçš„å…¼å®¹å®ç°ã€‚

é€šè¿‡ Interop Layers ï¼Œå¤§å¤šæ•°æ³¨å†Œåˆ° React Native çš„é—ç•™æ¨¡å—å°†å—åˆ°æ–°çš„åŸç”Ÿæ¨¡å—ç³»ç»Ÿ ï¼ˆTurboModulesï¼‰ çš„æ”¯æŒã€‚

æ­¤å¤–ï¼Œ**Bridgeless Mode ä½¿ç”¨ Static ViewConfig ä¼˜åŒ–äº†ç»„ä»¶æ¸²æŸ“**ï¼ŒViewConfig ä¼šå‘Šè¯‰ React åŸç”Ÿç»„ä»¶æ”¯æŒå“ªäº› props å’Œäº‹ä»¶ã€‚

> ä»¥å‰ ViewConfig æ˜¯åœ¨è¿è¡Œæ—¶é€šè¿‡åˆ†æåŸç”Ÿç»„ä»¶çš„ ViewManager ç”Ÿæˆçš„ï¼Œè€Œç°åœ¨ä½¿ç”¨ Static ViewConfigsï¼ŒRN å¯ä»¥é€šè¿‡åˆ†æåŸç”Ÿç»„ä»¶çš„ Flow æˆ– TypeScript spec æ–‡ä»¶ï¼Œå°†è¿™é¡¹å·¥ä½œè½¬ç§»åˆ°æ„å»ºæ—¶å®Œæˆï¼Œå¦‚æœåŸç”Ÿç»„ä»¶æ²¡æœ‰ spec æ–‡ä»¶ï¼Œé‚£ä¹ˆ Bridgeless å°†å›é€€åˆ°è¿è¡Œæ—¶ ViewConfig ç”Ÿæˆã€‚

Suspense & Transitions
======================

ä¸€ç›´ä»¥æ¥ï¼ŒReact Native ä¼šæ‰§è¡Œä¸ React for web ç›¸åŒçš„ React æ¡†æ¶ä»£ç ï¼Œä½†æ˜¯ React Native éœ€è¦æ¸²æŸ“ä¸ºé€šç”¨å¹³å°è§†å›¾ï¼ˆNative è§†å›¾ï¼‰è€Œä¸æ˜¯ DOM èŠ‚ç‚¹ï¼Œè¿™åœ¨æ–°æ¶æ„ä¹‹å‰è®© RN å¾ˆéš¾å‘æŒ¥å‡º React çš„â€œå…¨åŠ›â€ã€‚

è€Œéšç€ Fabric çš„å®ç°ï¼ŒRN æ¸²æŸ“åˆ° Native è§†å›¾æ˜¯é€šè¿‡ Fabric Renderer å®ç°ï¼ŒFabric å…è®¸ React ä¸æ¯ä¸ªå¹³å°é€šä¿¡å¹¶ç®¡ç†å…¶ Native è§†å›¾å®ä¾‹ï¼Œæ ¸å¿ƒåŸåˆ™æ˜¯åœ¨ C++ ä¸­ç»Ÿä¸€æ›´å¤šçš„æ¸²æŸ“é€»è¾‘ï¼Œæé«˜ä¸ Native å¹³å°çš„å¯äº’æ“ä½œèƒ½åŠ›ã€‚

æ‰€ä»¥æ–°æ¡†æ¶ä¸‹â€œåŒæ­¥è°ƒç”¨â€çš„èƒ½åŠ›ï¼Œè®©æ¸²æŸ“å™¨èƒ½å¤ŸåŒæ­¥æµ‹é‡å’Œæ¸²æŸ“ React ï¼Œè¿™ä¹Ÿè®© React æœ¬èº«çš„ä¸€äº›æ¦‚å¿µå¯ä»¥è¢«è¿ç”¨åˆ° RN ä¸Šï¼Œä¾‹å¦‚ï¼š

*   ä¸ React Suspense é›†æˆï¼Œå¯ä»¥åœ¨ React åº”ç”¨ä¸­æ›´ç›´è§‚åœ°è®¾è®¡æ•°æ®è·å–
*   åœ¨ React Native ä¸Šå¯ç”¨ React å¹¶å‘åŠŸèƒ½ï¼Œå¦‚ Transitions

> è¿™ä¹Ÿæ˜¯æ–°æ¡†æ¶çš„ä¼˜åŠ¿ï¼Œæ–°æ¶æ„æ”¯æŒ React 18 åŠæ›´é«˜ç‰ˆæœ¬ä¸­æä¾›çš„å¹¶å‘æ¸²æŸ“å’ŒåŠŸèƒ½ï¼Œç°åœ¨å¼€å‘è€…å¯ä»¥åœ¨ React Native ä»£ç ä¸­ä½¿ç”¨ Suspense ç­‰åŠŸèƒ½æ¥è·å–æ•°æ®ï¼Œä»è€Œè¿›ä¸€æ­¥è®© Web å’ŒåŸç”Ÿ React å¼€å‘ä¹‹é—´çš„ä»£ç åº“å’Œæ¦‚å¿µä¿æŒä¸€è‡´ã€‚

ä¹Ÿå°±æ˜¯ä½¿ç”¨ New Architectureï¼Œå¼€å‘è€…å³å¯è·å¾— React 18 æ¸²æŸ“å™¨çš„è‡ªåŠ¨æ‰¹å¤„ç†ï¼ŒåŒæ—¶å¹¶å‘æ¸²æŸ“å™¨è¿˜å¸¦æ¥äº†å¼€ç®±å³ç”¨çš„æ”¹è¿›ï¼Œè¿™å‡å°‘äº† React ä¸­çš„é‡æ–°æ¸²æŸ“ã€‚

ä¾‹å¦‚åœ¨å®˜æ–¹ç¤ºä¾‹ä¸­ï¼Œé€šè¿‡æ»‘å—æŒ‡å®šè¦æ¸²æŸ“çš„å›¾å—æ•°ï¼Œå°†æ»‘å—ä» 0 æ‹–åŠ¨åˆ° 1000 å°†è§¦å‘ä¸€ç³»åˆ—å¿«é€Ÿçš„çŠ¶æ€æ›´æ–°å’Œé‡æ–°æ¸²æŸ“ï¼š

> åœ¨ä½¿ç”¨ç›¸åŒä»£ç æ—¶ï¼Œå¯ä»¥ç›´è§‚åœ°æ³¨æ„åˆ°æ–°æ¶æ„çš„æ¸²æŸ“å™¨æä¾›äº†æ›´æµç•…çš„ UIï¼Œä¸­é—´ UI æ›´æ–°è¾ƒå°‘ï¼Œæ¥è‡ª Native äº‹ä»¶å¤„ç†ç¨‹åºçš„çŠ¶æ€æ›´æ–°ï¼ˆå¦‚é¡¶éƒ¨ Slider ï¼‰ç°åœ¨æ˜¯æ‰¹å¤„ç†çš„æ¨¡å¼ã€‚

![](https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8f1520bb3bfc4760b304efa7bf743ebc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&x-expires=1727651044&x-signature=ZubUQ8O8VbOwPBtPJIeHP3dmXZ8%3D)

åŒæ—¶ä½¿ç”¨æ–°çš„å¹¶å‘åŠŸèƒ½ï¼ˆå¦‚ Transitionsï¼‰å¯ä»¥å®šä¹‰ UI æ›´æ–°çš„ä¼˜å…ˆçº§ï¼Œä¾‹å¦‚å°†æ›´æ–°æ ‡è®°ä¸ºè¾ƒä½ä¼˜å…ˆçº§ï¼Œå‘Šè¯‰ React å®ƒå¯ä»¥ â€œä¸­æ–­â€ æ¸²æŸ“æ›´æ–°ä»¥å¤„ç†æ›´é«˜ä¼˜å…ˆçº§çš„æ›´æ–°ï¼Œä»¥ç¡®ä¿åœ¨é‡è¦çš„åœ°æ–¹æä¾›å“åº”å¼ç”¨æˆ·ä½“éªŒã€‚

ä¾‹å¦‚ä½¿ç”¨ `startTransition` é…ç½®å¯ä»¥ä¸­æ–­çº¢è‰²æ–¹å—çš„æ¸²æŸ“ï¼ŒåŒæ—¶ `startTransition` è¿˜æä¾›äº†ä¸€ä¸ª `isPending` æ ‡å¿—æ¥å‘Šè¯‰è¿‡æ¸¡ä½•æ—¶å®Œæˆã€‚

![](https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c0452719eb95405997d17d684a0e1b1f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&x-expires=1727651044&x-signature=rUFGWGcJAj%2BWzXyh8UkTcaVcoPI%3D)

> ä½ ä¼šæ³¨æ„åˆ°ï¼Œéšç€ transition ä¸­çš„é¢‘ç¹æ›´æ–°ï¼ŒReact æ¸²æŸ“çš„ä¸­é—´çŠ¶æ€æ›´å°‘ï¼Œå› ä¸ºå®ƒä¼šåœ¨ state è¿‡æ—¶åç«‹å³é€€å‡ºæ¸²æŸ“ï¼Œç›¸æ¯”ä¹‹ä¸‹ï¼Œå¦‚æœæ²¡ transition ï¼Œåˆ™ä¼šæ¸²æŸ“æ›´å¤šçš„ä¸­é—´çŠ¶æ€ã€‚

DevTools
========

åŒæ—¶éšç€ 0.76 å®£å¸ƒçš„è¿˜æœ‰ React Native DevToolsï¼Œè¿™æ˜¯ä¸ºäº†ä¸‹ä¸€ä»£é‡å†™çš„ React Native è°ƒè¯•å™¨å †æ ˆï¼Œå®ƒå…¶å®ä» 0.73 å°±å¼€å§‹å­˜åœ¨ç›¸åº”æ”¯æŒã€‚

![](https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fd9dd8b95d7542e2ae2c20dd4efd3bf9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&x-expires=1727651044&x-signature=AwKSfeHtnyfhk%2Fnlar2LgxQIxjM%3D)

ä¾‹å¦‚ React Native 0.73 é™„å¸¦çš„ä¸€é”®è°ƒè¯•æµç¨‹ ï¼Œ**åªéœ€åœ¨ç»ˆç«¯ä¸­æŒ‰ J å³å¯å®Œæˆè°ƒè¯•**ï¼Œè€Œåœ¨ 0.76 ä¸­å®ƒé»˜è®¤å¯ç”¨ï¼š

![](https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/48739cd882fd49d1bb7d3ba5c7db6da5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&x-expires=1727651044&x-signature=n0tOOxXBhX8eDRHvm%2B3i2z3lJSk%3D)

æœªæ¥
==

å¯ä»¥çœ‹åˆ° React Native çš„å†…åœ¨å·²ç»å˜å¾—â€œé¢ç›®å…¨éâ€ï¼Œå¯ä»¥è¯´çš„æ˜¯ï¼Œè™½ç„¶ RN å½“æ—¶é‚£ä¸€æ­¥è¸©çš„å¾ˆå¤§ï¼Œç”šè‡³æ‰¯ç€ğŸ¥šï¼Œä½†æ˜¯ä¸¤å¹´è¿‡å»ç»ˆäºæ˜¯å¼€å§‹ç¼“è¿‡æ¥äº†ï¼Œæ­£å¦‚å¼€å¤´å®˜æ–¹æ‰€è¯´ï¼š**2024 å¹´æ˜¯å‘æ‰€æœ‰ React Native ç”¨æˆ·æ¨å‡ºæ–°æ¶æ„çš„ä¸€å¹´** ã€‚

åŒæ—¶ New Architecture è¿˜åœ¨è§£é”å…¶ä»–æ–°åŠŸèƒ½ï¼Œä¾‹å¦‚ Web å¯¹é½æ˜¯ä¹Ÿæ˜¯ Meta çš„ä¸€ä¸ªç§¯ææ¢ç´¢é¢†åŸŸï¼Œè¿™ä¹Ÿæ˜¯ RN å¼€å‘å¤šå¹´çš„å®˜æ–¹æœŸç›¼ï¼Œéœ€è¦è§£å†³çš„ä¾‹å¦‚ï¼š

*   [äº‹ä»¶å¾ªç¯æ¨¡å‹çš„æ›´æ–°](https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Freact-native-community%2Fdiscussions-and-proposals%2Fblob%2Fmain%2Fproposals%2F0744-well-defined-event-loop.md "https://github.com/react-native-community/discussions-and-proposals/blob/main/proposals/0744-well-defined-event-loop.md")
*   [APIs èŠ‚ç‚¹å’Œå¸ƒå±€ API](https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Freact-native-community%2Fdiscussions-and-proposals%2Fblob%2Fmain%2Fproposals%2F0607-dom-traversal-and-layout-apis.md "https://github.com/react-native-community/discussions-and-proposals/blob/main/proposals/0607-dom-traversal-and-layout-apis.md")
*   [æ ·å¼å’Œå¸ƒå±€ä¸€è‡´æ€§](https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ffacebook%2Fyoga%2Freleases%2Ftag%2Fv2.0.0 "https://github.com/facebook/yoga/releases/tag/v2.0.0")

è™½ç„¶å·²ç»è®¸ä¹…æ²¡è·Ÿè¿› React Native ï¼Œä½†æ˜¯è¿˜æ˜¯å¾ˆå¼€å¿ƒ RN èƒ½å¤ŸæŒç»­è¿­ä»£æ¨è¿›æ–°çš„èƒ½åŠ›ï¼Œè¿™æ ·ä»£è¡¨ç€é¡¹ç›®å…·å¤‡æ—ºç››çš„ç”Ÿå‘½åŠ›ï¼ŒåŒæ—¶ RN åœ¨é¸¿è’™ Next é€‚é…ä¸Šï¼Œç±»ä¼¼ Flutter ä¹Ÿæœ‰ Software Mansion å’Œåä¸ºçš„åŒæ­¥ç¤¾åŒºæ”¯æŒï¼Œæ‰€ä»¥è‡³å°‘ç°åœ¨çœ‹æ¥ï¼ŒRN çš„æœªæ¥ä¾ç„¶å¯è§‚ã€‚

![](https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/131af1f5622e4f6f97d54a452ddb9a8e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&x-expires=1727651044&x-signature=eqyGCf77q0xW05yPYpNlJLs2Gbo%3D)

> æ›´å¤šèµ„æ–™å¯æŸ¥é˜…ï¼š [github.com/reactwg/reaâ€¦](https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Freactwg%2Freact-native-new-architecture "https://github.com/reactwg/react-native-new-architecture")