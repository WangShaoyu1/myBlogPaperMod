---
author: "韩_师兄"
title: "关于本地环境使用内网穿透工具的操作"
date: 2022-04-07
description: "一起养成写作习惯！这是我参与「掘金日新计划·4月更文挑战」的第2天，点击查看活动详情。在一些特殊的开发场景，如微信小程序的登录等，需要获取微信小程序的回调信息，而本地电脑开发又无法去获取网络"
tags: ["后端"]
ShowReadingTime: "阅读2分钟"
weight: 676
---
一起养成写作习惯！这是我参与「掘金日新计划 · 4 月更文挑战」的第2天，[点击查看活动详情](https://juejin.cn/post/7080800226365145118 "https://juejin.cn/post/7080800226365145118")。

在一些特殊的开发场景，如微信小程序的登录等，需要获取微信小程序的回调信息， 而本地电脑开发又无法去获取网络上的回调，所以需要使用内网穿透工具。

一 内网穿透
======

内网穿透：也称为 NAT 穿透，进行 NAT 穿透是为了使具有某一个特定源 IP 地址和源端口号的数据包不被 NAT 设备屏蔽而正确路由到内网主机。

以ngrok工具为例介绍内网穿透功能

官网地址：[www.ngrok.cc/](https://link.juejin.cn?target=https%3A%2F%2Fwww.ngrok.cc%2F "https://www.ngrok.cc/")

ngrok 是一个反向代理，通过在公共的端点和本地运行的 Web 服务器之间建立一个安全的通道。不但提供了一个在外网能够安全的访问内网Web主机，还能捕获所有请求的http内容，方便调试，甚至还支持tcp层端口映射，简单来说可以通过外网来访问本地的服务，方便本地开发代码。

（最新版需要进行实名认证）

二 ngrok的使用
==========

1 添加隧道操作
--------

1 首先登录官网，注册账号，进入首页

![image-20220407074442379](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d185cda3b901488483e9c997df19032e~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

2 隧道管理

2.1 进入隧道管理，购买免费服务器

![image-20220407074730772](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/399918a64d79477c85540d0f7131477a~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

2.2 设置自己的隧道信息

协议选择http，隧道名称随便取， 前置域名，取自己知道且好记字段， 本地端口取自己相关服务的端口号，http用户名以及密码不填

![image-20220407074939564](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/61160b985e1e46299937fdb25f9b43f2~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

2.3 查看隧道信息

在隧道管理中，可查看自己设置的隧道信息

![image-20220407075621048](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6bf66479119a4a20b3305894abb2be2d~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

2 ngrok客户端使用
------------

1 可从官网或隧道管理页面下载客户端，选择国内文件夹，打开Sunny-Ngrok启动工具

![image-20220407075931391](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/42fa7d133e3a475aad88bb9ac37aeeec~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

![image-20220407075949391](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a659821a51594d37b2aa5bfdd79cde4b~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

2 添加客户端id，即隧道管理列表中的隧道id，复制粘贴，回车

连接较慢，等待Tunnel Status变为online即可

![image-20220407080215435](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/434a0d7a296047b9a36bd05856c701c9~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)