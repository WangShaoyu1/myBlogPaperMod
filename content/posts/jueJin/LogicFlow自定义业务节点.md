---
author: "å°é‘«åŒå­¦"
title: "LogicFlowè‡ªå®šä¹‰ä¸šåŠ¡èŠ‚ç‚¹"
date: 2023-01-10
description: "LogicFlowæ˜¯ä¸€æ¬¾æµç¨‹å›¾ç¼–è¾‘æ¡†æ¶ï¼Œæä¾›äº†ä¸€ç³»åˆ—æµç¨‹å›¾äº¤äº’ã€ç¼–è¾‘æ‰€å¿…éœ€çš„åŠŸèƒ½å’Œçµæ´»çš„èŠ‚ç‚¹è‡ªå®šä¹‰ã€æ’ä»¶ç­‰æ‹“å±•æœºåˆ¶ã€‚LogicFlowæ”¯æŒå‰ç«¯ç ”å‘è‡ªå®šä¹‰å¼€å‘å„ç§é€»è¾‘ç¼–æ’åœºæ™¯ï¼Œå¦‚æµç¨‹å›¾ã€ERå›¾ã€BPM"
tags: ["å‰ç«¯","Vue.js","å‰ç«¯æ¡†æ¶"]
ShowReadingTime: "é˜…è¯»6åˆ†é’Ÿ"
weight: 952
---
> ğŸ„Hi~ å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å°é‘«åŒå­¦ï¼Œä¸€ä½é•¿æœŸä»äº‹å‰ç«¯å¼€å‘çš„ç¼–ç¨‹çˆ±å¥½è€…ï¼Œæˆ‘å°†ä½¿ç”¨æ›´ä¸ºå®ç”¨çš„æ¡ˆä¾‹è¾“å‡ºæ›´å¤šçš„ç¼–ç¨‹çŸ¥è¯†ï¼ŒåŒæ—¶æˆ‘ä¿¡å¥‰åˆ†äº«æ˜¯æˆé•¿çš„å”¯ä¸€æ·å¾„ï¼Œåœ¨è¿™é‡Œä¹Ÿå¸Œæœ›æˆ‘çš„æ¯ä¸€ç¯‡æ–‡ç« éƒ½èƒ½æˆä¸ºä½ æŠ€æœ¯è½åœ°çš„å‚è€ƒ~

### ä¸“æ ç›®å½•ï¼š

1.  [LogicFlowå®‰è£…ä¸å‡†å¤‡å·¥ä½œ](https://juejin.cn/post/7186422818916007996 "https://juejin.cn/post/7186422818916007996")Â 
2.  [LogicFlowè‡ªå®šä¹‰ä¸šåŠ¡èŠ‚ç‚¹](https://juejin.cn/post/7186800549293981753 "https://juejin.cn/post/7186800549293981753")
3.  [LogicFlowè‡ªå®šä¹‰è¾¹ï¼ˆEdgeï¼‰](https://juejin.cn/post/7187171903952879674 "https://juejin.cn/post/7187171903952879674") Â 
4.  [LogicFlowæ›´å¤šé…ç½®é€‰é¡¹](https://juejin.cn/post/7187535095392600121 "https://juejin.cn/post/7187535095392600121") Â 
5.  [LogicFlowæ’ä»¶ç”¨å‰å‡†å¤‡](https://juejin.cn/post/7193896470536257593 "https://juejin.cn/post/7193896470536257593") Â 
6.  [LogicFlowå†…ç½®æ’ä»¶ä½¿ç”¨](https://juejin.cn/post/7193896646357286970 "https://juejin.cn/post/7193896646357286970") Â 
7.  [LogicFlowå†…ç½®èœå•æ’ä»¶](https://juejin.cn/post/7193898053026676792 "https://juejin.cn/post/7193898053026676792")

### ğŸš€æŠ€æœ¯&ä»£ç åˆ†äº«

*   æˆ‘åœ¨ [IT200](https://link.juejin.cn?target=https%3A%2F%2Fit200.cn%2F "https://it200.cn/") æ€»ç»“æŠ€æœ¯å­¦ä¹ ï¼›
*   æˆ‘åœ¨ [1024Code](https://link.juejin.cn?target=https%3A%2F%2F1024code.com%2F5bCP6ZG "https://1024code.com/5bCP6ZG") åœ¨çº¿ç¼–å†™ä»£ç ï¼›
*   æˆ‘åœ¨ [æ˜é‡‘](https://juejin.cn/user/3966693685871694 "https://juejin.cn/user/3966693685871694") åˆ†äº«æŠ€æœ¯æ–‡ç« ï¼›
*   æˆ‘åœ¨ [Github](https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FOSpoon "https://github.com/OSpoon") å‚ä¸å¼€æºå­¦ä¹ ï¼›

### ğŸ˜‡æ¨èå‡ ä¸ªå¥½ç”¨çš„å·¥å…·

*   [var-conv](https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FOSpoon%2Fvar-conv "https://github.com/OSpoon/var-conv") é€‚ç”¨äºVSCode IDEçš„ä»£ç å˜é‡åç§°å¿«é€Ÿè½¬æ¢å·¥å…·
*   [generator-vite-plugin](https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FOSpoon%2Fgenerator-vite-plugin "https://github.com/OSpoon/generator-vite-plugin") å¿«é€Ÿç”ŸæˆViteæ’ä»¶æ¨¡æ¿é¡¹ç›®
*   [generator-babel-plugin](https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FOSpoon%2Fgenerator-babel-plugin "https://github.com/OSpoon/generator-babel-plugin") å¿«é€Ÿç”ŸæˆBabelæ’ä»¶æ¨¡æ¿é¡¹ç›®

### è¿›å…¥æ­£é¢˜

> LogicFlow æ˜¯ä¸€æ¬¾æµç¨‹å›¾ç¼–è¾‘æ¡†æ¶ï¼Œæä¾›äº†ä¸€ç³»åˆ—æµç¨‹å›¾äº¤äº’ã€ç¼–è¾‘æ‰€å¿…éœ€çš„åŠŸèƒ½å’Œçµæ´»çš„èŠ‚ç‚¹è‡ªå®šä¹‰ã€æ’ä»¶ç­‰æ‹“å±•æœºåˆ¶ã€‚LogicFlowæ”¯æŒå‰ç«¯ç ”å‘è‡ªå®šä¹‰å¼€å‘å„ç§é€»è¾‘ç¼–æ’åœºæ™¯ï¼Œå¦‚æµç¨‹å›¾ã€ERå›¾ã€BPMNæµç¨‹ç­‰ã€‚åœ¨å·¥ä½œå®¡æ‰¹é…ç½®ã€æœºå™¨äººé€»è¾‘ç¼–æ’ã€æ— ä»£ç å¹³å°æµç¨‹é…ç½®éƒ½æœ‰è¾ƒå¥½çš„åº”ç”¨ã€‚

è¿™ä¸€èŠ‚å°†è®²è§£å¿«é€Ÿä¸Šæ‰‹ LogicFlow æµç¨‹å›¾ç¼–è¾‘æ¡†æ¶çš„è‡ªå®šä¹‰ä¸šåŠ¡èŠ‚ç‚¹å†…å®¹ï¼Œä»£ç è¦åœ¨ä¸Šä¸€èŠ‚çš„åŸºç¡€ä¸Šè¿›è¡Œå¼€å‘ï¼Œä½¿ç”¨1024codeåœ¨çº¿ç¼–å†™ä»£ç çš„å°ä¼™ä¼´å¯ä»¥ç›´æ¥forkä¸Šä¸€èŠ‚çš„ä»£ç å¼€å§‹ï¼Œè¿™ä¸€èŠ‚çš„å¤§è‡´å†…å®¹åŒ…æ‹¬äº†ï¼Œå‡†å¤‡è‡ªå®šä¹‰ä¸šåŠ¡èŠ‚ç‚¹çš„æ¨¡æ¿ã€æ³¨å†Œå’Œä½¿ç”¨ã€è‡ªå®šä¹‰æ ·å¼ã€è‡ªå®šä¹‰å½¢çŠ¶ã€è‡ªå®šä¹‰å¤–è§‚å‡ ä¸ªæ–¹é¢ï¼Œåšå¥½å‡†å¤‡åæˆ‘ä»¬å°±å¼€å§‹äº†ã€‚

### 1\. è®¤è¯†è‡ªå®šä¹‰ä¸šåŠ¡èŠ‚ç‚¹æ¨¡æ¿ï¼š

LFæ¡†æ¶è‡ªå®šä¹‰ä¸šåŠ¡èŠ‚ç‚¹ä½¿ç”¨åˆ°äº†é¢å‘å¯¹è±¡ä¸­ç»§æ‰¿çš„æ¦‚å¿µï¼Œé€šè¿‡ç»§æ‰¿LFæä¾›çš„ `XxxNode` å’Œ `XxxNodeModel` ç±»åå¯¹ç›¸å…³çš„å‡½æ•°è¿›è¡Œé‡å†™ï¼Œå¹¶åœ¨é»˜è®¤å¯¼å‡ºæ—¶æä¾› `type`ã€`view å’Œ` model\`ï¼›

ä¸‹é¢è¿™æ®µä»£ç ç»§æ‰¿äº†Rectç›¸å…³çš„ `RectNode` å’Œ `RectNodeModel`ï¼Œå¦‚æœè¦ç»§æ‰¿å…¶ä»–çš„å†…ç½®å¯¹è±¡è¿˜è¯·æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£æˆ–æºç ï¼š

typescript

 ä»£ç è§£è¯»

å¤åˆ¶ä»£ç 

`// æºç ä½ç½®ï¼š./src/CustomNode.ts import { RectNode, RectNodeModel } from "@logicflow/core"; class CustomNodeView extends RectNode { } class CustomNodeModel extends RectNodeModel { } export default {     type: "CustomNode",     view: CustomNodeView,     model: CustomNodeModel, }`

### 2\. ä¼˜å…ˆè¿›è¡Œæ³¨å†Œå’Œä½¿ç”¨ï¼š

è‡ªå®šä¹‰ä¸šåŠ¡æ¨¡æ¿å‡†å¤‡å¥½ä»¥åå°±å¯ä»¥å…ˆè¿›è¡Œæ³¨å†Œå’Œä½¿ç”¨äº†ï¼Œç¬¬ä¸€ä¸ªæ˜¯å› ä¸ºåœ¨ç»§æ‰¿å†…ç½®ç±»åè™½ç„¶æ²¡æœ‰è¿›è¡Œä»»ä½•çš„å‡½æ•°é‡å†™ä½†æ˜¯ä¸è€½è¯¯æ¸²æŸ“ç»“æœï¼›ç¬¬äºŒä¸ªæ˜¯å› ä¸ºä¸€å¼€å§‹å¹¶ä¸ç†Ÿæ‚‰ï¼Œæ‰€ä»¥è¦åŠæ—¶æ³¨å†Œå’Œä½¿ç”¨èµ·æ¥çœ‹åˆ°æ•ˆæœï¼Œä¹Ÿæ˜¯æ–¹ä¾¿åç»­çš„è‡ªå®šä¹‰ã€‚

#### 2.1 æ³¨å†Œè‡ªå®šä¹‰ä¸šåŠ¡èŠ‚ç‚¹ï¼š

æ³¨å†Œè¿‡ç¨‹ä¸»è¦åˆ†ä¸¤ä¸ªæ­¥éª¤ï¼š

*   ç¬¬ä¸€è¦å°†ä¸Šé¢ç¼–å†™çš„ `CustomNode.ts` å¯¼å…¥åˆ° `App.vue`;
*   ç¬¬äºŒè¦å°† `CustomNode` å¯¹è±¡é€šè¿‡lfå®ä¾‹ä¸­çš„ `register()` å‡½æ•°åœ¨ `render()` å‰æ³¨å†Œï¼›

typescript

 ä»£ç è§£è¯»

å¤åˆ¶ä»£ç 

`// å¯¼å…¥è‡ªå®šä¹‰èŠ‚ç‚¹ import CustomNode from "./CustomNode"; const graphData = {} ... onMounted(() => {   // åœ¨æ‰§è¡Œrenderå‰è¿›è¡Œæ³¨å†Œ   lf.value.register(CustomNode);   lf.value.render(graphData); })`

#### 2.2 å¦‚ä½•ä½¿ç”¨è‡ªå®šä¹‰ä¸šåŠ¡èŠ‚ç‚¹ï¼š

åœ¨æˆåŠŸæ³¨å†Œåå³å¯é€šè¿‡ `render` å‡½æ•°æ¥æ¸²æŸ“ä¸šåŠ¡æµç¨‹ä¸­çš„ä¸€åˆ‡å…ƒç´ çš„æ•°æ®ï¼Œè‡ªå®šä¹‰çš„ä¸šåŠ¡èŠ‚ç‚¹å’Œå†…ç½®çš„é»˜è®¤èŠ‚ç‚¹ä½¿ç”¨æ–¹å¼ç›¸åŒï¼Œéƒ½æ˜¯é€šè¿‡ `type` é€‰é¡¹æ¥æ ‡è¯†ï¼›

typescript

 ä»£ç è§£è¯»

å¤åˆ¶ä»£ç 

`// å®šä¹‰graphData // æ•°æ®ä¸­çš„typeä¸ºè‡ªå®šä¹‰èŠ‚ç‚¹å¯¼å‡ºçš„typeå±æ€§çš„å€¼ // å°†èŠ‚ç‚¹åœ¨åæ ‡ä¸ºï¼ˆ100,100ï¼‰çš„ä½ç½®æ˜¾ç¤º const graphData = {   nodes: [     {       id: 'fba7fc7b-83a8-4edd-b4be-21f694a5d490',       type: 'CustomNode',       x: 100,       y: 100     }   ] }`

### 3\. è‡ªå®šä¹‰ä¸šåŠ¡èŠ‚ç‚¹æ ·å¼ï¼š

è‡ªå®šä¹‰ä¸šåŠ¡èŠ‚ç‚¹æ ·å¼ï¼ˆç»¿è‰²æè¾¹ï¼‰ï¼Œéœ€è¦é‡å†™ `RectNodeModel` ç±»ä¸­çš„ `getNodeStyle()` å‡½æ•°ï¼Œé€šè¿‡å…³é”®è¯ `super` è·å–åˆ°çˆ¶ç±»ä¸­çš„èŠ‚ç‚¹æ ·å¼ï¼Œå¹¶æ”¹å˜ `stroke` çš„å€¼ä¸ºç»¿è‰²ï¼Œæœ€åå°†ä¿®æ”¹å®Œæˆçš„ `style` è¿”å›ï¼›

typescript

 ä»£ç è§£è¯»

å¤åˆ¶ä»£ç 

`class CustomNodeModel extends RectNodeModel {   getNodeStyle() {   	const style = super.getNodeStyle();   	style.stroke = 'green';   	return style; 	} }`

### 4\. è‡ªå®šä¹‰ä¸šåŠ¡èŠ‚ç‚¹å½¢çŠ¶ï¼š

è‡ªå®šä¹‰ä¸šåŠ¡èŠ‚ç‚¹å½¢çŠ¶ï¼ˆåœ†è§’çŸ©å½¢ï¼‰å’Œè‡ªå®šä¹‰ä¸šåŠ¡èŠ‚ç‚¹æ ·å¼ä¸€æ ·çš„ç®€å•ï¼Œé‡å†™RectNodeModelç±»ä¸­çš„initNodeData(data: any)å‡½æ•°å°±å¯ä»¥äº†ï¼›

typescript

 ä»£ç è§£è¯»

å¤åˆ¶ä»£ç 

`class CustomNodeModel extends RectNodeModel {   initNodeData(data: any): void {     super.initNodeData(data);     this.width = 120;     this.height = 80;     this.radius = 10;   } }`

### 5\. è‡ªå®šä¹‰ä¸šåŠ¡èŠ‚ç‚¹å¤–è§‚ï¼š

å‰é¢çš„è‡ªå®šä¹‰ä¸šåŠ¡èŠ‚ç‚¹æ ·å¼å’Œå½¢çŠ¶éƒ½æ˜¯åœ¨åŸæœ‰å†…ç½®å¯¹è±¡çš„åŸºç¡€ä¸Šè¿›è¡Œå±æ€§çš„è°ƒæ•´ï¼Œä¸ºäº†å®ä¹ æ›´é«˜çš„è‡ªå®šä¹‰çš„å¤–è§‚ï¼Œéœ€è¦ç”¨åˆ°ç±»ä¼¼ `Vue` ä¸­çš„ `h å‡½æ•°`ï¼ˆæ¸²æŸ“å‡½æ•°ï¼‰ï¼Œé€šè¿‡é‡å†™ `RectNode` ä¸­çš„ `Shape()` å¹¶å€ŸåŠ©æ¸²æŸ“å‡½æ•°å®ç°å¤–è§‚çš„è‡ªå®šä¹‰ï¼›

*   ç¬¬ä¸€æ­¥ï¼šé‡å†™ `getShape` å‡½æ•°ï¼Œè·å– `props` ä¸­å­˜å‚¨çš„å½“å‰èŠ‚ç‚¹çš„ä¿¡æ¯ï¼Œå¦‚ä½ç½®ã€å°ºå¯¸å’Œæ ·å¼ç­‰ï¼›
*   ç¬¬äºŒæ­¥ï¼šèŠ‚ç‚¹çš„å¤–è§‚è¦åŸºäº `SVG` å®ç°ï¼Œä¸‹é¢çš„æ¡ˆä¾‹è¦åœ¨ä¸šåŠ¡ç»„ä»¶å·¦ä¸Šè§’æ˜¾ç¤ºä¸€ä¸ªICONï¼ŒICONå¯ä»¥ä» `iconfont` æ‰¾ä¸€ä¸ªè‡ªå·±å–œæ¬¢çš„ï¼›

typescript

 ä»£ç è§£è¯»

å¤åˆ¶ä»£ç 

`class CustomNodeView extends RectNode {   getShape() {       // è·å–XxxNodeModelä¸­å®šä¹‰çš„å½¢çŠ¶å±æ€§       const { model } = this.props;       const { x, y, width, height, radius } = model;       // è·å–XxxNodeModelä¸­å®šä¹‰çš„æ ·å¼å±æ€§       const style = model.getNodeStyle();          return h('g', {}, [           h('rect', {               ...style,               x: x - width / 2,               y: y - height / 2,               width,               height,               rx: radius,               ry: radius,           })           h('svg', {               x: x - width / 2 + 5,               y: y - height / 2 + 5,               width: 25,               height: 25,               viewBox: "0 0 1028 1024",           }, [               h('path', {                   fill: style.stroke,                   d: "<icon-svg-data>",               })           ])       ]);   } }`

### 6\. é‡å¯é¡¹ç›®é¢„è§ˆæ•ˆæœï¼š

è‡³æ­¤è‡ªå®šä¹‰ä¸šåŠ¡èŠ‚ç‚¹åŸºæœ¬å®Œæˆï¼Œè¿™ç§æ ·å¼ä¹Ÿæ˜¯å¤§å¤šæ•°æµç¨‹ç®¡ç†ç³»ç»Ÿä¸­å¸¸è§çš„ä¸€ç§é£æ ¼ï¼Œæ¥ç€è¡¥å……ä¸€ä¸‹ `graphData` æ•°æ®ï¼Œæ¥çœ‹ä¸€ä¸‹æœ€ç»ˆçš„æ•ˆæœ~

typescript

 ä»£ç è§£è¯»

å¤åˆ¶ä»£ç 

`const graphData = {   nodes: [     {       id: 'fba7fc7b-83a8-4edd-b4be-21f694a5d490',       type: 'CustomNode',       x: 100,       y: 100     },     {       id: '681035e6-11e3-43d7-9392-1deed852c01a',       type: 'CustomNode',       x: 300,       y: 100     }   ],   edges: [     {       sourceNodeId: 'fba7fc7b-83a8-4edd-b4be-21f694a5d490',       targetNodeId: '681035e6-11e3-43d7-9392-1deed852c01a',       type: 'polyline'     }   ] }`

![è‡ªå®šä¹‰ä¸šåŠ¡èŠ‚ç‚¹æ¸²æŸ“å›¾](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6309be40bfcf43eaa629f37a4e2711a7~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

### æ€»ç»“

è¿™ä¸€èŠ‚çš„å†…å®¹å°±åˆ°æ­¤ç»“æŸäº†ï¼Œè‡ªå®šä¹‰ä¸šåŠ¡èŠ‚ç‚¹çš„æ ·å¼ã€å½¢çŠ¶å’Œå¤–è§‚éƒ½æå®šäº†å—ï¼Ÿå°¤å…¶æ˜¯å¤–è§‚çš„è‡ªå®šä¹‰éœ€è¦æ¸²æŸ“ `SVG` æ ‡ç­¾ï¼Œæ‰€ä»¥æŒæ¡ä¸€äº› `SVG` ç›¸å…³çš„æ•°æ®æˆ–æŒæ¡ä½¿ç”¨å·¥å…·çš„ç”Ÿæˆ `SVG` æ•°æ®è¿˜æ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼Œæ„Ÿè§‰æŠŠè¿™ä¸€èŠ‚çš„ä»£ç ç†Ÿæ‚‰ç†Ÿæ‚‰ï¼Œæ¥ç€è¦å¯¹ LFä¸­çš„ `Edge` è¿›è¡Œè‡ªå®šä¹‰äº†ã€‚

* * *

å¦‚æœçœ‹å®Œè§‰å¾—æœ‰æ”¶è·ï¼Œæ¬¢è¿ç‚¹èµã€è¯„è®ºã€åˆ†äº«æ”¯æŒä¸€ä¸‹ã€‚ä½ çš„æ”¯æŒå’Œè‚¯å®šï¼Œæ˜¯æˆ‘åšæŒå†™ä½œçš„åŠ¨åŠ›~